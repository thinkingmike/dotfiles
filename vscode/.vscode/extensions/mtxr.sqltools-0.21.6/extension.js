module.exports=function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=95)}([function(module,exports){module.exports=require("vscode")},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VERSION="0.21.6",exports.EXT_NAME="SQLTools",exports.DISPLAY_NAME="SQLTools",exports.AUTHOR="Matheus Teixeira <me@mteixeira.me>",exports.ENV="production",exports.AI_KEY="d739ccec-c4e8-45e0-9d14-3b43d57a1db7",exports.DOCS_ROOT_URL="https://vscode-sqltools.mteixeira.dev",exports.TREE_SEP="/-##-/",exports.LineSplitterRegex=/\r?\n/g,exports.CommentIdentifiersRegex=/^\s*(#|\/{2})/,exports.FileVariableDefinitionRegex=/^\s*@([^\s=]+)\s*=\s*(.+?)\s*$/,exports.DelimiterStartRegex=/^\s*-{2,}\s*@block.*$/},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0});const vscode_jsonrpc_1=__webpack_require__(9);exports.ErrorCodes=vscode_jsonrpc_1.ErrorCodes,exports.ResponseError=vscode_jsonrpc_1.ResponseError,exports.CancellationToken=vscode_jsonrpc_1.CancellationToken,exports.CancellationTokenSource=vscode_jsonrpc_1.CancellationTokenSource,exports.Disposable=vscode_jsonrpc_1.Disposable,exports.Event=vscode_jsonrpc_1.Event,exports.Emitter=vscode_jsonrpc_1.Emitter,exports.Trace=vscode_jsonrpc_1.Trace,exports.TraceFormat=vscode_jsonrpc_1.TraceFormat,exports.SetTraceNotification=vscode_jsonrpc_1.SetTraceNotification,exports.LogTraceNotification=vscode_jsonrpc_1.LogTraceNotification,exports.RequestType=vscode_jsonrpc_1.RequestType,exports.RequestType0=vscode_jsonrpc_1.RequestType0,exports.NotificationType=vscode_jsonrpc_1.NotificationType,exports.NotificationType0=vscode_jsonrpc_1.NotificationType0,exports.MessageReader=vscode_jsonrpc_1.MessageReader,exports.MessageWriter=vscode_jsonrpc_1.MessageWriter,exports.ConnectionStrategy=vscode_jsonrpc_1.ConnectionStrategy,exports.StreamMessageReader=vscode_jsonrpc_1.StreamMessageReader,exports.StreamMessageWriter=vscode_jsonrpc_1.StreamMessageWriter,exports.IPCMessageReader=vscode_jsonrpc_1.IPCMessageReader,exports.IPCMessageWriter=vscode_jsonrpc_1.IPCMessageWriter,exports.createClientPipeTransport=vscode_jsonrpc_1.createClientPipeTransport,exports.createServerPipeTransport=vscode_jsonrpc_1.createServerPipeTransport,exports.generateRandomPipeName=vscode_jsonrpc_1.generateRandomPipeName,exports.createClientSocketTransport=vscode_jsonrpc_1.createClientSocketTransport,exports.createServerSocketTransport=vscode_jsonrpc_1.createServerSocketTransport,__export(__webpack_require__(103)),__export(__webpack_require__(104)),exports.createProtocolConnection=function(reader,writer,logger,strategy){return vscode_jsonrpc_1.createMessageConnection(reader,writer,logger,strategy)}},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result};Object.defineProperty(exports,"__esModule",{value:!0});const path_1=__importDefault(__webpack_require__(5)),query=__importStar(__webpack_require__(31));exports.query=query;const command_exists_1=__importDefault(__webpack_require__(159));exports.commandExists=command_exists_1.default;const interface_1=__webpack_require__(25);__export(__webpack_require__(70)),__export(__webpack_require__(166)),__export(__webpack_require__(167)),__export(__webpack_require__(244)),__export(__webpack_require__(245)),exports.sortText=function(a,b){return a.toString().localeCompare(b.toString())},exports.asArray=function(obj){return Array.isArray(obj)?obj:Object.keys(obj).map(k=>obj[k])},exports.getConnectionDescription=function(c){return c?c.dialect===interface_1.DatabaseDialect.SQLite?c.database.replace(/\$\{workspaceFolder:(.+)}/g,"$1").replace(/\$\{workspaceFolder}/g,"."):c.connectString?c.connectString.replace(/(.+):.+@/gi,"$1@"):[c.username,c.username?"@":"",!c.socketPath&&c.server,!c.socketPath&&c.server&&c.port?":":"",c.socketPath&&`socket:${path_1.default.basename(c.socketPath)}`,c.port,"/",c.database].filter(Boolean).join(""):null},exports.isEmpty=function(v){return!v||0===v.length},exports.numericVersion=function(v){const n=v.replace(/^v/,"").split(".").map(a=>parseInt(a.replace(/\D+/,""),10));return n.length>=3?1e4*n[0]+100*n[1]+n[2]:2===n.length?1e4*n[0]+100*n[1]:1e4*n[0]}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var patchRequire_1=__webpack_require__(71),patchRequire_2=__webpack_require__(71);exports.makePatchingRequire=patchRequire_2.makePatchingRequire;var trueFilter=function(publishing){return!0},ContextPreservingEventEmitter=function(){function ContextPreservingEventEmitter(){this.version=__webpack_require__(172).version,this.subscribers={},this.contextPreservationFunction=function(cb){return cb},this.knownPatches={},this.currentlyPublishing=!1}return ContextPreservingEventEmitter.prototype.shouldPublish=function(name){var listeners=this.subscribers[name];return!!listeners&&listeners.some((function(_a){var filter=_a.filter;return!filter||filter(!1)}))},ContextPreservingEventEmitter.prototype.publish=function(name,event){if(!this.currentlyPublishing){var listeners=this.subscribers[name];if(listeners){var standardEvent_1={timestamp:Date.now(),data:event};this.currentlyPublishing=!0,listeners.forEach((function(_a){var listener=_a.listener,filter=_a.filter;try{filter&&filter(!0)&&listener(standardEvent_1)}catch(e){}})),this.currentlyPublishing=!1}}},ContextPreservingEventEmitter.prototype.subscribe=function(name,listener,filter){void 0===filter&&(filter=trueFilter),this.subscribers[name]||(this.subscribers[name]=[]),this.subscribers[name].push({listener:listener,filter:filter})},ContextPreservingEventEmitter.prototype.unsubscribe=function(name,listener,filter){void 0===filter&&(filter=trueFilter);var listeners=this.subscribers[name];if(listeners)for(var index=0;index<listeners.length;++index)if(listeners[index].listener===listener&&listeners[index].filter===filter)return listeners.splice(index,1),!0;return!1},ContextPreservingEventEmitter.prototype.reset=function(){var _this=this;this.subscribers={},this.contextPreservationFunction=function(cb){return cb},Object.getOwnPropertyNames(this.knownPatches).forEach((function(prop){return delete _this.knownPatches[prop]}))},ContextPreservingEventEmitter.prototype.bindToContext=function(cb){return this.contextPreservationFunction(cb)},ContextPreservingEventEmitter.prototype.addContextPreservation=function(preserver){var previousPreservationStack=this.contextPreservationFunction;this.contextPreservationFunction=function(cb){return preserver(previousPreservationStack(cb))}},ContextPreservingEventEmitter.prototype.registerMonkeyPatch=function(packageName,patcher){this.knownPatches[packageName]||(this.knownPatches[packageName]=[]),this.knownPatches[packageName].push(patcher)},ContextPreservingEventEmitter.prototype.getPatchesObject=function(){return this.knownPatches},ContextPreservingEventEmitter}();global.diagnosticsSource||(global.diagnosticsSource=new ContextPreservingEventEmitter,__webpack_require__(72).prototype.require=patchRequire_1.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));exports.channel=global.diagnosticsSource},function(module,exports){module.exports=require("path")},function(module,exports,__webpack_require__){"use strict";var Logging=function(){function Logging(){}return Logging.info=function(message){for(var optionalParams=[],_i=1;_i<arguments.length;_i++)optionalParams[_i-1]=arguments[_i];Logging.enableDebug&&console.info(Logging.TAG+message,optionalParams)},Logging.warn=function(message){for(var optionalParams=[],_i=1;_i<arguments.length;_i++)optionalParams[_i-1]=arguments[_i];Logging.disableWarnings||console.warn(Logging.TAG+message,optionalParams)},Logging.enableDebug=!1,Logging.disableWarnings=!1,Logging.TAG="ApplicationInsights:",Logging}();module.exports=Logging},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(202)),__export(__webpack_require__(78)),__export(__webpack_require__(217))},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const exception_1=__webpack_require__(42),package_json_1=__importDefault(__webpack_require__(122)),{contributes:{configuration:{properties:defaults}}}=package_json_1.default;let settings={};const onUpdateHooks=[];function get(configKey,defaultValue=null){const keys=configKey.split(".");let setting=settings;for(const key of keys){if(!setting.hasOwnProperty(key)||void 0===setting[key])return defaultValue;setting=setting[key]}return setting}function update(newSettings){(settings=newSettings).inspect||(settings.inspect=prop=>{const key=`sqltools.${prop}`;return{defaultValue:key in defaults?defaults[key].default:void 0}}),onUpdateHooks.forEach(cb=>cb())}function addOnUpdateHook(handler){onUpdateHooks.push(handler)}const handler={get(_,prop){if("update"===prop)return update;if("get"===prop)return get;if("addOnUpdateHook"===prop)return addOnUpdateHook;if(prop in settings&&void 0!==settings[prop])return settings[prop];if(settings.inspect){return(settings.inspect(prop)||{defaultValue:void 0}).defaultValue}},set(){throw new exception_1.InvalidActionException("Cannot set settings value directly!")}},ConfigManager=new Proxy(settings,handler);exports.default=ConfigManager},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0});const Is=__webpack_require__(24),messages_1=__webpack_require__(98);exports.RequestType=messages_1.RequestType,exports.RequestType0=messages_1.RequestType0,exports.RequestType1=messages_1.RequestType1,exports.RequestType2=messages_1.RequestType2,exports.RequestType3=messages_1.RequestType3,exports.RequestType4=messages_1.RequestType4,exports.RequestType5=messages_1.RequestType5,exports.RequestType6=messages_1.RequestType6,exports.RequestType7=messages_1.RequestType7,exports.RequestType8=messages_1.RequestType8,exports.RequestType9=messages_1.RequestType9,exports.ResponseError=messages_1.ResponseError,exports.ErrorCodes=messages_1.ErrorCodes,exports.NotificationType=messages_1.NotificationType,exports.NotificationType0=messages_1.NotificationType0,exports.NotificationType1=messages_1.NotificationType1,exports.NotificationType2=messages_1.NotificationType2,exports.NotificationType3=messages_1.NotificationType3,exports.NotificationType4=messages_1.NotificationType4,exports.NotificationType5=messages_1.NotificationType5,exports.NotificationType6=messages_1.NotificationType6,exports.NotificationType7=messages_1.NotificationType7,exports.NotificationType8=messages_1.NotificationType8,exports.NotificationType9=messages_1.NotificationType9;const messageReader_1=__webpack_require__(44);exports.MessageReader=messageReader_1.MessageReader,exports.StreamMessageReader=messageReader_1.StreamMessageReader,exports.IPCMessageReader=messageReader_1.IPCMessageReader,exports.SocketMessageReader=messageReader_1.SocketMessageReader;const messageWriter_1=__webpack_require__(45);exports.MessageWriter=messageWriter_1.MessageWriter,exports.StreamMessageWriter=messageWriter_1.StreamMessageWriter,exports.IPCMessageWriter=messageWriter_1.IPCMessageWriter,exports.SocketMessageWriter=messageWriter_1.SocketMessageWriter;const events_1=__webpack_require__(30);exports.Disposable=events_1.Disposable,exports.Event=events_1.Event,exports.Emitter=events_1.Emitter;const cancellation_1=__webpack_require__(99);exports.CancellationTokenSource=cancellation_1.CancellationTokenSource,exports.CancellationToken=cancellation_1.CancellationToken;const linkedMap_1=__webpack_require__(100);var CancelNotification,Trace,TraceFormat,SetTraceNotification,LogTraceNotification,ConnectionErrors,ConnectionState;__export(__webpack_require__(101)),__export(__webpack_require__(102)),function(CancelNotification){CancelNotification.type=new messages_1.NotificationType("$/cancelRequest")}(CancelNotification||(CancelNotification={})),exports.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(Trace){Trace[Trace.Off=0]="Off",Trace[Trace.Messages=1]="Messages",Trace[Trace.Verbose=2]="Verbose"}(Trace=exports.Trace||(exports.Trace={})),function(Trace){Trace.fromString=function(value){switch(value=value.toLowerCase()){case"off":return Trace.Off;case"messages":return Trace.Messages;case"verbose":return Trace.Verbose;default:return Trace.Off}},Trace.toString=function(value){switch(value){case Trace.Off:return"off";case Trace.Messages:return"messages";case Trace.Verbose:return"verbose";default:return"off"}}}(Trace=exports.Trace||(exports.Trace={})),function(TraceFormat){TraceFormat.Text="text",TraceFormat.JSON="json"}(TraceFormat=exports.TraceFormat||(exports.TraceFormat={})),function(TraceFormat){TraceFormat.fromString=function(value){return"json"===(value=value.toLowerCase())?TraceFormat.JSON:TraceFormat.Text}}(TraceFormat=exports.TraceFormat||(exports.TraceFormat={})),function(SetTraceNotification){SetTraceNotification.type=new messages_1.NotificationType("$/setTraceNotification")}(SetTraceNotification=exports.SetTraceNotification||(exports.SetTraceNotification={})),function(LogTraceNotification){LogTraceNotification.type=new messages_1.NotificationType("$/logTraceNotification")}(LogTraceNotification=exports.LogTraceNotification||(exports.LogTraceNotification={})),function(ConnectionErrors){ConnectionErrors[ConnectionErrors.Closed=1]="Closed",ConnectionErrors[ConnectionErrors.Disposed=2]="Disposed",ConnectionErrors[ConnectionErrors.AlreadyListening=3]="AlreadyListening"}(ConnectionErrors=exports.ConnectionErrors||(exports.ConnectionErrors={}));class ConnectionError extends Error{constructor(code,message){super(message),this.code=code,Object.setPrototypeOf(this,ConnectionError.prototype)}}function _createMessageConnection(messageReader,messageWriter,logger,strategy){let sequenceNumber=0,notificationSquenceNumber=0,unknownResponseSquenceNumber=0;const version="2.0";let timer,tracer,starRequestHandler=void 0,requestHandlers=Object.create(null),starNotificationHandler=void 0,notificationHandlers=Object.create(null),messageQueue=new linkedMap_1.LinkedMap,responsePromises=Object.create(null),requestTokens=Object.create(null),trace=Trace.Off,traceFormat=TraceFormat.Text,state=ConnectionState.New,errorEmitter=new events_1.Emitter,closeEmitter=new events_1.Emitter,unhandledNotificationEmitter=new events_1.Emitter,disposeEmitter=new events_1.Emitter;function createRequestQueueKey(id){return"req-"+id.toString()}function addMessageToQueue(queue,message){var id;messages_1.isRequestMessage(message)?queue.set(createRequestQueueKey(message.id),message):messages_1.isResponseMessage(message)?queue.set(null===(id=message.id)?"res-unknown-"+(++unknownResponseSquenceNumber).toString():"res-"+id.toString(),message):queue.set("not-"+(++notificationSquenceNumber).toString(),message)}function cancelUndispatched(_message){}function isListening(){return state===ConnectionState.Listening}function isClosed(){return state===ConnectionState.Closed}function isDisposed(){return state===ConnectionState.Disposed}function closeHandler(){state!==ConnectionState.New&&state!==ConnectionState.Listening||(state=ConnectionState.Closed,closeEmitter.fire(void 0))}function triggerMessageQueue(){timer||0===messageQueue.size||(timer=setImmediate(()=>{timer=void 0,function(){if(0===messageQueue.size)return;let message=messageQueue.shift();try{messages_1.isRequestMessage(message)?function(requestMessage){if(isDisposed())return;function reply(resultOrError,method,startTime){let message={jsonrpc:version,id:requestMessage.id};resultOrError instanceof messages_1.ResponseError?message.error=resultOrError.toJson():message.result=void 0===resultOrError?null:resultOrError,traceSendingResponse(message,method,startTime),messageWriter.write(message)}function replyError(error,method,startTime){let message={jsonrpc:version,id:requestMessage.id,error:error.toJson()};traceSendingResponse(message,method,startTime),messageWriter.write(message)}!function(message){if(trace===Trace.Off||!tracer)return;if(traceFormat===TraceFormat.Text){let data=void 0;trace===Trace.Verbose&&message.params&&(data=`Params: ${JSON.stringify(message.params,null,4)}\n\n`),tracer.log(`Received request '${message.method} - (${message.id})'.`,data)}else logLSPMessage("receive-request",message)}(requestMessage);let type,requestHandler,element=requestHandlers[requestMessage.method];element&&(type=element.type,requestHandler=element.handler);let startTime=Date.now();if(requestHandler||starRequestHandler){let cancellationSource=new cancellation_1.CancellationTokenSource,tokenKey=String(requestMessage.id);requestTokens[tokenKey]=cancellationSource;try{let handlerResult,promise=handlerResult=void 0===requestMessage.params||void 0!==type&&0===type.numberOfParams?requestHandler?requestHandler(cancellationSource.token):starRequestHandler(requestMessage.method,cancellationSource.token):Is.array(requestMessage.params)&&(void 0===type||type.numberOfParams>1)?requestHandler?requestHandler(...requestMessage.params,cancellationSource.token):starRequestHandler(requestMessage.method,...requestMessage.params,cancellationSource.token):requestHandler?requestHandler(requestMessage.params,cancellationSource.token):starRequestHandler(requestMessage.method,requestMessage.params,cancellationSource.token);handlerResult?promise.then?promise.then(resultOrError=>{delete requestTokens[tokenKey],reply(resultOrError,requestMessage.method,startTime)},error=>{delete requestTokens[tokenKey],error instanceof messages_1.ResponseError?replyError(error,requestMessage.method,startTime):error&&Is.string(error.message)?replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError,`Request ${requestMessage.method} failed with message: ${error.message}`),requestMessage.method,startTime):replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError,`Request ${requestMessage.method} failed unexpectedly without providing any details.`),requestMessage.method,startTime)}):(delete requestTokens[tokenKey],reply(handlerResult,requestMessage.method,startTime)):(delete requestTokens[tokenKey],function(result,method,startTime){void 0===result&&(result=null);let message={jsonrpc:version,id:requestMessage.id,result:result};traceSendingResponse(message,method,startTime),messageWriter.write(message)}(handlerResult,requestMessage.method,startTime))}catch(error){delete requestTokens[tokenKey],error instanceof messages_1.ResponseError?reply(error,requestMessage.method,startTime):error&&Is.string(error.message)?replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError,`Request ${requestMessage.method} failed with message: ${error.message}`),requestMessage.method,startTime):replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError,`Request ${requestMessage.method} failed unexpectedly without providing any details.`),requestMessage.method,startTime)}}else replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound,`Unhandled method ${requestMessage.method}`),requestMessage.method,startTime)}(message):messages_1.isNotificationMessage(message)?function(message){if(isDisposed())return;let notificationHandler,type=void 0;if(message.method===CancelNotification.type.method)notificationHandler=params=>{let id=params.id,source=requestTokens[String(id)];source&&source.cancel()};else{let element=notificationHandlers[message.method];element&&(notificationHandler=element.handler,type=element.type)}if(notificationHandler||starNotificationHandler)try{!function(message){if(trace===Trace.Off||!tracer||message.method===LogTraceNotification.type.method)return;if(traceFormat===TraceFormat.Text){let data=void 0;trace===Trace.Verbose&&(data=message.params?`Params: ${JSON.stringify(message.params,null,4)}\n\n`:"No parameters provided.\n\n"),tracer.log(`Received notification '${message.method}'.`,data)}else logLSPMessage("receive-notification",message)}(message),void 0===message.params||void 0!==type&&0===type.numberOfParams?notificationHandler?notificationHandler():starNotificationHandler(message.method):Is.array(message.params)&&(void 0===type||type.numberOfParams>1)?notificationHandler?notificationHandler(...message.params):starNotificationHandler(message.method,...message.params):notificationHandler?notificationHandler(message.params):starNotificationHandler(message.method,message.params)}catch(error){error.message?logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`):logger.error(`Notification handler '${message.method}' failed unexpectedly.`)}else unhandledNotificationEmitter.fire(message)}(message):messages_1.isResponseMessage(message)?function(responseMessage){if(isDisposed())return;if(null===responseMessage.id)responseMessage.error?logger.error(`Received response message without id: Error is: \n${JSON.stringify(responseMessage.error,void 0,4)}`):logger.error("Received response message without id. No further error information provided.");else{let key=String(responseMessage.id),responsePromise=responsePromises[key];if(function(message,responsePromise){if(trace===Trace.Off||!tracer)return;if(traceFormat===TraceFormat.Text){let data=void 0;if(trace===Trace.Verbose&&(message.error&&message.error.data?data=`Error data: ${JSON.stringify(message.error.data,null,4)}\n\n`:message.result?data=`Result: ${JSON.stringify(message.result,null,4)}\n\n`:void 0===message.error&&(data="No result returned.\n\n")),responsePromise){let error=message.error?` Request failed: ${message.error.message} (${message.error.code}).`:"";tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now()-responsePromise.timerStart}ms.${error}`,data)}else tracer.log(`Received response ${message.id} without active response promise.`,data)}else logLSPMessage("receive-response",message)}(responseMessage,responsePromise),responsePromise){delete responsePromises[key];try{if(responseMessage.error){let error=responseMessage.error;responsePromise.reject(new messages_1.ResponseError(error.code,error.message,error.data))}else{if(void 0===responseMessage.result)throw new Error("Should never happen.");responsePromise.resolve(responseMessage.result)}}catch(error){error.message?logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`):logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`)}}}}(message):function(message){if(!message)return void logger.error("Received empty message.");logger.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(message,null,4)}`);let responseMessage=message;if(Is.string(responseMessage.id)||Is.number(responseMessage.id)){let key=String(responseMessage.id),responseHandler=responsePromises[key];responseHandler&&responseHandler.reject(new Error("The received response has neither a result nor an error property."))}}(message)}finally{triggerMessageQueue()}}()}))}messageReader.onClose(closeHandler),messageReader.onError((function(error){errorEmitter.fire([error,void 0,void 0])})),messageWriter.onClose(closeHandler),messageWriter.onError((function(data){errorEmitter.fire(data)}));let callback=message=>{try{if(messages_1.isNotificationMessage(message)&&message.method===CancelNotification.type.method){let key=createRequestQueueKey(message.params.id),toCancel=messageQueue.get(key);if(messages_1.isRequestMessage(toCancel)){let response=strategy&&strategy.cancelUndispatched?strategy.cancelUndispatched(toCancel,cancelUndispatched):void 0;if(response&&(void 0!==response.error||void 0!==response.result))return messageQueue.delete(key),response.id=toCancel.id,traceSendingResponse(response,message.method,Date.now()),void messageWriter.write(response)}}addMessageToQueue(messageQueue,message)}finally{triggerMessageQueue()}};function traceSendingResponse(message,method,startTime){if(trace!==Trace.Off&&tracer)if(traceFormat===TraceFormat.Text){let data=void 0;trace===Trace.Verbose&&(message.error&&message.error.data?data=`Error data: ${JSON.stringify(message.error.data,null,4)}\n\n`:message.result?data=`Result: ${JSON.stringify(message.result,null,4)}\n\n`:void 0===message.error&&(data="No result returned.\n\n")),tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now()-startTime}ms`,data)}else logLSPMessage("send-response",message)}function logLSPMessage(type,message){if(!tracer||trace===Trace.Off)return;const lspMessage={isLSPMessage:!0,type:type,message:message,timestamp:Date.now()};tracer.log(lspMessage)}function throwIfClosedOrDisposed(){if(isClosed())throw new ConnectionError(ConnectionErrors.Closed,"Connection is closed.");if(isDisposed())throw new ConnectionError(ConnectionErrors.Disposed,"Connection is disposed.")}function undefinedToNull(param){return void 0===param?null:param}function computeMessageParams(type,params){let result,numberOfParams=type.numberOfParams;switch(numberOfParams){case 0:result=null;break;case 1:result=undefinedToNull(params[0]);break;default:result=[];for(let i=0;i<params.length&&i<numberOfParams;i++)result.push(undefinedToNull(params[i]));if(params.length<numberOfParams)for(let i=params.length;i<numberOfParams;i++)result.push(null)}return result}let connection={sendNotification:(type,...params)=>{let method,messageParams;if(throwIfClosedOrDisposed(),Is.string(type))switch(method=type,params.length){case 0:messageParams=null;break;case 1:messageParams=params[0];break;default:messageParams=params}else method=type.method,messageParams=computeMessageParams(type,params);let notificationMessage={jsonrpc:version,method:method,params:messageParams};!function(message){if(trace!==Trace.Off&&tracer)if(traceFormat===TraceFormat.Text){let data=void 0;trace===Trace.Verbose&&(data=message.params?`Params: ${JSON.stringify(message.params,null,4)}\n\n`:"No parameters provided.\n\n"),tracer.log(`Sending notification '${message.method}'.`,data)}else logLSPMessage("send-notification",message)}(notificationMessage),messageWriter.write(notificationMessage)},onNotification:(type,handler)=>{throwIfClosedOrDisposed(),Is.func(type)?starNotificationHandler=type:handler&&(Is.string(type)?notificationHandlers[type]={type:void 0,handler:handler}:notificationHandlers[type.method]={type:type,handler:handler})},sendRequest:(type,...params)=>{let method,messageParams;throwIfClosedOrDisposed(),function(){if(!isListening())throw new Error("Call listen() first.")}();let token=void 0;if(Is.string(type))switch(method=type,params.length){case 0:messageParams=null;break;case 1:cancellation_1.CancellationToken.is(params[0])?(messageParams=null,token=params[0]):messageParams=undefinedToNull(params[0]);break;default:const last=params.length-1;cancellation_1.CancellationToken.is(params[last])?(token=params[last],messageParams=2===params.length?undefinedToNull(params[0]):params.slice(0,last).map(value=>undefinedToNull(value))):messageParams=params.map(value=>undefinedToNull(value))}else{method=type.method,messageParams=computeMessageParams(type,params);let numberOfParams=type.numberOfParams;token=cancellation_1.CancellationToken.is(params[numberOfParams])?params[numberOfParams]:void 0}let id=sequenceNumber++,result=new Promise((resolve,reject)=>{let requestMessage={jsonrpc:version,id:id,method:method,params:messageParams},responsePromise={method:method,timerStart:Date.now(),resolve:resolve,reject:reject};!function(message){if(trace!==Trace.Off&&tracer)if(traceFormat===TraceFormat.Text){let data=void 0;trace===Trace.Verbose&&message.params&&(data=`Params: ${JSON.stringify(message.params,null,4)}\n\n`),tracer.log(`Sending request '${message.method} - (${message.id})'.`,data)}else logLSPMessage("send-request",message)}(requestMessage);try{messageWriter.write(requestMessage)}catch(e){responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),responsePromise=null}responsePromise&&(responsePromises[String(id)]=responsePromise)});return token&&token.onCancellationRequested(()=>{connection.sendNotification(CancelNotification.type,{id:id})}),result},onRequest:(type,handler)=>{throwIfClosedOrDisposed(),Is.func(type)?starRequestHandler=type:handler&&(Is.string(type)?requestHandlers[type]={type:void 0,handler:handler}:requestHandlers[type.method]={type:type,handler:handler})},trace:(_value,_tracer,sendNotificationOrTraceOptions)=>{let _sendNotification=!1,_traceFormat=TraceFormat.Text;void 0!==sendNotificationOrTraceOptions&&(Is.boolean(sendNotificationOrTraceOptions)?_sendNotification=sendNotificationOrTraceOptions:(_sendNotification=sendNotificationOrTraceOptions.sendNotification||!1,_traceFormat=sendNotificationOrTraceOptions.traceFormat||TraceFormat.Text)),traceFormat=_traceFormat,tracer=(trace=_value)===Trace.Off?void 0:_tracer,!_sendNotification||isClosed()||isDisposed()||connection.sendNotification(SetTraceNotification.type,{value:Trace.toString(_value)})},onError:errorEmitter.event,onClose:closeEmitter.event,onUnhandledNotification:unhandledNotificationEmitter.event,onDispose:disposeEmitter.event,dispose:()=>{if(isDisposed())return;state=ConnectionState.Disposed,disposeEmitter.fire(void 0);let error=new Error("Connection got disposed.");Object.keys(responsePromises).forEach(key=>{responsePromises[key].reject(error)}),responsePromises=Object.create(null),requestTokens=Object.create(null),messageQueue=new linkedMap_1.LinkedMap,Is.func(messageWriter.dispose)&&messageWriter.dispose(),Is.func(messageReader.dispose)&&messageReader.dispose()},listen:()=>{throwIfClosedOrDisposed(),function(){if(isListening())throw new ConnectionError(ConnectionErrors.AlreadyListening,"Connection is already listening")}(),state=ConnectionState.Listening,messageReader.listen(callback)},inspect:()=>{console.log("inspect")}};return connection.onNotification(LogTraceNotification.type,params=>{trace!==Trace.Off&&tracer&&tracer.log(params.message,trace===Trace.Verbose?params.verbose:void 0)}),connection}exports.ConnectionError=ConnectionError,function(ConnectionStrategy){ConnectionStrategy.is=function(value){let candidate=value;return candidate&&Is.func(candidate.cancelUndispatched)}}(exports.ConnectionStrategy||(exports.ConnectionStrategy={})),function(ConnectionState){ConnectionState[ConnectionState.New=1]="New",ConnectionState[ConnectionState.Listening=2]="Listening",ConnectionState[ConnectionState.Closed=3]="Closed",ConnectionState[ConnectionState.Disposed=4]="Disposed"}(ConnectionState||(ConnectionState={})),exports.createMessageConnection=function(input,output,logger,strategy){var value;return logger||(logger=exports.NullLogger),_createMessageConnection(void 0!==(value=input).listen&&void 0===value.read?input:new messageReader_1.StreamMessageReader(input),function(value){return void 0!==value.write&&void 0===value.end}(output)?output:new messageWriter_1.StreamMessageWriter(output),logger,strategy)}},function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},http=__webpack_require__(37),https=__webpack_require__(23),url=__webpack_require__(21),constants=__webpack_require__(222),Logging=__webpack_require__(6),RequestResponseHeaders=__webpack_require__(28),Util=function(){function Util(){}return Util.getCookie=function(name,cookie){var value="";if(name&&name.length&&"string"==typeof cookie)for(var cookieName=name+"=",cookies=cookie.split(";"),i=0;i<cookies.length;i++){cookie=cookies[i];if((cookie=Util.trim(cookie))&&0===cookie.indexOf(cookieName)){value=cookie.substring(cookieName.length,cookies[i].length);break}}return value},Util.trim=function(str){return"string"==typeof str?str.replace(/^\s+|\s+$/g,""):""},Util.int32ArrayToBase64=function(array){var toChar=function(v,i){return String.fromCharCode(v>>i&255)},x=array.map((function(v){return toChar(v,24)+toChar(v,16)+toChar(v,8)+toChar(v,0)})).join(""),s=(Buffer.from?Buffer.from(x,"binary"):new Buffer(x,"binary")).toString("base64");return s.substr(0,s.indexOf("="))},Util.random32=function(){return 4294967296*Math.random()|0},Util.randomu32=function(){return Util.random32()+2147483648},Util.w3cTraceId=function(){for(var tmp,hexValues=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],oct="",a=0;a<4;a++)oct+=hexValues[15&(tmp=Util.random32())]+hexValues[tmp>>4&15]+hexValues[tmp>>8&15]+hexValues[tmp>>12&15]+hexValues[tmp>>16&15]+hexValues[tmp>>20&15]+hexValues[tmp>>24&15]+hexValues[tmp>>28&15];var clockSequenceHi=hexValues[8+4*Math.random()|0];return oct.substr(0,8)+oct.substr(9,4)+"4"+oct.substr(13,3)+clockSequenceHi+oct.substr(16,3)+oct.substr(19,12)},Util.isValidW3CId=function(id){return 32===id.length&&"00000000000000000000000000000000"!==id},Util.isArray=function(obj){return"[object Array]"===Object.prototype.toString.call(obj)},Util.isError=function(obj){return obj instanceof Error},Util.isPrimitive=function(input){var propType=typeof input;return"string"===propType||"number"===propType||"boolean"===propType},Util.isDate=function(obj){return"[object Date]"===Object.prototype.toString.call(obj)},Util.msToTimeSpan=function(totalms){(isNaN(totalms)||totalms<0)&&(totalms=0);var sec=(totalms/1e3%60).toFixed(7).replace(/0{0,4}$/,""),min=""+Math.floor(totalms/6e4)%60,hour=""+Math.floor(totalms/36e5)%24,days=Math.floor(totalms/864e5);return sec=sec.indexOf(".")<2?"0"+sec:sec,min=min.length<2?"0"+min:min,(days>0?days+".":"")+(hour=hour.length<2?"0"+hour:hour)+":"+min+":"+sec},Util.extractError=function(err){var looseError=err;return{message:err.message,code:looseError.code||looseError.id||""}},Util.extractObject=function(origProperty){return origProperty instanceof Error?Util.extractError(origProperty):"function"==typeof origProperty.toJSON?origProperty.toJSON():origProperty},Util.validateStringMap=function(obj){if("object"==typeof obj){var map={};for(var field in obj){var property="",origProperty=obj[field],propType=typeof origProperty;if(Util.isPrimitive(origProperty))property=origProperty.toString();else if(null===origProperty||"undefined"===propType)property="";else{if("function"===propType){Logging.info("key: "+field+" was function; will not serialize");continue}var stringTarget=Util.isArray(origProperty)?origProperty:Util.extractObject(origProperty);try{property=Util.isPrimitive(stringTarget)?stringTarget:JSON.stringify(stringTarget)}catch(e){property=origProperty.constructor.name.toString()+" (Error: "+e.message+")",Logging.info("key: "+field+", could not be serialized")}}map[field]=property.substring(0,Util.MAX_PROPERTY_LENGTH)}return map}Logging.info("Invalid properties dropped from payload")},Util.canIncludeCorrelationHeader=function(client,requestUrl){var excludedDomains=client&&client.config&&client.config.correlationHeaderExcludedDomains;if(!excludedDomains||0==excludedDomains.length||!requestUrl)return!0;for(var i=0;i<excludedDomains.length;i++){if(new RegExp(excludedDomains[i].replace(/\./g,".").replace(/\*/g,".*")).test(url.parse(requestUrl).hostname))return!1}return!0},Util.getCorrelationContextTarget=function(response,key){var contextHeaders=response.headers&&response.headers[RequestResponseHeaders.requestContextHeader];if(contextHeaders)for(var keyValues=contextHeaders.split(","),i=0;i<keyValues.length;++i){var keyValue=keyValues[i].split("=");if(2==keyValue.length&&keyValue[0]==key)return keyValue[1]}},Util.makeRequest=function(config,requestUrl,requestOptions,requestCallback){requestUrl&&0===requestUrl.indexOf("//")&&(requestUrl="https:"+requestUrl);var requestUrlParsed=url.parse(requestUrl),options=__assign({},requestOptions,{host:requestUrlParsed.hostname,port:requestUrlParsed.port,path:requestUrlParsed.pathname}),proxyUrl=void 0;if("https:"===requestUrlParsed.protocol&&(proxyUrl=config.proxyHttpsUrl||void 0),"http:"===requestUrlParsed.protocol&&(proxyUrl=config.proxyHttpUrl||void 0),proxyUrl){0===proxyUrl.indexOf("//")&&(proxyUrl="http:"+proxyUrl);var proxyUrlParsed=url.parse(proxyUrl);"https:"===proxyUrlParsed.protocol?(Logging.info("Proxies that use HTTPS are not supported"),proxyUrl=void 0):options=__assign({},options,{host:proxyUrlParsed.hostname,port:proxyUrlParsed.port||"80",path:requestUrl,headers:__assign({},options.headers,{Host:requestUrlParsed.hostname})})}var isHttps="https:"===requestUrlParsed.protocol&&!proxyUrl;return isHttps&&void 0!==config.httpsAgent?options.agent=config.httpsAgent:isHttps||void 0===config.httpAgent?isHttps&&(options.agent=Util.tlsRestrictedAgent):options.agent=config.httpAgent,isHttps?https.request(options,requestCallback):http.request(options,requestCallback)},Util.safeIncludeCorrelationHeader=function(client,request,correlationHeader){var header;if("string"==typeof correlationHeader)header=correlationHeader;else if(correlationHeader instanceof Array)header=correlationHeader.join(",");else if(correlationHeader&&"function"==typeof correlationHeader.toString)try{header=correlationHeader.toString()}catch(err){Logging.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",err,correlationHeader)}header?Util.addCorrelationIdHeaderFromString(client,request,header):request.setHeader(RequestResponseHeaders.requestContextHeader,RequestResponseHeaders.requestContextSourceKey+"="+client.config.correlationId)},Util.addCorrelationIdHeaderFromString=function(client,response,correlationHeader){var components=correlationHeader.split(","),key=RequestResponseHeaders.requestContextSourceKey+"=";components.some((function(value){return value.substring(0,key.length)===key}))||response.setHeader(RequestResponseHeaders.requestContextHeader,correlationHeader+","+RequestResponseHeaders.requestContextSourceKey+"="+client.config.correlationId)},Util.MAX_PROPERTY_LENGTH=8192,Util.tlsRestrictedAgent=new https.Agent({secureOptions:constants.SSL_OP_NO_SSLv2|constants.SSL_OP_NO_SSLv3|constants.SSL_OP_NO_TLSv1|constants.SSL_OP_NO_TLSv1_1}),Util}();module.exports=Util},function(module,exports){module.exports=require("fs")},function(module,exports,__webpack_require__){"use strict";function string(value){return"string"==typeof value||value instanceof String}function func(value){return"function"==typeof value}function array(value){return Array.isArray(value)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.boolean=function(value){return!0===value||!1===value},exports.string=string,exports.number=function(value){return"number"==typeof value||value instanceof Number},exports.error=function(value){return value instanceof Error},exports.func=func,exports.array=array,exports.stringArray=function(value){return array(value)&&value.every(elem=>string(elem))},exports.typedArray=function(value,check){return Array.isArray(value)&&value.every(check)},exports.thenable=function(value){return value&&func(value.then)}},function(module,exports,__webpack_require__){"use strict";var Domain=function(){};module.exports=Domain},function(module,exports){module.exports=require("child_process")},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__rest=this&&this.__rest||function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(0),vscode_2=__webpack_require__(0),exception_1=__webpack_require__(42),utils_1=__webpack_require__(3);function getOrCreateEditor(forceCreate=!1){return __awaiter(this,void 0,void 0,(function*(){if(forceCreate||!vscode_1.window.activeTextEditor||!vscode_1.window.activeTextEditor.viewColumn){const doc=yield vscode_1.workspace.openTextDocument({language:"sql"});yield vscode_1.window.showTextDocument(doc,1,!1)}return vscode_1.window.activeTextEditor}))}exports.getOrCreateEditor=getOrCreateEditor,exports.getSelectedText=function(action="proceed",fullText=!1){return __awaiter(this,void 0,void 0,(function*(){const editor=yield getOrCreateEditor(),query=editor.document.getText(fullText?void 0:editor.selection);if(utils_1.isEmpty(query))throw vscode_1.window.showInformationMessage(`Can't ${action}. You have selected nothing.`),new exception_1.DismissedException;return query}))},exports.insertText=function(text,forceCreate=!1,insertAsText=!1){return __awaiter(this,void 0,void 0,(function*(){const editor=yield getOrCreateEditor(forceCreate);"string"==typeof text&&insertAsText?Promise.all(editor.selections.map(cursor=>editor.edit(e=>e.insert(cursor.active,text)))):yield Promise.all(editor.selections.map(cursor=>editor.insertSnippet(text instanceof vscode_1.SnippetString?text:new vscode_1.SnippetString(`\${1:${text}}$0`),cursor.active)))}))},exports.readInput=function(prompt,placeholder,value){return __awaiter(this,void 0,void 0,(function*(){const data=yield vscode_1.window.showInputBox({prompt:prompt,placeHolder:placeholder||prompt,value:value});if(utils_1.isEmpty(data))throw new exception_1.DismissedException;return data}))},exports.quickPick=function(options,prop,quickPickOptions){return __awaiter(this,void 0,void 0,(function*(){const items=options.length>0&&"object"==typeof options[0]?options:options.map(value=>({value:value,label:value.toString()}));if("function"!=typeof vscode_1.window.createQuickPick)return function(options,prop){return __awaiter(this,void 0,void 0,(function*(){const sel=yield vscode_1.window.showQuickPick(options);if(!sel||prop&&!sel[prop])throw new exception_1.DismissedException;return prop?sel[prop]:sel}))}(items,prop);const qPick=vscode_1.window.createQuickPick(),sel=yield new Promise(resolve=>{const _a=quickPickOptions||{},{placeHolderDisabled:placeHolderDisabled}=_a,qPickOptions=__rest(_a,["placeHolderDisabled"]);qPick.onDidHide(()=>qPick.dispose()),qPick.onDidChangeSelection((selection=[])=>(qPick.hide(),resolve(qPickOptions.canPickMany?selection:selection[0]))),qPick.onDidTriggerButton(btn=>{btn.cb&&btn.cb(),qPick.hide()}),Object.keys(qPickOptions).forEach(k=>{qPick[k]=qPickOptions[k]}),qPick.items=items,qPick.enabled=items.length>0,qPick.enabled||(qPick.placeholder=placeHolderDisabled||qPick.placeholder),qPick.title=`${qPick.title||"Items"} (${items.length})`,qPick.show()});if(!sel||prop&&!sel[prop])throw new exception_1.DismissedException;return prop?sel[prop]:sel}))},exports.openExternal=function(url){let uri=vscode_2.Uri.parse(url);return uri.query&&/http/.test(uri.scheme)&&(uri=uri.with({query:uri.query.replace(/\n/g,encodeURI("\n"))})),vscode_2.env&&"function"==typeof vscode_2.env.openExternal?vscode_2.env.openExternal(uri):vscode_2.env&&"function"==typeof vscode_2.env.open?vscode_2.env.open(uri):vscode_2.commands.executeCommand("vscode.open",uri)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(0),vscode_languageserver_protocol_1=__webpack_require__(2),c2p=__webpack_require__(250),p2c=__webpack_require__(251),Is=__webpack_require__(12),async_1=__webpack_require__(252),UUID=__webpack_require__(17);!function(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(2));class ConsoleLogger{error(message){console.error(message)}warn(message){console.warn(message)}info(message){console.info(message)}log(message){console.log(message)}}var ErrorAction,CloseAction,RevealOutputChannelOn,State,ClientState;!function(ErrorAction){ErrorAction[ErrorAction.Continue=1]="Continue",ErrorAction[ErrorAction.Shutdown=2]="Shutdown"}(ErrorAction=exports.ErrorAction||(exports.ErrorAction={})),function(CloseAction){CloseAction[CloseAction.DoNotRestart=1]="DoNotRestart",CloseAction[CloseAction.Restart=2]="Restart"}(CloseAction=exports.CloseAction||(exports.CloseAction={}));class DefaultErrorHandler{constructor(name){this.name=name,this.restarts=[]}error(_error,_message,count){return count&&count<=3?ErrorAction.Continue:ErrorAction.Shutdown}closed(){if(this.restarts.push(Date.now()),this.restarts.length<5)return CloseAction.Restart;return this.restarts[this.restarts.length-1]-this.restarts[0]<=18e4?(vscode_1.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`),CloseAction.DoNotRestart):(this.restarts.shift(),CloseAction.Restart)}}!function(RevealOutputChannelOn){RevealOutputChannelOn[RevealOutputChannelOn.Info=1]="Info",RevealOutputChannelOn[RevealOutputChannelOn.Warn=2]="Warn",RevealOutputChannelOn[RevealOutputChannelOn.Error=3]="Error",RevealOutputChannelOn[RevealOutputChannelOn.Never=4]="Never"}(RevealOutputChannelOn=exports.RevealOutputChannelOn||(exports.RevealOutputChannelOn={})),function(State){State[State.Stopped=1]="Stopped",State[State.Starting=3]="Starting",State[State.Running=2]="Running"}(State=exports.State||(exports.State={})),function(ClientState){ClientState[ClientState.Initial=0]="Initial",ClientState[ClientState.Starting=1]="Starting",ClientState[ClientState.StartFailed=2]="StartFailed",ClientState[ClientState.Running=3]="Running",ClientState[ClientState.Stopping=4]="Stopping",ClientState[ClientState.Stopped=5]="Stopped"}(ClientState||(ClientState={}));const SupportedSymbolKinds=[vscode_languageserver_protocol_1.SymbolKind.File,vscode_languageserver_protocol_1.SymbolKind.Module,vscode_languageserver_protocol_1.SymbolKind.Namespace,vscode_languageserver_protocol_1.SymbolKind.Package,vscode_languageserver_protocol_1.SymbolKind.Class,vscode_languageserver_protocol_1.SymbolKind.Method,vscode_languageserver_protocol_1.SymbolKind.Property,vscode_languageserver_protocol_1.SymbolKind.Field,vscode_languageserver_protocol_1.SymbolKind.Constructor,vscode_languageserver_protocol_1.SymbolKind.Enum,vscode_languageserver_protocol_1.SymbolKind.Interface,vscode_languageserver_protocol_1.SymbolKind.Function,vscode_languageserver_protocol_1.SymbolKind.Variable,vscode_languageserver_protocol_1.SymbolKind.Constant,vscode_languageserver_protocol_1.SymbolKind.String,vscode_languageserver_protocol_1.SymbolKind.Number,vscode_languageserver_protocol_1.SymbolKind.Boolean,vscode_languageserver_protocol_1.SymbolKind.Array,vscode_languageserver_protocol_1.SymbolKind.Object,vscode_languageserver_protocol_1.SymbolKind.Key,vscode_languageserver_protocol_1.SymbolKind.Null,vscode_languageserver_protocol_1.SymbolKind.EnumMember,vscode_languageserver_protocol_1.SymbolKind.Struct,vscode_languageserver_protocol_1.SymbolKind.Event,vscode_languageserver_protocol_1.SymbolKind.Operator,vscode_languageserver_protocol_1.SymbolKind.TypeParameter],SupportedCompletionItemKinds=[vscode_languageserver_protocol_1.CompletionItemKind.Text,vscode_languageserver_protocol_1.CompletionItemKind.Method,vscode_languageserver_protocol_1.CompletionItemKind.Function,vscode_languageserver_protocol_1.CompletionItemKind.Constructor,vscode_languageserver_protocol_1.CompletionItemKind.Field,vscode_languageserver_protocol_1.CompletionItemKind.Variable,vscode_languageserver_protocol_1.CompletionItemKind.Class,vscode_languageserver_protocol_1.CompletionItemKind.Interface,vscode_languageserver_protocol_1.CompletionItemKind.Module,vscode_languageserver_protocol_1.CompletionItemKind.Property,vscode_languageserver_protocol_1.CompletionItemKind.Unit,vscode_languageserver_protocol_1.CompletionItemKind.Value,vscode_languageserver_protocol_1.CompletionItemKind.Enum,vscode_languageserver_protocol_1.CompletionItemKind.Keyword,vscode_languageserver_protocol_1.CompletionItemKind.Snippet,vscode_languageserver_protocol_1.CompletionItemKind.Color,vscode_languageserver_protocol_1.CompletionItemKind.File,vscode_languageserver_protocol_1.CompletionItemKind.Reference,vscode_languageserver_protocol_1.CompletionItemKind.Folder,vscode_languageserver_protocol_1.CompletionItemKind.EnumMember,vscode_languageserver_protocol_1.CompletionItemKind.Constant,vscode_languageserver_protocol_1.CompletionItemKind.Struct,vscode_languageserver_protocol_1.CompletionItemKind.Event,vscode_languageserver_protocol_1.CompletionItemKind.Operator,vscode_languageserver_protocol_1.CompletionItemKind.TypeParameter];function ensure(target,key){return void 0===target[key]&&(target[key]={}),target[key]}var DynamicFeature;!function(DynamicFeature){DynamicFeature.is=function(value){let candidate=value;return candidate&&Is.func(candidate.register)&&Is.func(candidate.unregister)&&Is.func(candidate.dispose)&&void 0!==candidate.messages}}(DynamicFeature||(DynamicFeature={}));class DocumentNotifiactions{constructor(_client,_event,_type,_middleware,_createParams,_selectorFilter){this._client=_client,this._event=_event,this._type=_type,this._middleware=_middleware,this._createParams=_createParams,this._selectorFilter=_selectorFilter,this._selectors=new Map}static textDocumentFilter(selectors,textDocument){for(const selector of selectors)if(vscode_1.languages.match(selector,textDocument))return!0;return!1}register(_message,data){data.registerOptions.documentSelector&&(this._listener||(this._listener=this._event(this.callback,this)),this._selectors.set(data.id,data.registerOptions.documentSelector))}callback(data){this._selectorFilter&&!this._selectorFilter(this._selectors.values(),data)||(this._middleware?this._middleware(data,data=>this._client.sendNotification(this._type,this._createParams(data))):this._client.sendNotification(this._type,this._createParams(data)),this.notificationSent(data))}notificationSent(_data){}unregister(id){this._selectors.delete(id),0===this._selectors.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}}class DidOpenTextDocumentFeature extends DocumentNotifiactions{constructor(client,_syncedDocuments){super(client,vscode_1.workspace.onDidOpenTextDocument,vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type,client.clientOptions.middleware.didOpen,textDocument=>client.code2ProtocolConverter.asOpenTextDocumentParams(textDocument),DocumentNotifiactions.textDocumentFilter),this._syncedDocuments=_syncedDocuments}get messages(){return vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type}fillClientCapabilities(capabilities){ensure(ensure(capabilities,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(capabilities,documentSelector){let textDocumentSyncOptions=capabilities.resolvedTextDocumentSync;documentSelector&&textDocumentSyncOptions&&textDocumentSyncOptions.openClose&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:{documentSelector:documentSelector}})}register(message,data){if(super.register(message,data),!data.registerOptions.documentSelector)return;let documentSelector=data.registerOptions.documentSelector;vscode_1.workspace.textDocuments.forEach(textDocument=>{let uri=textDocument.uri.toString();if(!this._syncedDocuments.has(uri)&&vscode_1.languages.match(documentSelector,textDocument)){let middleware=this._client.clientOptions.middleware,didOpen=textDocument=>{this._client.sendNotification(this._type,this._createParams(textDocument))};middleware.didOpen?middleware.didOpen(textDocument,didOpen):didOpen(textDocument),this._syncedDocuments.set(uri,textDocument)}})}notificationSent(textDocument){super.notificationSent(textDocument),this._syncedDocuments.set(textDocument.uri.toString(),textDocument)}}class DidCloseTextDocumentFeature extends DocumentNotifiactions{constructor(client,_syncedDocuments){super(client,vscode_1.workspace.onDidCloseTextDocument,vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type,client.clientOptions.middleware.didClose,textDocument=>client.code2ProtocolConverter.asCloseTextDocumentParams(textDocument),DocumentNotifiactions.textDocumentFilter),this._syncedDocuments=_syncedDocuments}get messages(){return vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type}fillClientCapabilities(capabilities){ensure(ensure(capabilities,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(capabilities,documentSelector){let textDocumentSyncOptions=capabilities.resolvedTextDocumentSync;documentSelector&&textDocumentSyncOptions&&textDocumentSyncOptions.openClose&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:{documentSelector:documentSelector}})}notificationSent(textDocument){super.notificationSent(textDocument),this._syncedDocuments.delete(textDocument.uri.toString())}unregister(id){let selector=this._selectors.get(id);super.unregister(id);let selectors=this._selectors.values();this._syncedDocuments.forEach(textDocument=>{if(vscode_1.languages.match(selector,textDocument)&&!this._selectorFilter(selectors,textDocument)){let middleware=this._client.clientOptions.middleware,didClose=textDocument=>{this._client.sendNotification(this._type,this._createParams(textDocument))};this._syncedDocuments.delete(textDocument.uri.toString()),middleware.didClose?middleware.didClose(textDocument,didClose):didClose(textDocument)}})}}class DidChangeTextDocumentFeature{constructor(_client){this._client=_client,this._changeData=new Map,this._forcingDelivery=!1}get messages(){return vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type}fillClientCapabilities(capabilities){ensure(ensure(capabilities,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(capabilities,documentSelector){let textDocumentSyncOptions=capabilities.resolvedTextDocumentSync;documentSelector&&textDocumentSyncOptions&&void 0!==textDocumentSyncOptions.change&&textDocumentSyncOptions.change!==vscode_languageserver_protocol_1.TextDocumentSyncKind.None&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:Object.assign({},{documentSelector:documentSelector},{syncKind:textDocumentSyncOptions.change})})}register(_message,data){data.registerOptions.documentSelector&&(this._listener||(this._listener=vscode_1.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(data.id,{documentSelector:data.registerOptions.documentSelector,syncKind:data.registerOptions.syncKind}))}callback(event){if(0!==event.contentChanges.length)for(const changeData of this._changeData.values())if(vscode_1.languages.match(changeData.documentSelector,event.document)){let middleware=this._client.clientOptions.middleware;if(changeData.syncKind===vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental){let params=this._client.code2ProtocolConverter.asChangeTextDocumentParams(event);middleware.didChange?middleware.didChange(event,()=>this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type,params)):this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type,params)}else if(changeData.syncKind===vscode_languageserver_protocol_1.TextDocumentSyncKind.Full){let didChange=event=>{this._changeDelayer?(this._changeDelayer.uri!==event.document.uri.toString()&&(this.forceDelivery(),this._changeDelayer.uri=event.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document))})):(this._changeDelayer={uri:event.document.uri.toString(),delayer:new async_1.Delayer(200)},this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document))},-1))};middleware.didChange?middleware.didChange(event,didChange):didChange(event)}}}unregister(id){this._changeData.delete(id),0===this._changeData.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}forceDelivery(){if(!this._forcingDelivery&&this._changeDelayer)try{this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}}class WillSaveFeature extends DocumentNotifiactions{constructor(client){super(client,vscode_1.workspace.onWillSaveTextDocument,vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type,client.clientOptions.middleware.willSave,willSaveEvent=>client.code2ProtocolConverter.asWillSaveTextDocumentParams(willSaveEvent),(selectors,willSaveEvent)=>DocumentNotifiactions.textDocumentFilter(selectors,willSaveEvent.document))}get messages(){return vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type}fillClientCapabilities(capabilities){ensure(ensure(capabilities,"textDocument"),"synchronization").willSave=!0}initialize(capabilities,documentSelector){let textDocumentSyncOptions=capabilities.resolvedTextDocumentSync;documentSelector&&textDocumentSyncOptions&&textDocumentSyncOptions.willSave&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:{documentSelector:documentSelector}})}}class WillSaveWaitUntilFeature{constructor(_client){this._client=_client,this._selectors=new Map}get messages(){return vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(capabilities){ensure(ensure(capabilities,"textDocument"),"synchronization").willSaveWaitUntil=!0}initialize(capabilities,documentSelector){let textDocumentSyncOptions=capabilities.resolvedTextDocumentSync;documentSelector&&textDocumentSyncOptions&&textDocumentSyncOptions.willSaveWaitUntil&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:{documentSelector:documentSelector}})}register(_message,data){data.registerOptions.documentSelector&&(this._listener||(this._listener=vscode_1.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(data.id,data.registerOptions.documentSelector))}callback(event){if(DocumentNotifiactions.textDocumentFilter(this._selectors.values(),event.document)){let middleware=this._client.clientOptions.middleware,willSaveWaitUntil=event=>this._client.sendRequest(vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(event)).then(edits=>{let vEdits=this._client.protocol2CodeConverter.asTextEdits(edits);return void 0===vEdits?[]:vEdits});event.waitUntil(middleware.willSaveWaitUntil?middleware.willSaveWaitUntil(event,willSaveWaitUntil):willSaveWaitUntil(event))}}unregister(id){this._selectors.delete(id),0===this._selectors.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}}class DidSaveTextDocumentFeature extends DocumentNotifiactions{constructor(client){super(client,vscode_1.workspace.onDidSaveTextDocument,vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type,client.clientOptions.middleware.didSave,textDocument=>client.code2ProtocolConverter.asSaveTextDocumentParams(textDocument,this._includeText),DocumentNotifiactions.textDocumentFilter)}get messages(){return vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type}fillClientCapabilities(capabilities){ensure(ensure(capabilities,"textDocument"),"synchronization").didSave=!0}initialize(capabilities,documentSelector){let textDocumentSyncOptions=capabilities.resolvedTextDocumentSync;documentSelector&&textDocumentSyncOptions&&textDocumentSyncOptions.save&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:Object.assign({},{documentSelector:documentSelector},{includeText:!!textDocumentSyncOptions.save.includeText})})}register(method,data){this._includeText=!!data.registerOptions.includeText,super.register(method,data)}}class FileSystemWatcherFeature{constructor(_client,_notifyFileEvent){this._client=_client,this._notifyFileEvent=_notifyFileEvent,this._watchers=new Map}get messages(){return vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type}fillClientCapabilities(capabilities){ensure(ensure(capabilities,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0}initialize(_capabilities,_documentSelector){}register(_method,data){if(!Array.isArray(data.registerOptions.watchers))return;let disposeables=[];for(let watcher of data.registerOptions.watchers){if(!Is.string(watcher.globPattern))continue;let watchCreate=!0,watchChange=!0,watchDelete=!0;void 0!==watcher.kind&&null!==watcher.kind&&(watchCreate=0!=(watcher.kind&vscode_languageserver_protocol_1.WatchKind.Create),watchChange=0!=(watcher.kind&vscode_languageserver_protocol_1.WatchKind.Change),watchDelete=0!=(watcher.kind&vscode_languageserver_protocol_1.WatchKind.Delete));let fileSystemWatcher=vscode_1.workspace.createFileSystemWatcher(watcher.globPattern,!watchCreate,!watchChange,!watchDelete);this.hookListeners(fileSystemWatcher,watchCreate,watchChange,watchDelete),disposeables.push(fileSystemWatcher)}this._watchers.set(data.id,disposeables)}registerRaw(id,fileSystemWatchers){let disposeables=[];for(let fileSystemWatcher of fileSystemWatchers)this.hookListeners(fileSystemWatcher,!0,!0,!0,disposeables);this._watchers.set(id,disposeables)}hookListeners(fileSystemWatcher,watchCreate,watchChange,watchDelete,listeners){watchCreate&&fileSystemWatcher.onDidCreate(resource=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(resource),type:vscode_languageserver_protocol_1.FileChangeType.Created}),null,listeners),watchChange&&fileSystemWatcher.onDidChange(resource=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(resource),type:vscode_languageserver_protocol_1.FileChangeType.Changed}),null,listeners),watchDelete&&fileSystemWatcher.onDidDelete(resource=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(resource),type:vscode_languageserver_protocol_1.FileChangeType.Deleted}),null,listeners)}unregister(id){let disposeables=this._watchers.get(id);if(disposeables)for(let disposable of disposeables)disposable.dispose()}dispose(){this._watchers.forEach(disposeables=>{for(let disposable of disposeables)disposable.dispose()}),this._watchers.clear()}}class TextDocumentFeature{constructor(_client,_message){this._client=_client,this._message=_message,this._providers=new Map}get messages(){return this._message}register(message,data){if(message.method!==this.messages.method)throw new Error(`Register called on wrong feature. Requested ${message.method} but reached feature ${this.messages.method}`);if(!data.registerOptions.documentSelector)return;let provider=this.registerLanguageProvider(data.registerOptions);provider&&this._providers.set(data.id,provider)}unregister(id){let provider=this._providers.get(id);provider&&provider.dispose()}dispose(){this._providers.forEach(value=>{value.dispose()}),this._providers.clear()}}exports.TextDocumentFeature=TextDocumentFeature;class WorkspaceFeature{constructor(_client,_message){this._client=_client,this._message=_message,this._providers=new Map}get messages(){return this._message}register(message,data){if(message.method!==this.messages.method)throw new Error(`Register called on wron feature. Requested ${message.method} but reached feature ${this.messages.method}`);let provider=this.registerLanguageProvider(data.registerOptions);provider&&this._providers.set(data.id,provider)}unregister(id){let provider=this._providers.get(id);provider&&provider.dispose()}dispose(){this._providers.forEach(value=>{value.dispose()}),this._providers.clear()}}class CompletionItemFeature extends TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.CompletionRequest.type)}fillClientCapabilities(capabilites){let completion=ensure(ensure(capabilites,"textDocument"),"completion");completion.dynamicRegistration=!0,completion.contextSupport=!0,completion.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[vscode_languageserver_protocol_1.MarkupKind.Markdown,vscode_languageserver_protocol_1.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0},completion.completionItemKind={valueSet:SupportedCompletionItemKinds}}initialize(capabilities,documentSelector){capabilities.completionProvider&&documentSelector&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:Object.assign({},{documentSelector:documentSelector},capabilities.completionProvider)})}registerLanguageProvider(options){let triggerCharacters=options.triggerCharacters||[],client=this._client,provideCompletionItems=(document,position,context,token)=>client.sendRequest(vscode_languageserver_protocol_1.CompletionRequest.type,client.code2ProtocolConverter.asCompletionParams(document,position,context),token).then(client.protocol2CodeConverter.asCompletionResult,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.CompletionRequest.type,error),Promise.resolve([]))),resolveCompletionItem=(item,token)=>client.sendRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type,client.code2ProtocolConverter.asCompletionItem(item),token).then(client.protocol2CodeConverter.asCompletionItem,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type,error),Promise.resolve(item))),middleware=this._client.clientOptions.middleware;return vscode_1.languages.registerCompletionItemProvider(options.documentSelector,{provideCompletionItems:(document,position,token,context)=>middleware.provideCompletionItem?middleware.provideCompletionItem(document,position,context,token,provideCompletionItems):provideCompletionItems(document,position,context,token),resolveCompletionItem:options.resolveProvider?(item,token)=>middleware.resolveCompletionItem?middleware.resolveCompletionItem(item,token,resolveCompletionItem):resolveCompletionItem(item,token):void 0},...triggerCharacters)}}class HoverFeature extends TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.HoverRequest.type)}fillClientCapabilities(capabilites){const hoverCapability=ensure(ensure(capabilites,"textDocument"),"hover");hoverCapability.dynamicRegistration=!0,hoverCapability.contentFormat=[vscode_languageserver_protocol_1.MarkupKind.Markdown,vscode_languageserver_protocol_1.MarkupKind.PlainText]}initialize(capabilities,documentSelector){capabilities.hoverProvider&&documentSelector&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:Object.assign({},{documentSelector:documentSelector})})}registerLanguageProvider(options){let client=this._client,provideHover=(document,position,token)=>client.sendRequest(vscode_languageserver_protocol_1.HoverRequest.type,client.code2ProtocolConverter.asTextDocumentPositionParams(document,position),token).then(client.protocol2CodeConverter.asHover,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.HoverRequest.type,error),Promise.resolve(null))),middleware=client.clientOptions.middleware;return vscode_1.languages.registerHoverProvider(options.documentSelector,{provideHover:(document,position,token)=>middleware.provideHover?middleware.provideHover(document,position,token,provideHover):provideHover(document,position,token)})}}class SignatureHelpFeature extends TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.SignatureHelpRequest.type)}fillClientCapabilities(capabilites){let config=ensure(ensure(capabilites,"textDocument"),"signatureHelp");config.dynamicRegistration=!0,config.signatureInformation={documentationFormat:[vscode_languageserver_protocol_1.MarkupKind.Markdown,vscode_languageserver_protocol_1.MarkupKind.PlainText]},config.signatureInformation.parameterInformation={labelOffsetSupport:!0}}initialize(capabilities,documentSelector){capabilities.signatureHelpProvider&&documentSelector&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:Object.assign({},{documentSelector:documentSelector},capabilities.signatureHelpProvider)})}registerLanguageProvider(options){let client=this._client,providerSignatureHelp=(document,position,token)=>client.sendRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type,client.code2ProtocolConverter.asTextDocumentPositionParams(document,position),token).then(client.protocol2CodeConverter.asSignatureHelp,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type,error),Promise.resolve(null))),middleware=client.clientOptions.middleware,triggerCharacters=options.triggerCharacters||[];return vscode_1.languages.registerSignatureHelpProvider(options.documentSelector,{provideSignatureHelp:(document,position,token)=>middleware.provideSignatureHelp?middleware.provideSignatureHelp(document,position,token,providerSignatureHelp):providerSignatureHelp(document,position,token)},...triggerCharacters)}}class DefinitionFeature extends TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.DefinitionRequest.type)}fillClientCapabilities(capabilites){let definitionSupport=ensure(ensure(capabilites,"textDocument"),"definition");definitionSupport.dynamicRegistration=!0,definitionSupport.linkSupport=!0}initialize(capabilities,documentSelector){capabilities.definitionProvider&&documentSelector&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:Object.assign({},{documentSelector:documentSelector})})}registerLanguageProvider(options){let client=this._client,provideDefinition=(document,position,token)=>client.sendRequest(vscode_languageserver_protocol_1.DefinitionRequest.type,client.code2ProtocolConverter.asTextDocumentPositionParams(document,position),token).then(client.protocol2CodeConverter.asDefinitionResult,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.DefinitionRequest.type,error),Promise.resolve(null))),middleware=client.clientOptions.middleware;return vscode_1.languages.registerDefinitionProvider(options.documentSelector,{provideDefinition:(document,position,token)=>middleware.provideDefinition?middleware.provideDefinition(document,position,token,provideDefinition):provideDefinition(document,position,token)})}}class ReferencesFeature extends TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.ReferencesRequest.type)}fillClientCapabilities(capabilites){ensure(ensure(capabilites,"textDocument"),"references").dynamicRegistration=!0}initialize(capabilities,documentSelector){capabilities.referencesProvider&&documentSelector&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:Object.assign({},{documentSelector:documentSelector})})}registerLanguageProvider(options){let client=this._client,providerReferences=(document,position,options,token)=>client.sendRequest(vscode_languageserver_protocol_1.ReferencesRequest.type,client.code2ProtocolConverter.asReferenceParams(document,position,options),token).then(client.protocol2CodeConverter.asReferences,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.ReferencesRequest.type,error),Promise.resolve([]))),middleware=client.clientOptions.middleware;return vscode_1.languages.registerReferenceProvider(options.documentSelector,{provideReferences:(document,position,options,token)=>middleware.provideReferences?middleware.provideReferences(document,position,options,token,providerReferences):providerReferences(document,position,options,token)})}}class DocumentHighlightFeature extends TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.DocumentHighlightRequest.type)}fillClientCapabilities(capabilites){ensure(ensure(capabilites,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(capabilities,documentSelector){capabilities.documentHighlightProvider&&documentSelector&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:Object.assign({},{documentSelector:documentSelector})})}registerLanguageProvider(options){let client=this._client,provideDocumentHighlights=(document,position,token)=>client.sendRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type,client.code2ProtocolConverter.asTextDocumentPositionParams(document,position),token).then(client.protocol2CodeConverter.asDocumentHighlights,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type,error),Promise.resolve([]))),middleware=client.clientOptions.middleware;return vscode_1.languages.registerDocumentHighlightProvider(options.documentSelector,{provideDocumentHighlights:(document,position,token)=>middleware.provideDocumentHighlights?middleware.provideDocumentHighlights(document,position,token,provideDocumentHighlights):provideDocumentHighlights(document,position,token)})}}class DocumentSymbolFeature extends TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.DocumentSymbolRequest.type)}fillClientCapabilities(capabilites){let symbolCapabilities=ensure(ensure(capabilites,"textDocument"),"documentSymbol");symbolCapabilities.dynamicRegistration=!0,symbolCapabilities.symbolKind={valueSet:SupportedSymbolKinds},symbolCapabilities.hierarchicalDocumentSymbolSupport=!0}initialize(capabilities,documentSelector){capabilities.documentSymbolProvider&&documentSelector&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:Object.assign({},{documentSelector:documentSelector})})}registerLanguageProvider(options){let client=this._client,provideDocumentSymbols=(document,token)=>client.sendRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type,client.code2ProtocolConverter.asDocumentSymbolParams(document),token).then(data=>{if(null!==data){if(0===data.length)return[];{let element=data[0];return vscode_languageserver_protocol_1.DocumentSymbol.is(element)?client.protocol2CodeConverter.asDocumentSymbols(data):client.protocol2CodeConverter.asSymbolInformations(data)}}},error=>(client.logFailedRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type,error),Promise.resolve([]))),middleware=client.clientOptions.middleware;return vscode_1.languages.registerDocumentSymbolProvider(options.documentSelector,{provideDocumentSymbols:(document,token)=>middleware.provideDocumentSymbols?middleware.provideDocumentSymbols(document,token,provideDocumentSymbols):provideDocumentSymbols(document,token)})}}class WorkspaceSymbolFeature extends WorkspaceFeature{constructor(client){super(client,vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type)}fillClientCapabilities(capabilites){let symbolCapabilities=ensure(ensure(capabilites,"workspace"),"symbol");symbolCapabilities.dynamicRegistration=!0,symbolCapabilities.symbolKind={valueSet:SupportedSymbolKinds}}initialize(capabilities){capabilities.workspaceSymbolProvider&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:void 0})}registerLanguageProvider(_options){let client=this._client,provideWorkspaceSymbols=(query,token)=>client.sendRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type,{query:query},token).then(client.protocol2CodeConverter.asSymbolInformations,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type,error),Promise.resolve([]))),middleware=client.clientOptions.middleware;return vscode_1.languages.registerWorkspaceSymbolProvider({provideWorkspaceSymbols:(query,token)=>middleware.provideWorkspaceSymbols?middleware.provideWorkspaceSymbols(query,token,provideWorkspaceSymbols):provideWorkspaceSymbols(query,token)})}}class CodeActionFeature extends TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.CodeActionRequest.type)}fillClientCapabilities(capabilites){const cap=ensure(ensure(capabilites,"textDocument"),"codeAction");cap.dynamicRegistration=!0,cap.codeActionLiteralSupport={codeActionKind:{valueSet:["",vscode_languageserver_protocol_1.CodeActionKind.QuickFix,vscode_languageserver_protocol_1.CodeActionKind.Refactor,vscode_languageserver_protocol_1.CodeActionKind.RefactorExtract,vscode_languageserver_protocol_1.CodeActionKind.RefactorInline,vscode_languageserver_protocol_1.CodeActionKind.RefactorRewrite,vscode_languageserver_protocol_1.CodeActionKind.Source,vscode_languageserver_protocol_1.CodeActionKind.SourceOrganizeImports]}}}initialize(capabilities,documentSelector){if(!capabilities.codeActionProvider||!documentSelector)return;let codeActionKinds=void 0;Is.boolean(capabilities.codeActionProvider)||(codeActionKinds=capabilities.codeActionProvider.codeActionKinds),this.register(this.messages,{id:UUID.generateUuid(),registerOptions:{documentSelector:documentSelector,codeActionKinds:codeActionKinds}})}registerLanguageProvider(options){let client=this._client,provideCodeActions=(document,range,context,token)=>{let params={textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(document),range:client.code2ProtocolConverter.asRange(range),context:client.code2ProtocolConverter.asCodeActionContext(context)};return client.sendRequest(vscode_languageserver_protocol_1.CodeActionRequest.type,params,token).then(values=>{if(null===values)return;let result=[];for(let item of values)vscode_languageserver_protocol_1.Command.is(item)?result.push(client.protocol2CodeConverter.asCommand(item)):result.push(client.protocol2CodeConverter.asCodeAction(item));return result},error=>(client.logFailedRequest(vscode_languageserver_protocol_1.CodeActionRequest.type,error),Promise.resolve([])))},middleware=client.clientOptions.middleware;return vscode_1.languages.registerCodeActionsProvider(options.documentSelector,{provideCodeActions:(document,range,context,token)=>middleware.provideCodeActions?middleware.provideCodeActions(document,range,context,token,provideCodeActions):provideCodeActions(document,range,context,token)},options.codeActionKinds?{providedCodeActionKinds:client.protocol2CodeConverter.asCodeActionKinds(options.codeActionKinds)}:void 0)}}class CodeLensFeature extends TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.CodeLensRequest.type)}fillClientCapabilities(capabilites){ensure(ensure(capabilites,"textDocument"),"codeLens").dynamicRegistration=!0}initialize(capabilities,documentSelector){capabilities.codeLensProvider&&documentSelector&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:Object.assign({},{documentSelector:documentSelector},capabilities.codeLensProvider)})}registerLanguageProvider(options){let client=this._client,provideCodeLenses=(document,token)=>client.sendRequest(vscode_languageserver_protocol_1.CodeLensRequest.type,client.code2ProtocolConverter.asCodeLensParams(document),token).then(client.protocol2CodeConverter.asCodeLenses,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.CodeLensRequest.type,error),Promise.resolve([]))),resolveCodeLens=(codeLens,token)=>client.sendRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type,client.code2ProtocolConverter.asCodeLens(codeLens),token).then(client.protocol2CodeConverter.asCodeLens,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type,error),codeLens)),middleware=client.clientOptions.middleware;return vscode_1.languages.registerCodeLensProvider(options.documentSelector,{provideCodeLenses:(document,token)=>middleware.provideCodeLenses?middleware.provideCodeLenses(document,token,provideCodeLenses):provideCodeLenses(document,token),resolveCodeLens:options.resolveProvider?(codeLens,token)=>middleware.resolveCodeLens?middleware.resolveCodeLens(codeLens,token,resolveCodeLens):resolveCodeLens(codeLens,token):void 0})}}class DocumentFormattingFeature extends TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.DocumentFormattingRequest.type)}fillClientCapabilities(capabilites){ensure(ensure(capabilites,"textDocument"),"formatting").dynamicRegistration=!0}initialize(capabilities,documentSelector){capabilities.documentFormattingProvider&&documentSelector&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:Object.assign({},{documentSelector:documentSelector})})}registerLanguageProvider(options){let client=this._client,provideDocumentFormattingEdits=(document,options,token)=>{let params={textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(document),options:client.code2ProtocolConverter.asFormattingOptions(options)};return client.sendRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type,params,token).then(client.protocol2CodeConverter.asTextEdits,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type,error),Promise.resolve([])))},middleware=client.clientOptions.middleware;return vscode_1.languages.registerDocumentFormattingEditProvider(options.documentSelector,{provideDocumentFormattingEdits:(document,options,token)=>middleware.provideDocumentFormattingEdits?middleware.provideDocumentFormattingEdits(document,options,token,provideDocumentFormattingEdits):provideDocumentFormattingEdits(document,options,token)})}}class DocumentRangeFormattingFeature extends TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type)}fillClientCapabilities(capabilites){ensure(ensure(capabilites,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(capabilities,documentSelector){capabilities.documentRangeFormattingProvider&&documentSelector&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:Object.assign({},{documentSelector:documentSelector})})}registerLanguageProvider(options){let client=this._client,provideDocumentRangeFormattingEdits=(document,range,options,token)=>{let params={textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(document),range:client.code2ProtocolConverter.asRange(range),options:client.code2ProtocolConverter.asFormattingOptions(options)};return client.sendRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type,params,token).then(client.protocol2CodeConverter.asTextEdits,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type,error),Promise.resolve([])))},middleware=client.clientOptions.middleware;return vscode_1.languages.registerDocumentRangeFormattingEditProvider(options.documentSelector,{provideDocumentRangeFormattingEdits:(document,range,options,token)=>middleware.provideDocumentRangeFormattingEdits?middleware.provideDocumentRangeFormattingEdits(document,range,options,token,provideDocumentRangeFormattingEdits):provideDocumentRangeFormattingEdits(document,range,options,token)})}}class DocumentOnTypeFormattingFeature extends TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(capabilites){ensure(ensure(capabilites,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(capabilities,documentSelector){capabilities.documentOnTypeFormattingProvider&&documentSelector&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:Object.assign({},{documentSelector:documentSelector},capabilities.documentOnTypeFormattingProvider)})}registerLanguageProvider(options){let client=this._client,moreTriggerCharacter=options.moreTriggerCharacter||[],provideOnTypeFormattingEdits=(document,position,ch,options,token)=>{let params={textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(document),position:client.code2ProtocolConverter.asPosition(position),ch:ch,options:client.code2ProtocolConverter.asFormattingOptions(options)};return client.sendRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type,params,token).then(client.protocol2CodeConverter.asTextEdits,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type,error),Promise.resolve([])))},middleware=client.clientOptions.middleware;return vscode_1.languages.registerOnTypeFormattingEditProvider(options.documentSelector,{provideOnTypeFormattingEdits:(document,position,ch,options,token)=>middleware.provideOnTypeFormattingEdits?middleware.provideOnTypeFormattingEdits(document,position,ch,options,token,provideOnTypeFormattingEdits):provideOnTypeFormattingEdits(document,position,ch,options,token)},options.firstTriggerCharacter,...moreTriggerCharacter)}}class RenameFeature extends TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.RenameRequest.type)}fillClientCapabilities(capabilites){let rename=ensure(ensure(capabilites,"textDocument"),"rename");rename.dynamicRegistration=!0,rename.prepareSupport=!0}initialize(capabilities,documentSelector){if(!capabilities.renameProvider||!documentSelector)return;let options=Object.assign({},{documentSelector:documentSelector});Is.boolean(capabilities.renameProvider)?options.prepareProvider=!1:options.prepareProvider=capabilities.renameProvider.prepareProvider,this.register(this.messages,{id:UUID.generateUuid(),registerOptions:options})}registerLanguageProvider(options){let client=this._client,provideRenameEdits=(document,position,newName,token)=>{let params={textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(document),position:client.code2ProtocolConverter.asPosition(position),newName:newName};return client.sendRequest(vscode_languageserver_protocol_1.RenameRequest.type,params,token).then(client.protocol2CodeConverter.asWorkspaceEdit,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.RenameRequest.type,error),Promise.reject(new Error(error.message))))},prepareRename=(document,position,token)=>{let params={textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(document),position:client.code2ProtocolConverter.asPosition(position)};return client.sendRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type,params,token).then(result=>vscode_languageserver_protocol_1.Range.is(result)?client.protocol2CodeConverter.asRange(result):result&&result.range?{range:client.protocol2CodeConverter.asRange(result.range),placeholder:result.placeholder}:null,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type,error),Promise.reject(new Error(error.message))))},middleware=client.clientOptions.middleware;return vscode_1.languages.registerRenameProvider(options.documentSelector,{provideRenameEdits:(document,position,newName,token)=>middleware.provideRenameEdits?middleware.provideRenameEdits(document,position,newName,token,provideRenameEdits):provideRenameEdits(document,position,newName,token),prepareRename:options.prepareProvider?(document,position,token)=>middleware.prepareRename?middleware.prepareRename(document,position,token,prepareRename):prepareRename(document,position,token):void 0})}}class DocumentLinkFeature extends TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.DocumentLinkRequest.type)}fillClientCapabilities(capabilites){ensure(ensure(capabilites,"textDocument"),"documentLink").dynamicRegistration=!0}initialize(capabilities,documentSelector){capabilities.documentLinkProvider&&documentSelector&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:Object.assign({},{documentSelector:documentSelector},capabilities.documentLinkProvider)})}registerLanguageProvider(options){let client=this._client,provideDocumentLinks=(document,token)=>client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type,client.code2ProtocolConverter.asDocumentLinkParams(document),token).then(client.protocol2CodeConverter.asDocumentLinks,error=>{client.logFailedRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type,error),Promise.resolve(new Error(error.message))}),resolveDocumentLink=(link,token)=>client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type,client.code2ProtocolConverter.asDocumentLink(link),token).then(client.protocol2CodeConverter.asDocumentLink,error=>{client.logFailedRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type,error),Promise.resolve(new Error(error.message))}),middleware=client.clientOptions.middleware;return vscode_1.languages.registerDocumentLinkProvider(options.documentSelector,{provideDocumentLinks:(document,token)=>middleware.provideDocumentLinks?middleware.provideDocumentLinks(document,token,provideDocumentLinks):provideDocumentLinks(document,token),resolveDocumentLink:options.resolveProvider?(link,token)=>middleware.resolveDocumentLink?middleware.resolveDocumentLink(link,token,resolveDocumentLink):resolveDocumentLink(link,token):void 0})}}class ConfigurationFeature{constructor(_client){this._client=_client,this._listeners=new Map}get messages(){return vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type}fillClientCapabilities(capabilities){ensure(ensure(capabilities,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let section=this._client.clientOptions.synchronize.configurationSection;void 0!==section&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:{section:section}})}register(_message,data){let disposable=vscode_1.workspace.onDidChangeConfiguration(event=>{this.onDidChangeConfiguration(data.registerOptions.section,event)});this._listeners.set(data.id,disposable),void 0!==data.registerOptions.section&&this.onDidChangeConfiguration(data.registerOptions.section,void 0)}unregister(id){let disposable=this._listeners.get(id);disposable&&(this._listeners.delete(id),disposable.dispose())}dispose(){for(let disposable of this._listeners.values())disposable.dispose();this._listeners.clear()}onDidChangeConfiguration(configurationSection,event){let sections;if(void 0!==(sections=Is.string(configurationSection)?[configurationSection]:configurationSection)&&void 0!==event){if(!sections.some(section=>event.affectsConfiguration(section)))return}let didChangeConfiguration=sections=>{void 0!==sections?this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(sections)}):this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type,{settings:null})},middleware=this.getMiddleware();middleware?middleware(sections,didChangeConfiguration):didChangeConfiguration(sections)}extractSettingsInformation(keys){function ensurePath(config,path){let current=config;for(let i=0;i<path.length-1;i++){let obj=current[path[i]];obj||(obj=Object.create(null),current[path[i]]=obj),current=obj}return current}let resource=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,result=Object.create(null);for(let i=0;i<keys.length;i++){let key=keys[i],index=key.indexOf("."),config=null;if(config=index>=0?vscode_1.workspace.getConfiguration(key.substr(0,index),resource).get(key.substr(index+1)):vscode_1.workspace.getConfiguration(key,resource)){let path=keys[i].split(".");ensurePath(result,path)[path[path.length-1]]=config}}return result}getMiddleware(){let middleware=this._client.clientOptions.middleware;return middleware.workspace&&middleware.workspace.didChangeConfiguration?middleware.workspace.didChangeConfiguration:void 0}}class ExecuteCommandFeature{constructor(_client){this._client=_client,this._commands=new Map}get messages(){return vscode_languageserver_protocol_1.ExecuteCommandRequest.type}fillClientCapabilities(capabilities){ensure(ensure(capabilities,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(capabilities){capabilities.executeCommandProvider&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:Object.assign({},capabilities.executeCommandProvider)})}register(_message,data){let client=this._client;if(data.registerOptions.commands){let disposeables=[];for(const command of data.registerOptions.commands)disposeables.push(vscode_1.commands.registerCommand(command,(...args)=>{let params={command:command,arguments:args};return client.sendRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type,params).then(void 0,error=>{client.logFailedRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type,error)})}));this._commands.set(data.id,disposeables)}}unregister(id){let disposeables=this._commands.get(id);disposeables&&disposeables.forEach(disposable=>disposable.dispose())}dispose(){this._commands.forEach(value=>{value.forEach(disposable=>disposable.dispose())}),this._commands.clear()}}!function(MessageTransports){MessageTransports.is=function(value){return value&&vscode_languageserver_protocol_1.MessageReader.is(value.reader)&&vscode_languageserver_protocol_1.MessageWriter.is(value.writer)}}(exports.MessageTransports||(exports.MessageTransports={}));class OnReady{constructor(_resolve,_reject){this._resolve=_resolve,this._reject=_reject,this._used=!1}get isUsed(){return this._used}resolve(){this._used=!0,this._resolve()}reject(error){this._used=!0,this._reject(error)}}exports.BaseLanguageClient=class BaseLanguageClient{constructor(id,name,clientOptions){this._traceFormat=vscode_languageserver_protocol_1.TraceFormat.Text,this._features=[],this._method2Message=new Map,this._dynamicFeatures=new Map,this._id=id,this._name=name,clientOptions=clientOptions||{},this._clientOptions={documentSelector:clientOptions.documentSelector||[],synchronize:clientOptions.synchronize||{},diagnosticCollectionName:clientOptions.diagnosticCollectionName,outputChannelName:clientOptions.outputChannelName||this._name,revealOutputChannelOn:clientOptions.revealOutputChannelOn||RevealOutputChannelOn.Error,stdioEncoding:clientOptions.stdioEncoding||"utf8",initializationOptions:clientOptions.initializationOptions,initializationFailedHandler:clientOptions.initializationFailedHandler,errorHandler:clientOptions.errorHandler||new DefaultErrorHandler(this._name),middleware:clientOptions.middleware||{},uriConverters:clientOptions.uriConverters,workspaceFolder:clientOptions.workspaceFolder},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this.state=ClientState.Initial,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._initializeResult=void 0,clientOptions.outputChannel?(this._outputChannel=clientOptions.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._listeners=void 0,this._providers=void 0,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new async_1.Delayer(250),this._onReady=new Promise((resolve,reject)=>{this._onReadyCallbacks=new OnReady(resolve,reject)}),this._onStop=void 0,this._telemetryEmitter=new vscode_languageserver_protocol_1.Emitter,this._stateChangeEmitter=new vscode_languageserver_protocol_1.Emitter,this._tracer={log:(messageOrDataObject,data)=>{Is.string(messageOrDataObject)?this.logTrace(messageOrDataObject,data):this.logObjectTrace(messageOrDataObject)}},this._c2p=c2p.createConverter(clientOptions.uriConverters?clientOptions.uriConverters.code2Protocol:void 0),this._p2c=p2c.createConverter(clientOptions.uriConverters?clientOptions.uriConverters.protocol2Code:void 0),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get state(){return this._state}set state(value){let oldState=this.getPublicState();this._state=value;let newState=this.getPublicState();newState!==oldState&&this._stateChangeEmitter.fire({oldState:oldState,newState:newState})}getPublicState(){return this.state===ClientState.Running?State.Running:this.state===ClientState.Starting?State.Starting:State.Stopped}get initializeResult(){return this._initializeResult}sendRequest(type,...params){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(type,...params)}catch(error){throw this.error(`Sending request ${Is.string(type)?type:type.method} failed.`,error),error}}onRequest(type,handler){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{this._resolvedConnection.onRequest(type,handler)}catch(error){throw this.error(`Registering request handler ${Is.string(type)?type:type.method} failed.`,error),error}}sendNotification(type,params){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendNotification(type,params)}catch(error){throw this.error(`Sending notification ${Is.string(type)?type:type.method} failed.`,error),error}}onNotification(type,handler){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{this._resolvedConnection.onNotification(type,handler)}catch(error){throw this.error(`Registering notification handler ${Is.string(type)?type:type.method} failed.`,error),error}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=vscode_1.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(){return new DefaultErrorHandler(this._name)}set trace(value){this._trace=value,this.onReady().then(()=>{this.resolveConnection().then(connection=>{connection.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})})},()=>{})}data2String(data){if(data instanceof vscode_languageserver_protocol_1.ResponseError){const responseError=data;return`  Message: ${responseError.message}\n  Code: ${responseError.code} ${responseError.data?"\n"+responseError.data.toString():""}`}return data instanceof Error?Is.string(data.stack)?data.stack:data.message:Is.string(data)?data:data.toString()}info(message,data){this.outputChannel.appendLine(`[Info  - ${(new Date).toLocaleTimeString()}] ${message}`),data&&this.outputChannel.appendLine(this.data2String(data)),this._clientOptions.revealOutputChannelOn<=RevealOutputChannelOn.Info&&this.outputChannel.show(!0)}warn(message,data){this.outputChannel.appendLine(`[Warn  - ${(new Date).toLocaleTimeString()}] ${message}`),data&&this.outputChannel.appendLine(this.data2String(data)),this._clientOptions.revealOutputChannelOn<=RevealOutputChannelOn.Warn&&this.outputChannel.show(!0)}error(message,data){this.outputChannel.appendLine(`[Error - ${(new Date).toLocaleTimeString()}] ${message}`),data&&this.outputChannel.appendLine(this.data2String(data)),this._clientOptions.revealOutputChannelOn<=RevealOutputChannelOn.Error&&this.outputChannel.show(!0)}logTrace(message,data){this.outputChannel.appendLine(`[Trace - ${(new Date).toLocaleTimeString()}] ${message}`),data&&this.outputChannel.appendLine(this.data2String(data))}logObjectTrace(data){data.isLSPMessage&&data.type?this.outputChannel.append(`[LSP   - ${(new Date).toLocaleTimeString()}] `):this.outputChannel.append(`[Trace - ${(new Date).toLocaleTimeString()}] `),data&&this.outputChannel.appendLine(`${JSON.stringify(data)}`)}needsStart(){return this.state===ClientState.Initial||this.state===ClientState.Stopping||this.state===ClientState.Stopped}needsStop(){return this.state===ClientState.Starting||this.state===ClientState.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===ClientState.Running&&!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&&(this._onReady=new Promise((resolve,reject)=>{this._onReadyCallbacks=new OnReady(resolve,reject)})),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?vscode_1.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):vscode_1.languages.createDiagnosticCollection()),this.state=ClientState.Starting,this.resolveConnection().then(connection=>(connection.onLogMessage(message=>{switch(message.type){case vscode_languageserver_protocol_1.MessageType.Error:this.error(message.message);break;case vscode_languageserver_protocol_1.MessageType.Warning:this.warn(message.message);break;case vscode_languageserver_protocol_1.MessageType.Info:this.info(message.message);break;default:this.outputChannel.appendLine(message.message)}}),connection.onShowMessage(message=>{switch(message.type){case vscode_languageserver_protocol_1.MessageType.Error:vscode_1.window.showErrorMessage(message.message);break;case vscode_languageserver_protocol_1.MessageType.Warning:vscode_1.window.showWarningMessage(message.message);break;case vscode_languageserver_protocol_1.MessageType.Info:vscode_1.window.showInformationMessage(message.message);break;default:vscode_1.window.showInformationMessage(message.message)}}),connection.onRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type,params=>{let messageFunc;switch(params.type){case vscode_languageserver_protocol_1.MessageType.Error:messageFunc=vscode_1.window.showErrorMessage;break;case vscode_languageserver_protocol_1.MessageType.Warning:messageFunc=vscode_1.window.showWarningMessage;break;case vscode_languageserver_protocol_1.MessageType.Info:messageFunc=vscode_1.window.showInformationMessage;break;default:messageFunc=vscode_1.window.showInformationMessage}let actions=params.actions||[];return messageFunc(params.message,...actions)}),connection.onTelemetry(data=>{this._telemetryEmitter.fire(data)}),connection.listen(),this.initialize(connection))).then(void 0,error=>{this.state=ClientState.StartFailed,this._onReadyCallbacks.reject(error),this.error("Starting client failed",error),vscode_1.window.showErrorMessage(`Couldn't start client ${this._name}`)}),new vscode_1.Disposable(()=>{this.needsStop()&&this.stop()})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(connection){this.refreshTrace(connection,!1);let initOption=this._clientOptions.initializationOptions,rootPath=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:this._clientGetRootPath(),initParams={processId:process.pid,rootPath:rootPath||null,rootUri:rootPath?this._c2p.asUri(vscode_1.Uri.file(rootPath)):null,capabilities:this.computeClientCapabilities(),initializationOptions:Is.func(initOption)?initOption():initOption,trace:vscode_languageserver_protocol_1.Trace.toString(this._trace),workspaceFolders:null};return this.fillInitializeParams(initParams),connection.initialize(initParams).then(result=>{this._resolvedConnection=connection,this._initializeResult=result,this.state=ClientState.Running;let textDocumentSyncOptions=void 0;return Is.number(result.capabilities.textDocumentSync)?textDocumentSyncOptions=result.capabilities.textDocumentSync===vscode_languageserver_protocol_1.TextDocumentSyncKind.None?{openClose:!1,change:vscode_languageserver_protocol_1.TextDocumentSyncKind.None,save:void 0}:{openClose:!0,change:result.capabilities.textDocumentSync,save:{includeText:!1}}:void 0!==result.capabilities.textDocumentSync&&null!==result.capabilities.textDocumentSync&&(textDocumentSyncOptions=result.capabilities.textDocumentSync),this._capabilities=Object.assign({},result.capabilities,{resolvedTextDocumentSync:textDocumentSyncOptions}),connection.onDiagnostics(params=>this.handleDiagnostics(params)),connection.onRequest(vscode_languageserver_protocol_1.RegistrationRequest.type,params=>this.handleRegistrationRequest(params)),connection.onRequest("client/registerFeature",params=>this.handleRegistrationRequest(params)),connection.onRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type,params=>this.handleUnregistrationRequest(params)),connection.onRequest("client/unregisterFeature",params=>this.handleUnregistrationRequest(params)),connection.onRequest(vscode_languageserver_protocol_1.ApplyWorkspaceEditRequest.type,params=>this.handleApplyWorkspaceEdit(params)),connection.sendNotification(vscode_languageserver_protocol_1.InitializedNotification.type,{}),this.hookFileEvents(connection),this.hookConfigurationChanged(connection),this.initializeFeatures(connection),this._onReadyCallbacks.resolve(),result}).then(void 0,error=>{this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(error)?this.initialize(connection):(this.stop(),this._onReadyCallbacks.reject(error)):error instanceof vscode_languageserver_protocol_1.ResponseError&&error.data&&error.data.retry?vscode_1.window.showErrorMessage(error.message,{title:"Retry",id:"retry"}).then(item=>{item&&"retry"===item.id?this.initialize(connection):(this.stop(),this._onReadyCallbacks.reject(error))}):(error&&error.message&&vscode_1.window.showErrorMessage(error.message),this.error("Server initialization failed.",error),this.stop(),this._onReadyCallbacks.reject(error))})}_clientGetRootPath(){let folders=vscode_1.workspace.workspaceFolders;if(!folders||0===folders.length)return;let folder=folders[0];return"file"===folder.uri.scheme?folder.uri.fsPath:void 0}stop(){return this._initializeResult=void 0,this._connectionPromise?this.state===ClientState.Stopping&&this._onStop?this._onStop:(this.state=ClientState.Stopping,this.cleanUp(),this._onStop=this.resolveConnection().then(connection=>connection.shutdown().then(()=>{connection.exit(),connection.dispose(),this.state=ClientState.Stopped,this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0}))):(this.state=ClientState.Stopped,Promise.resolve())}cleanUp(channel=!0,diagnostics=!0){this._listeners&&(this._listeners.forEach(listener=>listener.dispose()),this._listeners=void 0),this._providers&&(this._providers.forEach(provider=>provider.dispose()),this._providers=void 0),this._syncedDocuments&&this._syncedDocuments.clear();for(let handler of this._dynamicFeatures.values())handler.dispose();channel&&this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0),diagnostics&&this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0)}notifyFileEvent(event){this._fileEvents.push(event),this._fileEventDelayer.trigger(()=>{this.onReady().then(()=>{this.resolveConnection().then(connection=>{this.isConnectionActive()&&connection.didChangeWatchedFiles({changes:this._fileEvents}),this._fileEvents=[]})},error=>{this.error("Notify file events failed.",error)})})}forceDocumentSync(){this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type.method).forceDelivery()}handleDiagnostics(params){if(!this._diagnostics)return;let uri=this._p2c.asUri(params.uri),diagnostics=this._p2c.asDiagnostics(params.diagnostics),middleware=this.clientOptions.middleware.handleDiagnostics;middleware?middleware(uri,diagnostics,(uri,diagnostics)=>this.setDiagnostics(uri,diagnostics)):this.setDiagnostics(uri,diagnostics)}setDiagnostics(uri,diagnostics){this._diagnostics&&this._diagnostics.set(uri,diagnostics)}createConnection(){let errorHandler=(error,message,count)=>{this.handleConnectionError(error,message,count)},closeHandler=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then(transports=>(function(input,output,errorHandler,closeHandler){let logger=new ConsoleLogger,connection=vscode_languageserver_protocol_1.createProtocolConnection(input,output,logger);return connection.onError(data=>{errorHandler(data[0],data[1],data[2])}),connection.onClose(closeHandler),{listen:()=>connection.listen(),sendRequest:(type,...params)=>connection.sendRequest(Is.string(type)?type:type.method,...params),onRequest:(type,handler)=>connection.onRequest(Is.string(type)?type:type.method,handler),sendNotification:(type,params)=>connection.sendNotification(Is.string(type)?type:type.method,params),onNotification:(type,handler)=>connection.onNotification(Is.string(type)?type:type.method,handler),trace:(value,tracer,sendNotificationOrTraceOptions)=>{const defaultTraceOptions={sendNotification:!1,traceFormat:vscode_languageserver_protocol_1.TraceFormat.Text};void 0===sendNotificationOrTraceOptions?connection.trace(value,tracer,defaultTraceOptions):(Is.boolean(sendNotificationOrTraceOptions),connection.trace(value,tracer,sendNotificationOrTraceOptions))},initialize:params=>connection.sendRequest(vscode_languageserver_protocol_1.InitializeRequest.type,params),shutdown:()=>connection.sendRequest(vscode_languageserver_protocol_1.ShutdownRequest.type,void 0),exit:()=>connection.sendNotification(vscode_languageserver_protocol_1.ExitNotification.type),onLogMessage:handler=>connection.onNotification(vscode_languageserver_protocol_1.LogMessageNotification.type,handler),onShowMessage:handler=>connection.onNotification(vscode_languageserver_protocol_1.ShowMessageNotification.type,handler),onTelemetry:handler=>connection.onNotification(vscode_languageserver_protocol_1.TelemetryEventNotification.type,handler),didChangeConfiguration:params=>connection.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type,params),didChangeWatchedFiles:params=>connection.sendNotification(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type,params),didOpenTextDocument:params=>connection.sendNotification(vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type,params),didChangeTextDocument:params=>connection.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type,params),didCloseTextDocument:params=>connection.sendNotification(vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type,params),didSaveTextDocument:params=>connection.sendNotification(vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type,params),onDiagnostics:handler=>connection.onNotification(vscode_languageserver_protocol_1.PublishDiagnosticsNotification.type,handler),dispose:()=>connection.dispose()}})(transports.reader,transports.writer,errorHandler,closeHandler))}handleConnectionClosed(){if(this.state===ClientState.Stopping||this.state===ClientState.Stopped)return;try{this._resolvedConnection&&this._resolvedConnection.dispose()}catch(error){}let action=CloseAction.DoNotRestart;try{action=this._clientOptions.errorHandler.closed()}catch(error){}this._connectionPromise=void 0,this._resolvedConnection=void 0,action===CloseAction.DoNotRestart?(this.error("Connection to server got closed. Server will not be restarted."),this.state=ClientState.Stopped,this.cleanUp(!1,!0)):action===CloseAction.Restart&&(this.info("Connection to server got closed. Server will restart."),this.cleanUp(!1,!1),this.state=ClientState.Initial,this.start())}handleConnectionError(error,message,count){this._clientOptions.errorHandler.error(error,message,count)===ErrorAction.Shutdown&&(this.error("Connection to server is erroring. Shutting down server."),this.stop())}hookConfigurationChanged(connection){vscode_1.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(connection,!0)})}refreshTrace(connection,sendNotification=!1){let config=vscode_1.workspace.getConfiguration(this._id),trace=vscode_languageserver_protocol_1.Trace.Off,traceFormat=vscode_languageserver_protocol_1.TraceFormat.Text;if(config){const traceConfig=config.get("trace.server","off");"string"==typeof traceConfig?trace=vscode_languageserver_protocol_1.Trace.fromString(traceConfig):(trace=vscode_languageserver_protocol_1.Trace.fromString(config.get("trace.server.verbosity","off")),traceFormat=vscode_languageserver_protocol_1.TraceFormat.fromString(config.get("trace.server.format","text")))}this._trace=trace,this._traceFormat=traceFormat,connection.trace(this._trace,this._tracer,{sendNotification:sendNotification,traceFormat:this._traceFormat})}hookFileEvents(_connection){let watchers,fileEvents=this._clientOptions.synchronize.fileEvents;fileEvents&&(watchers=Is.array(fileEvents)?fileEvents:[fileEvents])&&this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type.method).registerRaw(UUID.generateUuid(),watchers)}registerFeatures(features){for(let feature of features)this.registerFeature(feature)}registerFeature(feature){if(this._features.push(feature),DynamicFeature.is(feature)){let messages=feature.messages;if(Array.isArray(messages))for(let message of messages)this._method2Message.set(message.method,message),this._dynamicFeatures.set(message.method,feature);else this._method2Message.set(messages.method,messages),this._dynamicFeatures.set(messages.method,feature)}}registerBuiltinFeatures(){this.registerFeature(new ConfigurationFeature(this)),this.registerFeature(new DidOpenTextDocumentFeature(this,this._syncedDocuments)),this.registerFeature(new DidChangeTextDocumentFeature(this)),this.registerFeature(new WillSaveFeature(this)),this.registerFeature(new WillSaveWaitUntilFeature(this)),this.registerFeature(new DidSaveTextDocumentFeature(this)),this.registerFeature(new DidCloseTextDocumentFeature(this,this._syncedDocuments)),this.registerFeature(new FileSystemWatcherFeature(this,event=>this.notifyFileEvent(event))),this.registerFeature(new CompletionItemFeature(this)),this.registerFeature(new HoverFeature(this)),this.registerFeature(new SignatureHelpFeature(this)),this.registerFeature(new DefinitionFeature(this)),this.registerFeature(new ReferencesFeature(this)),this.registerFeature(new DocumentHighlightFeature(this)),this.registerFeature(new DocumentSymbolFeature(this)),this.registerFeature(new WorkspaceSymbolFeature(this)),this.registerFeature(new CodeActionFeature(this)),this.registerFeature(new CodeLensFeature(this)),this.registerFeature(new DocumentFormattingFeature(this)),this.registerFeature(new DocumentRangeFormattingFeature(this)),this.registerFeature(new DocumentOnTypeFormattingFeature(this)),this.registerFeature(new RenameFeature(this)),this.registerFeature(new DocumentLinkFeature(this)),this.registerFeature(new ExecuteCommandFeature(this))}fillInitializeParams(params){for(let feature of this._features)Is.func(feature.fillInitializeParams)&&feature.fillInitializeParams(params)}computeClientCapabilities(){let result={};ensure(result,"workspace").applyEdit=!0;let workspaceEdit=ensure(ensure(result,"workspace"),"workspaceEdit");workspaceEdit.documentChanges=!0,workspaceEdit.resourceOperations=[vscode_languageserver_protocol_1.ResourceOperationKind.Create,vscode_languageserver_protocol_1.ResourceOperationKind.Rename,vscode_languageserver_protocol_1.ResourceOperationKind.Delete],workspaceEdit.failureHandling=vscode_languageserver_protocol_1.FailureHandlingKind.TextOnlyTransactional,ensure(ensure(result,"textDocument"),"publishDiagnostics").relatedInformation=!0;for(let feature of this._features)feature.fillClientCapabilities(result);return result}initializeFeatures(_connection){let documentSelector=this._clientOptions.documentSelector;for(let feature of this._features)feature.initialize(this._capabilities,documentSelector)}handleRegistrationRequest(params){return new Promise((resolve,reject)=>{for(let registration of params.registrations){const feature=this._dynamicFeatures.get(registration.method);if(!feature)return void reject(new Error(`No feature implementation for ${registration.method} found. Registration failed.`));const options=registration.registerOptions||{};options.documentSelector=options.documentSelector||this._clientOptions.documentSelector;const data={id:registration.id,registerOptions:options};feature.register(this._method2Message.get(registration.method),data)}resolve()})}handleUnregistrationRequest(params){return new Promise((resolve,reject)=>{for(let unregistration of params.unregisterations){const feature=this._dynamicFeatures.get(unregistration.method);if(!feature)return void reject(new Error(`No feature implementation for ${unregistration.method} found. Unregistration failed.`));feature.unregister(unregistration.id)}resolve()})}handleApplyWorkspaceEdit(params){let workspaceEdit=params.edit,openTextDocuments=new Map;vscode_1.workspace.textDocuments.forEach(document=>openTextDocuments.set(document.uri.toString(),document));let versionMismatch=!1;if(workspaceEdit.documentChanges)for(const change of workspaceEdit.documentChanges)if(vscode_languageserver_protocol_1.TextDocumentEdit.is(change)&&change.textDocument.version&&change.textDocument.version>=0){let textDocument=openTextDocuments.get(change.textDocument.uri);if(textDocument&&textDocument.version!==change.textDocument.version){versionMismatch=!0;break}}return versionMismatch?Promise.resolve({applied:!1}):vscode_1.workspace.applyEdit(this._p2c.asWorkspaceEdit(params.edit)).then(value=>({applied:value}))}logFailedRequest(type,error){error instanceof vscode_languageserver_protocol_1.ResponseError&&error.code===vscode_languageserver_protocol_1.ErrorCodes.RequestCancelled||this.error(`Request ${type.method} failed.`,error)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class ValueUUID{constructor(_value){this._value=_value}asHex(){return this._value}equals(other){return this.asHex()===other.asHex()}}class V4UUID extends ValueUUID{constructor(){super([V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-",V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-","4",V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-",V4UUID._oneOf(V4UUID._timeHighBits),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-",V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex()].join(""))}static _oneOf(array){return array[Math.floor(array.length*Math.random())]}static _randomHex(){return V4UUID._oneOf(V4UUID._chars)}}function v4(){return new V4UUID}V4UUID._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],V4UUID._timeHighBits=["8","9","a","b"],exports.empty=new ValueUUID("00000000-0000-0000-0000-000000000000"),exports.v4=v4;const _UUIDPattern=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function isUUID(value){return _UUIDPattern.test(value)}exports.isUUID=isUUID,exports.parse=function(value){if(!isUUID(value))throw new Error("invalid uuid");return new ValueUUID(value)},exports.generateUuid=function(){return v4().asHex()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const constants_1=__webpack_require__(1),console_1=__webpack_require__(58),stream_1=__webpack_require__(59),outputChannel=__webpack_require__(0).window.createOutputChannel(constants_1.DISPLAY_NAME),writableStream=new stream_1.Writable({write:(chunk,_,done)=>{outputChannel.append(chunk.toString(chunk.encoding||"utf8")),done()},writev:(chunks,done)=>{chunks.forEach(i=>outputChannel.append(i.chunk.toString(i.encoding||"utf8"))),done()}}),patchedConsole=new console_1.Console({stdout:writableStream,stderr:writableStream});exports.default=new class OutputChannelLogger{constructor(){this.prefix=type=>`${type}:`,this.clear=()=>outputChannel.clear(),this.assert=(...args)=>patchedConsole.assert(...args),this.count=(...args)=>patchedConsole.count(...args),this.countReset=(...args)=>patchedConsole.countReset(...args),this.dir=(...args)=>patchedConsole.dir(...args),this.dirxml=(...args)=>patchedConsole.dirxml(...args),this.group=(...args)=>patchedConsole.group(...args),this.groupCollapsed=(...args)=>patchedConsole.groupCollapsed(...args),this.groupEnd=patchedConsole.groupEnd,this.table=(...args)=>patchedConsole.table(...args),this.time=(...args)=>patchedConsole.time(...args),this.timeEnd=(...args)=>patchedConsole.timeEnd(...args),this.timeLog=(...args)=>patchedConsole.timeLog(...args),this.trace=(...args)=>patchedConsole.trace(...args),this.markTimeline=(...args)=>patchedConsole.markTimeline(...args),this.profile=(...args)=>patchedConsole.profile(...args),this.profileEnd=(...args)=>patchedConsole.profileEnd(...args),this.timeStamp=(...args)=>patchedConsole.timeStamp(...args),this.timeline=(...args)=>patchedConsole.timeline(...args),this.timelineEnd=(...args)=>patchedConsole.timelineEnd(...args),this.log=(message,...data)=>{patchedConsole.log(this.prefix("DEBUG"),message,...data)},this.debug=(message,...data)=>{patchedConsole.log(this.prefix("DEBUG"),message,...data)},this.error=(message,...data)=>{patchedConsole.error(this.prefix("ERROR"),message,...data)},this.info=(message,...data)=>{patchedConsole.info(this.prefix("INFO"),message,...data)},this.warn=(message,...data)=>{patchedConsole.warn(this.prefix("WARN"),message,...data)},this.show=(...args)=>outputChannel.show(...args),this.memory=()=>void 0,this.exception=(...data)=>{patchedConsole.error(this.prefix("EXCEPTION"),...data)}}get outputChannel(){return outputChannel}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class GenericException extends Error{}exports.default=GenericException},function(module,exports){module.exports=require("os")},function(module,exports){module.exports=require("url")},function(module,exports,__webpack_require__){"use strict";var Util=__webpack_require__(10),Logging=__webpack_require__(6),CorrelationIdManager=function(){function CorrelationIdManager(){}return CorrelationIdManager.queryCorrelationId=function(config,callback){var appIdUrlString=config.profileQueryEndpoint+"/api/profiles/"+config.instrumentationKey+"/appId";if(CorrelationIdManager.completedLookups.hasOwnProperty(appIdUrlString))callback(CorrelationIdManager.completedLookups[appIdUrlString]);else if(CorrelationIdManager.pendingLookups[appIdUrlString])CorrelationIdManager.pendingLookups[appIdUrlString].push(callback);else{CorrelationIdManager.pendingLookups[appIdUrlString]=[callback];var fetchAppId=function(){if(CorrelationIdManager.pendingLookups[appIdUrlString]){var requestOptions={method:"GET",disableAppInsightsAutoCollection:!0};Logging.info(CorrelationIdManager.TAG,requestOptions);var req=Util.makeRequest(config,appIdUrlString,requestOptions,(function(res){if(200===res.statusCode){var appId_1="";res.setEncoding("utf-8"),res.on("data",(function(data){appId_1+=data})),res.on("end",(function(){Logging.info(CorrelationIdManager.TAG,appId_1);var result=CorrelationIdManager.correlationIdPrefix+appId_1;CorrelationIdManager.completedLookups[appIdUrlString]=result,CorrelationIdManager.pendingLookups[appIdUrlString]&&CorrelationIdManager.pendingLookups[appIdUrlString].forEach((function(cb){return cb(result)})),delete CorrelationIdManager.pendingLookups[appIdUrlString]}))}else res.statusCode>=400&&res.statusCode<500?(CorrelationIdManager.completedLookups[appIdUrlString]=void 0,delete CorrelationIdManager.pendingLookups[appIdUrlString]):setTimeout(fetchAppId,config.correlationIdRetryIntervalMs)}));req&&(req.on("error",(function(error){Logging.warn(CorrelationIdManager.TAG,error)})),req.end())}};setTimeout(fetchAppId,0)}},CorrelationIdManager.cancelCorrelationIdQuery=function(config,callback){var appIdUrlString=config.profileQueryEndpoint+"/api/profiles/"+config.instrumentationKey+"/appId",pendingLookups=CorrelationIdManager.pendingLookups[appIdUrlString];pendingLookups&&(CorrelationIdManager.pendingLookups[appIdUrlString]=pendingLookups.filter((function(cb){return cb!=callback})),0==CorrelationIdManager.pendingLookups[appIdUrlString].length&&delete CorrelationIdManager.pendingLookups[appIdUrlString])},CorrelationIdManager.generateRequestId=function(parentId){if(parentId){"."!==(parentId="|"==parentId[0]?parentId:"|"+parentId)[parentId.length-1]&&(parentId+=".");var suffix=(CorrelationIdManager.currentRootId++).toString(16);return CorrelationIdManager.appendSuffix(parentId,suffix,"_")}return CorrelationIdManager.generateRootId()},CorrelationIdManager.getRootId=function(id){var endIndex=id.indexOf(".");endIndex<0&&(endIndex=id.length);var startIndex="|"===id[0]?1:0;return id.substring(startIndex,endIndex)},CorrelationIdManager.generateRootId=function(){return"|"+Util.w3cTraceId()+"."},CorrelationIdManager.appendSuffix=function(parentId,suffix,delimiter){if(parentId.length+suffix.length<CorrelationIdManager.requestIdMaxLength)return parentId+suffix+delimiter;var trimPosition=CorrelationIdManager.requestIdMaxLength-9;if(parentId.length>trimPosition)for(;trimPosition>1;--trimPosition){var c=parentId[trimPosition-1];if("."===c||"_"===c)break}if(trimPosition<=1)return CorrelationIdManager.generateRootId();for(suffix=Util.randomu32().toString(16);suffix.length<8;)suffix="0"+suffix;return parentId.substring(0,trimPosition)+suffix+"#"},CorrelationIdManager.TAG="CorrelationIdManager",CorrelationIdManager.correlationIdPrefix="cid-v1:",CorrelationIdManager.w3cEnabled=!1,CorrelationIdManager.pendingLookups={},CorrelationIdManager.completedLookups={},CorrelationIdManager.requestIdMaxLength=1024,CorrelationIdManager.currentRootId=Util.randomu32(),CorrelationIdManager}();module.exports=CorrelationIdManager},function(module,exports){module.exports=require("https")},function(module,exports,__webpack_require__){"use strict";function string(value){return"string"==typeof value||value instanceof String}function array(value){return Array.isArray(value)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.boolean=function(value){return!0===value||!1===value},exports.string=string,exports.number=function(value){return"number"==typeof value||value instanceof Number},exports.error=function(value){return value instanceof Error},exports.func=function(value){return"function"==typeof value},exports.array=array,exports.stringArray=function(value){return array(value)&&value.every(elem=>string(elem))}},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(162)),__export(__webpack_require__(163)),__export(__webpack_require__(164)),__export(__webpack_require__(165))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Logging=__webpack_require__(6),DiagChannel=__webpack_require__(51),CorrelationContextManager=function(){function CorrelationContextManager(){}return CorrelationContextManager.getCurrentContext=function(){if(!CorrelationContextManager.enabled)return null;var context=CorrelationContextManager.session.get(CorrelationContextManager.CONTEXT_NAME);return void 0===context?null:context},CorrelationContextManager.generateContextObject=function(operationId,parentId,operationName,correlationContextHeader,traceparent,tracestate){return parentId=parentId||operationId,this.enabled?{operation:{name:operationName,id:operationId,parentId:parentId,traceparent:traceparent,tracestate:tracestate},customProperties:new CustomPropertiesImpl(correlationContextHeader)}:null},CorrelationContextManager.runWithContext=function(context,fn){return CorrelationContextManager.enabled?CorrelationContextManager.session.bind(fn,((_a={})[CorrelationContextManager.CONTEXT_NAME]=context,_a))():fn();var _a},CorrelationContextManager.wrapEmitter=function(emitter){CorrelationContextManager.enabled&&CorrelationContextManager.session.bindEmitter(emitter)},CorrelationContextManager.wrapCallback=function(fn){return CorrelationContextManager.enabled?CorrelationContextManager.session.bind(fn):fn},CorrelationContextManager.enable=function(forceClsHooked){this.enabled||(this.isNodeVersionCompatible()?(CorrelationContextManager.hasEverEnabled||(this.forceClsHooked=forceClsHooked,this.hasEverEnabled=!0,void 0===this.cls&&(!0===CorrelationContextManager.forceClsHooked||void 0===CorrelationContextManager.forceClsHooked&&CorrelationContextManager.shouldUseClsHooked()?this.cls=__webpack_require__(184):this.cls=__webpack_require__(195)),CorrelationContextManager.session=this.cls.createNamespace("AI-CLS-Session"),DiagChannel.registerContextPreservation((function(cb){return CorrelationContextManager.session.bind(cb)}))),this.enabled=!0):this.enabled=!1)},CorrelationContextManager.disable=function(){this.enabled=!1},CorrelationContextManager.reset=function(){CorrelationContextManager.hasEverEnabled&&(CorrelationContextManager.session=null,CorrelationContextManager.session=this.cls.createNamespace("AI-CLS-Session"))},CorrelationContextManager.isNodeVersionCompatible=function(){var nodeVer=process.versions.node.split(".");return parseInt(nodeVer[0])>3||parseInt(nodeVer[0])>2&&parseInt(nodeVer[1])>2},CorrelationContextManager.shouldUseClsHooked=function(){var nodeVer=process.versions.node.split(".");return parseInt(nodeVer[0])>8||parseInt(nodeVer[0])>=8&&parseInt(nodeVer[1])>=2},CorrelationContextManager.canUseClsHooked=function(){var nodeVer=process.versions.node.split("."),greater800=parseInt(nodeVer[0])>8||parseInt(nodeVer[0])>=8&&parseInt(nodeVer[1])>=0,less820=parseInt(nodeVer[0])<8||parseInt(nodeVer[0])<=8&&parseInt(nodeVer[1])<2,greater470=parseInt(nodeVer[0])>4||parseInt(nodeVer[0])>=4&&parseInt(nodeVer[1])>=7;return!(greater800&&less820)&&greater470},CorrelationContextManager.enabled=!1,CorrelationContextManager.hasEverEnabled=!1,CorrelationContextManager.forceClsHooked=void 0,CorrelationContextManager.CONTEXT_NAME="ApplicationInsights-Context",CorrelationContextManager}();exports.CorrelationContextManager=CorrelationContextManager;var CustomPropertiesImpl=function(){function CustomPropertiesImpl(header){this.props=[],this.addHeaderData(header)}return CustomPropertiesImpl.prototype.addHeaderData=function(header){var keyvals=header?header.split(", "):[];this.props=keyvals.map((function(keyval){var parts=keyval.split("=");return{key:parts[0],value:parts[1]}})).concat(this.props)},CustomPropertiesImpl.prototype.serializeToHeader=function(){return this.props.map((function(keyval){return keyval.key+"="+keyval.value})).join(", ")},CustomPropertiesImpl.prototype.getProperty=function(prop){for(var i=0;i<this.props.length;++i){var keyval=this.props[i];if(keyval.key===prop)return keyval.value}},CustomPropertiesImpl.prototype.setProperty=function(prop,val){if(CustomPropertiesImpl.bannedCharacters.test(prop)||CustomPropertiesImpl.bannedCharacters.test(val))Logging.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+prop+" and value: "+val);else{for(var i=0;i<this.props.length;++i){var keyval=this.props[i];if(keyval.key===prop)return void(keyval.value=val)}this.props.push({key:prop,value:val})}},CustomPropertiesImpl.bannedCharacters=/[,=]/,CustomPropertiesImpl}()},function(module,exports,__webpack_require__){"use strict";var QuickPulseCounter,PerformanceCounter,_a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",exports.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",exports.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com",function(QuickPulseCounter){QuickPulseCounter.COMMITTED_BYTES="\\Memory\\Committed Bytes",QuickPulseCounter.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",QuickPulseCounter.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",QuickPulseCounter.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",QuickPulseCounter.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",QuickPulseCounter.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",QuickPulseCounter.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",QuickPulseCounter.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",QuickPulseCounter.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"}(QuickPulseCounter=exports.QuickPulseCounter||(exports.QuickPulseCounter={})),function(PerformanceCounter){PerformanceCounter.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",PerformanceCounter.AVAILABLE_BYTES="\\Memory\\Available Bytes",PerformanceCounter.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",PerformanceCounter.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",PerformanceCounter.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",PerformanceCounter.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"}(PerformanceCounter=exports.PerformanceCounter||(exports.PerformanceCounter={})),exports.PerformanceToQuickPulseCounter=((_a={})[PerformanceCounter.PROCESSOR_TIME]=QuickPulseCounter.PROCESSOR_TIME,_a[PerformanceCounter.REQUEST_RATE]=QuickPulseCounter.REQUEST_RATE,_a[PerformanceCounter.REQUEST_DURATION]=QuickPulseCounter.REQUEST_DURATION,_a[QuickPulseCounter.COMMITTED_BYTES]=QuickPulseCounter.COMMITTED_BYTES,_a[QuickPulseCounter.REQUEST_FAILURE_RATE]=QuickPulseCounter.REQUEST_FAILURE_RATE,_a[QuickPulseCounter.DEPENDENCY_RATE]=QuickPulseCounter.DEPENDENCY_RATE,_a[QuickPulseCounter.DEPENDENCY_FAILURE_RATE]=QuickPulseCounter.DEPENDENCY_FAILURE_RATE,_a[QuickPulseCounter.DEPENDENCY_DURATION]=QuickPulseCounter.DEPENDENCY_DURATION,_a[QuickPulseCounter.EXCEPTION_RATE]=QuickPulseCounter.EXCEPTION_RATE,_a),exports.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency"},exports.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument"},exports.TelemetryTypeStringToQuickPulseType={EventData:exports.QuickPulseType.Event,ExceptionData:exports.QuickPulseType.Exception,MessageData:exports.QuickPulseType.Trace,MetricData:exports.QuickPulseType.Metric,RequestData:exports.QuickPulseType.Request,RemoteDependencyData:exports.QuickPulseType.Dependency},exports.TelemetryTypeStringToQuickPulseDocumentType={EventData:exports.QuickPulseDocumentType.Event,ExceptionData:exports.QuickPulseDocumentType.Exception,MessageData:exports.QuickPulseDocumentType.Trace,MetricData:exports.QuickPulseDocumentType.Metric,RequestData:exports.QuickPulseDocumentType.Request,RemoteDependencyData:exports.QuickPulseDocumentType.Dependency}},function(module,exports,__webpack_require__){"use strict";module.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(0);class SidebarAbstractItem extends vscode_1.TreeItem{constructor(){super(...arguments),this.parent=null}}exports.default=SidebarAbstractItem},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(Disposable){Disposable.create=function(func){return{dispose:func}}}(exports.Disposable||(exports.Disposable={})),function(Event){const _disposable={dispose(){}};Event.None=function(){return _disposable}}(exports.Event||(exports.Event={}));class CallbackList{add(callback,context=null,bucket){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(callback),this._contexts.push(context),Array.isArray(bucket)&&bucket.push({dispose:()=>this.remove(callback,context)})}remove(callback,context=null){if(this._callbacks){for(var foundCallbackWithDifferentContext=!1,i=0,len=this._callbacks.length;i<len;i++)if(this._callbacks[i]===callback){if(this._contexts[i]===context)return this._callbacks.splice(i,1),void this._contexts.splice(i,1);foundCallbackWithDifferentContext=!0}if(foundCallbackWithDifferentContext)throw new Error("When adding a listener with a context, you should remove it with the same context")}}invoke(...args){if(!this._callbacks)return[];for(var ret=[],callbacks=this._callbacks.slice(0),contexts=this._contexts.slice(0),i=0,len=callbacks.length;i<len;i++)try{ret.push(callbacks[i].apply(contexts[i],args))}catch(e){console.error(e)}return ret}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class Emitter{constructor(_options){this._options=_options}get event(){return this._event||(this._event=(listener,thisArgs,disposables)=>{let result;return this._callbacks||(this._callbacks=new CallbackList),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(listener,thisArgs),result={dispose:()=>{this._callbacks.remove(listener,thisArgs),result.dispose=Emitter._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this)}},Array.isArray(disposables)&&disposables.push(result),result}),this._event}fire(event){this._callbacks&&this._callbacks.invoke.call(this._callbacks,event)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}Emitter._noop=function(){},exports.Emitter=Emitter},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const utils_1=__webpack_require__(65),parse_1=__importDefault(__webpack_require__(158));exports.parse=function(query,dialect="mysql"){return parse_1.default(query,dialect)},exports.cleanUp=function(query=""){return query?query.toString().replace("\t","  ").replace(/(--.*)|(((\/\*)+?[\w\W]+?(\*\/)+))/gim,"").split(/\r\n|\n/gi).map(v=>v.trim()).filter(Boolean).join(" ").trim():""},exports.generateInsert=function(table,cols,formatOptions){let insertQuery=`INSERT INTO ${table} (${cols.map(col=>col.columnName).join(", ")}) VALUES (`;return cols.forEach((col,index)=>{insertQuery=insertQuery.concat(`'\${${index+1}:${col.columnName}:${col.type}}', `)}),utils_1.format(`${insertQuery.substr(0,Math.max(0,insertQuery.length-2))});`,formatOptions).replace(/'\${(\d+):([\w\s]+):((int|bool|num|real)[\w\s]*)}'/gi,(_,pos,colName,type)=>`\${${pos}:${colName.trim()}:${type.trim()}}`).concat("$0")},exports.extractConnName=function(query){return((query.match(/@conn\s*(.+)$/m)||[])[1]||"").trim()||null},exports.getQueryParameters=function(query,regexStr){if(!query||!regexStr)return[];const regex=new RegExp(regexStr,"g"),paramsMap={};let match;for(;null!==(match=regex.exec(query));){console.log(`Found ${match[0]}. Next starts at ${regex.lastIndex}.`);const queryPart=query.substring(Math.max(0,regex.lastIndex-15),Math.min(query.length,regex.lastIndex+15)).replace(/[\r\n]/g,"").replace(/\s+/g," ").trim();paramsMap[match[0]]||(paramsMap[match[0]]={param:match[0],string:`...${queryPart}...`})}return Object.values(paramsMap)}},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(67),isObjectLike=__webpack_require__(131),symbolTag="[object Symbol]";module.exports=function(value){return"symbol"==typeof value||isObjectLike(value)&&baseGetTag(value)==symbolTag}},function(module,exports,__webpack_require__){var baseToString=__webpack_require__(66);module.exports=function(value){return null==value?"":baseToString(value)}},function(module,exports){module.exports=function(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}},function(module,exports){var debug;exports=module.exports=SemVer,debug="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var args=Array.prototype.slice.call(arguments,0);args.unshift("SEMVER"),console.log.apply(console,args)}:function(){},exports.SEMVER_SPEC_VERSION="2.0.0";var MAX_LENGTH=256,MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||9007199254740991,re=exports.re=[],src=exports.src=[],R=0,NUMERICIDENTIFIER=R++;src[NUMERICIDENTIFIER]="0|[1-9]\\d*";var NUMERICIDENTIFIERLOOSE=R++;src[NUMERICIDENTIFIERLOOSE]="[0-9]+";var NONNUMERICIDENTIFIER=R++;src[NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var MAINVERSION=R++;src[MAINVERSION]="("+src[NUMERICIDENTIFIER]+")\\.("+src[NUMERICIDENTIFIER]+")\\.("+src[NUMERICIDENTIFIER]+")";var MAINVERSIONLOOSE=R++;src[MAINVERSIONLOOSE]="("+src[NUMERICIDENTIFIERLOOSE]+")\\.("+src[NUMERICIDENTIFIERLOOSE]+")\\.("+src[NUMERICIDENTIFIERLOOSE]+")";var PRERELEASEIDENTIFIER=R++;src[PRERELEASEIDENTIFIER]="(?:"+src[NUMERICIDENTIFIER]+"|"+src[NONNUMERICIDENTIFIER]+")";var PRERELEASEIDENTIFIERLOOSE=R++;src[PRERELEASEIDENTIFIERLOOSE]="(?:"+src[NUMERICIDENTIFIERLOOSE]+"|"+src[NONNUMERICIDENTIFIER]+")";var PRERELEASE=R++;src[PRERELEASE]="(?:-("+src[PRERELEASEIDENTIFIER]+"(?:\\."+src[PRERELEASEIDENTIFIER]+")*))";var PRERELEASELOOSE=R++;src[PRERELEASELOOSE]="(?:-?("+src[PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+src[PRERELEASEIDENTIFIERLOOSE]+")*))";var BUILDIDENTIFIER=R++;src[BUILDIDENTIFIER]="[0-9A-Za-z-]+";var BUILD=R++;src[BUILD]="(?:\\+("+src[BUILDIDENTIFIER]+"(?:\\."+src[BUILDIDENTIFIER]+")*))";var FULL=R++,FULLPLAIN="v?"+src[MAINVERSION]+src[PRERELEASE]+"?"+src[BUILD]+"?";src[FULL]="^"+FULLPLAIN+"$";var LOOSEPLAIN="[v=\\s]*"+src[MAINVERSIONLOOSE]+src[PRERELEASELOOSE]+"?"+src[BUILD]+"?",LOOSE=R++;src[LOOSE]="^"+LOOSEPLAIN+"$";var GTLT=R++;src[GTLT]="((?:<|>)?=?)";var XRANGEIDENTIFIERLOOSE=R++;src[XRANGEIDENTIFIERLOOSE]=src[NUMERICIDENTIFIERLOOSE]+"|x|X|\\*";var XRANGEIDENTIFIER=R++;src[XRANGEIDENTIFIER]=src[NUMERICIDENTIFIER]+"|x|X|\\*";var XRANGEPLAIN=R++;src[XRANGEPLAIN]="[v=\\s]*("+src[XRANGEIDENTIFIER]+")(?:\\.("+src[XRANGEIDENTIFIER]+")(?:\\.("+src[XRANGEIDENTIFIER]+")(?:"+src[PRERELEASE]+")?"+src[BUILD]+"?)?)?";var XRANGEPLAINLOOSE=R++;src[XRANGEPLAINLOOSE]="[v=\\s]*("+src[XRANGEIDENTIFIERLOOSE]+")(?:\\.("+src[XRANGEIDENTIFIERLOOSE]+")(?:\\.("+src[XRANGEIDENTIFIERLOOSE]+")(?:"+src[PRERELEASELOOSE]+")?"+src[BUILD]+"?)?)?";var XRANGE=R++;src[XRANGE]="^"+src[GTLT]+"\\s*"+src[XRANGEPLAIN]+"$";var XRANGELOOSE=R++;src[XRANGELOOSE]="^"+src[GTLT]+"\\s*"+src[XRANGEPLAINLOOSE]+"$";var COERCE=R++;src[COERCE]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var LONETILDE=R++;src[LONETILDE]="(?:~>?)";var TILDETRIM=R++;src[TILDETRIM]="(\\s*)"+src[LONETILDE]+"\\s+",re[TILDETRIM]=new RegExp(src[TILDETRIM],"g");var TILDE=R++;src[TILDE]="^"+src[LONETILDE]+src[XRANGEPLAIN]+"$";var TILDELOOSE=R++;src[TILDELOOSE]="^"+src[LONETILDE]+src[XRANGEPLAINLOOSE]+"$";var LONECARET=R++;src[LONECARET]="(?:\\^)";var CARETTRIM=R++;src[CARETTRIM]="(\\s*)"+src[LONECARET]+"\\s+",re[CARETTRIM]=new RegExp(src[CARETTRIM],"g");var CARET=R++;src[CARET]="^"+src[LONECARET]+src[XRANGEPLAIN]+"$";var CARETLOOSE=R++;src[CARETLOOSE]="^"+src[LONECARET]+src[XRANGEPLAINLOOSE]+"$";var COMPARATORLOOSE=R++;src[COMPARATORLOOSE]="^"+src[GTLT]+"\\s*("+LOOSEPLAIN+")$|^$";var COMPARATOR=R++;src[COMPARATOR]="^"+src[GTLT]+"\\s*("+FULLPLAIN+")$|^$";var COMPARATORTRIM=R++;src[COMPARATORTRIM]="(\\s*)"+src[GTLT]+"\\s*("+LOOSEPLAIN+"|"+src[XRANGEPLAIN]+")",re[COMPARATORTRIM]=new RegExp(src[COMPARATORTRIM],"g");var HYPHENRANGE=R++;src[HYPHENRANGE]="^\\s*("+src[XRANGEPLAIN]+")\\s+-\\s+("+src[XRANGEPLAIN]+")\\s*$";var HYPHENRANGELOOSE=R++;src[HYPHENRANGELOOSE]="^\\s*("+src[XRANGEPLAINLOOSE]+")\\s+-\\s+("+src[XRANGEPLAINLOOSE]+")\\s*$";var STAR=R++;src[STAR]="(<|>)?=?\\s*\\*";for(var i=0;i<35;i++)debug(i,src[i]),re[i]||(re[i]=new RegExp(src[i]));function parse(version,options){if(options&&"object"==typeof options||(options={loose:!!options,includePrerelease:!1}),version instanceof SemVer)return version;if("string"!=typeof version)return null;if(version.length>MAX_LENGTH)return null;if(!(options.loose?re[LOOSE]:re[FULL]).test(version))return null;try{return new SemVer(version,options)}catch(er){return null}}function SemVer(version,options){if(options&&"object"==typeof options||(options={loose:!!options,includePrerelease:!1}),version instanceof SemVer){if(version.loose===options.loose)return version;version=version.version}else if("string"!=typeof version)throw new TypeError("Invalid Version: "+version);if(version.length>MAX_LENGTH)throw new TypeError("version is longer than "+MAX_LENGTH+" characters");if(!(this instanceof SemVer))return new SemVer(version,options);debug("SemVer",version,options),this.options=options,this.loose=!!options.loose;var m=version.trim().match(options.loose?re[LOOSE]:re[FULL]);if(!m)throw new TypeError("Invalid Version: "+version);if(this.raw=version,this.major=+m[1],this.minor=+m[2],this.patch=+m[3],this.major>MAX_SAFE_INTEGER||this.major<0)throw new TypeError("Invalid major version");if(this.minor>MAX_SAFE_INTEGER||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>MAX_SAFE_INTEGER||this.patch<0)throw new TypeError("Invalid patch version");m[4]?this.prerelease=m[4].split(".").map((function(id){if(/^[0-9]+$/.test(id)){var num=+id;if(num>=0&&num<MAX_SAFE_INTEGER)return num}return id})):this.prerelease=[],this.build=m[5]?m[5].split("."):[],this.format()}exports.parse=parse,exports.valid=function(version,options){var v=parse(version,options);return v?v.version:null},exports.clean=function(version,options){var s=parse(version.trim().replace(/^[=v]+/,""),options);return s?s.version:null},exports.SemVer=SemVer,SemVer.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},SemVer.prototype.toString=function(){return this.version},SemVer.prototype.compare=function(other){return debug("SemVer.compare",this.version,this.options,other),other instanceof SemVer||(other=new SemVer(other,this.options)),this.compareMain(other)||this.comparePre(other)},SemVer.prototype.compareMain=function(other){return other instanceof SemVer||(other=new SemVer(other,this.options)),compareIdentifiers(this.major,other.major)||compareIdentifiers(this.minor,other.minor)||compareIdentifiers(this.patch,other.patch)},SemVer.prototype.comparePre=function(other){if(other instanceof SemVer||(other=new SemVer(other,this.options)),this.prerelease.length&&!other.prerelease.length)return-1;if(!this.prerelease.length&&other.prerelease.length)return 1;if(!this.prerelease.length&&!other.prerelease.length)return 0;var i=0;do{var a=this.prerelease[i],b=other.prerelease[i];if(debug("prerelease compare",i,a,b),void 0===a&&void 0===b)return 0;if(void 0===b)return 1;if(void 0===a)return-1;if(a!==b)return compareIdentifiers(a,b)}while(++i)},SemVer.prototype.inc=function(release,identifier){switch(release){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",identifier);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",identifier);break;case"prepatch":this.prerelease.length=0,this.inc("patch",identifier),this.inc("pre",identifier);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",identifier),this.inc("pre",identifier);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var i=this.prerelease.length;--i>=0;)"number"==typeof this.prerelease[i]&&(this.prerelease[i]++,i=-2);-1===i&&this.prerelease.push(0)}identifier&&(this.prerelease[0]===identifier?isNaN(this.prerelease[1])&&(this.prerelease=[identifier,0]):this.prerelease=[identifier,0]);break;default:throw new Error("invalid increment argument: "+release)}return this.format(),this.raw=this.version,this},exports.inc=function(version,release,loose,identifier){"string"==typeof loose&&(identifier=loose,loose=void 0);try{return new SemVer(version,loose).inc(release,identifier).version}catch(er){return null}},exports.diff=function(version1,version2){if(eq(version1,version2))return null;var v1=parse(version1),v2=parse(version2),prefix="";if(v1.prerelease.length||v2.prerelease.length){prefix="pre";var defaultResult="prerelease"}for(var key in v1)if(("major"===key||"minor"===key||"patch"===key)&&v1[key]!==v2[key])return prefix+key;return defaultResult},exports.compareIdentifiers=compareIdentifiers;var numeric=/^[0-9]+$/;function compareIdentifiers(a,b){var anum=numeric.test(a),bnum=numeric.test(b);return anum&&bnum&&(a=+a,b=+b),a===b?0:anum&&!bnum?-1:bnum&&!anum?1:a<b?-1:1}function compare(a,b,loose){return new SemVer(a,loose).compare(new SemVer(b,loose))}function gt(a,b,loose){return compare(a,b,loose)>0}function lt(a,b,loose){return compare(a,b,loose)<0}function eq(a,b,loose){return 0===compare(a,b,loose)}function neq(a,b,loose){return 0!==compare(a,b,loose)}function gte(a,b,loose){return compare(a,b,loose)>=0}function lte(a,b,loose){return compare(a,b,loose)<=0}function cmp(a,op,b,loose){switch(op){case"===":return"object"==typeof a&&(a=a.version),"object"==typeof b&&(b=b.version),a===b;case"!==":return"object"==typeof a&&(a=a.version),"object"==typeof b&&(b=b.version),a!==b;case"":case"=":case"==":return eq(a,b,loose);case"!=":return neq(a,b,loose);case">":return gt(a,b,loose);case">=":return gte(a,b,loose);case"<":return lt(a,b,loose);case"<=":return lte(a,b,loose);default:throw new TypeError("Invalid operator: "+op)}}function Comparator(comp,options){if(options&&"object"==typeof options||(options={loose:!!options,includePrerelease:!1}),comp instanceof Comparator){if(comp.loose===!!options.loose)return comp;comp=comp.value}if(!(this instanceof Comparator))return new Comparator(comp,options);debug("comparator",comp,options),this.options=options,this.loose=!!options.loose,this.parse(comp),this.semver===ANY?this.value="":this.value=this.operator+this.semver.version,debug("comp",this)}exports.rcompareIdentifiers=function(a,b){return compareIdentifiers(b,a)},exports.major=function(a,loose){return new SemVer(a,loose).major},exports.minor=function(a,loose){return new SemVer(a,loose).minor},exports.patch=function(a,loose){return new SemVer(a,loose).patch},exports.compare=compare,exports.compareLoose=function(a,b){return compare(a,b,!0)},exports.rcompare=function(a,b,loose){return compare(b,a,loose)},exports.sort=function(list,loose){return list.sort((function(a,b){return exports.compare(a,b,loose)}))},exports.rsort=function(list,loose){return list.sort((function(a,b){return exports.rcompare(a,b,loose)}))},exports.gt=gt,exports.lt=lt,exports.eq=eq,exports.neq=neq,exports.gte=gte,exports.lte=lte,exports.cmp=cmp,exports.Comparator=Comparator;var ANY={};function Range(range,options){if(options&&"object"==typeof options||(options={loose:!!options,includePrerelease:!1}),range instanceof Range)return range.loose===!!options.loose&&range.includePrerelease===!!options.includePrerelease?range:new Range(range.raw,options);if(range instanceof Comparator)return new Range(range.value,options);if(!(this instanceof Range))return new Range(range,options);if(this.options=options,this.loose=!!options.loose,this.includePrerelease=!!options.includePrerelease,this.raw=range,this.set=range.split(/\s*\|\|\s*/).map((function(range){return this.parseRange(range.trim())}),this).filter((function(c){return c.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+range);this.format()}function isX(id){return!id||"x"===id.toLowerCase()||"*"===id}function hyphenReplace($0,from,fM,fm,fp,fpr,fb,to,tM,tm,tp,tpr,tb){return((from=isX(fM)?"":isX(fm)?">="+fM+".0.0":isX(fp)?">="+fM+"."+fm+".0":">="+from)+" "+(to=isX(tM)?"":isX(tm)?"<"+(+tM+1)+".0.0":isX(tp)?"<"+tM+"."+(+tm+1)+".0":tpr?"<="+tM+"."+tm+"."+tp+"-"+tpr:"<="+to)).trim()}function testSet(set,version,options){for(var i=0;i<set.length;i++)if(!set[i].test(version))return!1;if(version.prerelease.length&&!options.includePrerelease){for(i=0;i<set.length;i++)if(debug(set[i].semver),set[i].semver!==ANY&&set[i].semver.prerelease.length>0){var allowed=set[i].semver;if(allowed.major===version.major&&allowed.minor===version.minor&&allowed.patch===version.patch)return!0}return!1}return!0}function satisfies(version,range,options){try{range=new Range(range,options)}catch(er){return!1}return range.test(version)}function outside(version,range,hilo,options){var gtfn,ltefn,ltfn,comp,ecomp;switch(version=new SemVer(version,options),range=new Range(range,options),hilo){case">":gtfn=gt,ltefn=lte,ltfn=lt,comp=">",ecomp=">=";break;case"<":gtfn=lt,ltefn=gte,ltfn=gt,comp="<",ecomp="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(satisfies(version,range,options))return!1;for(var i=0;i<range.set.length;++i){var comparators=range.set[i],high=null,low=null;if(comparators.forEach((function(comparator){comparator.semver===ANY&&(comparator=new Comparator(">=0.0.0")),high=high||comparator,low=low||comparator,gtfn(comparator.semver,high.semver,options)?high=comparator:ltfn(comparator.semver,low.semver,options)&&(low=comparator)})),high.operator===comp||high.operator===ecomp)return!1;if((!low.operator||low.operator===comp)&&ltefn(version,low.semver))return!1;if(low.operator===ecomp&&ltfn(version,low.semver))return!1}return!0}Comparator.prototype.parse=function(comp){var r=this.options.loose?re[COMPARATORLOOSE]:re[COMPARATOR],m=comp.match(r);if(!m)throw new TypeError("Invalid comparator: "+comp);this.operator=m[1],"="===this.operator&&(this.operator=""),m[2]?this.semver=new SemVer(m[2],this.options.loose):this.semver=ANY},Comparator.prototype.toString=function(){return this.value},Comparator.prototype.test=function(version){return debug("Comparator.test",version,this.options.loose),this.semver===ANY||("string"==typeof version&&(version=new SemVer(version,this.options)),cmp(version,this.operator,this.semver,this.options))},Comparator.prototype.intersects=function(comp,options){if(!(comp instanceof Comparator))throw new TypeError("a Comparator is required");var rangeTmp;if(options&&"object"==typeof options||(options={loose:!!options,includePrerelease:!1}),""===this.operator)return rangeTmp=new Range(comp.value,options),satisfies(this.value,rangeTmp,options);if(""===comp.operator)return rangeTmp=new Range(this.value,options),satisfies(comp.semver,rangeTmp,options);var sameDirectionIncreasing=!(">="!==this.operator&&">"!==this.operator||">="!==comp.operator&&">"!==comp.operator),sameDirectionDecreasing=!("<="!==this.operator&&"<"!==this.operator||"<="!==comp.operator&&"<"!==comp.operator),sameSemVer=this.semver.version===comp.semver.version,differentDirectionsInclusive=!(">="!==this.operator&&"<="!==this.operator||">="!==comp.operator&&"<="!==comp.operator),oppositeDirectionsLessThan=cmp(this.semver,"<",comp.semver,options)&&(">="===this.operator||">"===this.operator)&&("<="===comp.operator||"<"===comp.operator),oppositeDirectionsGreaterThan=cmp(this.semver,">",comp.semver,options)&&("<="===this.operator||"<"===this.operator)&&(">="===comp.operator||">"===comp.operator);return sameDirectionIncreasing||sameDirectionDecreasing||sameSemVer&&differentDirectionsInclusive||oppositeDirectionsLessThan||oppositeDirectionsGreaterThan},exports.Range=Range,Range.prototype.format=function(){return this.range=this.set.map((function(comps){return comps.join(" ").trim()})).join("||").trim(),this.range},Range.prototype.toString=function(){return this.range},Range.prototype.parseRange=function(range){var loose=this.options.loose;range=range.trim();var hr=loose?re[HYPHENRANGELOOSE]:re[HYPHENRANGE];range=range.replace(hr,hyphenReplace),debug("hyphen replace",range),range=range.replace(re[COMPARATORTRIM],"$1$2$3"),debug("comparator trim",range,re[COMPARATORTRIM]),range=(range=(range=range.replace(re[TILDETRIM],"$1~")).replace(re[CARETTRIM],"$1^")).split(/\s+/).join(" ");var compRe=loose?re[COMPARATORLOOSE]:re[COMPARATOR],set=range.split(" ").map((function(comp){return function(comp,options){return debug("comp",comp,options),comp=function(comp,options){return comp.trim().split(/\s+/).map((function(comp){return function(comp,options){debug("caret",comp,options);var r=options.loose?re[CARETLOOSE]:re[CARET];return comp.replace(r,(function(_,M,m,p,pr){var ret;return debug("caret",comp,_,M,m,p,pr),isX(M)?ret="":isX(m)?ret=">="+M+".0.0 <"+(+M+1)+".0.0":isX(p)?ret="0"===M?">="+M+"."+m+".0 <"+M+"."+(+m+1)+".0":">="+M+"."+m+".0 <"+(+M+1)+".0.0":pr?(debug("replaceCaret pr",pr),ret="0"===M?"0"===m?">="+M+"."+m+"."+p+"-"+pr+" <"+M+"."+m+"."+(+p+1):">="+M+"."+m+"."+p+"-"+pr+" <"+M+"."+(+m+1)+".0":">="+M+"."+m+"."+p+"-"+pr+" <"+(+M+1)+".0.0"):(debug("no pr"),ret="0"===M?"0"===m?">="+M+"."+m+"."+p+" <"+M+"."+m+"."+(+p+1):">="+M+"."+m+"."+p+" <"+M+"."+(+m+1)+".0":">="+M+"."+m+"."+p+" <"+(+M+1)+".0.0"),debug("caret return",ret),ret}))}(comp,options)})).join(" ")}(comp,options),debug("caret",comp),comp=function(comp,options){return comp.trim().split(/\s+/).map((function(comp){return function(comp,options){var r=options.loose?re[TILDELOOSE]:re[TILDE];return comp.replace(r,(function(_,M,m,p,pr){var ret;return debug("tilde",comp,_,M,m,p,pr),isX(M)?ret="":isX(m)?ret=">="+M+".0.0 <"+(+M+1)+".0.0":isX(p)?ret=">="+M+"."+m+".0 <"+M+"."+(+m+1)+".0":pr?(debug("replaceTilde pr",pr),ret=">="+M+"."+m+"."+p+"-"+pr+" <"+M+"."+(+m+1)+".0"):ret=">="+M+"."+m+"."+p+" <"+M+"."+(+m+1)+".0",debug("tilde return",ret),ret}))}(comp,options)})).join(" ")}(comp,options),debug("tildes",comp),comp=function(comp,options){return debug("replaceXRanges",comp,options),comp.split(/\s+/).map((function(comp){return function(comp,options){comp=comp.trim();var r=options.loose?re[XRANGELOOSE]:re[XRANGE];return comp.replace(r,(function(ret,gtlt,M,m,p,pr){debug("xRange",comp,ret,gtlt,M,m,p,pr);var xM=isX(M),xm=xM||isX(m),xp=xm||isX(p);return"="===gtlt&&xp&&(gtlt=""),xM?ret=">"===gtlt||"<"===gtlt?"<0.0.0":"*":gtlt&&xp?(xm&&(m=0),p=0,">"===gtlt?(gtlt=">=",xm?(M=+M+1,m=0,p=0):(m=+m+1,p=0)):"<="===gtlt&&(gtlt="<",xm?M=+M+1:m=+m+1),ret=gtlt+M+"."+m+"."+p):xm?ret=">="+M+".0.0 <"+(+M+1)+".0.0":xp&&(ret=">="+M+"."+m+".0 <"+M+"."+(+m+1)+".0"),debug("xRange return",ret),ret}))}(comp,options)})).join(" ")}(comp,options),debug("xrange",comp),comp=function(comp,options){return debug("replaceStars",comp,options),comp.trim().replace(re[STAR],"")}(comp,options),debug("stars",comp),comp}(comp,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(set=set.filter((function(comp){return!!comp.match(compRe)}))),set=set.map((function(comp){return new Comparator(comp,this.options)}),this)},Range.prototype.intersects=function(range,options){if(!(range instanceof Range))throw new TypeError("a Range is required");return this.set.some((function(thisComparators){return thisComparators.every((function(thisComparator){return range.set.some((function(rangeComparators){return rangeComparators.every((function(rangeComparator){return thisComparator.intersects(rangeComparator,options)}))}))}))}))},exports.toComparators=function(range,options){return new Range(range,options).set.map((function(comp){return comp.map((function(c){return c.value})).join(" ").trim().split(" ")}))},Range.prototype.test=function(version){if(!version)return!1;"string"==typeof version&&(version=new SemVer(version,this.options));for(var i=0;i<this.set.length;i++)if(testSet(this.set[i],version,this.options))return!0;return!1},exports.satisfies=satisfies,exports.maxSatisfying=function(versions,range,options){var max=null,maxSV=null;try{var rangeObj=new Range(range,options)}catch(er){return null}return versions.forEach((function(v){rangeObj.test(v)&&(max&&-1!==maxSV.compare(v)||(maxSV=new SemVer(max=v,options)))})),max},exports.minSatisfying=function(versions,range,options){var min=null,minSV=null;try{var rangeObj=new Range(range,options)}catch(er){return null}return versions.forEach((function(v){rangeObj.test(v)&&(min&&1!==minSV.compare(v)||(minSV=new SemVer(min=v,options)))})),min},exports.minVersion=function(range,loose){range=new Range(range,loose);var minver=new SemVer("0.0.0");if(range.test(minver))return minver;if(minver=new SemVer("0.0.0-0"),range.test(minver))return minver;minver=null;for(var i=0;i<range.set.length;++i){range.set[i].forEach((function(comparator){var compver=new SemVer(comparator.semver.version);switch(comparator.operator){case">":0===compver.prerelease.length?compver.patch++:compver.prerelease.push(0),compver.raw=compver.format();case"":case">=":minver&&!gt(minver,compver)||(minver=compver);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+comparator.operator)}}))}if(minver&&range.test(minver))return minver;return null},exports.validRange=function(range,options){try{return new Range(range,options).range||"*"}catch(er){return null}},exports.ltr=function(version,range,options){return outside(version,range,"<",options)},exports.gtr=function(version,range,options){return outside(version,range,">",options)},exports.outside=outside,exports.prerelease=function(version,options){var parsed=parse(version,options);return parsed&&parsed.prerelease.length?parsed.prerelease:null},exports.intersects=function(r1,r2,options){return r1=new Range(r1,options),r2=new Range(r2,options),r1.intersects(r2)},exports.coerce=function(version){if(version instanceof SemVer)return version;if("string"!=typeof version)return null;var match=version.match(re[COERCE]);if(null==match)return null;return parse(match[1]+"."+(match[2]||"0")+"."+(match[3]||"0"))}},function(module,exports){module.exports=require("util")},function(module,exports){module.exports=require("http")},function(module,exports,__webpack_require__){"use strict";var http=__webpack_require__(37),https=__webpack_require__(23),Logging=__webpack_require__(6),Util=__webpack_require__(10),RequestResponseHeaders=__webpack_require__(28),HttpDependencyParser=__webpack_require__(223),CorrelationContextManager_1=__webpack_require__(26),CorrelationIdManager=__webpack_require__(22),Traceparent=__webpack_require__(83),DiagChannel=__webpack_require__(51),AutoCollectHttpDependencies=function(){function AutoCollectHttpDependencies(client){if(AutoCollectHttpDependencies.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");AutoCollectHttpDependencies.INSTANCE=this,this._client=client}return AutoCollectHttpDependencies.prototype.enable=function(isEnabled){this._isEnabled=isEnabled,this._isEnabled&&!this._isInitialized&&this._initialize(),DiagChannel.IsInitialized&&(__webpack_require__(224).enable(isEnabled,this._client),__webpack_require__(225).enable(isEnabled,this._client),__webpack_require__(226).enable(isEnabled,this._client),__webpack_require__(227).enable(isEnabled,this._client))},AutoCollectHttpDependencies.prototype.isInitialized=function(){return this._isInitialized},AutoCollectHttpDependencies.prototype._initialize=function(){var _this=this;this._isInitialized=!0;http.get;var originalRequest=http.request,originalHttpsRequest=https.request,clientRequestPatch=function(request,options){var shouldCollect=!options[AutoCollectHttpDependencies.disableCollectionRequestOption]&&!request[AutoCollectHttpDependencies.alreadyAutoCollectedFlag];request[AutoCollectHttpDependencies.alreadyAutoCollectedFlag]=!0,request&&options&&shouldCollect&&(CorrelationContextManager_1.CorrelationContextManager.wrapEmitter(request),AutoCollectHttpDependencies.trackRequest(_this._client,{options:options,request:request}))};http.request=function(options){for(var requestArgs=[],_i=1;_i<arguments.length;_i++)requestArgs[_i-1]=arguments[_i];var request=originalRequest.call.apply(originalRequest,[http,options].concat(requestArgs));return clientRequestPatch(request,options),request},https.request=function(options){for(var requestArgs=[],_i=1;_i<arguments.length;_i++)requestArgs[_i-1]=arguments[_i];var request=originalHttpsRequest.call.apply(originalHttpsRequest,[https,options].concat(requestArgs));return clientRequestPatch(request,options),request},http.get=function(options){for(var requestArgs=[],_i=1;_i<arguments.length;_i++)requestArgs[_i-1]=arguments[_i];var _a,request=(_a=http.request).call.apply(_a,[http,options].concat(requestArgs));return request.end(),request},https.get=function(options){for(var requestArgs=[],_i=1;_i<arguments.length;_i++)requestArgs[_i-1]=arguments[_i];var _a,request=(_a=https.request).call.apply(_a,[https,options].concat(requestArgs));return request.end(),request}},AutoCollectHttpDependencies.trackRequest=function(client,telemetry){if(telemetry.options&&telemetry.request&&client){var uniqueRequestId,uniqueTraceparent,requestParser=new HttpDependencyParser(telemetry.options,telemetry.request),currentContext=CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();if(currentContext&&currentContext.operation&&currentContext.operation.traceparent&&Traceparent.isValidTraceId(currentContext.operation.traceparent.traceId))currentContext.operation.traceparent.updateSpanId(),uniqueRequestId=currentContext.operation.traceparent.getBackCompatRequestId();else if(CorrelationIdManager.w3cEnabled){uniqueTraceparent=(traceparent=new Traceparent).toString(),uniqueRequestId=traceparent.getBackCompatRequestId()}else uniqueRequestId=currentContext&&currentContext.operation&&currentContext.operation.parentId+AutoCollectHttpDependencies.requestNumber+++".";if(Util.canIncludeCorrelationHeader(client,requestParser.getUrl())&&telemetry.request.getHeader&&telemetry.request.setHeader&&client.config&&client.config.correlationId){var correlationHeader=telemetry.request.getHeader(RequestResponseHeaders.requestContextHeader);try{Util.safeIncludeCorrelationHeader(client,telemetry.request,correlationHeader)}catch(err){Logging.warn("Request-Context header could not be set. Correlation of requests may be lost",err)}if(currentContext&&currentContext.operation)try{if(telemetry.request.setHeader(RequestResponseHeaders.requestIdHeader,uniqueRequestId),telemetry.request.setHeader(RequestResponseHeaders.parentIdHeader,currentContext.operation.id),telemetry.request.setHeader(RequestResponseHeaders.rootIdHeader,uniqueRequestId),uniqueTraceparent||currentContext.operation.traceparent)telemetry.request.setHeader(RequestResponseHeaders.traceparentHeader,uniqueTraceparent||currentContext.operation.traceparent.toString());else if(CorrelationIdManager.w3cEnabled){var traceparent=(new Traceparent).toString();telemetry.request.setHeader(RequestResponseHeaders.traceparentHeader,traceparent)}if(currentContext.operation.tracestate){var tracestate=currentContext.operation.tracestate.toString();tracestate&&telemetry.request.setHeader(RequestResponseHeaders.traceStateHeader,tracestate)}var correlationContextHeader=currentContext.customProperties.serializeToHeader();correlationContextHeader&&telemetry.request.setHeader(RequestResponseHeaders.correlationContextHeader,correlationContextHeader)}catch(err){Logging.warn("Correlation headers could not be set. Correlation of requests may be lost.",err)}}telemetry.request.on&&(telemetry.request.on("response",(function(response){requestParser.onResponse(response);var dependencyTelemetry=requestParser.getDependencyTelemetry(telemetry,uniqueRequestId);dependencyTelemetry.contextObjects=dependencyTelemetry.contextObjects||{},dependencyTelemetry.contextObjects["http.RequestOptions"]=telemetry.options,dependencyTelemetry.contextObjects["http.ClientRequest"]=telemetry.request,dependencyTelemetry.contextObjects["http.ClientResponse"]=response,client.trackDependency(dependencyTelemetry)})),telemetry.request.on("error",(function(e){requestParser.onError(e);var dependencyTelemetry=requestParser.getDependencyTelemetry(telemetry,uniqueRequestId);dependencyTelemetry.contextObjects=dependencyTelemetry.contextObjects||{},dependencyTelemetry.contextObjects["http.RequestOptions"]=telemetry.options,dependencyTelemetry.contextObjects["http.ClientRequest"]=telemetry.request,dependencyTelemetry.contextObjects.Error=e,client.trackDependency(dependencyTelemetry)})))}else Logging.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!telemetry.options,!telemetry.request,!client)},AutoCollectHttpDependencies.prototype.dispose=function(){AutoCollectHttpDependencies.INSTANCE=null,this.enable(!1),this._isInitialized=!1},AutoCollectHttpDependencies.disableCollectionRequestOption="disableAppInsightsAutoCollection",AutoCollectHttpDependencies.requestNumber=1,AutoCollectHttpDependencies.alreadyAutoCollectedFlag="_appInsightsAutoCollected",AutoCollectHttpDependencies}();module.exports=AutoCollectHttpDependencies},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(92)(Object,"create");module.exports=nativeCreate},function(module,exports,__webpack_require__){var eq=__webpack_require__(68);module.exports=function(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}},function(module,exports,__webpack_require__){var isKeyable=__webpack_require__(298);module.exports=function(map,key){var data=map.__data__;return isKeyable(key)?data["string"==typeof key?"string":"hash"]:data.map}},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(96)),__export(__webpack_require__(97)),__export(__webpack_require__(64)),__export(__webpack_require__(117)),__export(__webpack_require__(118)),__export(__webpack_require__(119)),__export(__webpack_require__(120)),__export(__webpack_require__(121))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_languageserver_protocol_1=__webpack_require__(2);exports.InstallDepRequest=new vscode_languageserver_protocol_1.RequestType("DependencyInstaller/install"),exports.MissingModuleNotification="DependencyInstaller/missingModule",exports.DependeciesAreBeingInstalledNotification="DependencyInstaller/dependeciesAreBeingInstalledNotification",exports.ElectronNotSupportedNotification="DependencyInstaller/electronNotSupported"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const events_1=__webpack_require__(30),Is=__webpack_require__(24);let DefaultSize=8192,CR=Buffer.from("\r","ascii")[0],LF=Buffer.from("\n","ascii")[0],CRLF="\r\n";class MessageBuffer{constructor(encoding="utf8"){this.encoding=encoding,this.index=0,this.buffer=Buffer.allocUnsafe(DefaultSize)}append(chunk){var toAppend=chunk;if("string"==typeof chunk){var str=chunk,bufferLen=Buffer.byteLength(str,this.encoding);(toAppend=Buffer.allocUnsafe(bufferLen)).write(str,0,bufferLen,this.encoding)}if(this.buffer.length-this.index>=toAppend.length)toAppend.copy(this.buffer,this.index,0,toAppend.length);else{var newSize=(Math.ceil((this.index+toAppend.length)/DefaultSize)+1)*DefaultSize;0===this.index?(this.buffer=Buffer.allocUnsafe(newSize),toAppend.copy(this.buffer,0,0,toAppend.length)):this.buffer=Buffer.concat([this.buffer.slice(0,this.index),toAppend],newSize)}this.index+=toAppend.length}tryReadHeaders(){let result=void 0,current=0;for(;current+3<this.index&&(this.buffer[current]!==CR||this.buffer[current+1]!==LF||this.buffer[current+2]!==CR||this.buffer[current+3]!==LF);)current++;if(current+3>=this.index)return result;result=Object.create(null),this.buffer.toString("ascii",0,current).split(CRLF).forEach(header=>{let index=header.indexOf(":");if(-1===index)throw new Error("Message header must separate key and value using :");let key=header.substr(0,index),value=header.substr(index+1).trim();result[key]=value});let nextStart=current+4;return this.buffer=this.buffer.slice(nextStart),this.index=this.index-nextStart,result}tryReadContent(length){if(this.index<length)return null;let result=this.buffer.toString(this.encoding,0,length),nextStart=length;return this.buffer.copy(this.buffer,0,nextStart),this.index=this.index-nextStart,result}get numberOfBytes(){return this.index}}!function(MessageReader){MessageReader.is=function(value){let candidate=value;return candidate&&Is.func(candidate.listen)&&Is.func(candidate.dispose)&&Is.func(candidate.onError)&&Is.func(candidate.onClose)&&Is.func(candidate.onPartialMessage)}}(exports.MessageReader||(exports.MessageReader={}));class AbstractMessageReader{constructor(){this.errorEmitter=new events_1.Emitter,this.closeEmitter=new events_1.Emitter,this.partialMessageEmitter=new events_1.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(error){this.errorEmitter.fire(this.asError(error))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(info){this.partialMessageEmitter.fire(info)}asError(error){return error instanceof Error?error:new Error(`Reader recevied error. Reason: ${Is.string(error.message)?error.message:"unknown"}`)}}exports.AbstractMessageReader=AbstractMessageReader;class StreamMessageReader extends AbstractMessageReader{constructor(readable,encoding="utf8"){super(),this.readable=readable,this.buffer=new MessageBuffer(encoding),this._partialMessageTimeout=1e4}set partialMessageTimeout(timeout){this._partialMessageTimeout=timeout}get partialMessageTimeout(){return this._partialMessageTimeout}listen(callback){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=callback,this.readable.on("data",data=>{this.onData(data)}),this.readable.on("error",error=>this.fireError(error)),this.readable.on("close",()=>this.fireClose())}onData(data){for(this.buffer.append(data);;){if(-1===this.nextMessageLength){let headers=this.buffer.tryReadHeaders();if(!headers)return;let contentLength=headers["Content-Length"];if(!contentLength)throw new Error("Header must provide a Content-Length property.");let length=parseInt(contentLength);if(isNaN(length))throw new Error("Content-Length value must be a number.");this.nextMessageLength=length}var msg=this.buffer.tryReadContent(this.nextMessageLength);if(null===msg)return void this.setPartialMessageTimer();this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.messageToken++;var json=JSON.parse(msg);this.callback(json)}}clearPartialMessageTimer(){this.partialMessageTimer&&(clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=setTimeout((token,timeout)=>{this.partialMessageTimer=void 0,token===this.messageToken&&(this.firePartialMessage({messageToken:token,waitingTime:timeout}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}exports.StreamMessageReader=StreamMessageReader;exports.IPCMessageReader=class IPCMessageReader extends AbstractMessageReader{constructor(process){super(),this.process=process;let eventEmitter=this.process;eventEmitter.on("error",error=>this.fireError(error)),eventEmitter.on("close",()=>this.fireClose())}listen(callback){this.process.on("message",callback)}};exports.SocketMessageReader=class SocketMessageReader extends StreamMessageReader{constructor(socket,encoding="utf-8"){super(socket,encoding)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const events_1=__webpack_require__(30),Is=__webpack_require__(24);let ContentLength="Content-Length: ",CRLF="\r\n";!function(MessageWriter){MessageWriter.is=function(value){let candidate=value;return candidate&&Is.func(candidate.dispose)&&Is.func(candidate.onClose)&&Is.func(candidate.onError)&&Is.func(candidate.write)}}(exports.MessageWriter||(exports.MessageWriter={}));class AbstractMessageWriter{constructor(){this.errorEmitter=new events_1.Emitter,this.closeEmitter=new events_1.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(error,message,count){this.errorEmitter.fire([this.asError(error),message,count])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(error){return error instanceof Error?error:new Error(`Writer recevied error. Reason: ${Is.string(error.message)?error.message:"unknown"}`)}}exports.AbstractMessageWriter=AbstractMessageWriter;exports.StreamMessageWriter=class StreamMessageWriter extends AbstractMessageWriter{constructor(writable,encoding="utf8"){super(),this.writable=writable,this.encoding=encoding,this.errorCount=0,this.writable.on("error",error=>this.fireError(error)),this.writable.on("close",()=>this.fireClose())}write(msg){let json=JSON.stringify(msg),contentLength=Buffer.byteLength(json,this.encoding),headers=[ContentLength,contentLength.toString(),CRLF,CRLF];try{this.writable.write(headers.join(""),"ascii"),this.writable.write(json,this.encoding),this.errorCount=0}catch(error){this.errorCount++,this.fireError(error,msg,this.errorCount)}}};exports.IPCMessageWriter=class IPCMessageWriter extends AbstractMessageWriter{constructor(process){super(),this.process=process,this.errorCount=0,this.queue=[],this.sending=!1;let eventEmitter=this.process;eventEmitter.on("error",error=>this.fireError(error)),eventEmitter.on("close",()=>this.fireClose)}write(msg){this.sending||0!==this.queue.length?this.queue.push(msg):this.doWriteMessage(msg)}doWriteMessage(msg){try{this.process.send&&(this.sending=!0,this.process.send(msg,void 0,void 0,error=>{this.sending=!1,error?(this.errorCount++,this.fireError(error,msg,this.errorCount)):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())}))}catch(error){this.errorCount++,this.fireError(error,msg,this.errorCount)}}};exports.SocketMessageWriter=class SocketMessageWriter extends AbstractMessageWriter{constructor(socket,encoding="utf8"){super(),this.socket=socket,this.queue=[],this.sending=!1,this.encoding=encoding,this.errorCount=0,this.socket.on("error",error=>this.fireError(error)),this.socket.on("close",()=>this.fireClose())}write(msg){this.sending||0!==this.queue.length?this.queue.push(msg):this.doWriteMessage(msg)}doWriteMessage(msg){let json=JSON.stringify(msg),contentLength=Buffer.byteLength(json,this.encoding),headers=[ContentLength,contentLength.toString(),CRLF,CRLF];try{this.sending=!0,this.socket.write(headers.join(""),"ascii",error=>{error&&this.handleError(error,msg);try{this.socket.write(json,this.encoding,error=>{this.sending=!1,error?this.handleError(error,msg):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())})}catch(error){this.handleError(error,msg)}})}catch(error){this.handleError(error,msg)}}handleError(error,msg){this.errorCount++,this.fireError(error,msg,this.errorCount)}}},function(module,exports){module.exports=require("net")},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(48).Symbol;module.exports=Symbol},function(module,exports,__webpack_require__){var freeGlobal=__webpack_require__(127),freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();module.exports=root},function(module,exports){var isArray=Array.isArray;module.exports=isArray},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(TokenTypes){TokenTypes.WHITESPACE="whitespace",TokenTypes.WORD="word",TokenTypes.STRING="string",TokenTypes.RESERVED="reserved",TokenTypes.RESERVED_TOPLEVEL="reserved-toplevel",TokenTypes.RESERVED_NEWLINE="reserved-newline",TokenTypes.OPERATOR="operator",TokenTypes.QUERY_SEPARATOR="query-separator",TokenTypes.OPEN_PAREN="open-paren",TokenTypes.CLOSE_PAREN="close-paren",TokenTypes.LINE_COMMENT="line-comment",TokenTypes.BLOCK_COMMENT="block-comment",TokenTypes.NUMBER="number",TokenTypes.PLACEHOLDER="placeholder",TokenTypes.SERVERVARIABLE="servervariable",TokenTypes.TABLENAME_PREFIX="tablename-prefix",TokenTypes.TABLENAME="tablename"}(exports.TokenTypes||(exports.TokenTypes={}))},function(module,exports,__webpack_require__){"use strict";if(Object.defineProperty(exports,"__esModule",{value:!0}),exports.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL,exports.IsInitialized){var publishers=__webpack_require__(170),unpatchedModules=(process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"").split(","),modules={bunyan:publishers.bunyan,console:publishers.console,mongodb:publishers.mongodb,mongodbCore:publishers.mongodbCore,mysql:publishers.mysql,redis:publishers.redis,pg:publishers.pg,pgPool:publishers.pgPool,winston:publishers.winston};for(var mod in modules)-1===unpatchedModules.indexOf(mod)&&modules[mod].enable()}exports.registerContextPreservation=function(cb){exports.IsInitialized&&__webpack_require__(4).channel.addContextPreservation(cb)}},function(module,exports){module.exports=require("assert")},function(module,exports,__webpack_require__){"use strict";var shimmer=__webpack_require__(54),wrap=shimmer.wrap,unwrap=shimmer.unwrap,SYMBOL="wrap@before";function defineProperty(obj,name,value){var enumerable=!!obj[name]&&obj.propertyIsEnumerable(name);Object.defineProperty(obj,name,{configurable:!0,enumerable:enumerable,writable:!0,value:value})}function _listeners(self,event){var listeners;return listeners=self._events&&self._events[event],Array.isArray(listeners)||(listeners=listeners?[listeners]:[]),listeners}function _findAndProcess(self,event,before){var unprocessed=_listeners(self,event).filter((function(fn){return-1===before.indexOf(fn)}));unprocessed.length>0&&function(self,listeners){for(var l=listeners.length,p=0;p<l;p++){var listener=listeners[p],before=self[SYMBOL];if("function"==typeof before)before(listener);else if(Array.isArray(before))for(var length=before.length,i=0;i<length;i++)before[i](listener)}}(self,unprocessed)}function _wrap(unwrapped,visit){if(unwrapped){var wrapped=unwrapped;if("function"==typeof unwrapped)wrapped=visit(unwrapped);else if(Array.isArray(unwrapped)){wrapped=[];for(var i=0;i<unwrapped.length;i++)wrapped[i]=visit(unwrapped[i])}return wrapped}}module.exports=function(emitter,onAddListener,onEmit){if(!(emitter&&emitter.on&&emitter.addListener&&emitter.removeListener&&emitter.emit))throw new Error("can only wrap real EEs");if(!onAddListener)throw new Error("must have function to run on listener addition");if(!onEmit)throw new Error("must have function to wrap listeners when emitting");function adding(on){return function(event,listener){var existing=_listeners(this,event).slice();try{var returned=on.call(this,event,listener);return _findAndProcess(this,event,existing),returned}finally{this.on.__wrapped||wrap(this,"on",adding),this.addListener.__wrapped||wrap(this,"addListener",adding)}}}emitter[SYMBOL]?"function"==typeof emitter[SYMBOL]?defineProperty(emitter,SYMBOL,[emitter[SYMBOL],onAddListener]):Array.isArray(emitter[SYMBOL])&&emitter[SYMBOL].push(onAddListener):defineProperty(emitter,SYMBOL,onAddListener),emitter.__wrapped||(wrap(emitter,"addListener",adding),wrap(emitter,"on",adding),wrap(emitter,"emit",(function(emit){return function(event){if(!this._events||!this._events[event])return emit.apply(this,arguments);var unwrapped=this._events[event];function remover(removeListener){return function(){this._events[event]=unwrapped;try{return removeListener.apply(this,arguments)}finally{unwrapped=this._events[event],this._events[event]=_wrap(unwrapped,onEmit)}}}wrap(this,"removeListener",remover);try{return this._events[event]=_wrap(unwrapped,onEmit),emit.apply(this,arguments)}finally{unwrap(this,"removeListener"),this._events[event]=unwrapped}}})),defineProperty(emitter,"__unwrap",(function(){unwrap(emitter,"addListener"),unwrap(emitter,"on"),unwrap(emitter,"emit"),delete emitter[SYMBOL],delete emitter.__wrapped})),defineProperty(emitter,"__wrapped",!0))}},function(module,exports,__webpack_require__){"use strict";function isFunction(funktion){return"function"==typeof funktion}var logger=console.error.bind(console);function defineProperty(obj,name,value){var enumerable=!!obj[name]&&obj.propertyIsEnumerable(name);Object.defineProperty(obj,name,{configurable:!0,enumerable:enumerable,writable:!0,value:value})}function shimmer(options){options&&options.logger&&(isFunction(options.logger)?logger=options.logger:logger("new logger isn't a function, not replacing"))}function wrap(nodule,name,wrapper){if(nodule&&nodule[name]){if(!wrapper)return logger("no wrapper function"),void logger((new Error).stack);if(isFunction(nodule[name])&&isFunction(wrapper)){var original=nodule[name],wrapped=wrapper(original,name);return defineProperty(wrapped,"__original",original),defineProperty(wrapped,"__unwrap",(function(){nodule[name]===wrapped&&defineProperty(nodule,name,original)})),defineProperty(wrapped,"__wrapped",!0),defineProperty(nodule,name,wrapped),wrapped}logger("original object and wrapper must be functions")}else logger("no original function "+name+" to wrap")}function unwrap(nodule,name){return nodule&&nodule[name]?nodule[name].__unwrap?nodule[name].__unwrap():void logger("no original to unwrap to -- has "+name+" already been unwrapped?"):(logger("no function to unwrap."),void logger((new Error).stack))}shimmer.wrap=wrap,shimmer.massWrap=function(nodules,names,wrapper){if(!nodules)return logger("must provide one or more modules to patch"),void logger((new Error).stack);Array.isArray(nodules)||(nodules=[nodules]),names&&Array.isArray(names)?nodules.forEach((function(nodule){names.forEach((function(name){wrap(nodule,name,wrapper)}))})):logger("must provide one or more functions to wrap on modules")},shimmer.unwrap=unwrap,shimmer.massUnwrap=function(nodules,names){if(!nodules)return logger("must provide one or more modules to patch"),void logger((new Error).stack);Array.isArray(nodules)||(nodules=[nodules]),names&&Array.isArray(names)?nodules.forEach((function(nodule){names.forEach((function(name){unwrap(nodule,name)}))})):logger("must provide one or more functions to unwrap on modules")},module.exports=shimmer},function(module,exports,__webpack_require__){"use strict";var os=__webpack_require__(20),Constants=__webpack_require__(27),AutoCollectPerformance=function(){function AutoCollectPerformance(client,collectionInterval,enableLiveMetricsCounters){void 0===collectionInterval&&(collectionInterval=6e4),void 0===enableLiveMetricsCounters&&(enableLiveMetricsCounters=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,AutoCollectPerformance.INSTANCE||(AutoCollectPerformance.INSTANCE=this),this._isInitialized=!1,this._client=client,this._collectionInterval=collectionInterval,this._enableLiveMetricsCounters=enableLiveMetricsCounters}return AutoCollectPerformance.prototype.enable=function(isEnabled,collectionInterval){var _this=this;this._isEnabled=isEnabled,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),isEnabled?this._handle||(this._lastCpus=os.cpus(),this._lastRequests={totalRequestCount:AutoCollectPerformance._totalRequestCount,totalFailedRequestCount:AutoCollectPerformance._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:AutoCollectPerformance._totalDependencyCount,totalFailedDependencyCount:AutoCollectPerformance._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:AutoCollectPerformance._totalExceptionCount,time:+new Date},"function"==typeof process.cpuUsage&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=collectionInterval||this._collectionInterval,this._handle=setInterval((function(){return _this.trackPerformance()}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},AutoCollectPerformance.countRequest=function(duration,success){var durationMs;if(AutoCollectPerformance.isEnabled()){if("string"==typeof duration)durationMs=+new Date("1970-01-01T"+duration+"Z");else{if("number"!=typeof duration)return;durationMs=duration}AutoCollectPerformance._intervalRequestExecutionTime+=durationMs,!1===success&&AutoCollectPerformance._totalFailedRequestCount++,AutoCollectPerformance._totalRequestCount++}},AutoCollectPerformance.countException=function(){AutoCollectPerformance._totalExceptionCount++},AutoCollectPerformance.countDependency=function(duration,success){var durationMs;if(AutoCollectPerformance.isEnabled()){if("string"==typeof duration)durationMs=+new Date("1970-01-01T"+duration+"Z");else{if("number"!=typeof duration)return;durationMs=duration}AutoCollectPerformance._intervalDependencyExecutionTime+=durationMs,!1===success&&AutoCollectPerformance._totalFailedDependencyCount++,AutoCollectPerformance._totalDependencyCount++}},AutoCollectPerformance.prototype.isInitialized=function(){return this._isInitialized},AutoCollectPerformance.isEnabled=function(){return AutoCollectPerformance.INSTANCE&&AutoCollectPerformance.INSTANCE._isEnabled},AutoCollectPerformance.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},AutoCollectPerformance.prototype._trackCpu=function(){var cpus=os.cpus();if(cpus&&cpus.length&&this._lastCpus&&cpus.length===this._lastCpus.length){for(var totalUser=0,totalSys=0,totalNice=0,totalIdle=0,totalIrq=0,i=0;cpus&&i<cpus.length;i++){var cpu=cpus[i],lastCpu=this._lastCpus[i],times=(cpu.model,cpu.speed,cpu.times),lastTimes=lastCpu.times;totalUser+=times.user-lastTimes.user||0,totalSys+=times.sys-lastTimes.sys||0,totalNice+=times.nice-lastTimes.nice||0,totalIdle+=times.idle-lastTimes.idle||0,totalIrq+=times.irq-lastTimes.irq||0}var appCpuPercent=void 0;if("function"==typeof process.cpuUsage){var appCpuUsage=process.cpuUsage(),hrtime=process.hrtime(),totalApp=appCpuUsage.user-this._lastAppCpuUsage.user+(appCpuUsage.system-this._lastAppCpuUsage.system)||0;if(void 0!==this._lastHrtime&&2===this._lastHrtime.length)appCpuPercent=100*totalApp/((1e6*(hrtime[0]-this._lastHrtime[0])+(hrtime[1]-this._lastHrtime[1])/1e3||0)*cpus.length);this._lastAppCpuUsage=appCpuUsage,this._lastHrtime=hrtime}var combinedTotal=totalUser+totalSys+totalNice+totalIdle+totalIrq||1;this._client.trackMetric({name:Constants.PerformanceCounter.PROCESSOR_TIME,value:(combinedTotal-totalIdle)/combinedTotal*100}),this._client.trackMetric({name:Constants.PerformanceCounter.PROCESS_TIME,value:appCpuPercent||totalUser/combinedTotal*100})}this._lastCpus=cpus},AutoCollectPerformance.prototype._trackMemory=function(){var freeMem=os.freemem(),usedMem=process.memoryUsage().rss,committedMemory=os.totalmem()-freeMem;this._client.trackMetric({name:Constants.PerformanceCounter.PRIVATE_BYTES,value:usedMem}),this._client.trackMetric({name:Constants.PerformanceCounter.AVAILABLE_BYTES,value:freeMem}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:Constants.QuickPulseCounter.COMMITTED_BYTES,value:committedMemory})},AutoCollectPerformance.prototype._trackNetwork=function(){var lastRequests=this._lastRequests,requests={totalRequestCount:AutoCollectPerformance._totalRequestCount,totalFailedRequestCount:AutoCollectPerformance._totalFailedRequestCount,time:+new Date},intervalRequests=requests.totalRequestCount-lastRequests.totalRequestCount||0,intervalFailedRequests=requests.totalFailedRequestCount-lastRequests.totalFailedRequestCount||0,elapsedMs=requests.time-lastRequests.time,elapsedSeconds=elapsedMs/1e3,averageRequestExecutionTime=(AutoCollectPerformance._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/intervalRequests||0;if(this._lastIntervalRequestExecutionTime=AutoCollectPerformance._intervalRequestExecutionTime,elapsedMs>0){var requestsPerSec=intervalRequests/elapsedSeconds,failedRequestsPerSec=intervalFailedRequests/elapsedSeconds;this._client.trackMetric({name:Constants.PerformanceCounter.REQUEST_RATE,value:requestsPerSec}),(!this._enableLiveMetricsCounters||intervalRequests>0)&&this._client.trackMetric({name:Constants.PerformanceCounter.REQUEST_DURATION,value:averageRequestExecutionTime}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:Constants.QuickPulseCounter.REQUEST_FAILURE_RATE,value:failedRequestsPerSec})}this._lastRequests=requests},AutoCollectPerformance.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var lastDependencies=this._lastDependencies,dependencies={totalDependencyCount:AutoCollectPerformance._totalDependencyCount,totalFailedDependencyCount:AutoCollectPerformance._totalFailedDependencyCount,time:+new Date},intervalDependencies=dependencies.totalDependencyCount-lastDependencies.totalDependencyCount||0,intervalFailedDependencies=dependencies.totalFailedDependencyCount-lastDependencies.totalFailedDependencyCount||0,elapsedMs=dependencies.time-lastDependencies.time,elapsedSeconds=elapsedMs/1e3,averageDependencyExecutionTime=(AutoCollectPerformance._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/intervalDependencies||0;if(this._lastIntervalDependencyExecutionTime=AutoCollectPerformance._intervalDependencyExecutionTime,elapsedMs>0){var dependenciesPerSec=intervalDependencies/elapsedSeconds,failedDependenciesPerSec=intervalFailedDependencies/elapsedSeconds;this._client.trackMetric({name:Constants.QuickPulseCounter.DEPENDENCY_RATE,value:dependenciesPerSec}),this._client.trackMetric({name:Constants.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:failedDependenciesPerSec}),(!this._enableLiveMetricsCounters||intervalDependencies>0)&&this._client.trackMetric({name:Constants.QuickPulseCounter.DEPENDENCY_DURATION,value:averageDependencyExecutionTime})}this._lastDependencies=dependencies}},AutoCollectPerformance.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var lastExceptions=this._lastExceptions,exceptions={totalExceptionCount:AutoCollectPerformance._totalExceptionCount,time:+new Date},intervalExceptions=exceptions.totalExceptionCount-lastExceptions.totalExceptionCount||0,elapsedMs=exceptions.time-lastExceptions.time;if(elapsedMs>0){var exceptionsPerSec=intervalExceptions/(elapsedMs/1e3);this._client.trackMetric({name:Constants.QuickPulseCounter.EXCEPTION_RATE,value:exceptionsPerSec})}this._lastExceptions=exceptions}},AutoCollectPerformance.prototype.dispose=function(){AutoCollectPerformance.INSTANCE=null,this.enable(!1),this._isInitialized=!1},AutoCollectPerformance._totalRequestCount=0,AutoCollectPerformance._totalFailedRequestCount=0,AutoCollectPerformance._lastRequestExecutionTime=0,AutoCollectPerformance._totalDependencyCount=0,AutoCollectPerformance._totalFailedDependencyCount=0,AutoCollectPerformance._lastDependencyExecutionTime=0,AutoCollectPerformance._totalExceptionCount=0,AutoCollectPerformance._intervalDependencyExecutionTime=0,AutoCollectPerformance._intervalRequestExecutionTime=0,AutoCollectPerformance}();module.exports=AutoCollectPerformance},function(module,exports,__webpack_require__){"use strict";var CorrelationIdManager=__webpack_require__(22),ConnectionStringParser=__webpack_require__(231),Constants=__webpack_require__(27),url=__webpack_require__(21),Config=function(){function Config(setupString){var _this=this;this.endpointBase=Constants.DEFAULT_BREEZE_ENDPOINT;var connectionStringEnv=process.env[Config.ENV_connectionString],csCode=ConnectionStringParser.parse(setupString),csEnv=ConnectionStringParser.parse(connectionStringEnv),iKeyCode=!csCode.instrumentationkey&&Object.keys(csCode).length>0?null:setupString;this.instrumentationKey=csCode.instrumentationkey||iKeyCode||csEnv.instrumentationkey||Config._getInstrumentationKey(),this.endpointUrl=(csCode.ingestionendpoint||csEnv.ingestionendpoint||this.endpointBase)+"/v2/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=3e4,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net"],this.setCorrelationId=function(correlationId){return _this.correlationId=correlationId},this.profileQueryEndpoint=csCode.ingestionendpoint||csEnv.ingestionendpoint||process.env[Config.ENV_profileQueryEndpoint]||this.endpointBase,this.proxyHttpUrl=process.env[Config.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[Config.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this._quickPulseHost=csCode.liveendpoint||csEnv.liveendpoint||process.env[Config.ENV_quickPulseHost]||Constants.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=url.parse(this._quickPulseHost).host)}return Object.defineProperty(Config.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(endpoint){CorrelationIdManager.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=endpoint,this.correlationId=CorrelationIdManager.correlationIdPrefix,CorrelationIdManager.queryCorrelationId(this,this.setCorrelationId)},enumerable:!0,configurable:!0}),Object.defineProperty(Config.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(host){this._quickPulseHost=host},enumerable:!0,configurable:!0}),Config._getInstrumentationKey=function(){var iKey=process.env[Config.ENV_iKey]||process.env[Config.ENV_azurePrefix+Config.ENV_iKey]||process.env[Config.legacy_ENV_iKey]||process.env[Config.ENV_azurePrefix+Config.legacy_ENV_iKey];if(!iKey||""==iKey)throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return iKey},Config.ENV_azurePrefix="APPSETTING_",Config.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",Config.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",Config.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",Config.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",Config.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",Config.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",Config.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",Config.ENV_http_proxy="http_proxy",Config.ENV_https_proxy="https_proxy",Config}();module.exports=Config},function(module,exports,__webpack_require__){"use strict";var os=__webpack_require__(20),fs=__webpack_require__(11),path=__webpack_require__(5),Contracts=__webpack_require__(7),Logging=__webpack_require__(6),Context=function(){function Context(packageJsonPath){this.keys=new Contracts.ContextTagKeys,this.tags={},this._loadApplicationContext(),this._loadDeviceContext(),this._loadInternalContext()}return Context.prototype._loadApplicationContext=function(packageJsonPath){if(packageJsonPath=packageJsonPath||path.resolve(__dirname,"../../../../package.json"),!Context.appVersion[packageJsonPath]){Context.appVersion[packageJsonPath]="unknown";try{var packageJson=JSON.parse(fs.readFileSync(packageJsonPath,"utf8"));packageJson&&"string"==typeof packageJson.version&&(Context.appVersion[packageJsonPath]=packageJson.version)}catch(exception){Logging.info("unable to read app version: ",exception)}}this.tags[this.keys.applicationVersion]=Context.appVersion[packageJsonPath]},Context.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=os&&os.hostname(),this.tags[this.keys.deviceOSVersion]=os&&os.type()+" "+os.release(),this.tags[this.keys.cloudRole]=Context.DefaultRoleName,this.tags["ai.device.osArchitecture"]=os&&os.arch(),this.tags["ai.device.osPlatform"]=os&&os.platform()},Context.prototype._loadInternalContext=function(){var packageJsonPath=path.resolve(__dirname,"../../package.json");if(!Context.sdkVersion){Context.sdkVersion="unknown";try{var packageJson=JSON.parse(fs.readFileSync(packageJsonPath,"utf8"));packageJson&&"string"==typeof packageJson.version&&(Context.sdkVersion=packageJson.version)}catch(exception){Logging.info("unable to read app version: ",exception)}}this.tags[this.keys.internalSdkVersion]="node:"+Context.sdkVersion},Context.DefaultRoleName="Web",Context.appVersion={},Context.sdkVersion=null,Context}();module.exports=Context},function(module,exports){module.exports=require("console")},function(module,exports){module.exports=require("stream")},function(module,exports){module.exports=require("crypto")},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_languageserver_protocol_1=__webpack_require__(2);exports.Event=vscode_languageserver_protocol_1.Event;const configuration_1=__webpack_require__(113),workspaceFolders_1=__webpack_require__(114),Is=__webpack_require__(62),UUID=__webpack_require__(115);!function(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(2));const fm=__webpack_require__(116);!function(Files){Files.uriToFilePath=fm.uriToFilePath,Files.resolveGlobalNodePath=fm.resolveGlobalNodePath,Files.resolveGlobalYarnPath=fm.resolveGlobalYarnPath,Files.resolve=fm.resolve,Files.resolveModule=fm.resolveModule,Files.resolveModule2=fm.resolveModule2,Files.resolveModulePath=fm.resolveModulePath}(exports.Files||(exports.Files={}));let shutdownReceived=!1,exitTimer=void 0;function null2Undefined(value){if(null!==value)return value}!function(){function runTimer(value){try{let processId=parseInt(value);isNaN(processId)||(exitTimer=setInterval(()=>{try{process.kill(processId,0)}catch(ex){process.exit(shutdownReceived?0:1)}},3e3))}catch(e){}}for(let i=2;i<process.argv.length;i++){let arg=process.argv[i];if("--clientProcessId"===arg&&i+1<process.argv.length)return void runTimer(process.argv[i+1]);{let args=arg.split("=");"--clientProcessId"===args[0]&&runTimer(args[1])}}}();exports.TextDocuments=class TextDocuments{constructor(){this._documents=Object.create(null),this._onDidChangeContent=new vscode_languageserver_protocol_1.Emitter,this._onDidOpen=new vscode_languageserver_protocol_1.Emitter,this._onDidClose=new vscode_languageserver_protocol_1.Emitter,this._onDidSave=new vscode_languageserver_protocol_1.Emitter,this._onWillSave=new vscode_languageserver_protocol_1.Emitter}get syncKind(){return vscode_languageserver_protocol_1.TextDocumentSyncKind.Full}get onDidChangeContent(){return this._onDidChangeContent.event}get onDidOpen(){return this._onDidOpen.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(handler){this._willSaveWaitUntil=handler}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(uri){return this._documents[uri]}all(){return Object.keys(this._documents).map(key=>this._documents[key])}keys(){return Object.keys(this._documents)}listen(connection){connection.__textDocumentSync=vscode_languageserver_protocol_1.TextDocumentSyncKind.Full,connection.onDidOpenTextDocument(event=>{let td=event.textDocument,document=vscode_languageserver_protocol_1.TextDocument.create(td.uri,td.languageId,td.version,td.text);this._documents[td.uri]=document;let toFire=Object.freeze({document:document});this._onDidOpen.fire(toFire),this._onDidChangeContent.fire(toFire)}),connection.onDidChangeTextDocument(event=>{let td=event.textDocument,changes=event.contentChanges,last=changes.length>0?changes[changes.length-1]:void 0;if(last){let document=this._documents[td.uri];if(document&&function(value){return Is.func(value.update)}(document)){if(null===td.version||void 0===td.version)throw new Error(`Received document change event for ${td.uri} without valid version identifier`);document.update(last,td.version),this._onDidChangeContent.fire(Object.freeze({document:document}))}}}),connection.onDidCloseTextDocument(event=>{let document=this._documents[event.textDocument.uri];document&&(delete this._documents[event.textDocument.uri],this._onDidClose.fire(Object.freeze({document:document})))}),connection.onWillSaveTextDocument(event=>{let document=this._documents[event.textDocument.uri];document&&this._onWillSave.fire(Object.freeze({document:document,reason:event.reason}))}),connection.onWillSaveTextDocumentWaitUntil((event,token)=>{let document=this._documents[event.textDocument.uri];return document&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:document,reason:event.reason}),token):[]}),connection.onDidSaveTextDocument(event=>{let document=this._documents[event.textDocument.uri];document&&this._onDidSave.fire(Object.freeze({document:document}))})}};exports.ErrorMessageTracker=class ErrorMessageTracker{constructor(){this._messages=Object.create(null)}add(message){let count=this._messages[message];count||(count=0),count++,this._messages[message]=count}sendErrors(connection){Object.keys(this._messages).forEach(message=>{connection.window.showErrorMessage(message)})}},function(BulkRegistration){BulkRegistration.create=function(){return new BulkRegistrationImpl}}(exports.BulkRegistration||(exports.BulkRegistration={}));class BulkRegistrationImpl{constructor(){this._registrations=[],this._registered=new Set}add(type,registerOptions){const method=Is.string(type)?type:type.method;if(this._registered.has(method))throw new Error(`${method} is already added to this registration`);const id=UUID.generateUuid();this._registrations.push({id:id,method:method,registerOptions:registerOptions||{}}),this._registered.add(method)}asRegistrationParams(){return{registrations:this._registrations}}}!function(BulkUnregistration){BulkUnregistration.create=function(){return new BulkUnregistrationImpl(void 0,[])}}(exports.BulkUnregistration||(exports.BulkUnregistration={}));class BulkUnregistrationImpl{constructor(_connection,unregistrations){this._connection=_connection,this._unregistrations=new Map,unregistrations.forEach(unregistration=>{this._unregistrations.set(unregistration.method,unregistration)})}get isAttached(){return!!this._connection}attach(connection){this._connection=connection}add(unregistration){this._unregistrations.set(unregistration.method,unregistration)}dispose(){let unregistrations=[];for(let unregistration of this._unregistrations.values())unregistrations.push(unregistration);let params={unregisterations:unregistrations};this._connection.sendRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type,params).then(void 0,_error=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(arg){const method=Is.string(arg)?arg:arg.method,unregistration=this._unregistrations.get(method);if(!unregistration)return!1;let params={unregisterations:[unregistration]};return this._connection.sendRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type,params).then(()=>{this._unregistrations.delete(method)},_error=>{this._connection.console.info(`Unregistering request handler for ${unregistration.id} failed.`)}),!0}}class ConnectionLogger{constructor(){}rawAttach(connection){this._rawConnection=connection}attach(connection){this._connection=connection}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(_capabilities){}initialize(_capabilities){}error(message){this.send(vscode_languageserver_protocol_1.MessageType.Error,message)}warn(message){this.send(vscode_languageserver_protocol_1.MessageType.Warning,message)}info(message){this.send(vscode_languageserver_protocol_1.MessageType.Info,message)}log(message){this.send(vscode_languageserver_protocol_1.MessageType.Log,message)}send(type,message){this._rawConnection&&this._rawConnection.sendNotification(vscode_languageserver_protocol_1.LogMessageNotification.type,{type:type,message:message})}}class RemoteWindowImpl{constructor(){}attach(connection){this._connection=connection}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(_capabilities){}fillServerCapabilities(_capabilities){}showErrorMessage(message,...actions){let params={type:vscode_languageserver_protocol_1.MessageType.Error,message:message,actions:actions};return this._connection.sendRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type,params).then(null2Undefined)}showWarningMessage(message,...actions){let params={type:vscode_languageserver_protocol_1.MessageType.Warning,message:message,actions:actions};return this._connection.sendRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type,params).then(null2Undefined)}showInformationMessage(message,...actions){let params={type:vscode_languageserver_protocol_1.MessageType.Info,message:message,actions:actions};return this._connection.sendRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type,params).then(null2Undefined)}}class RemoteClientImpl{attach(connection){this._connection=connection}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(_capabilities){}fillServerCapabilities(_capabilities){}register(typeOrRegistrations,registerOptionsOrType,registerOptions){return typeOrRegistrations instanceof BulkRegistrationImpl?this.registerMany(typeOrRegistrations):typeOrRegistrations instanceof BulkUnregistrationImpl?this.registerSingle1(typeOrRegistrations,registerOptionsOrType,registerOptions):this.registerSingle2(typeOrRegistrations,registerOptionsOrType)}registerSingle1(unregistration,type,registerOptions){const method=Is.string(type)?type:type.method,id=UUID.generateUuid();let params={registrations:[{id:id,method:method,registerOptions:registerOptions||{}}]};return unregistration.isAttached||unregistration.attach(this._connection),this._connection.sendRequest(vscode_languageserver_protocol_1.RegistrationRequest.type,params).then(_result=>(unregistration.add({id:id,method:method}),unregistration),_error=>(this.connection.console.info(`Registering request handler for ${method} failed.`),Promise.reject(_error)))}registerSingle2(type,registerOptions){const method=Is.string(type)?type:type.method,id=UUID.generateUuid();let params={registrations:[{id:id,method:method,registerOptions:registerOptions||{}}]};return this._connection.sendRequest(vscode_languageserver_protocol_1.RegistrationRequest.type,params).then(_result=>vscode_languageserver_protocol_1.Disposable.create(()=>{this.unregisterSingle(id,method)}),_error=>(this.connection.console.info(`Registering request handler for ${method} failed.`),Promise.reject(_error)))}unregisterSingle(id,method){let params={unregisterations:[{id:id,method:method}]};return this._connection.sendRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type,params).then(void 0,_error=>{this.connection.console.info(`Unregistering request handler for ${id} failed.`)})}registerMany(registrations){let params=registrations.asRegistrationParams();return this._connection.sendRequest(vscode_languageserver_protocol_1.RegistrationRequest.type,params).then(()=>new BulkUnregistrationImpl(this._connection,params.registrations.map(registration=>({id:registration.id,method:registration.method}))),_error=>(this.connection.console.info("Bulk registration failed."),Promise.reject(_error)))}}const RemoteWorkspaceImpl=workspaceFolders_1.WorkspaceFoldersFeature(configuration_1.ConfigurationFeature(class _RemoteWorkspaceImpl{constructor(){}attach(connection){this._connection=connection}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(_capabilities){}fillServerCapabilities(_capabilities){}applyEdit(paramOrEdit){let params=(value=paramOrEdit)&&value.edit?paramOrEdit:{edit:paramOrEdit};var value;return this._connection.sendRequest(vscode_languageserver_protocol_1.ApplyWorkspaceEditRequest.type,params)}}));class TracerImpl{constructor(){this._trace=vscode_languageserver_protocol_1.Trace.Off}attach(connection){this._connection=connection}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(_capabilities){}fillServerCapabilities(_capabilities){}set trace(value){this._trace=value}log(message,verbose){this._trace!==vscode_languageserver_protocol_1.Trace.Off&&this._connection.sendNotification(vscode_languageserver_protocol_1.LogTraceNotification.type,{message:message,verbose:this._trace===vscode_languageserver_protocol_1.Trace.Verbose?verbose:void 0})}}class TelemetryImpl{constructor(){}attach(connection){this._connection=connection}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(_capabilities){}fillServerCapabilities(_capabilities){}logEvent(data){this._connection.sendNotification(vscode_languageserver_protocol_1.TelemetryEventNotification.type,data)}}function combineConsoleFeatures(one,two){return function(Base){return two(one(Base))}}function combineTelemetryFeatures(one,two){return function(Base){return two(one(Base))}}function combineTracerFeatures(one,two){return function(Base){return two(one(Base))}}function combineClientFeatures(one,two){return function(Base){return two(one(Base))}}function combineWindowFeatures(one,two){return function(Base){return two(one(Base))}}function combineWorkspaceFeatures(one,two){return function(Base){return two(one(Base))}}exports.combineConsoleFeatures=combineConsoleFeatures,exports.combineTelemetryFeatures=combineTelemetryFeatures,exports.combineTracerFeatures=combineTracerFeatures,exports.combineClientFeatures=combineClientFeatures,exports.combineWindowFeatures=combineWindowFeatures,exports.combineWorkspaceFeatures=combineWorkspaceFeatures,exports.combineFeatures=function(one,two){function combine(one,two,func){return one&&two?func(one,two):one||two}return{__brand:"features",console:combine(one.console,two.console,combineConsoleFeatures),tracer:combine(one.tracer,two.tracer,combineTracerFeatures),telemetry:combine(one.telemetry,two.telemetry,combineTelemetryFeatures),client:combine(one.client,two.client,combineClientFeatures),window:combine(one.window,two.window,combineWindowFeatures),workspace:combine(one.workspace,two.workspace,combineWorkspaceFeatures)}},exports.createConnection=function(arg1,arg2,arg3,arg4){let factories,input,output,strategy;return void 0!==arg1&&"features"===arg1.__brand&&(factories=arg1,arg1=arg2,arg2=arg3,arg3=arg4),vscode_languageserver_protocol_1.ConnectionStrategy.is(arg1)?strategy=arg1:(input=arg1,output=arg2,strategy=arg3),function(input,output,strategy,factories){if(!input&&!output&&process.argv.length>2){let port=void 0,pipeName=void 0,argv=process.argv.slice(2);for(let i=0;i<argv.length;i++){let arg=argv[i];if("--node-ipc"===arg){input=new vscode_languageserver_protocol_1.IPCMessageReader(process),output=new vscode_languageserver_protocol_1.IPCMessageWriter(process);break}if("--stdio"===arg){input=process.stdin,output=process.stdout;break}if("--socket"===arg){port=parseInt(argv[i+1]);break}if("--pipe"===arg){pipeName=argv[i+1];break}var args=arg.split("=");if("--socket"===args[0]){port=parseInt(args[1]);break}if("--pipe"===args[0]){pipeName=args[1];break}}if(port){let transport=vscode_languageserver_protocol_1.createServerSocketTransport(port);input=transport[0],output=transport[1]}else if(pipeName){let transport=vscode_languageserver_protocol_1.createServerPipeTransport(pipeName);input=transport[0],output=transport[1]}}var commandLineMessage="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!input)throw new Error("Connection input stream is not set. "+commandLineMessage);if(!output)throw new Error("Connection output stream is not set. "+commandLineMessage);if(Is.func(input.read)&&Is.func(input.on)){let inputStream=input;inputStream.on("end",()=>{process.exit(shutdownReceived?0:1)}),inputStream.on("close",()=>{process.exit(shutdownReceived?0:1)})}const logger=factories&&factories.console?new(factories.console(ConnectionLogger)):new ConnectionLogger,connection=vscode_languageserver_protocol_1.createProtocolConnection(input,output,logger,strategy);logger.rawAttach(connection);const tracer=factories&&factories.tracer?new(factories.tracer(TracerImpl)):new TracerImpl,telemetry=factories&&factories.telemetry?new(factories.telemetry(TelemetryImpl)):new TelemetryImpl,client=factories&&factories.client?new(factories.client(RemoteClientImpl)):new RemoteClientImpl,remoteWindow=factories&&factories.window?new(factories.window(RemoteWindowImpl)):new RemoteWindowImpl,workspace=factories&&factories.workspace?new(factories.workspace(RemoteWorkspaceImpl)):new RemoteWorkspaceImpl,allRemotes=[logger,tracer,telemetry,client,remoteWindow,workspace];let shutdownHandler=void 0,initializeHandler=void 0,exitHandler=void 0,protocolConnection={listen:()=>connection.listen(),sendRequest:(type,...params)=>connection.sendRequest(Is.string(type)?type:type.method,...params),onRequest:(type,handler)=>connection.onRequest(type,handler),sendNotification:(type,param)=>{const method=Is.string(type)?type:type.method;1===arguments.length?connection.sendNotification(method):connection.sendNotification(method,param)},onNotification:(type,handler)=>connection.onNotification(type,handler),onInitialize:handler=>initializeHandler=handler,onInitialized:handler=>connection.onNotification(vscode_languageserver_protocol_1.InitializedNotification.type,handler),onShutdown:handler=>shutdownHandler=handler,onExit:handler=>exitHandler=handler,get console(){return logger},get telemetry(){return telemetry},get tracer(){return tracer},get client(){return client},get window(){return remoteWindow},get workspace(){return workspace},onDidChangeConfiguration:handler=>connection.onNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type,handler),onDidChangeWatchedFiles:handler=>connection.onNotification(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type,handler),__textDocumentSync:void 0,onDidOpenTextDocument:handler=>connection.onNotification(vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type,handler),onDidChangeTextDocument:handler=>connection.onNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type,handler),onDidCloseTextDocument:handler=>connection.onNotification(vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type,handler),onWillSaveTextDocument:handler=>connection.onNotification(vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type,handler),onWillSaveTextDocumentWaitUntil:handler=>connection.onRequest(vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type,handler),onDidSaveTextDocument:handler=>connection.onNotification(vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type,handler),sendDiagnostics:params=>connection.sendNotification(vscode_languageserver_protocol_1.PublishDiagnosticsNotification.type,params),onHover:handler=>connection.onRequest(vscode_languageserver_protocol_1.HoverRequest.type,handler),onCompletion:handler=>connection.onRequest(vscode_languageserver_protocol_1.CompletionRequest.type,handler),onCompletionResolve:handler=>connection.onRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type,handler),onSignatureHelp:handler=>connection.onRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type,handler),onDeclaration:handler=>connection.onRequest(vscode_languageserver_protocol_1.DeclarationRequest.type,handler),onDefinition:handler=>connection.onRequest(vscode_languageserver_protocol_1.DefinitionRequest.type,handler),onTypeDefinition:handler=>connection.onRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type,handler),onImplementation:handler=>connection.onRequest(vscode_languageserver_protocol_1.ImplementationRequest.type,handler),onReferences:handler=>connection.onRequest(vscode_languageserver_protocol_1.ReferencesRequest.type,handler),onDocumentHighlight:handler=>connection.onRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type,handler),onDocumentSymbol:handler=>connection.onRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type,handler),onWorkspaceSymbol:handler=>connection.onRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type,handler),onCodeAction:handler=>connection.onRequest(vscode_languageserver_protocol_1.CodeActionRequest.type,handler),onCodeLens:handler=>connection.onRequest(vscode_languageserver_protocol_1.CodeLensRequest.type,handler),onCodeLensResolve:handler=>connection.onRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type,handler),onDocumentFormatting:handler=>connection.onRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type,handler),onDocumentRangeFormatting:handler=>connection.onRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type,handler),onDocumentOnTypeFormatting:handler=>connection.onRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type,handler),onRenameRequest:handler=>connection.onRequest(vscode_languageserver_protocol_1.RenameRequest.type,handler),onPrepareRename:handler=>connection.onRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type,handler),onDocumentLinks:handler=>connection.onRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type,handler),onDocumentLinkResolve:handler=>connection.onRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type,handler),onDocumentColor:handler=>connection.onRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type,handler),onColorPresentation:handler=>connection.onRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type,handler),onFoldingRanges:handler=>connection.onRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type,handler),onExecuteCommand:handler=>connection.onRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type,handler),dispose:()=>connection.dispose()};for(let remote of allRemotes)remote.attach(protocolConnection);return connection.onRequest(vscode_languageserver_protocol_1.InitializeRequest.type,params=>{const processId=params.processId;Is.number(processId)&&void 0===exitTimer&&setInterval(()=>{try{process.kill(processId,0)}catch(ex){process.exit(shutdownReceived?0:1)}},3e3),Is.string(params.trace)&&(tracer.trace=vscode_languageserver_protocol_1.Trace.fromString(params.trace));for(let remote of allRemotes)remote.initialize(params.capabilities);if(initializeHandler){return function(value){return Is.thenable(value)?value:Promise.resolve(value)}(initializeHandler(params,(new vscode_languageserver_protocol_1.CancellationTokenSource).token)).then(value=>{if(value instanceof vscode_languageserver_protocol_1.ResponseError)return value;let result=value;result||(result={capabilities:{}});let capabilities=result.capabilities;capabilities||(capabilities={},result.capabilities=capabilities),void 0===capabilities.textDocumentSync||null===capabilities.textDocumentSync?capabilities.textDocumentSync=Is.number(protocolConnection.__textDocumentSync)?protocolConnection.__textDocumentSync:vscode_languageserver_protocol_1.TextDocumentSyncKind.None:Is.number(capabilities.textDocumentSync)||Is.number(capabilities.textDocumentSync.change)||(capabilities.textDocumentSync.change=Is.number(protocolConnection.__textDocumentSync)?protocolConnection.__textDocumentSync:vscode_languageserver_protocol_1.TextDocumentSyncKind.None);for(let remote of allRemotes)remote.fillServerCapabilities(capabilities);return result})}{let result={capabilities:{textDocumentSync:vscode_languageserver_protocol_1.TextDocumentSyncKind.None}};for(let remote of allRemotes)remote.fillServerCapabilities(result.capabilities);return result}}),connection.onRequest(vscode_languageserver_protocol_1.ShutdownRequest.type,()=>(shutdownReceived=!0,shutdownHandler?shutdownHandler((new vscode_languageserver_protocol_1.CancellationTokenSource).token):void 0)),connection.onNotification(vscode_languageserver_protocol_1.ExitNotification.type,()=>{try{exitHandler&&exitHandler()}finally{shutdownReceived?process.exit(0):process.exit(1)}}),connection.onNotification(vscode_languageserver_protocol_1.SetTraceNotification.type,params=>{tracer.trace=vscode_languageserver_protocol_1.Trace.fromString(params.value)}),protocolConnection}(input,output,strategy,factories)},function(ProposedFeatures){ProposedFeatures.all={__brand:"features"}}(exports.ProposedFeatures||(exports.ProposedFeatures={}))},function(module,exports,__webpack_require__){"use strict";function string(value){return"string"==typeof value||value instanceof String}function func(value){return"function"==typeof value}function array(value){return Array.isArray(value)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.boolean=function(value){return!0===value||!1===value},exports.string=string,exports.number=function(value){return"number"==typeof value||value instanceof Number},exports.error=function(value){return value instanceof Error},exports.func=func,exports.array=array,exports.stringArray=function(value){return array(value)&&value.every(elem=>string(elem))},exports.typedArray=function(value,check){return Array.isArray(value)&&value.every(check)},exports.thenable=function(value){return value&&func(value.then)}},function(module,exports){function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,module.exports=webpackEmptyContext,webpackEmptyContext.id=63},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const generic_1=__importDefault(__webpack_require__(19));class EnvironmentException extends generic_1.default{constructor(message="Could not retrived env vars"){super(message),this.name="EnvironmentError"}}exports.EnvironmentException=EnvironmentException,exports.default=EnvironmentException},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const sqlFormatter_1=__importDefault(__webpack_require__(123)),dollarRegex=/\$([^\s]+)/gi;exports.format=function(query,formatOptions={}){const{reservedWordCase:reservedWordCase=null,indentSize:indentSize=2}=formatOptions;return function(query,originalQuery){return dollarRegex.test(originalQuery)?(originalQuery.match(dollarRegex)||[]).reduce((text,match)=>{const matchEscaped=match.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return text.replace(new RegExp("\\$ +"+matchEscaped.substr(2),"g"),match.replace(/\$/g,"$$$$"))},query):query}(sqlFormatter_1.default.format(query,{indent:" ".repeat(indentSize),reservedWordCase:reservedWordCase}),query)}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(47),arrayMap=__webpack_require__(128),isArray=__webpack_require__(49),isSymbol=__webpack_require__(32),INFINITY=1/0,symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;module.exports=function baseToString(value){if("string"==typeof value)return value;if(isArray(value))return arrayMap(value,baseToString)+"";if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(47),getRawTag=__webpack_require__(129),objectToString=__webpack_require__(130),nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=function(value){return null==value?void 0===value?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}},function(module,exports){module.exports=function(value,other){return value===other||value!=value&&other!=other}},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(67),isObject=__webpack_require__(34),asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";module.exports=function(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const environment_1=__importDefault(__webpack_require__(64));let home;exports.getHome=function(){if(home)return home;if(process&&process.env&&(process.env.HOME||process.env.USERPROFILE))return home=process.env.HOME||process.env.USERPROFILE;throw new environment_1.default("Could not find user home path")}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var path=__webpack_require__(5),semver=__webpack_require__(35),moduleModule=__webpack_require__(72),nativeModules=Object.keys(process.binding("natives")),originalRequire=moduleModule.prototype.require;exports.makePatchingRequire=function(knownPatches){var patchedModules={};return function(moduleId){var originalModule=originalRequire.apply(this,arguments);if(knownPatches[moduleId]){var modulePath=moduleModule._resolveFilename(moduleId,this);if(patchedModules.hasOwnProperty(modulePath))return patchedModules[modulePath];var moduleVersion=void 0;if(nativeModules.indexOf(moduleId)<0)try{moduleVersion=originalRequire.call(this,path.join(moduleId,"package.json")).version}catch(e){return originalModule}else moduleVersion=process.version.substring(1);var prereleaseTagIndex=moduleVersion.indexOf("-");prereleaseTagIndex>=0&&(moduleVersion=moduleVersion.substring(0,prereleaseTagIndex));for(var modifiedModule=originalModule,_i=0,_a=knownPatches[moduleId];_i<_a.length;_i++){var modulePatcher=_a[_i];semver.satisfies(moduleVersion,modulePatcher.versionSpecifier)&&(modifiedModule=modulePatcher.patch(modifiedModule,modulePath))}return patchedModules[modulePath]=modifiedModule}return originalModule}}},function(module,exports){module.exports=require("module")},function(module,exports){module.exports=require("timers")},function(module){module.exports=JSON.parse('{"name":"async-hook-jl","description":"Inspect the life of handle objects in node","version":"1.7.6","author":"Andreas Madsen <amwebdk@gmail.com>","main":"./index.js","scripts":{"test":"node ./test/runner.js && eslint ."},"repository":{"type":"git","url":"git://github.com/jeff-lewis/async-hook-jl.git"},"keywords":["async","async hooks","inspect","async wrap"],"license":"MIT","dependencies":{"stack-chain":"^1.3.7"},"devDependencies":{"async":"1.5.x","cli-color":"1.1.x","eslint":"^3.4.0","endpoint":"0.4.x"},"engines":{"node":"^4.7 || >=6.9 || >=7.3"}}')},function(module,exports,__webpack_require__){if(global._stackChain){if(global._stackChain.version!==__webpack_require__(76).version)throw new Error("Conflicting version of stack-chain found");module.exports=global._stackChain}else module.exports=global._stackChain=__webpack_require__(193)},function(module){module.exports=JSON.parse('{"name":"stack-chain","description":"API for combining call site modifiers","version":"1.3.7","author":"Andreas Madsen <amwebdk@gmail.com>","scripts":{"test":"tap ./test/simple"},"repository":{"type":"git","url":"git://github.com/AndreasMadsen/stack-chain.git"},"keywords":["stack","chain","trace","call site","concat","format"],"devDependencies":{"tap":"2.x.x","uglify-js":"2.5.x"},"license":"MIT"}')},function(module,exports){module.exports=require("zlib")},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AvailabilityData=__webpack_require__(203),exports.Base=__webpack_require__(79),exports.ContextTagKeys=__webpack_require__(204),exports.Data=__webpack_require__(205),exports.DataPoint=__webpack_require__(206),exports.DataPointType=__webpack_require__(80),exports.Domain=__webpack_require__(13),exports.Envelope=__webpack_require__(207),exports.EventData=__webpack_require__(81),exports.ExceptionData=__webpack_require__(208),exports.ExceptionDetails=__webpack_require__(209),exports.MessageData=__webpack_require__(210),exports.MetricData=__webpack_require__(211),exports.PageViewData=__webpack_require__(212),exports.RemoteDependencyData=__webpack_require__(213),exports.RequestData=__webpack_require__(214),exports.SeverityLevel=__webpack_require__(215),exports.StackFrame=__webpack_require__(216)},function(module,exports,__webpack_require__){"use strict";var Base=function(){};module.exports=Base},function(module,exports,__webpack_require__){"use strict";var DataPointType;!function(DataPointType){DataPointType[DataPointType.Measurement=0]="Measurement",DataPointType[DataPointType.Aggregation=1]="Aggregation"}(DataPointType||(DataPointType={})),module.exports=DataPointType},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),EventData=function(_super){function EventData(){var _this=_super.call(this)||this;return _this.ver=2,_this.properties={},_this.measurements={},_this}return __extends(EventData,_super),EventData}(__webpack_require__(13));module.exports=EventData},function(module,exports,__webpack_require__){"use strict";var RequestParser=function(){function RequestParser(){}return RequestParser.prototype.getUrl=function(){return this.url},RequestParser.prototype.RequestParser=function(){this.startTime=+new Date},RequestParser.prototype._setStatus=function(status,error){var endTime=+new Date;this.duration=endTime-this.startTime,this.statusCode=status;var properties=this.properties||{};if(error)if("string"==typeof error)properties.error=error;else if(error instanceof Error)properties.error=error.message;else if("object"==typeof error)for(var key in error)properties[key]=error[key]&&error[key].toString&&error[key].toString();this.properties=properties},RequestParser.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},RequestParser}();module.exports=RequestParser},function(module,exports,__webpack_require__){"use strict";var Util=__webpack_require__(10),CorrelationIdManager=__webpack_require__(22),Traceparent=function(){function Traceparent(traceparent,parentId){if(this.traceFlag=Traceparent.DEFAULT_TRACE_FLAG,this.version=Traceparent.DEFAULT_VERSION,traceparent&&"string"==typeof traceparent)if(traceparent.split(",").length>1)this.traceId=Util.w3cTraceId(),this.spanId=Util.w3cTraceId().substr(0,16);else{var traceparentArr=traceparent.trim().split("-"),len=traceparentArr.length;len>=4?(this.version=traceparentArr[0],this.traceId=traceparentArr[1],this.spanId=traceparentArr[2],this.traceFlag=traceparentArr[3]):(this.traceId=Util.w3cTraceId(),this.spanId=Util.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=Traceparent.DEFAULT_VERSION,this.traceId=Util.w3cTraceId()),"00"===this.version&&4!==len&&(this.traceId=Util.w3cTraceId(),this.spanId=Util.w3cTraceId().substr(0,16)),"ff"===this.version&&(this.version=Traceparent.DEFAULT_VERSION,this.traceId=Util.w3cTraceId(),this.spanId=Util.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=Traceparent.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=Traceparent.DEFAULT_TRACE_FLAG,this.traceId=Util.w3cTraceId()),Traceparent.isValidTraceId(this.traceId)||(this.traceId=Util.w3cTraceId()),Traceparent.isValidSpanId(this.spanId)||(this.spanId=Util.w3cTraceId().substr(0,16),this.traceId=Util.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(parentId){this.parentId=parentId.slice();var operationId=CorrelationIdManager.getRootId(parentId);Traceparent.isValidTraceId(operationId)||(this.legacyRootId=operationId,operationId=Util.w3cTraceId()),-1!==parentId.indexOf("|")&&(parentId=parentId.substring(1+parentId.substring(0,parentId.length-1).lastIndexOf("."),parentId.length-1)),this.traceId=operationId,this.spanId=parentId}else this.traceId=Util.w3cTraceId(),this.spanId=Util.w3cTraceId().substr(0,16)}return Traceparent.isValidTraceId=function(id){return id.match(/^[0-9a-f]{32}$/)&&"00000000000000000000000000000000"!==id},Traceparent.isValidSpanId=function(id){return id.match(/^[0-9a-f]{16}$/)&&"0000000000000000"!==id},Traceparent.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},Traceparent.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},Traceparent.prototype.updateSpanId=function(){this.spanId=Util.w3cTraceId().substr(0,16)},Traceparent.DEFAULT_TRACE_FLAG="01",Traceparent.DEFAULT_VERSION="00",Traceparent}();module.exports=Traceparent},function(module,exports,__webpack_require__){"use strict";var http=__webpack_require__(37),https=__webpack_require__(23),Logging=__webpack_require__(6),Util=__webpack_require__(10),RequestResponseHeaders=__webpack_require__(28),HttpRequestParser=__webpack_require__(228),CorrelationContextManager_1=__webpack_require__(26),AutoCollectPerformance=__webpack_require__(55),AutoCollectHttpRequests=function(){function AutoCollectHttpRequests(client){if(AutoCollectHttpRequests.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");AutoCollectHttpRequests.INSTANCE=this,this._client=client}return AutoCollectHttpRequests.prototype.enable=function(isEnabled){this._isEnabled=isEnabled,(this._isAutoCorrelating||this._isEnabled||AutoCollectPerformance.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},AutoCollectHttpRequests.prototype.useAutoCorrelation=function(isEnabled,forceClsHooked){isEnabled&&!this._isAutoCorrelating?CorrelationContextManager_1.CorrelationContextManager.enable(forceClsHooked):!isEnabled&&this._isAutoCorrelating&&CorrelationContextManager_1.CorrelationContextManager.disable(),this._isAutoCorrelating=isEnabled},AutoCollectHttpRequests.prototype.isInitialized=function(){return this._isInitialized},AutoCollectHttpRequests.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},AutoCollectHttpRequests.prototype._generateCorrelationContext=function(requestParser){if(this._isAutoCorrelating)return CorrelationContextManager_1.CorrelationContextManager.generateContextObject(requestParser.getOperationId(this._client.context.tags),requestParser.getRequestId(),requestParser.getOperationName(this._client.context.tags),requestParser.getCorrelationContextHeader(),requestParser.getTraceparent(),requestParser.getTracestate())},AutoCollectHttpRequests.prototype._initialize=function(){var _this=this;this._isInitialized=!0;var wrapOnRequestHandler=function(onRequest){if(onRequest){if("function"!=typeof onRequest)throw new Error("onRequest handler must be a function");return function(request,response){CorrelationContextManager_1.CorrelationContextManager.wrapEmitter(request),CorrelationContextManager_1.CorrelationContextManager.wrapEmitter(response);var shouldCollect=request&&!request[AutoCollectHttpRequests.alreadyAutoCollectedFlag];if(request&&shouldCollect){var requestParser_1=new HttpRequestParser(request),correlationContext=_this._generateCorrelationContext(requestParser_1);CorrelationContextManager_1.CorrelationContextManager.runWithContext(correlationContext,(function(){_this._isEnabled&&(request[AutoCollectHttpRequests.alreadyAutoCollectedFlag]=!0,AutoCollectHttpRequests.trackRequest(_this._client,{request:request,response:response},requestParser_1)),"function"==typeof onRequest&&onRequest(request,response)}))}else"function"==typeof onRequest&&onRequest(request,response)}}},wrapServerEventHandler=function(server){var originalAddListener=server.addListener.bind(server);server.addListener=function(eventType,eventHandler){switch(eventType){case"request":case"checkContinue":return originalAddListener(eventType,wrapOnRequestHandler(eventHandler));default:return originalAddListener(eventType,eventHandler)}},server.on=server.addListener},originalHttpServer=http.createServer;http.createServer=function(onRequest){var server=originalHttpServer(wrapOnRequestHandler(onRequest));return wrapServerEventHandler(server),server};var originalHttpsServer=https.createServer;https.createServer=function(options,onRequest){var server=originalHttpsServer(options,wrapOnRequestHandler(onRequest));return wrapServerEventHandler(server),server}},AutoCollectHttpRequests.trackRequestSync=function(client,telemetry){if(telemetry.request&&telemetry.response&&client){AutoCollectHttpRequests.addResponseCorrelationIdHeader(client,telemetry.response);var correlationContext=CorrelationContextManager_1.CorrelationContextManager.getCurrentContext(),requestParser=new HttpRequestParser(telemetry.request,correlationContext&&correlationContext.operation.parentId);correlationContext&&(correlationContext.operation.id=requestParser.getOperationId(client.context.tags)||correlationContext.operation.id,correlationContext.operation.name=requestParser.getOperationName(client.context.tags)||correlationContext.operation.name,correlationContext.operation.parentId=requestParser.getRequestId()||correlationContext.operation.parentId,correlationContext.customProperties.addHeaderData(requestParser.getCorrelationContextHeader())),AutoCollectHttpRequests.endRequest(client,requestParser,telemetry,telemetry.duration,telemetry.error)}else Logging.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!telemetry.request,!telemetry.response,!client)},AutoCollectHttpRequests.trackRequest=function(client,telemetry,_requestParser){if(telemetry.request&&telemetry.response&&client){var correlationContext=CorrelationContextManager_1.CorrelationContextManager.getCurrentContext(),requestParser=_requestParser||new HttpRequestParser(telemetry.request,correlationContext&&correlationContext.operation.parentId);Util.canIncludeCorrelationHeader(client,requestParser.getUrl())&&AutoCollectHttpRequests.addResponseCorrelationIdHeader(client,telemetry.response),correlationContext&&!_requestParser&&(correlationContext.operation.id=requestParser.getOperationId(client.context.tags)||correlationContext.operation.id,correlationContext.operation.name=requestParser.getOperationName(client.context.tags)||correlationContext.operation.name,correlationContext.operation.parentId=requestParser.getOperationParentId(client.context.tags)||correlationContext.operation.parentId,correlationContext.customProperties.addHeaderData(requestParser.getCorrelationContextHeader())),telemetry.response.once&&telemetry.response.once("finish",(function(){AutoCollectHttpRequests.endRequest(client,requestParser,telemetry,null,null)})),telemetry.request.on&&telemetry.request.on("error",(function(error){AutoCollectHttpRequests.endRequest(client,requestParser,telemetry,null,error)}))}else Logging.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!telemetry.request,!telemetry.response,!client)},AutoCollectHttpRequests.addResponseCorrelationIdHeader=function(client,response){if(client.config&&client.config.correlationId&&response.getHeader&&response.setHeader&&!response.headersSent){var correlationHeader=response.getHeader(RequestResponseHeaders.requestContextHeader);Util.safeIncludeCorrelationHeader(client,response,correlationHeader)}},AutoCollectHttpRequests.endRequest=function(client,requestParser,telemetry,ellapsedMilliseconds,error){error?requestParser.onError(error,ellapsedMilliseconds):requestParser.onResponse(telemetry.response,ellapsedMilliseconds);var requestTelemetry=requestParser.getRequestTelemetry(telemetry);if(requestTelemetry.tagOverrides=requestParser.getRequestTags(client.context.tags),telemetry.tagOverrides)for(var key in telemetry.tagOverrides)requestTelemetry.tagOverrides[key]=telemetry.tagOverrides[key];var legacyRootId=requestParser.getLegacyRootId();legacyRootId&&(requestTelemetry.properties.ai_legacyRootId=legacyRootId),requestTelemetry.contextObjects=requestTelemetry.contextObjects||{},requestTelemetry.contextObjects["http.ServerRequest"]=telemetry.request,requestTelemetry.contextObjects["http.ServerResponse"]=telemetry.response,client.trackRequest(requestTelemetry)},AutoCollectHttpRequests.prototype.dispose=function(){AutoCollectHttpRequests.INSTANCE=null,this.enable(!1),this._isInitialized=!1,CorrelationContextManager_1.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},AutoCollectHttpRequests.alreadyAutoCollectedFlag="_appInsightsAutoCollected",AutoCollectHttpRequests}();module.exports=AutoCollectHttpRequests},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(0),vscode_2=__webpack_require__(15),constants_1=__webpack_require__(1);var ErrorHandler;!function(ErrorHandler){let telemetry;ErrorHandler.create=function(message){return error=>__awaiter(this,void 0,void 0,(function*(){if(error){if(error.dontNotify||error.data&&error.data.dontNotify)return;telemetry.registerException(error,error.data),message=`${message} ${error.message?error.message:error.toString()}`}!function(message,error){__awaiter(this,void 0,void 0,(function*(){const options=["View Logs"];switch(error.data&&error.data.dialect&&options.push("Help!"),yield vscode_1.window.showErrorMessage(message,...options)){case"View Logs":vscode_1.commands.executeCommand(`${constants_1.EXT_NAME}.showOutputChannel`);break;case"Help!":vscode_2.openExternal(`${constants_1.DOCS_ROOT_URL}/connections/${error.data.dialect.toLowerCase()}#${"string"==typeof error.code?error.code:error.name}`)}}))}(message,error)}))},ErrorHandler.setTelemetryClient=function(cli){telemetry=cli}}(ErrorHandler||(ErrorHandler={})),exports.default=ErrorHandler},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const cp=__webpack_require__(14),fs=__webpack_require__(11),SemVer=__webpack_require__(35),client_1=__webpack_require__(16),vscode_1=__webpack_require__(0),vscode_languageserver_protocol_1=__webpack_require__(2),colorProvider_1=__webpack_require__(253),configuration_1=__webpack_require__(254),implementation_1=__webpack_require__(255),typeDefinition_1=__webpack_require__(256),workspaceFolders_1=__webpack_require__(257),foldingRange_1=__webpack_require__(258),declaration_1=__webpack_require__(259),Is=__webpack_require__(12),processes_1=__webpack_require__(260);!function(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(16));const REQUIRED_VSCODE_VERSION="^1.30";var Executable,TransportKind,Transport,NodeModule,StreamInfo,ChildProcessInfo,ProposedFeatures;!function(Executable){Executable.is=function(value){return Is.string(value.command)}}(Executable||(Executable={})),function(TransportKind){TransportKind[TransportKind.stdio=0]="stdio",TransportKind[TransportKind.ipc=1]="ipc",TransportKind[TransportKind.pipe=2]="pipe",TransportKind[TransportKind.socket=3]="socket"}(TransportKind=exports.TransportKind||(exports.TransportKind={})),function(Transport){Transport.isSocket=function(value){let candidate=value;return candidate&&candidate.kind===TransportKind.socket&&Is.number(candidate.port)}}(Transport||(Transport={})),function(NodeModule){NodeModule.is=function(value){return Is.string(value.module)}}(NodeModule||(NodeModule={})),function(StreamInfo){StreamInfo.is=function(value){let candidate=value;return candidate&&void 0!==candidate.writer&&void 0!==candidate.reader}}(StreamInfo||(StreamInfo={})),function(ChildProcessInfo){ChildProcessInfo.is=function(value){let candidate=value;return candidate&&void 0!==candidate.process&&"boolean"==typeof candidate.detached}}(ChildProcessInfo||(ChildProcessInfo={}));class LanguageClient extends client_1.BaseLanguageClient{constructor(arg1,arg2,arg3,arg4,arg5){let id,name,serverOptions,clientOptions,forceDebug;Is.string(arg2)?(id=arg1,name=arg2,serverOptions=arg3,clientOptions=arg4,forceDebug=!!arg5):(id=arg1.toLowerCase(),name=arg1,serverOptions=arg2,clientOptions=arg3,forceDebug=arg4),void 0===forceDebug&&(forceDebug=!1),super(id,name,clientOptions),this._serverOptions=serverOptions,this._forceDebug=forceDebug;try{this.checkVersion()}catch(error){throw Is.string(error.message)&&this.outputChannel.appendLine(error.message),error}}checkVersion(){let codeVersion=SemVer.parse(vscode_1.version);if(!codeVersion)throw new Error(`No valid VS Code version detected. Version string is: ${vscode_1.version}`);if(codeVersion.prerelease&&codeVersion.prerelease.length>0&&(codeVersion.prerelease=[]),!SemVer.satisfies(codeVersion,REQUIRED_VSCODE_VERSION))throw new Error(`The language client requires VS Code version ${REQUIRED_VSCODE_VERSION} but received version ${vscode_1.version}`)}stop(){return super.stop().then(()=>{if(this._serverProcess){let toCheck=this._serverProcess;this._serverProcess=void 0,void 0!==this._isDetached&&this._isDetached||this.checkProcessDied(toCheck),this._isDetached=void 0}})}checkProcessDied(childProcess){childProcess&&setTimeout(()=>{try{process.kill(childProcess.pid,0),processes_1.terminate(childProcess)}catch(error){}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}createMessageTransports(encoding){let json,server=this._serverOptions;if(Is.func(server))return server().then(result=>{if(client_1.MessageTransports.is(result))return this._isDetached=!!result.detached,result;if(StreamInfo.is(result))return this._isDetached=!!result.detached,{reader:new vscode_languageserver_protocol_1.StreamMessageReader(result.reader),writer:new vscode_languageserver_protocol_1.StreamMessageWriter(result.writer)};{let cp;return ChildProcessInfo.is(result)?(cp=result.process,this._isDetached=result.detached):(cp=result,this._isDetached=!1),cp.stderr.on("data",data=>this.outputChannel.append(Is.string(data)?data:data.toString(encoding))),{reader:new vscode_languageserver_protocol_1.StreamMessageReader(cp.stdout),writer:new vscode_languageserver_protocol_1.StreamMessageWriter(cp.stdin)}}});let runDebug=server;return json=runDebug.run||runDebug.debug?"object"==typeof v8debug||this._forceDebug||function(){let args=process.execArgv;return!!args&&args.some(arg=>/^--debug=?/.test(arg)||/^--debug-brk=?/.test(arg)||/^--inspect=?/.test(arg)||/^--inspect-brk=?/.test(arg))}()?runDebug.debug:runDebug.run:server,this._getServerWorkingDir(json.options).then(serverWorkingDir=>{if(NodeModule.is(json)&&json.module){let node=json,transport=node.transport||TransportKind.stdio;if(!node.runtime){let pipeName=void 0;return new Promise((resolve,_reject)=>{let args=node.args&&node.args.slice()||[];transport===TransportKind.ipc?args.push("--node-ipc"):transport===TransportKind.stdio?args.push("--stdio"):transport===TransportKind.pipe?(pipeName=vscode_languageserver_protocol_1.generateRandomPipeName(),args.push(`--pipe=${pipeName}`)):Transport.isSocket(transport)&&args.push(`--socket=${transport.port}`),args.push(`--clientProcessId=${process.pid.toString()}`);let options=node.options||Object.create(null);if(options.execArgv=options.execArgv||[],options.cwd=serverWorkingDir,options.silent=!0,transport===TransportKind.ipc||transport===TransportKind.stdio){let sp=cp.fork(node.module,args||[],options);this._serverProcess=sp,sp.stderr.on("data",data=>this.outputChannel.append(Is.string(data)?data:data.toString(encoding))),transport===TransportKind.ipc?(sp.stdout.on("data",data=>this.outputChannel.append(Is.string(data)?data:data.toString(encoding))),resolve({reader:new vscode_languageserver_protocol_1.IPCMessageReader(this._serverProcess),writer:new vscode_languageserver_protocol_1.IPCMessageWriter(this._serverProcess)})):resolve({reader:new vscode_languageserver_protocol_1.StreamMessageReader(sp.stdout),writer:new vscode_languageserver_protocol_1.StreamMessageWriter(sp.stdin)})}else transport===TransportKind.pipe?vscode_languageserver_protocol_1.createClientPipeTransport(pipeName).then(transport=>{let sp=cp.fork(node.module,args||[],options);this._serverProcess=sp,sp.stderr.on("data",data=>this.outputChannel.append(Is.string(data)?data:data.toString(encoding))),sp.stdout.on("data",data=>this.outputChannel.append(Is.string(data)?data:data.toString(encoding))),transport.onConnected().then(protocol=>{resolve({reader:protocol[0],writer:protocol[1]})})}):Transport.isSocket(transport)&&vscode_languageserver_protocol_1.createClientSocketTransport(transport.port).then(transport=>{let sp=cp.fork(node.module,args||[],options);this._serverProcess=sp,sp.stderr.on("data",data=>this.outputChannel.append(Is.string(data)?data:data.toString(encoding))),sp.stdout.on("data",data=>this.outputChannel.append(Is.string(data)?data:data.toString(encoding))),transport.onConnected().then(protocol=>{resolve({reader:protocol[0],writer:protocol[1]})})})})}{let args=[],options=node.options||Object.create(null);options.execArgv&&options.execArgv.forEach(element=>args.push(element)),args.push(node.module),node.args&&node.args.forEach(element=>args.push(element));let execOptions=Object.create(null);execOptions.cwd=serverWorkingDir,execOptions.env=function(env){if(!env)return process.env;let result=Object.create(null);return Object.keys(process.env).forEach(key=>result[key]=process.env[key]),Object.keys(env).forEach(key=>result[key]=env[key]),result}(options.env);let pipeName=void 0;if(transport===TransportKind.ipc?(execOptions.stdio=[null,null,null,"ipc"],args.push("--node-ipc")):transport===TransportKind.stdio?args.push("--stdio"):transport===TransportKind.pipe?(pipeName=vscode_languageserver_protocol_1.generateRandomPipeName(),args.push(`--pipe=${pipeName}`)):Transport.isSocket(transport)&&args.push(`--socket=${transport.port}`),args.push(`--clientProcessId=${process.pid.toString()}`),transport===TransportKind.ipc||transport===TransportKind.stdio){let serverProcess=cp.spawn(node.runtime,args,execOptions);return serverProcess&&serverProcess.pid?(this._serverProcess=serverProcess,serverProcess.stderr.on("data",data=>this.outputChannel.append(Is.string(data)?data:data.toString(encoding))),transport===TransportKind.ipc?(serverProcess.stdout.on("data",data=>this.outputChannel.append(Is.string(data)?data:data.toString(encoding))),Promise.resolve({reader:new vscode_languageserver_protocol_1.IPCMessageReader(serverProcess),writer:new vscode_languageserver_protocol_1.IPCMessageWriter(serverProcess)})):Promise.resolve({reader:new vscode_languageserver_protocol_1.StreamMessageReader(serverProcess.stdout),writer:new vscode_languageserver_protocol_1.StreamMessageWriter(serverProcess.stdin)})):Promise.reject(`Launching server using runtime ${node.runtime} failed.`)}if(transport==TransportKind.pipe)return vscode_languageserver_protocol_1.createClientPipeTransport(pipeName).then(transport=>{let process=cp.spawn(node.runtime,args,execOptions);return process&&process.pid?(this._serverProcess=process,process.stderr.on("data",data=>this.outputChannel.append(Is.string(data)?data:data.toString(encoding))),process.stdout.on("data",data=>this.outputChannel.append(Is.string(data)?data:data.toString(encoding))),transport.onConnected().then(protocol=>({reader:protocol[0],writer:protocol[1]}))):Promise.reject(`Launching server using runtime ${node.runtime} failed.`)});if(Transport.isSocket(transport))return vscode_languageserver_protocol_1.createClientSocketTransport(transport.port).then(transport=>{let process=cp.spawn(node.runtime,args,execOptions);return process&&process.pid?(this._serverProcess=process,process.stderr.on("data",data=>this.outputChannel.append(Is.string(data)?data:data.toString(encoding))),process.stdout.on("data",data=>this.outputChannel.append(Is.string(data)?data:data.toString(encoding))),transport.onConnected().then(protocol=>({reader:protocol[0],writer:protocol[1]}))):Promise.reject(`Launching server using runtime ${node.runtime} failed.`)})}}else if(Executable.is(json)&&json.command){let command=json,args=command.args||[],options=Object.assign({},command.options);options.cwd=options.cwd||serverWorkingDir;let serverProcess=cp.spawn(command.command,args,options);return serverProcess&&serverProcess.pid?(serverProcess.stderr.on("data",data=>this.outputChannel.append(Is.string(data)?data:data.toString(encoding))),this._serverProcess=serverProcess,this._isDetached=!!options.detached,Promise.resolve({reader:new vscode_languageserver_protocol_1.StreamMessageReader(serverProcess.stdout),writer:new vscode_languageserver_protocol_1.StreamMessageWriter(serverProcess.stdin)})):Promise.reject(`Launching server using command ${command.command} failed.`)}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(server,null,4)))})}registerProposedFeatures(){this.registerFeatures(ProposedFeatures.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new configuration_1.ConfigurationFeature(this)),this.registerFeature(new typeDefinition_1.TypeDefinitionFeature(this)),this.registerFeature(new implementation_1.ImplementationFeature(this)),this.registerFeature(new colorProvider_1.ColorProviderFeature(this)),this.registerFeature(new workspaceFolders_1.WorkspaceFoldersFeature(this)),this.registerFeature(new foldingRange_1.FoldingRangeFeature(this)),this.registerFeature(new declaration_1.DeclarationFeature(this))}_mainGetRootPath(){let folders=vscode_1.workspace.workspaceFolders;if(!folders||0===folders.length)return;let folder=folders[0];return"file"===folder.uri.scheme?folder.uri.fsPath:void 0}_getServerWorkingDir(options){let cwd=options&&options.cwd;return cwd||(cwd=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),cwd?new Promise(s=>{fs.lstat(cwd,(err,stats)=>{s(!err&&stats.isDirectory()?cwd:void 0)})}):Promise.resolve(void 0)}}exports.LanguageClient=LanguageClient;exports.SettingMonitor=class SettingMonitor{constructor(_client,_setting){this._client=_client,this._setting=_setting,this._listeners=[]}start(){return vscode_1.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new vscode_1.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let index=this._setting.indexOf("."),primary=index>=0?this._setting.substr(0,index):this._setting,rest=index>=0?this._setting.substr(index+1):void 0,enabled=rest?vscode_1.workspace.getConfiguration(primary).get(rest,!1):vscode_1.workspace.getConfiguration(primary);enabled&&this._client.needsStart()?this._client.start():!enabled&&this._client.needsStop()&&this._client.stop()}},function(ProposedFeatures){ProposedFeatures.createAll=function(_client){return[]}}(ProposedFeatures=exports.ProposedFeatures||(exports.ProposedFeatures={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const code=__webpack_require__(0);class ProtocolCompletionItem extends code.CompletionItem{constructor(label){super(label)}}exports.default=ProtocolCompletionItem},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const code=__webpack_require__(0);class ProtocolCodeLens extends code.CodeLens{constructor(range){super(range)}}exports.default=ProtocolCodeLens},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const code=__webpack_require__(0);class ProtocolDocumentLink extends code.DocumentLink{constructor(range,target){super(range,target)}}exports.default=ProtocolDocumentLink},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const interface_1=__webpack_require__(25);exports.default=function(dialect,table){let items=[],tableObj="string"==typeof table?{name:table}:table;switch(dialect){case interface_1.DatabaseDialect.SQLite:return`"${tableObj.name}"`;case interface_1.DatabaseDialect.PostgreSQL:case interface_1.DatabaseDialect["AWS Redshift"]:tableObj.tableDatabase&&items.push(`"${tableObj.tableDatabase}"`),tableObj.tableSchema&&items.push(`"${tableObj.tableSchema}"`),items.push(`"${tableObj.name}"`);break;case interface_1.DatabaseDialect.DB2:case interface_1.DatabaseDialect.OracleDB:case interface_1.DatabaseDialect.Cassandra:tableObj.tableSchema&&items.push(tableObj.tableSchema),items.push(tableObj.name);break;case interface_1.DatabaseDialect.MySQL:tableObj.tableSchema&&items.push(`\`${tableObj.tableSchema}\``),items.push(`\`${tableObj.name}\``);break;case interface_1.DatabaseDialect.MSSQL:tableObj.tableCatalog&&items.push(`[${tableObj.tableCatalog}]`),tableObj.tableSchema&&items.push(`[${tableObj.tableSchema}]`),items.push(`[${tableObj.name}]`)}return items.length>0?items.join("."):tableObj.name.toString()}},function(module,exports,__webpack_require__){var baseGet=__webpack_require__(271);module.exports=function(object,path,defaultValue){var result=null==object?void 0:baseGet(object,path);return void 0===result?defaultValue:result}},function(module,exports,__webpack_require__){var baseIsNative=__webpack_require__(281),getValue=__webpack_require__(285);module.exports=function(object,key){var value=getValue(object,key);return baseIsNative(value)?value:void 0}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_languageserver_protocol_1=__webpack_require__(2);exports.GetConnectionsRequest=new vscode_languageserver_protocol_1.RequestType("connection/GetConnectionsRequest"),exports.RefreshTreeRequest=new vscode_languageserver_protocol_1.RequestType("connection/RefreshTreeRequest"),exports.GetConnectionPasswordRequest=new vscode_languageserver_protocol_1.RequestType("connection/GetConnectionPasswordRequest"),exports.RunCommandRequest=new vscode_languageserver_protocol_1.RequestType("connection/RunCommandRequest"),exports.ConnectRequest=new vscode_languageserver_protocol_1.RequestType("connection/ConnectRequest"),exports.TestConnectionRequest=new vscode_languageserver_protocol_1.RequestType("connection/TestConnectionRequest"),exports.DisconnectRequest=new vscode_languageserver_protocol_1.RequestType("connection/DisconnectRequest"),exports.ConnectionDataUpdatedRequest=new vscode_languageserver_protocol_1.RequestType("connection/ConnectionDataUpdatedRequest"),exports.GetConnectionDataRequest=new vscode_languageserver_protocol_1.RequestType("connection/GetConnectionDataRequest"),exports.SaveResultsRequest=new vscode_languageserver_protocol_1.RequestType("connection/SaveResultsRequest"),exports.ProgressNotificationStart=new vscode_languageserver_protocol_1.NotificationType("sqltools/window/progress/start"),exports.ProgressNotificationComplete=new vscode_languageserver_protocol_1.NotificationType("sqltools/window/progress/complete")},function(module,exports,__webpack_require__){"use strict";var __rest=this&&this.__rest||function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(0);exports.default=class WebviewProvider{constructor(context,iconsPath,viewsPath){this.context=context,this.iconsPath=iconsPath,this.viewsPath=viewsPath,this.disposeEvent=new vscode_1.EventEmitter,this.disposables=[],this.preserveFocus=!0,this.wereToShow=vscode_1.ViewColumn.One,this.onDidReceiveMessage=_a=>{var{action:action,payload:payload}=_a,rest=__rest(_a,["action","payload"]);switch(action){case"receivedState":this.lastState=payload;break;case"call":vscode_1.commands.executeCommand(payload.command,...payload.args||[])}this.messageCb&&this.messageCb(Object.assign({action:action,payload:payload},rest))},this.hide=()=>{void 0!==this.panel&&(this.setPreviewActiveContext(!1),this.panel.dispose())},this.dispose=()=>{this.hide(),this.disposables.length&&this.disposables.forEach(d=>d.dispose()),this.disposables=[],this.panel=void 0,this.disposeEvent.fire()},this.postMessage=message=>{this.panel&&this.panel.webview.postMessage(message)},this.setMessageCallback=cb=>{this.messageCb=cb},this.setPreviewActiveContext=value=>{vscode_1.commands.executeCommand("setContext",`sqltools.${this.id}.active`,value)},this.lastState=void 0,this.getState=()=>this.panel?new Promise((resolve,reject)=>{let attempts=0;const timer=setInterval(()=>{if(void 0===this.lastState)return attempts<10?attempts++:(clearInterval(timer),reject(new Error(`Could not get the state for ${this.id}`)));clearInterval(timer);const state=this.lastState;return this.lastState=void 0,resolve(state)},200);this.panel.webview.postMessage({action:"getState"})}):Promise.resolve(null),this.updatePanelName=()=>{this.panel&&(this.panel.title=this.title)}}get onDidDispose(){return this.disposeEvent.event}get visible(){return void 0!==this.panel&&this.panel.visible}get baseHtml(){const cssVariables=Object.keys(this.cssVariables||{}).map(k=>`--sqltools-${k}: ${this.cssVariables[k]}`).join(";"),extRoot=vscode_1.Uri.file(this.context.asAbsolutePath(".")).with({scheme:"vscode-resource"}).toString();return`<!DOCTYPE html>\n<html>\n<head>\n  <meta charset="utf-8" />\n  <title>${this.title}</title>\n  <meta name="viewport" content="width=device-width, initial-scale=1">\n  <style>\n  :root {${cssVariables}}\n  </style>\n  <link rel="stylesheet" type="text/css" href="${extRoot}/ui/vendor.css">\n  <link rel="stylesheet" type="text/css" href="${extRoot}/ui/commons.css">\n  <link rel="stylesheet" type="text/css" href="${extRoot}/ui/${this.id}.css">\n  <link rel="stylesheet" type="text/css" href="${extRoot}/ui/${this.id}.css">\n  <script type="text/javascript" charset="UTF-8">window.extRoot = ${JSON.stringify(extRoot)};<\/script>\n</head>\n<body>\n  <link rel="stylesheet" type="text/css" href="${extRoot}/ui/theme.css">\n  <div id="root"></div>\n  <script src="${extRoot}/ui/vendor.js" type="text/javascript" charset="UTF-8"><\/script>\n  <script src="${extRoot}/ui/commons.js" type="text/javascript" charset="UTF-8"><\/script>\n  <script src="${extRoot}/ui/${this.id}.js" type="text/javascript" charset="UTF-8"><\/script>\n</body>\n</html>`}show(){this.panel||(this.panel=vscode_1.window.createWebviewPanel(this.id,this.title,this.wereToShow,{enableScripts:!0,retainContextWhenHidden:!0,enableCommandUris:!0,localResourceRoots:[this.iconsPath,this.viewsPath],enableFindWidget:!0}),this.panel.iconPath=vscode_1.Uri.file(this.context.asAbsolutePath("icons/database-active.svg")),this.disposables.push(vscode_1.Disposable.from(this.panel)),this.disposables.push(this.panel.webview.onDidReceiveMessage(this.onDidReceiveMessage,void 0,this.disposables)),this.disposables.push(this.panel.onDidChangeViewState(({webviewPanel:webviewPanel})=>{this.setPreviewActiveContext(webviewPanel.active)})),this.disposables.push(this.panel.onDidDispose(this.dispose,null,this.disposables)),this.panel.webview.html=this.html||this.baseHtml),this.updatePanelName(),this.panel.reveal(this.wereToShow,this.preserveFocus),this.postMessage({action:"reset"}),this.setPreviewActiveContext(!0)}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__importDefault(__webpack_require__(18)),https_1=__importDefault(__webpack_require__(23)),config_manager_1=__importDefault(__webpack_require__(8)),constants_1=__webpack_require__(1),utils_1=__webpack_require__(3),vscode_2=__webpack_require__(0),error_handler_1=__importDefault(__webpack_require__(85)),utils_2=__importDefault(__webpack_require__(246)),vscode_3=__webpack_require__(15),language_client_1=__importDefault(__webpack_require__(248)),extension_1=__importDefault(__webpack_require__(261)),extension_2=__importDefault(__webpack_require__(263)),extension_3=__importDefault(__webpack_require__(311)),extension_4=__importDefault(__webpack_require__(312)),extension_5=__importDefault(__webpack_require__(315)),extension_6=__importDefault(__webpack_require__(318));class SQLToolsExtension{constructor(context){this.context=context,this.pluginsQueue=[],this.willRunCommandHooks={},this.didRunCommandSuccessfullyHooks={},this.aboutVersionHandler=()=>__awaiter(this,void 0,void 0,(function*(){const message=[`SQLTools v${constants_1.VERSION}`,"",`Platform: ${process.platform}, ${process.arch}`,`Using Node Runtime: ${config_manager_1.default.useNodeRuntime?"yes":"no"}`,"",`by @mtxr ${constants_1.AUTHOR}`],res=yield vscode_2.window.showInformationMessage(message.join("\n"),{modal:!0},"Feature Request","Found a bug?");if(!res)return;const newIssueUrl="https://github.com/mtxr/vscode-sqltools/issues/new";try{let template,body;switch(res){case"Found a bug?":template="bug_report.md";break;case"Feature Request":template="feature_request.md"}if((body=yield this.getIssueTemplate(template))&&(body=encodeURIComponent(body.replace(/---([^\-]+---\n\n)/gim,"").replace(/(- OS).+/gi,`$1: ${process.platform}, ${process.arch}`).replace(/(- Version).+/gi,`$1: v${constants_1.VERSION}`))),!template&&!body)return vscode_3.openExternal(`${newIssueUrl}/choose`);let issueUrl=`${newIssueUrl}?assignees=&labels=feature+request&template=${template}&body=${body}`;vscode_3.openExternal(issueUrl)}catch(e){(yield vscode_2.window.showInformationMessage("Could not open a issue. Please go to GitHub to open.","Open Github"))&&vscode_3.openExternal(`${newIssueUrl}/choose`)}})),this.onWillRunCommandHandler=evt=>{evt.command&&this.willRunCommandHooks[evt.command]&&0!==this.willRunCommandHooks[evt.command].length&&(vscode_1.default.log(`Will run ${this.willRunCommandHooks[evt.command].length} attached handler for 'beforeCommandHooks'`),this.willRunCommandHooks[evt.command].forEach(hook=>hook(evt)))},this.onDidRunCommandSuccessfullyHandler=evt=>{evt.command&&this.didRunCommandSuccessfullyHooks[evt.command]&&0!==this.didRunCommandSuccessfullyHooks[evt.command].length&&(vscode_1.default.log(`Will run ${this.didRunCommandSuccessfullyHooks[evt.command].length} attached handler for 'afterCommandSuccessfullyHooks'`),this.didRunCommandSuccessfullyHooks[evt.command].forEach(hook=>hook(evt)))},this.errorHandler=(message,error)=>error_handler_1.default.create(message)(error)}activate(){const activationTimer=new utils_1.Timer;config_manager_1.default.addOnUpdateHook(()=>{vscode_1.default.log("Settings updated!"),this.telemetry&&(config_manager_1.default.telemetry?this.telemetry.enable():this.telemetry.disable())}),this.telemetry=new utils_1.Telemetry({logger:vscode_1.default,product:"extension",vscodeInfo:{sessId:vscode_2.env.sessionId,uniqId:vscode_2.env.machineId,version:vscode_2.version}}),this.getAndUpdateConfig(),this.client=new language_client_1.default(this.context),this.onWillRunCommandEmitter=new vscode_2.EventEmitter,this.onDidRunCommandSuccessfullyEmitter=new vscode_2.EventEmitter,error_handler_1.default.setTelemetryClient(this.telemetry),this.context.subscriptions.push(vscode_2.workspace.onDidChangeConfiguration(this.getAndUpdateConfig),this.client.start(),this.onWillRunCommandEmitter.event(this.onWillRunCommandHandler),this.onDidRunCommandSuccessfullyEmitter.event(this.onDidRunCommandSuccessfullyHandler)),this.registerCommand("aboutVersion",this.aboutVersionHandler),vscode_1.default.outputChannel&&this.context.subscriptions.push(vscode_1.default.outputChannel),this.loadPlugins(),activationTimer.end(),this.telemetry.registerTime("activation",activationTimer),this.displayReleaseNotesMessage()}deactivate(){return this.context.subscriptions.forEach(sub=>void sub.dispose())}getIssueTemplate(name){const url=`https://raw.githubusercontent.com/mtxr/vscode-sqltools/master/.github/ISSUE_TEMPLATE/${name}`;return new Promise(resolve=>{https_1.default.get(url,resp=>{let data="";resp.on("data",chunk=>data+=chunk.toString()),resp.on("end",()=>resolve(data))}).on("error",()=>resolve(null))})}getAndUpdateConfig(){config_manager_1.default.update(vscode_2.workspace.getConfiguration(constants_1.EXT_NAME.toLowerCase()))}displayReleaseNotesMessage(){return __awaiter(this,void 0,void 0,(function*(){try{const current=utils_2.default.getlastRunInfo(),{lastNotificationDate:lastNotificationDate=0,updated:updated}=current,lastNDate=parseInt(new Date(lastNotificationDate).toISOString().substr(0,10).replace(/\D/g,""),10),updatedRecently=parseInt((new Date).toISOString().substr(0,10).replace(/\D/g,""),10)-lastNDate<2;if(config_manager_1.default.disableReleaseNotifications||!updated||updatedRecently)return;utils_2.default.updateLastRunInfo({lastNotificationDate:+new Date});const moreInfo="More Info",supportProject="Support This Project",releaseNotes="Release Notes",message="SQLTools updated! Check out the release notes for more information.",options=[moreInfo,supportProject,releaseNotes],res=yield vscode_2.window.showInformationMessage(message,...options);switch(this.telemetry.registerInfoMessage(message,res),res){case moreInfo:vscode_3.openExternal("https://github.com/mtxr/vscode-sqltools#donate");break;case releaseNotes:vscode_3.openExternal(current.releaseNotes);break;case supportProject:vscode_3.openExternal("https://www.patreon.com/mteixeira")}}catch(e){}}))}loadPlugins(){this.pluginsQueue.forEach(plugin=>plugin.register(this))}addBeforeCommandHook(command,handler){return this.willRunCommandHooks[command]||(this.willRunCommandHooks[command]=[]),this.willRunCommandHooks[command].push(handler),this}addAfterCommandSuccessHook(command,handler){return this.didRunCommandSuccessfullyHooks[command]||(this.didRunCommandSuccessfullyHooks[command]=[]),this.didRunCommandSuccessfullyHooks[command].push(handler),this}registerPlugin(plugin){return this.pluginsQueue.push(plugin),this}registerCommand(command,handler){return this.decorateAndRegisterCommand(command,handler)}registerTextEditorCommand(command,handler){return this.decorateAndRegisterCommand(command,handler,"registerTextEditorCommand")}decorateAndRegisterCommand(command,handler,type="registerCommand"){return this.context.subscriptions.push(vscode_2.commands[type](`${constants_1.EXT_NAME}.${command}`,(...args)=>__awaiter(this,void 0,void 0,(function*(){vscode_1.default.info(`Executing ${constants_1.EXT_NAME}.${command}`),this.onWillRunCommandEmitter.fire({command:command,args:args});let result=handler(...args);return void 0===result||"function"!=typeof result.then&&"function"!=typeof result.catch||(result=yield result),this.onDidRunCommandSuccessfullyEmitter.fire({args:args,command:command,result:result}),result})))),this}}let instance;exports.SQLToolsExtension=SQLToolsExtension,exports.activate=function(context){if(!instance)return(instance=new SQLToolsExtension(context)).registerPlugin(extension_6.default).registerPlugin(extension_1.default).registerPlugin(new extension_2.default(instance)).registerPlugin(new extension_3.default).registerPlugin(new extension_4.default).registerPlugin(new extension_5.default),instance.activate()},exports.deactivate=function(){instance&&(instance.deactivate(),instance=void 0)}},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const generic_1=__importDefault(__webpack_require__(19));class DismissedException extends generic_1.default{constructor(message="Dialog dismissed. This is not an error."){super(message),this.dontNotify=!0}}exports.DismissedException=DismissedException,exports.default=DismissedException},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const contracts_1=__webpack_require__(43),vscode_languageserver_1=__webpack_require__(61);class NotifyResponseError extends vscode_languageserver_1.ResponseError{constructor(code,message,data){super(code,message,data)}}class ElectronNotSupportedException extends NotifyResponseError{constructor(message="Electron is not supported. You should enable 'sqltools.useNodeRuntime' and have NodeJS installed to continue."){super(1001,message,{notification:contracts_1.ElectronNotSupportedNotification,dontNotify:!0})}}exports.ElectronNotSupportedException=ElectronNotSupportedException,exports.default=ElectronNotSupportedException},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const is=__webpack_require__(24);var ErrorCodes;!function(ErrorCodes){ErrorCodes.ParseError=-32700,ErrorCodes.InvalidRequest=-32600,ErrorCodes.MethodNotFound=-32601,ErrorCodes.InvalidParams=-32602,ErrorCodes.InternalError=-32603,ErrorCodes.serverErrorStart=-32099,ErrorCodes.serverErrorEnd=-32e3,ErrorCodes.ServerNotInitialized=-32002,ErrorCodes.UnknownErrorCode=-32001,ErrorCodes.RequestCancelled=-32800,ErrorCodes.MessageWriteError=1,ErrorCodes.MessageReadError=2}(ErrorCodes=exports.ErrorCodes||(exports.ErrorCodes={}));class ResponseError extends Error{constructor(code,message,data){super(message),this.code=is.number(code)?code:ErrorCodes.UnknownErrorCode,this.data=data,Object.setPrototypeOf(this,ResponseError.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}}exports.ResponseError=ResponseError;class AbstractMessageType{constructor(_method,_numberOfParams){this._method=_method,this._numberOfParams=_numberOfParams}get method(){return this._method}get numberOfParams(){return this._numberOfParams}}exports.AbstractMessageType=AbstractMessageType;exports.RequestType0=class RequestType0 extends AbstractMessageType{constructor(method){super(method,0),this._=void 0}};exports.RequestType=class RequestType extends AbstractMessageType{constructor(method){super(method,1),this._=void 0}};exports.RequestType1=class RequestType1 extends AbstractMessageType{constructor(method){super(method,1),this._=void 0}};exports.RequestType2=class RequestType2 extends AbstractMessageType{constructor(method){super(method,2),this._=void 0}};exports.RequestType3=class RequestType3 extends AbstractMessageType{constructor(method){super(method,3),this._=void 0}};exports.RequestType4=class RequestType4 extends AbstractMessageType{constructor(method){super(method,4),this._=void 0}};exports.RequestType5=class RequestType5 extends AbstractMessageType{constructor(method){super(method,5),this._=void 0}};exports.RequestType6=class RequestType6 extends AbstractMessageType{constructor(method){super(method,6),this._=void 0}};exports.RequestType7=class RequestType7 extends AbstractMessageType{constructor(method){super(method,7),this._=void 0}};exports.RequestType8=class RequestType8 extends AbstractMessageType{constructor(method){super(method,8),this._=void 0}};exports.RequestType9=class RequestType9 extends AbstractMessageType{constructor(method){super(method,9),this._=void 0}};exports.NotificationType=class NotificationType extends AbstractMessageType{constructor(method){super(method,1),this._=void 0}};exports.NotificationType0=class NotificationType0 extends AbstractMessageType{constructor(method){super(method,0),this._=void 0}};exports.NotificationType1=class NotificationType1 extends AbstractMessageType{constructor(method){super(method,1),this._=void 0}};exports.NotificationType2=class NotificationType2 extends AbstractMessageType{constructor(method){super(method,2),this._=void 0}};exports.NotificationType3=class NotificationType3 extends AbstractMessageType{constructor(method){super(method,3),this._=void 0}};exports.NotificationType4=class NotificationType4 extends AbstractMessageType{constructor(method){super(method,4),this._=void 0}};exports.NotificationType5=class NotificationType5 extends AbstractMessageType{constructor(method){super(method,5),this._=void 0}};exports.NotificationType6=class NotificationType6 extends AbstractMessageType{constructor(method){super(method,6),this._=void 0}};exports.NotificationType7=class NotificationType7 extends AbstractMessageType{constructor(method){super(method,7),this._=void 0}};exports.NotificationType8=class NotificationType8 extends AbstractMessageType{constructor(method){super(method,8),this._=void 0}};exports.NotificationType9=class NotificationType9 extends AbstractMessageType{constructor(method){super(method,9),this._=void 0}},exports.isRequestMessage=function(message){let candidate=message;return candidate&&is.string(candidate.method)&&(is.string(candidate.id)||is.number(candidate.id))},exports.isNotificationMessage=function(message){let candidate=message;return candidate&&is.string(candidate.method)&&void 0===message.id},exports.isResponseMessage=function(message){let candidate=message;return candidate&&(void 0!==candidate.result||!!candidate.error)&&(is.string(candidate.id)||is.number(candidate.id)||null===candidate.id)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const events_1=__webpack_require__(30),Is=__webpack_require__(24);var CancellationToken;!function(CancellationToken){CancellationToken.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:events_1.Event.None}),CancellationToken.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:events_1.Event.None}),CancellationToken.is=function(value){let candidate=value;return candidate&&(candidate===CancellationToken.None||candidate===CancellationToken.Cancelled||Is.boolean(candidate.isCancellationRequested)&&!!candidate.onCancellationRequested)}}(CancellationToken=exports.CancellationToken||(exports.CancellationToken={}));const shortcutEvent=Object.freeze((function(callback,context){let handle=setTimeout(callback.bind(context),0);return{dispose(){clearTimeout(handle)}}}));class MutableToken{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this._emitter=void 0))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?shortcutEvent:(this._emitter||(this._emitter=new events_1.Emitter),this._emitter.event)}}exports.CancellationTokenSource=class CancellationTokenSource{get token(){return this._token||(this._token=new MutableToken),this._token}cancel(){this._token?this._token.cancel():this._token=CancellationToken.Cancelled}dispose(){this.cancel()}}},function(module,exports,__webpack_require__){"use strict";var Touch;Object.defineProperty(exports,"__esModule",{value:!0}),function(Touch){Touch.None=0,Touch.First=1,Touch.Last=2}(Touch=exports.Touch||(exports.Touch={}));exports.LinkedMap=class LinkedMap{constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}has(key){return this._map.has(key)}get(key){const item=this._map.get(key);if(item)return item.value}set(key,value,touch=Touch.None){let item=this._map.get(key);if(item)item.value=value,touch!==Touch.None&&this.touch(item,touch);else{switch(item={key:key,value:value,next:void 0,previous:void 0},touch){case Touch.None:this.addItemLast(item);break;case Touch.First:this.addItemFirst(item);break;case Touch.Last:default:this.addItemLast(item)}this._map.set(key,item),this._size++}}delete(key){const item=this._map.get(key);return!!item&&(this._map.delete(key),this.removeItem(item),this._size--,!0)}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const item=this._head;return this._map.delete(item.key),this.removeItem(item),this._size--,item.value}forEach(callbackfn,thisArg){let current=this._head;for(;current;)thisArg?callbackfn.bind(thisArg)(current.value,current.key,this):callbackfn(current.value,current.key,this),current=current.next}forEachReverse(callbackfn,thisArg){let current=this._tail;for(;current;)thisArg?callbackfn.bind(thisArg)(current.value,current.key,this):callbackfn(current.value,current.key,this),current=current.previous}values(){let result=[],current=this._head;for(;current;)result.push(current.value),current=current.next;return result}keys(){let result=[],current=this._head;for(;current;)result.push(current.key),current=current.next;return result}addItemFirst(item){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");item.next=this._head,this._head.previous=item}else this._tail=item;this._head=item}addItemLast(item){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");item.previous=this._tail,this._tail.next=item}else this._head=item;this._tail=item}removeItem(item){if(item===this._head&&item===this._tail)this._head=void 0,this._tail=void 0;else if(item===this._head)this._head=item.next;else if(item===this._tail)this._tail=item.previous;else{const next=item.next,previous=item.previous;if(!next||!previous)throw new Error("Invalid list");next.previous=previous,previous.next=next}}touch(item,touch){if(!this._head||!this._tail)throw new Error("Invalid list");if(touch===Touch.First||touch===Touch.Last)if(touch===Touch.First){if(item===this._head)return;const next=item.next,previous=item.previous;item===this._tail?(previous.next=void 0,this._tail=previous):(next.previous=previous,previous.next=next),item.previous=void 0,item.next=this._head,this._head.previous=item,this._head=item}else if(touch===Touch.Last){if(item===this._tail)return;const next=item.next,previous=item.previous;item===this._head?(next.previous=void 0,this._head=next):(next.previous=previous,previous.next=next),item.next=void 0,item.previous=this._tail,this._tail.next=item,this._tail=item}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const path_1=__webpack_require__(5),os_1=__webpack_require__(20),crypto_1=__webpack_require__(60),net_1=__webpack_require__(46),messageReader_1=__webpack_require__(44),messageWriter_1=__webpack_require__(45);exports.generateRandomPipeName=function(){const randomSuffix=crypto_1.randomBytes(21).toString("hex");return"win32"===process.platform?`\\\\.\\pipe\\vscode-jsonrpc-${randomSuffix}-sock`:path_1.join(os_1.tmpdir(),`vscode-${randomSuffix}.sock`)},exports.createClientPipeTransport=function(pipeName,encoding="utf-8"){let connectResolve,connected=new Promise((resolve,_reject)=>{connectResolve=resolve});return new Promise((resolve,reject)=>{let server=net_1.createServer(socket=>{server.close(),connectResolve([new messageReader_1.SocketMessageReader(socket,encoding),new messageWriter_1.SocketMessageWriter(socket,encoding)])});server.on("error",reject),server.listen(pipeName,()=>{server.removeListener("error",reject),resolve({onConnected:()=>connected})})})},exports.createServerPipeTransport=function(pipeName,encoding="utf-8"){const socket=net_1.createConnection(pipeName);return[new messageReader_1.SocketMessageReader(socket,encoding),new messageWriter_1.SocketMessageWriter(socket,encoding)]}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const net_1=__webpack_require__(46),messageReader_1=__webpack_require__(44),messageWriter_1=__webpack_require__(45);exports.createClientSocketTransport=function(port,encoding="utf-8"){let connectResolve,connected=new Promise((resolve,_reject)=>{connectResolve=resolve});return new Promise((resolve,reject)=>{let server=net_1.createServer(socket=>{server.close(),connectResolve([new messageReader_1.SocketMessageReader(socket,encoding),new messageWriter_1.SocketMessageWriter(socket,encoding)])});server.on("error",reject),server.listen(port,"127.0.0.1",()=>{server.removeListener("error",reject),resolve({onConnected:()=>connected})})})},exports.createServerSocketTransport=function(port,encoding="utf-8"){const socket=net_1.createConnection(port,"127.0.0.1");return[new messageReader_1.SocketMessageReader(socket,encoding),new messageWriter_1.SocketMessageWriter(socket,encoding)]}},function(module,__webpack_exports__,__webpack_require__){"use strict";var Position,Range,Location,LocationLink,Color,ColorInformation,ColorPresentation,FoldingRangeKind,FoldingRange,DiagnosticRelatedInformation,DiagnosticSeverity,Diagnostic,Command,TextEdit,TextDocumentEdit,CreateFile,RenameFile,DeleteFile,WorkspaceEdit;__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Position",(function(){return Position})),__webpack_require__.d(__webpack_exports__,"Range",(function(){return Range})),__webpack_require__.d(__webpack_exports__,"Location",(function(){return Location})),__webpack_require__.d(__webpack_exports__,"LocationLink",(function(){return LocationLink})),__webpack_require__.d(__webpack_exports__,"Color",(function(){return Color})),__webpack_require__.d(__webpack_exports__,"ColorInformation",(function(){return ColorInformation})),__webpack_require__.d(__webpack_exports__,"ColorPresentation",(function(){return ColorPresentation})),__webpack_require__.d(__webpack_exports__,"FoldingRangeKind",(function(){return FoldingRangeKind})),__webpack_require__.d(__webpack_exports__,"FoldingRange",(function(){return FoldingRange})),__webpack_require__.d(__webpack_exports__,"DiagnosticRelatedInformation",(function(){return DiagnosticRelatedInformation})),__webpack_require__.d(__webpack_exports__,"DiagnosticSeverity",(function(){return DiagnosticSeverity})),__webpack_require__.d(__webpack_exports__,"Diagnostic",(function(){return Diagnostic})),__webpack_require__.d(__webpack_exports__,"Command",(function(){return Command})),__webpack_require__.d(__webpack_exports__,"TextEdit",(function(){return TextEdit})),__webpack_require__.d(__webpack_exports__,"TextDocumentEdit",(function(){return TextDocumentEdit})),__webpack_require__.d(__webpack_exports__,"CreateFile",(function(){return CreateFile})),__webpack_require__.d(__webpack_exports__,"RenameFile",(function(){return RenameFile})),__webpack_require__.d(__webpack_exports__,"DeleteFile",(function(){return DeleteFile})),__webpack_require__.d(__webpack_exports__,"WorkspaceEdit",(function(){return WorkspaceEdit})),__webpack_require__.d(__webpack_exports__,"WorkspaceChange",(function(){return WorkspaceChange})),__webpack_require__.d(__webpack_exports__,"TextDocumentIdentifier",(function(){return TextDocumentIdentifier})),__webpack_require__.d(__webpack_exports__,"VersionedTextDocumentIdentifier",(function(){return VersionedTextDocumentIdentifier})),__webpack_require__.d(__webpack_exports__,"TextDocumentItem",(function(){return TextDocumentItem})),__webpack_require__.d(__webpack_exports__,"MarkupKind",(function(){return MarkupKind})),__webpack_require__.d(__webpack_exports__,"MarkupContent",(function(){return MarkupContent})),__webpack_require__.d(__webpack_exports__,"CompletionItemKind",(function(){return CompletionItemKind})),__webpack_require__.d(__webpack_exports__,"InsertTextFormat",(function(){return InsertTextFormat})),__webpack_require__.d(__webpack_exports__,"CompletionItem",(function(){return CompletionItem})),__webpack_require__.d(__webpack_exports__,"CompletionList",(function(){return CompletionList})),__webpack_require__.d(__webpack_exports__,"MarkedString",(function(){return MarkedString})),__webpack_require__.d(__webpack_exports__,"Hover",(function(){return Hover})),__webpack_require__.d(__webpack_exports__,"ParameterInformation",(function(){return ParameterInformation})),__webpack_require__.d(__webpack_exports__,"SignatureInformation",(function(){return SignatureInformation})),__webpack_require__.d(__webpack_exports__,"DocumentHighlightKind",(function(){return DocumentHighlightKind})),__webpack_require__.d(__webpack_exports__,"DocumentHighlight",(function(){return DocumentHighlight})),__webpack_require__.d(__webpack_exports__,"SymbolKind",(function(){return SymbolKind})),__webpack_require__.d(__webpack_exports__,"SymbolInformation",(function(){return SymbolInformation})),__webpack_require__.d(__webpack_exports__,"DocumentSymbol",(function(){return DocumentSymbol})),__webpack_require__.d(__webpack_exports__,"CodeActionKind",(function(){return CodeActionKind})),__webpack_require__.d(__webpack_exports__,"CodeActionContext",(function(){return CodeActionContext})),__webpack_require__.d(__webpack_exports__,"CodeAction",(function(){return CodeAction})),__webpack_require__.d(__webpack_exports__,"CodeLens",(function(){return CodeLens})),__webpack_require__.d(__webpack_exports__,"FormattingOptions",(function(){return FormattingOptions})),__webpack_require__.d(__webpack_exports__,"DocumentLink",(function(){return DocumentLink})),__webpack_require__.d(__webpack_exports__,"EOL",(function(){return EOL})),__webpack_require__.d(__webpack_exports__,"TextDocument",(function(){return TextDocument})),__webpack_require__.d(__webpack_exports__,"TextDocumentSaveReason",(function(){return TextDocumentSaveReason})),function(Position){Position.create=function(line,character){return{line:line,character:character}},Position.is=function(value){var candidate=value;return Is.objectLiteral(candidate)&&Is.number(candidate.line)&&Is.number(candidate.character)}}(Position||(Position={})),function(Range){Range.create=function(one,two,three,four){if(Is.number(one)&&Is.number(two)&&Is.number(three)&&Is.number(four))return{start:Position.create(one,two),end:Position.create(three,four)};if(Position.is(one)&&Position.is(two))return{start:one,end:two};throw new Error("Range#create called with invalid arguments["+one+", "+two+", "+three+", "+four+"]")},Range.is=function(value){var candidate=value;return Is.objectLiteral(candidate)&&Position.is(candidate.start)&&Position.is(candidate.end)}}(Range||(Range={})),function(Location){Location.create=function(uri,range){return{uri:uri,range:range}},Location.is=function(value){var candidate=value;return Is.defined(candidate)&&Range.is(candidate.range)&&(Is.string(candidate.uri)||Is.undefined(candidate.uri))}}(Location||(Location={})),function(LocationLink){LocationLink.create=function(targetUri,targetRange,targetSelectionRange,originSelectionRange){return{targetUri:targetUri,targetRange:targetRange,targetSelectionRange:targetSelectionRange,originSelectionRange:originSelectionRange}},LocationLink.is=function(value){var candidate=value;return Is.defined(candidate)&&Range.is(candidate.targetRange)&&Is.string(candidate.targetUri)&&(Range.is(candidate.targetSelectionRange)||Is.undefined(candidate.targetSelectionRange))&&(Range.is(candidate.originSelectionRange)||Is.undefined(candidate.originSelectionRange))}}(LocationLink||(LocationLink={})),function(Color){Color.create=function(red,green,blue,alpha){return{red:red,green:green,blue:blue,alpha:alpha}},Color.is=function(value){var candidate=value;return Is.number(candidate.red)&&Is.number(candidate.green)&&Is.number(candidate.blue)&&Is.number(candidate.alpha)}}(Color||(Color={})),function(ColorInformation){ColorInformation.create=function(range,color){return{range:range,color:color}},ColorInformation.is=function(value){var candidate=value;return Range.is(candidate.range)&&Color.is(candidate.color)}}(ColorInformation||(ColorInformation={})),function(ColorPresentation){ColorPresentation.create=function(label,textEdit,additionalTextEdits){return{label:label,textEdit:textEdit,additionalTextEdits:additionalTextEdits}},ColorPresentation.is=function(value){var candidate=value;return Is.string(candidate.label)&&(Is.undefined(candidate.textEdit)||TextEdit.is(candidate))&&(Is.undefined(candidate.additionalTextEdits)||Is.typedArray(candidate.additionalTextEdits,TextEdit.is))}}(ColorPresentation||(ColorPresentation={})),function(FoldingRangeKind){FoldingRangeKind.Comment="comment",FoldingRangeKind.Imports="imports",FoldingRangeKind.Region="region"}(FoldingRangeKind||(FoldingRangeKind={})),function(FoldingRange){FoldingRange.create=function(startLine,endLine,startCharacter,endCharacter,kind){var result={startLine:startLine,endLine:endLine};return Is.defined(startCharacter)&&(result.startCharacter=startCharacter),Is.defined(endCharacter)&&(result.endCharacter=endCharacter),Is.defined(kind)&&(result.kind=kind),result},FoldingRange.is=function(value){var candidate=value;return Is.number(candidate.startLine)&&Is.number(candidate.startLine)&&(Is.undefined(candidate.startCharacter)||Is.number(candidate.startCharacter))&&(Is.undefined(candidate.endCharacter)||Is.number(candidate.endCharacter))&&(Is.undefined(candidate.kind)||Is.string(candidate.kind))}}(FoldingRange||(FoldingRange={})),function(DiagnosticRelatedInformation){DiagnosticRelatedInformation.create=function(location,message){return{location:location,message:message}},DiagnosticRelatedInformation.is=function(value){var candidate=value;return Is.defined(candidate)&&Location.is(candidate.location)&&Is.string(candidate.message)}}(DiagnosticRelatedInformation||(DiagnosticRelatedInformation={})),function(DiagnosticSeverity){DiagnosticSeverity.Error=1,DiagnosticSeverity.Warning=2,DiagnosticSeverity.Information=3,DiagnosticSeverity.Hint=4}(DiagnosticSeverity||(DiagnosticSeverity={})),function(Diagnostic){Diagnostic.create=function(range,message,severity,code,source,relatedInformation){var result={range:range,message:message};return Is.defined(severity)&&(result.severity=severity),Is.defined(code)&&(result.code=code),Is.defined(source)&&(result.source=source),Is.defined(relatedInformation)&&(result.relatedInformation=relatedInformation),result},Diagnostic.is=function(value){var candidate=value;return Is.defined(candidate)&&Range.is(candidate.range)&&Is.string(candidate.message)&&(Is.number(candidate.severity)||Is.undefined(candidate.severity))&&(Is.number(candidate.code)||Is.string(candidate.code)||Is.undefined(candidate.code))&&(Is.string(candidate.source)||Is.undefined(candidate.source))&&(Is.undefined(candidate.relatedInformation)||Is.typedArray(candidate.relatedInformation,DiagnosticRelatedInformation.is))}}(Diagnostic||(Diagnostic={})),function(Command){Command.create=function(title,command){for(var args=[],_i=2;_i<arguments.length;_i++)args[_i-2]=arguments[_i];var result={title:title,command:command};return Is.defined(args)&&args.length>0&&(result.arguments=args),result},Command.is=function(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.title)&&Is.string(candidate.command)}}(Command||(Command={})),function(TextEdit){TextEdit.replace=function(range,newText){return{range:range,newText:newText}},TextEdit.insert=function(position,newText){return{range:{start:position,end:position},newText:newText}},TextEdit.del=function(range){return{range:range,newText:""}},TextEdit.is=function(value){var candidate=value;return Is.objectLiteral(candidate)&&Is.string(candidate.newText)&&Range.is(candidate.range)}}(TextEdit||(TextEdit={})),function(TextDocumentEdit){TextDocumentEdit.create=function(textDocument,edits){return{textDocument:textDocument,edits:edits}},TextDocumentEdit.is=function(value){var candidate=value;return Is.defined(candidate)&&VersionedTextDocumentIdentifier.is(candidate.textDocument)&&Array.isArray(candidate.edits)}}(TextDocumentEdit||(TextDocumentEdit={})),function(CreateFile){CreateFile.create=function(uri,options){var result={kind:"create",uri:uri};return void 0===options||void 0===options.overwrite&&void 0===options.ignoreIfExists||(result.options=options),result},CreateFile.is=function(value){var candidate=value;return candidate&&"create"===candidate.kind&&Is.string(candidate.uri)&&(void 0===candidate.options||(void 0===candidate.options.overwrite||Is.boolean(candidate.options.overwrite))&&(void 0===candidate.options.ignoreIfExists||Is.boolean(candidate.options.ignoreIfExists)))}}(CreateFile||(CreateFile={})),function(RenameFile){RenameFile.create=function(oldUri,newUri,options){var result={kind:"rename",oldUri:oldUri,newUri:newUri};return void 0===options||void 0===options.overwrite&&void 0===options.ignoreIfExists||(result.options=options),result},RenameFile.is=function(value){var candidate=value;return candidate&&"rename"===candidate.kind&&Is.string(candidate.oldUri)&&Is.string(candidate.newUri)&&(void 0===candidate.options||(void 0===candidate.options.overwrite||Is.boolean(candidate.options.overwrite))&&(void 0===candidate.options.ignoreIfExists||Is.boolean(candidate.options.ignoreIfExists)))}}(RenameFile||(RenameFile={})),function(DeleteFile){DeleteFile.create=function(uri,options){var result={kind:"delete",uri:uri};return void 0===options||void 0===options.recursive&&void 0===options.ignoreIfNotExists||(result.options=options),result},DeleteFile.is=function(value){var candidate=value;return candidate&&"delete"===candidate.kind&&Is.string(candidate.uri)&&(void 0===candidate.options||(void 0===candidate.options.recursive||Is.boolean(candidate.options.recursive))&&(void 0===candidate.options.ignoreIfNotExists||Is.boolean(candidate.options.ignoreIfNotExists)))}}(DeleteFile||(DeleteFile={})),function(WorkspaceEdit){WorkspaceEdit.is=function(value){var candidate=value;return candidate&&(void 0!==candidate.changes||void 0!==candidate.documentChanges)&&(void 0===candidate.documentChanges||candidate.documentChanges.every((function(change){return Is.string(change.kind)?CreateFile.is(change)||RenameFile.is(change)||DeleteFile.is(change):TextDocumentEdit.is(change)})))}}(WorkspaceEdit||(WorkspaceEdit={}));var TextDocumentIdentifier,VersionedTextDocumentIdentifier,TextDocumentItem,MarkupKind,MarkupContent,CompletionItemKind,InsertTextFormat,CompletionItem,CompletionList,MarkedString,Hover,ParameterInformation,SignatureInformation,DocumentHighlightKind,DocumentHighlight,SymbolKind,SymbolInformation,TextEditChangeImpl=function(){function TextEditChangeImpl(edits){this.edits=edits}return TextEditChangeImpl.prototype.insert=function(position,newText){this.edits.push(TextEdit.insert(position,newText))},TextEditChangeImpl.prototype.replace=function(range,newText){this.edits.push(TextEdit.replace(range,newText))},TextEditChangeImpl.prototype.delete=function(range){this.edits.push(TextEdit.del(range))},TextEditChangeImpl.prototype.add=function(edit){this.edits.push(edit)},TextEditChangeImpl.prototype.all=function(){return this.edits},TextEditChangeImpl.prototype.clear=function(){this.edits.splice(0,this.edits.length)},TextEditChangeImpl}(),WorkspaceChange=function(){function WorkspaceChange(workspaceEdit){var _this=this;this._textEditChanges=Object.create(null),workspaceEdit&&(this._workspaceEdit=workspaceEdit,workspaceEdit.documentChanges?workspaceEdit.documentChanges.forEach((function(change){if(TextDocumentEdit.is(change)){var textEditChange=new TextEditChangeImpl(change.edits);_this._textEditChanges[change.textDocument.uri]=textEditChange}})):workspaceEdit.changes&&Object.keys(workspaceEdit.changes).forEach((function(key){var textEditChange=new TextEditChangeImpl(workspaceEdit.changes[key]);_this._textEditChanges[key]=textEditChange})))}return Object.defineProperty(WorkspaceChange.prototype,"edit",{get:function(){return this._workspaceEdit},enumerable:!0,configurable:!0}),WorkspaceChange.prototype.getTextEditChange=function(key){if(VersionedTextDocumentIdentifier.is(key)){if(this._workspaceEdit||(this._workspaceEdit={documentChanges:[]}),!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var textDocument=key;if(!(result=this._textEditChanges[textDocument.uri])){var textDocumentEdit={textDocument:textDocument,edits:edits=[]};this._workspaceEdit.documentChanges.push(textDocumentEdit),result=new TextEditChangeImpl(edits),this._textEditChanges[textDocument.uri]=result}return result}if(this._workspaceEdit||(this._workspaceEdit={changes:Object.create(null)}),!this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var result;if(!(result=this._textEditChanges[key])){var edits=[];this._workspaceEdit.changes[key]=edits,result=new TextEditChangeImpl(edits),this._textEditChanges[key]=result}return result},WorkspaceChange.prototype.createFile=function(uri,options){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(CreateFile.create(uri,options))},WorkspaceChange.prototype.renameFile=function(oldUri,newUri,options){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(RenameFile.create(oldUri,newUri,options))},WorkspaceChange.prototype.deleteFile=function(uri,options){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(DeleteFile.create(uri,options))},WorkspaceChange.prototype.checkDocumentChanges=function(){if(!this._workspaceEdit||!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.")},WorkspaceChange}();!function(TextDocumentIdentifier){TextDocumentIdentifier.create=function(uri){return{uri:uri}},TextDocumentIdentifier.is=function(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.uri)}}(TextDocumentIdentifier||(TextDocumentIdentifier={})),function(VersionedTextDocumentIdentifier){VersionedTextDocumentIdentifier.create=function(uri,version){return{uri:uri,version:version}},VersionedTextDocumentIdentifier.is=function(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.uri)&&(null===candidate.version||Is.number(candidate.version))}}(VersionedTextDocumentIdentifier||(VersionedTextDocumentIdentifier={})),function(TextDocumentItem){TextDocumentItem.create=function(uri,languageId,version,text){return{uri:uri,languageId:languageId,version:version,text:text}},TextDocumentItem.is=function(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.uri)&&Is.string(candidate.languageId)&&Is.number(candidate.version)&&Is.string(candidate.text)}}(TextDocumentItem||(TextDocumentItem={})),function(MarkupKind){MarkupKind.PlainText="plaintext",MarkupKind.Markdown="markdown"}(MarkupKind||(MarkupKind={})),function(MarkupKind){MarkupKind.is=function(value){var candidate=value;return candidate===MarkupKind.PlainText||candidate===MarkupKind.Markdown}}(MarkupKind||(MarkupKind={})),function(MarkupContent){MarkupContent.is=function(value){var candidate=value;return Is.objectLiteral(value)&&MarkupKind.is(candidate.kind)&&Is.string(candidate.value)}}(MarkupContent||(MarkupContent={})),function(CompletionItemKind){CompletionItemKind.Text=1,CompletionItemKind.Method=2,CompletionItemKind.Function=3,CompletionItemKind.Constructor=4,CompletionItemKind.Field=5,CompletionItemKind.Variable=6,CompletionItemKind.Class=7,CompletionItemKind.Interface=8,CompletionItemKind.Module=9,CompletionItemKind.Property=10,CompletionItemKind.Unit=11,CompletionItemKind.Value=12,CompletionItemKind.Enum=13,CompletionItemKind.Keyword=14,CompletionItemKind.Snippet=15,CompletionItemKind.Color=16,CompletionItemKind.File=17,CompletionItemKind.Reference=18,CompletionItemKind.Folder=19,CompletionItemKind.EnumMember=20,CompletionItemKind.Constant=21,CompletionItemKind.Struct=22,CompletionItemKind.Event=23,CompletionItemKind.Operator=24,CompletionItemKind.TypeParameter=25}(CompletionItemKind||(CompletionItemKind={})),function(InsertTextFormat){InsertTextFormat.PlainText=1,InsertTextFormat.Snippet=2}(InsertTextFormat||(InsertTextFormat={})),function(CompletionItem){CompletionItem.create=function(label){return{label:label}}}(CompletionItem||(CompletionItem={})),function(CompletionList){CompletionList.create=function(items,isIncomplete){return{items:items||[],isIncomplete:!!isIncomplete}}}(CompletionList||(CompletionList={})),function(MarkedString){MarkedString.fromPlainText=function(plainText){return plainText.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},MarkedString.is=function(value){var candidate=value;return Is.string(candidate)||Is.objectLiteral(candidate)&&Is.string(candidate.language)&&Is.string(candidate.value)}}(MarkedString||(MarkedString={})),function(Hover){Hover.is=function(value){var candidate=value;return!!candidate&&Is.objectLiteral(candidate)&&(MarkupContent.is(candidate.contents)||MarkedString.is(candidate.contents)||Is.typedArray(candidate.contents,MarkedString.is))&&(void 0===value.range||Range.is(value.range))}}(Hover||(Hover={})),function(ParameterInformation){ParameterInformation.create=function(label,documentation){return documentation?{label:label,documentation:documentation}:{label:label}}}(ParameterInformation||(ParameterInformation={})),function(SignatureInformation){SignatureInformation.create=function(label,documentation){for(var parameters=[],_i=2;_i<arguments.length;_i++)parameters[_i-2]=arguments[_i];var result={label:label};return Is.defined(documentation)&&(result.documentation=documentation),Is.defined(parameters)?result.parameters=parameters:result.parameters=[],result}}(SignatureInformation||(SignatureInformation={})),function(DocumentHighlightKind){DocumentHighlightKind.Text=1,DocumentHighlightKind.Read=2,DocumentHighlightKind.Write=3}(DocumentHighlightKind||(DocumentHighlightKind={})),function(DocumentHighlight){DocumentHighlight.create=function(range,kind){var result={range:range};return Is.number(kind)&&(result.kind=kind),result}}(DocumentHighlight||(DocumentHighlight={})),function(SymbolKind){SymbolKind.File=1,SymbolKind.Module=2,SymbolKind.Namespace=3,SymbolKind.Package=4,SymbolKind.Class=5,SymbolKind.Method=6,SymbolKind.Property=7,SymbolKind.Field=8,SymbolKind.Constructor=9,SymbolKind.Enum=10,SymbolKind.Interface=11,SymbolKind.Function=12,SymbolKind.Variable=13,SymbolKind.Constant=14,SymbolKind.String=15,SymbolKind.Number=16,SymbolKind.Boolean=17,SymbolKind.Array=18,SymbolKind.Object=19,SymbolKind.Key=20,SymbolKind.Null=21,SymbolKind.EnumMember=22,SymbolKind.Struct=23,SymbolKind.Event=24,SymbolKind.Operator=25,SymbolKind.TypeParameter=26}(SymbolKind||(SymbolKind={})),function(SymbolInformation){SymbolInformation.create=function(name,kind,range,uri,containerName){var result={name:name,kind:kind,location:{uri:uri,range:range}};return containerName&&(result.containerName=containerName),result}}(SymbolInformation||(SymbolInformation={}));var CodeActionKind,CodeActionContext,CodeAction,CodeLens,FormattingOptions,DocumentSymbol=function(){};!function(DocumentSymbol){DocumentSymbol.create=function(name,detail,kind,range,selectionRange,children){var result={name:name,detail:detail,kind:kind,range:range,selectionRange:selectionRange};return void 0!==children&&(result.children=children),result},DocumentSymbol.is=function(value){var candidate=value;return candidate&&Is.string(candidate.name)&&Is.number(candidate.kind)&&Range.is(candidate.range)&&Range.is(candidate.selectionRange)&&(void 0===candidate.detail||Is.string(candidate.detail))&&(void 0===candidate.deprecated||Is.boolean(candidate.deprecated))&&(void 0===candidate.children||Array.isArray(candidate.children))}}(DocumentSymbol||(DocumentSymbol={})),function(CodeActionKind){CodeActionKind.QuickFix="quickfix",CodeActionKind.Refactor="refactor",CodeActionKind.RefactorExtract="refactor.extract",CodeActionKind.RefactorInline="refactor.inline",CodeActionKind.RefactorRewrite="refactor.rewrite",CodeActionKind.Source="source",CodeActionKind.SourceOrganizeImports="source.organizeImports"}(CodeActionKind||(CodeActionKind={})),function(CodeActionContext){CodeActionContext.create=function(diagnostics,only){var result={diagnostics:diagnostics};return null!=only&&(result.only=only),result},CodeActionContext.is=function(value){var candidate=value;return Is.defined(candidate)&&Is.typedArray(candidate.diagnostics,Diagnostic.is)&&(void 0===candidate.only||Is.typedArray(candidate.only,Is.string))}}(CodeActionContext||(CodeActionContext={})),function(CodeAction){CodeAction.create=function(title,commandOrEdit,kind){var result={title:title};return Command.is(commandOrEdit)?result.command=commandOrEdit:result.edit=commandOrEdit,void 0!==kind&&(result.kind=kind),result},CodeAction.is=function(value){var candidate=value;return candidate&&Is.string(candidate.title)&&(void 0===candidate.diagnostics||Is.typedArray(candidate.diagnostics,Diagnostic.is))&&(void 0===candidate.kind||Is.string(candidate.kind))&&(void 0!==candidate.edit||void 0!==candidate.command)&&(void 0===candidate.command||Command.is(candidate.command))&&(void 0===candidate.edit||WorkspaceEdit.is(candidate.edit))}}(CodeAction||(CodeAction={})),function(CodeLens){CodeLens.create=function(range,data){var result={range:range};return Is.defined(data)&&(result.data=data),result},CodeLens.is=function(value){var candidate=value;return Is.defined(candidate)&&Range.is(candidate.range)&&(Is.undefined(candidate.command)||Command.is(candidate.command))}}(CodeLens||(CodeLens={})),function(FormattingOptions){FormattingOptions.create=function(tabSize,insertSpaces){return{tabSize:tabSize,insertSpaces:insertSpaces}},FormattingOptions.is=function(value){var candidate=value;return Is.defined(candidate)&&Is.number(candidate.tabSize)&&Is.boolean(candidate.insertSpaces)}}(FormattingOptions||(FormattingOptions={}));var DocumentLink=function(){};!function(DocumentLink){DocumentLink.create=function(range,target,data){return{range:range,target:target,data:data}},DocumentLink.is=function(value){var candidate=value;return Is.defined(candidate)&&Range.is(candidate.range)&&(Is.undefined(candidate.target)||Is.string(candidate.target))}}(DocumentLink||(DocumentLink={}));var TextDocument,TextDocumentSaveReason,EOL=["\n","\r\n","\r"];!function(TextDocument){TextDocument.create=function(uri,languageId,version,content){return new FullTextDocument(uri,languageId,version,content)},TextDocument.is=function(value){var candidate=value;return!!(Is.defined(candidate)&&Is.string(candidate.uri)&&(Is.undefined(candidate.languageId)||Is.string(candidate.languageId))&&Is.number(candidate.lineCount)&&Is.func(candidate.getText)&&Is.func(candidate.positionAt)&&Is.func(candidate.offsetAt))},TextDocument.applyEdits=function(document,edits){for(var text=document.getText(),sortedEdits=function mergeSort(data,compare){if(data.length<=1)return data;var p=data.length/2|0;var left=data.slice(0,p);var right=data.slice(p);mergeSort(left,compare);mergeSort(right,compare);var leftIdx=0;var rightIdx=0;var i=0;for(;leftIdx<left.length&&rightIdx<right.length;){var ret=compare(left[leftIdx],right[rightIdx]);data[i++]=ret<=0?left[leftIdx++]:right[rightIdx++]}for(;leftIdx<left.length;)data[i++]=left[leftIdx++];for(;rightIdx<right.length;)data[i++]=right[rightIdx++];return data}(edits,(function(a,b){var diff=a.range.start.line-b.range.start.line;return 0===diff?a.range.start.character-b.range.start.character:diff})),lastModifiedOffset=text.length,i=sortedEdits.length-1;i>=0;i--){var e=sortedEdits[i],startOffset=document.offsetAt(e.range.start),endOffset=document.offsetAt(e.range.end);if(!(endOffset<=lastModifiedOffset))throw new Error("Overlapping edit");text=text.substring(0,startOffset)+e.newText+text.substring(endOffset,text.length),lastModifiedOffset=startOffset}return text}}(TextDocument||(TextDocument={})),function(TextDocumentSaveReason){TextDocumentSaveReason.Manual=1,TextDocumentSaveReason.AfterDelay=2,TextDocumentSaveReason.FocusOut=3}(TextDocumentSaveReason||(TextDocumentSaveReason={}));var Is,FullTextDocument=function(){function FullTextDocument(uri,languageId,version,content){this._uri=uri,this._languageId=languageId,this._version=version,this._content=content,this._lineOffsets=null}return Object.defineProperty(FullTextDocument.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(FullTextDocument.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(FullTextDocument.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),FullTextDocument.prototype.getText=function(range){if(range){var start=this.offsetAt(range.start),end=this.offsetAt(range.end);return this._content.substring(start,end)}return this._content},FullTextDocument.prototype.update=function(event,version){this._content=event.text,this._version=version,this._lineOffsets=null},FullTextDocument.prototype.getLineOffsets=function(){if(null===this._lineOffsets){for(var lineOffsets=[],text=this._content,isLineStart=!0,i=0;i<text.length;i++){isLineStart&&(lineOffsets.push(i),isLineStart=!1);var ch=text.charAt(i);isLineStart="\r"===ch||"\n"===ch,"\r"===ch&&i+1<text.length&&"\n"===text.charAt(i+1)&&i++}isLineStart&&text.length>0&&lineOffsets.push(text.length),this._lineOffsets=lineOffsets}return this._lineOffsets},FullTextDocument.prototype.positionAt=function(offset){offset=Math.max(Math.min(offset,this._content.length),0);var lineOffsets=this.getLineOffsets(),low=0,high=lineOffsets.length;if(0===high)return Position.create(0,offset);for(;low<high;){var mid=Math.floor((low+high)/2);lineOffsets[mid]>offset?high=mid:low=mid+1}var line=low-1;return Position.create(line,offset-lineOffsets[line])},FullTextDocument.prototype.offsetAt=function(position){var lineOffsets=this.getLineOffsets();if(position.line>=lineOffsets.length)return this._content.length;if(position.line<0)return 0;var lineOffset=lineOffsets[position.line],nextLineOffset=position.line+1<lineOffsets.length?lineOffsets[position.line+1]:this._content.length;return Math.max(Math.min(lineOffset+position.character,nextLineOffset),lineOffset)},Object.defineProperty(FullTextDocument.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),FullTextDocument}();!function(Is){var toString=Object.prototype.toString;Is.defined=function(value){return void 0!==value},Is.undefined=function(value){return void 0===value},Is.boolean=function(value){return!0===value||!1===value},Is.string=function(value){return"[object String]"===toString.call(value)},Is.number=function(value){return"[object Number]"===toString.call(value)},Is.func=function(value){return"[object Function]"===toString.call(value)},Is.objectLiteral=function(value){return null!==value&&"object"==typeof value},Is.typedArray=function(value,check){return Array.isArray(value)&&value.every(check)}}(Is||(Is={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const Is=__webpack_require__(105),vscode_jsonrpc_1=__webpack_require__(9),protocol_implementation_1=__webpack_require__(106);exports.ImplementationRequest=protocol_implementation_1.ImplementationRequest;const protocol_typeDefinition_1=__webpack_require__(107);exports.TypeDefinitionRequest=protocol_typeDefinition_1.TypeDefinitionRequest;const protocol_workspaceFolders_1=__webpack_require__(108);exports.WorkspaceFoldersRequest=protocol_workspaceFolders_1.WorkspaceFoldersRequest,exports.DidChangeWorkspaceFoldersNotification=protocol_workspaceFolders_1.DidChangeWorkspaceFoldersNotification;const protocol_configuration_1=__webpack_require__(109);exports.ConfigurationRequest=protocol_configuration_1.ConfigurationRequest;const protocol_colorProvider_1=__webpack_require__(110);exports.DocumentColorRequest=protocol_colorProvider_1.DocumentColorRequest,exports.ColorPresentationRequest=protocol_colorProvider_1.ColorPresentationRequest;const protocol_foldingRange_1=__webpack_require__(111);exports.FoldingRangeRequest=protocol_foldingRange_1.FoldingRangeRequest;const protocol_declaration_1=__webpack_require__(112);exports.DeclarationRequest=protocol_declaration_1.DeclarationRequest,function(DocumentFilter){DocumentFilter.is=function(value){let candidate=value;return Is.string(candidate.language)||Is.string(candidate.scheme)||Is.string(candidate.pattern)}}(exports.DocumentFilter||(exports.DocumentFilter={})),function(RegistrationRequest){RegistrationRequest.type=new vscode_jsonrpc_1.RequestType("client/registerCapability")}(exports.RegistrationRequest||(exports.RegistrationRequest={})),function(UnregistrationRequest){UnregistrationRequest.type=new vscode_jsonrpc_1.RequestType("client/unregisterCapability")}(exports.UnregistrationRequest||(exports.UnregistrationRequest={})),function(ResourceOperationKind){ResourceOperationKind.Create="create",ResourceOperationKind.Rename="rename",ResourceOperationKind.Delete="delete"}(exports.ResourceOperationKind||(exports.ResourceOperationKind={})),function(FailureHandlingKind){FailureHandlingKind.Abort="abort",FailureHandlingKind.Transactional="transactional",FailureHandlingKind.TextOnlyTransactional="textOnlyTransactional",FailureHandlingKind.Undo="undo"}(exports.FailureHandlingKind||(exports.FailureHandlingKind={})),function(TextDocumentSyncKind){TextDocumentSyncKind.None=0,TextDocumentSyncKind.Full=1,TextDocumentSyncKind.Incremental=2}(exports.TextDocumentSyncKind||(exports.TextDocumentSyncKind={})),function(InitializeRequest){InitializeRequest.type=new vscode_jsonrpc_1.RequestType("initialize")}(exports.InitializeRequest||(exports.InitializeRequest={})),function(InitializeError){InitializeError.unknownProtocolVersion=1}(exports.InitializeError||(exports.InitializeError={})),function(InitializedNotification){InitializedNotification.type=new vscode_jsonrpc_1.NotificationType("initialized")}(exports.InitializedNotification||(exports.InitializedNotification={})),function(ShutdownRequest){ShutdownRequest.type=new vscode_jsonrpc_1.RequestType0("shutdown")}(exports.ShutdownRequest||(exports.ShutdownRequest={})),function(ExitNotification){ExitNotification.type=new vscode_jsonrpc_1.NotificationType0("exit")}(exports.ExitNotification||(exports.ExitNotification={})),function(DidChangeConfigurationNotification){DidChangeConfigurationNotification.type=new vscode_jsonrpc_1.NotificationType("workspace/didChangeConfiguration")}(exports.DidChangeConfigurationNotification||(exports.DidChangeConfigurationNotification={})),function(MessageType){MessageType.Error=1,MessageType.Warning=2,MessageType.Info=3,MessageType.Log=4}(exports.MessageType||(exports.MessageType={})),function(ShowMessageNotification){ShowMessageNotification.type=new vscode_jsonrpc_1.NotificationType("window/showMessage")}(exports.ShowMessageNotification||(exports.ShowMessageNotification={})),function(ShowMessageRequest){ShowMessageRequest.type=new vscode_jsonrpc_1.RequestType("window/showMessageRequest")}(exports.ShowMessageRequest||(exports.ShowMessageRequest={})),function(LogMessageNotification){LogMessageNotification.type=new vscode_jsonrpc_1.NotificationType("window/logMessage")}(exports.LogMessageNotification||(exports.LogMessageNotification={})),function(TelemetryEventNotification){TelemetryEventNotification.type=new vscode_jsonrpc_1.NotificationType("telemetry/event")}(exports.TelemetryEventNotification||(exports.TelemetryEventNotification={})),function(DidOpenTextDocumentNotification){DidOpenTextDocumentNotification.type=new vscode_jsonrpc_1.NotificationType("textDocument/didOpen")}(exports.DidOpenTextDocumentNotification||(exports.DidOpenTextDocumentNotification={})),function(DidChangeTextDocumentNotification){DidChangeTextDocumentNotification.type=new vscode_jsonrpc_1.NotificationType("textDocument/didChange")}(exports.DidChangeTextDocumentNotification||(exports.DidChangeTextDocumentNotification={})),function(DidCloseTextDocumentNotification){DidCloseTextDocumentNotification.type=new vscode_jsonrpc_1.NotificationType("textDocument/didClose")}(exports.DidCloseTextDocumentNotification||(exports.DidCloseTextDocumentNotification={})),function(DidSaveTextDocumentNotification){DidSaveTextDocumentNotification.type=new vscode_jsonrpc_1.NotificationType("textDocument/didSave")}(exports.DidSaveTextDocumentNotification||(exports.DidSaveTextDocumentNotification={})),function(WillSaveTextDocumentNotification){WillSaveTextDocumentNotification.type=new vscode_jsonrpc_1.NotificationType("textDocument/willSave")}(exports.WillSaveTextDocumentNotification||(exports.WillSaveTextDocumentNotification={})),function(WillSaveTextDocumentWaitUntilRequest){WillSaveTextDocumentWaitUntilRequest.type=new vscode_jsonrpc_1.RequestType("textDocument/willSaveWaitUntil")}(exports.WillSaveTextDocumentWaitUntilRequest||(exports.WillSaveTextDocumentWaitUntilRequest={})),function(DidChangeWatchedFilesNotification){DidChangeWatchedFilesNotification.type=new vscode_jsonrpc_1.NotificationType("workspace/didChangeWatchedFiles")}(exports.DidChangeWatchedFilesNotification||(exports.DidChangeWatchedFilesNotification={})),function(FileChangeType){FileChangeType.Created=1,FileChangeType.Changed=2,FileChangeType.Deleted=3}(exports.FileChangeType||(exports.FileChangeType={})),function(WatchKind){WatchKind.Create=1,WatchKind.Change=2,WatchKind.Delete=4}(exports.WatchKind||(exports.WatchKind={})),function(PublishDiagnosticsNotification){PublishDiagnosticsNotification.type=new vscode_jsonrpc_1.NotificationType("textDocument/publishDiagnostics")}(exports.PublishDiagnosticsNotification||(exports.PublishDiagnosticsNotification={})),function(CompletionTriggerKind){CompletionTriggerKind.Invoked=1,CompletionTriggerKind.TriggerCharacter=2,CompletionTriggerKind.TriggerForIncompleteCompletions=3}(exports.CompletionTriggerKind||(exports.CompletionTriggerKind={})),function(CompletionRequest){CompletionRequest.type=new vscode_jsonrpc_1.RequestType("textDocument/completion")}(exports.CompletionRequest||(exports.CompletionRequest={})),function(CompletionResolveRequest){CompletionResolveRequest.type=new vscode_jsonrpc_1.RequestType("completionItem/resolve")}(exports.CompletionResolveRequest||(exports.CompletionResolveRequest={})),function(HoverRequest){HoverRequest.type=new vscode_jsonrpc_1.RequestType("textDocument/hover")}(exports.HoverRequest||(exports.HoverRequest={})),function(SignatureHelpRequest){SignatureHelpRequest.type=new vscode_jsonrpc_1.RequestType("textDocument/signatureHelp")}(exports.SignatureHelpRequest||(exports.SignatureHelpRequest={})),function(DefinitionRequest){DefinitionRequest.type=new vscode_jsonrpc_1.RequestType("textDocument/definition")}(exports.DefinitionRequest||(exports.DefinitionRequest={})),function(ReferencesRequest){ReferencesRequest.type=new vscode_jsonrpc_1.RequestType("textDocument/references")}(exports.ReferencesRequest||(exports.ReferencesRequest={})),function(DocumentHighlightRequest){DocumentHighlightRequest.type=new vscode_jsonrpc_1.RequestType("textDocument/documentHighlight")}(exports.DocumentHighlightRequest||(exports.DocumentHighlightRequest={})),function(DocumentSymbolRequest){DocumentSymbolRequest.type=new vscode_jsonrpc_1.RequestType("textDocument/documentSymbol")}(exports.DocumentSymbolRequest||(exports.DocumentSymbolRequest={})),function(WorkspaceSymbolRequest){WorkspaceSymbolRequest.type=new vscode_jsonrpc_1.RequestType("workspace/symbol")}(exports.WorkspaceSymbolRequest||(exports.WorkspaceSymbolRequest={})),function(CodeActionRequest){CodeActionRequest.type=new vscode_jsonrpc_1.RequestType("textDocument/codeAction")}(exports.CodeActionRequest||(exports.CodeActionRequest={})),function(CodeLensRequest){CodeLensRequest.type=new vscode_jsonrpc_1.RequestType("textDocument/codeLens")}(exports.CodeLensRequest||(exports.CodeLensRequest={})),function(CodeLensResolveRequest){CodeLensResolveRequest.type=new vscode_jsonrpc_1.RequestType("codeLens/resolve")}(exports.CodeLensResolveRequest||(exports.CodeLensResolveRequest={})),function(DocumentFormattingRequest){DocumentFormattingRequest.type=new vscode_jsonrpc_1.RequestType("textDocument/formatting")}(exports.DocumentFormattingRequest||(exports.DocumentFormattingRequest={})),function(DocumentRangeFormattingRequest){DocumentRangeFormattingRequest.type=new vscode_jsonrpc_1.RequestType("textDocument/rangeFormatting")}(exports.DocumentRangeFormattingRequest||(exports.DocumentRangeFormattingRequest={})),function(DocumentOnTypeFormattingRequest){DocumentOnTypeFormattingRequest.type=new vscode_jsonrpc_1.RequestType("textDocument/onTypeFormatting")}(exports.DocumentOnTypeFormattingRequest||(exports.DocumentOnTypeFormattingRequest={})),function(RenameRequest){RenameRequest.type=new vscode_jsonrpc_1.RequestType("textDocument/rename")}(exports.RenameRequest||(exports.RenameRequest={})),function(PrepareRenameRequest){PrepareRenameRequest.type=new vscode_jsonrpc_1.RequestType("textDocument/prepareRename")}(exports.PrepareRenameRequest||(exports.PrepareRenameRequest={})),function(DocumentLinkRequest){DocumentLinkRequest.type=new vscode_jsonrpc_1.RequestType("textDocument/documentLink")}(exports.DocumentLinkRequest||(exports.DocumentLinkRequest={})),function(DocumentLinkResolveRequest){DocumentLinkResolveRequest.type=new vscode_jsonrpc_1.RequestType("documentLink/resolve")}(exports.DocumentLinkResolveRequest||(exports.DocumentLinkResolveRequest={})),function(ExecuteCommandRequest){ExecuteCommandRequest.type=new vscode_jsonrpc_1.RequestType("workspace/executeCommand")}(exports.ExecuteCommandRequest||(exports.ExecuteCommandRequest={})),function(ApplyWorkspaceEditRequest){ApplyWorkspaceEditRequest.type=new vscode_jsonrpc_1.RequestType("workspace/applyEdit")}(exports.ApplyWorkspaceEditRequest||(exports.ApplyWorkspaceEditRequest={}))},function(module,exports,__webpack_require__){"use strict";function string(value){return"string"==typeof value||value instanceof String}function func(value){return"function"==typeof value}function array(value){return Array.isArray(value)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.boolean=function(value){return!0===value||!1===value},exports.string=string,exports.number=function(value){return"number"==typeof value||value instanceof Number},exports.error=function(value){return value instanceof Error},exports.func=func,exports.array=array,exports.stringArray=function(value){return array(value)&&value.every(elem=>string(elem))},exports.typedArray=function(value,check){return Array.isArray(value)&&value.every(check)},exports.thenable=function(value){return value&&func(value.then)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_jsonrpc_1=__webpack_require__(9);!function(ImplementationRequest){ImplementationRequest.type=new vscode_jsonrpc_1.RequestType("textDocument/implementation")}(exports.ImplementationRequest||(exports.ImplementationRequest={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_jsonrpc_1=__webpack_require__(9);!function(TypeDefinitionRequest){TypeDefinitionRequest.type=new vscode_jsonrpc_1.RequestType("textDocument/typeDefinition")}(exports.TypeDefinitionRequest||(exports.TypeDefinitionRequest={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_jsonrpc_1=__webpack_require__(9);!function(WorkspaceFoldersRequest){WorkspaceFoldersRequest.type=new vscode_jsonrpc_1.RequestType0("workspace/workspaceFolders")}(exports.WorkspaceFoldersRequest||(exports.WorkspaceFoldersRequest={})),function(DidChangeWorkspaceFoldersNotification){DidChangeWorkspaceFoldersNotification.type=new vscode_jsonrpc_1.NotificationType("workspace/didChangeWorkspaceFolders")}(exports.DidChangeWorkspaceFoldersNotification||(exports.DidChangeWorkspaceFoldersNotification={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_jsonrpc_1=__webpack_require__(9);!function(ConfigurationRequest){ConfigurationRequest.type=new vscode_jsonrpc_1.RequestType("workspace/configuration")}(exports.ConfigurationRequest||(exports.ConfigurationRequest={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_jsonrpc_1=__webpack_require__(9);!function(DocumentColorRequest){DocumentColorRequest.type=new vscode_jsonrpc_1.RequestType("textDocument/documentColor")}(exports.DocumentColorRequest||(exports.DocumentColorRequest={})),function(ColorPresentationRequest){ColorPresentationRequest.type=new vscode_jsonrpc_1.RequestType("textDocument/colorPresentation")}(exports.ColorPresentationRequest||(exports.ColorPresentationRequest={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_jsonrpc_1=__webpack_require__(9);!function(FoldingRangeKind){FoldingRangeKind.Comment="comment",FoldingRangeKind.Imports="imports",FoldingRangeKind.Region="region"}(exports.FoldingRangeKind||(exports.FoldingRangeKind={})),function(FoldingRangeRequest){FoldingRangeRequest.type=new vscode_jsonrpc_1.RequestType("textDocument/foldingRange")}(exports.FoldingRangeRequest||(exports.FoldingRangeRequest={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_jsonrpc_1=__webpack_require__(9);!function(DeclarationRequest){DeclarationRequest.type=new vscode_jsonrpc_1.RequestType("textDocument/declaration")}(exports.DeclarationRequest||(exports.DeclarationRequest={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_languageserver_protocol_1=__webpack_require__(2),Is=__webpack_require__(62);exports.ConfigurationFeature=Base=>(class extends Base{getConfiguration(arg){return arg?Is.string(arg)?this._getConfiguration({section:arg}):this._getConfiguration(arg):this._getConfiguration({})}_getConfiguration(arg){let params={items:Array.isArray(arg)?arg:[arg]};return this.connection.sendRequest(vscode_languageserver_protocol_1.ConfigurationRequest.type,params).then(result=>Array.isArray(arg)?result:result[0])}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_languageserver_protocol_1=__webpack_require__(2);exports.WorkspaceFoldersFeature=Base=>(class extends Base{initialize(capabilities){let workspaceCapabilities=capabilities.workspace;workspaceCapabilities&&workspaceCapabilities.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new vscode_languageserver_protocol_1.Emitter,this.connection.onNotification(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type,params=>{this._onDidChangeWorkspaceFolders.fire(params.event)}))}getWorkspaceFolders(){return this.connection.sendRequest(vscode_languageserver_protocol_1.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return this._unregistration||(this._unregistration=this.connection.client.register(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class ValueUUID{constructor(_value){this._value=_value}asHex(){return this._value}equals(other){return this.asHex()===other.asHex()}}class V4UUID extends ValueUUID{constructor(){super([V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-",V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-","4",V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-",V4UUID._oneOf(V4UUID._timeHighBits),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-",V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex()].join(""))}static _oneOf(array){return array[Math.floor(array.length*Math.random())]}static _randomHex(){return V4UUID._oneOf(V4UUID._chars)}}function v4(){return new V4UUID}V4UUID._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],V4UUID._timeHighBits=["8","9","a","b"],exports.empty=new ValueUUID("00000000-0000-0000-0000-000000000000"),exports.v4=v4;const _UUIDPattern=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function isUUID(value){return _UUIDPattern.test(value)}exports.isUUID=isUUID,exports.parse=function(value){if(!isUUID(value))throw new Error("invalid uuid");return new ValueUUID(value)},exports.generateUuid=function(){return v4().asHex()}},function(module,exports,__webpack_require__){"use strict";(function(__filename){Object.defineProperty(exports,"__esModule",{value:!0});const url=__webpack_require__(21),path=__webpack_require__(5),fs=__webpack_require__(11),child_process_1=__webpack_require__(14);function isWindows(){return"win32"===process.platform}function resolve(moduleName,nodePath,cwd,tracer){const app=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((resolve,reject)=>{let env=process.env,newEnv=Object.create(null);Object.keys(env).forEach(key=>newEnv[key]=env[key]),nodePath&&(newEnv.NODE_PATH?newEnv.NODE_PATH=nodePath+path.delimiter+newEnv.NODE_PATH:newEnv.NODE_PATH=nodePath,tracer&&tracer(`NODE_PATH value is: ${newEnv.NODE_PATH}`)),newEnv.ELECTRON_RUN_AS_NODE="1";try{let cp=child_process_1.fork("",[],{cwd:cwd,env:newEnv,execArgv:["-e",app]});if(void 0===cp.pid)return void reject(new Error(`Starting process to resolve node module  ${moduleName} failed`));cp.on("error",error=>{reject(error)}),cp.on("message",message=>{"r"===message.c&&(cp.send({c:"e"}),message.s?resolve(message.r):reject(new Error(`Failed to resolve module: ${moduleName}`)))});let message={c:"rs",a:moduleName};cp.send(message)}catch(error){reject(error)}})}function resolveGlobalNodePath(tracer){let npmCommand="npm",options={encoding:"utf8"};isWindows()&&(npmCommand="npm.cmd",options.shell=!0);let handler=()=>{};try{process.on("SIGPIPE",handler);let stdout=child_process_1.spawnSync(npmCommand,["config","get","prefix"],options).stdout;if(!stdout)return void(tracer&&tracer("'npm config get prefix' didn't return a value."));let prefix=stdout.trim();return tracer&&tracer(`'npm config get prefix' value is: ${prefix}`),prefix.length>0?isWindows()?path.join(prefix,"node_modules"):path.join(prefix,"lib","node_modules"):void 0}catch(err){return}finally{process.removeListener("SIGPIPE",handler)}}var FileSystem;function resolveModulePath(workspaceRoot,moduleName,nodePath,tracer){return nodePath?(path.isAbsolute(nodePath)||(nodePath=path.join(workspaceRoot,nodePath)),resolve(moduleName,nodePath,nodePath,tracer).then(value=>FileSystem.isParent(nodePath,value)?value:Promise.reject(new Error(`Failed to load ${moduleName} from node path location.`))).then(void 0,_error=>resolve(moduleName,resolveGlobalNodePath(tracer),workspaceRoot,tracer))):resolve(moduleName,resolveGlobalNodePath(tracer),workspaceRoot,tracer)}exports.uriToFilePath=function(uri){let parsed=url.parse(uri);if("file:"!==parsed.protocol||!parsed.path)return;let segments=parsed.path.split("/");for(var i=0,len=segments.length;i<len;i++)segments[i]=decodeURIComponent(segments[i]);if("win32"===process.platform&&segments.length>1){let first=segments[0],second=segments[1];0===first.length&&second.length>1&&":"===second[1]&&segments.shift()}return path.normalize(segments.join("/"))},exports.resolveModule=function(workspaceRoot,moduleName){return new Promise((resolve,reject)=>{let nodePath=[];workspaceRoot&&nodePath.push(path.join(workspaceRoot,"node_modules")),child_process_1.exec("npm config get prefix",(error,stdout,_stderr)=>{if(!error){let globalPath=stdout.replace(/[\s\r\n]+$/,"");globalPath.length>0&&(isWindows()?nodePath.push(path.join(globalPath,"node_modules")):nodePath.push(path.join(globalPath,"lib","node_modules")))}let separator=isWindows()?";":":",env=process.env,newEnv=Object.create(null);Object.keys(env).forEach(key=>newEnv[key]=env[key]),newEnv.NODE_PATH?newEnv.NODE_PATH=nodePath.join(separator)+separator+newEnv.NODE_PATH:newEnv.NODE_PATH=nodePath.join(separator),newEnv.ELECTRON_RUN_AS_NODE="1";try{let cp=child_process_1.fork(path.join(__dirname,"resolve.js"),[],{env:newEnv,execArgv:[]});if(void 0===cp.pid)return void reject(new Error(`Starting process to resolve node module  ${moduleName} failed`));cp.on("message",message=>{if("resolve"===message.command){let toRequire=moduleName;message.success&&(toRequire=message.result),cp.send({command:"exit"});try{resolve(__webpack_require__(63)(toRequire))}catch(error){reject(error)}}});let message={command:"resolve",args:moduleName};cp.send(message)}catch(error){reject(error)}})})},exports.resolve=resolve,exports.resolveGlobalNodePath=resolveGlobalNodePath,exports.resolveGlobalYarnPath=function(tracer){let yarnCommand="yarn",options={encoding:"utf8"};isWindows()&&(yarnCommand="yarn.cmd",options.shell=!0);let handler=()=>{};try{process.on("SIGPIPE",handler);let results=child_process_1.spawnSync(yarnCommand,["global","dir","--json"],options),stdout=results.stdout;if(!stdout)return void(tracer&&(tracer("'yarn global dir' didn't return a value."),results.stderr&&tracer(results.stderr)));let lines=stdout.trim().split(/\r?\n/);for(let line of lines)try{let yarn=JSON.parse(line);if("log"===yarn.type)return path.join(yarn.data,"node_modules")}catch(e){}return}catch(err){return}finally{process.removeListener("SIGPIPE",handler)}},function(FileSystem){let _isCaseSensitive=void 0;function isCaseSensitive(){return void 0!==_isCaseSensitive?_isCaseSensitive:_isCaseSensitive="win32"!==process.platform&&(!fs.existsSync(__filename.toUpperCase())||!fs.existsSync(__filename.toLowerCase()))}FileSystem.isCaseSensitive=isCaseSensitive,FileSystem.isParent=function(parent,child){return isCaseSensitive()?0===path.normalize(child).indexOf(path.normalize(parent)):0==path.normalize(child).toLowerCase().indexOf(path.normalize(parent).toLowerCase())}}(FileSystem=exports.FileSystem||(exports.FileSystem={})),exports.resolveModulePath=resolveModulePath,exports.resolveModule2=function(workspaceRoot,moduleName,nodePath,tracer){return resolveModulePath(workspaceRoot,moduleName,nodePath,tracer).then(path=>(tracer&&tracer(`Module ${moduleName} got resolved to ${path}`),__webpack_require__(63)(path)))}}).call(this,"/index.js")},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const generic_1=__importDefault(__webpack_require__(19));class InvalidActionException extends generic_1.default{constructor(message="Invalid Action!"){super(message)}}exports.InvalidActionException=InvalidActionException},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_languageserver_1=__webpack_require__(61),contracts_1=__webpack_require__(43);class NotifyResponseError extends vscode_languageserver_1.ResponseError{constructor(code,message,data){super(code,message,data)}}class MissingModuleException extends NotifyResponseError{constructor(moduleName,moduleVersion="latest",conn,mustUpgrade=!1){super(1e3,`Missing module "${moduleName}@${moduleVersion}". Need to ${mustUpgrade?"upgrade":"install"}.`,{notification:contracts_1.MissingModuleNotification,dontNotify:!0,args:{conn:conn,moduleName:moduleName,moduleVersion:moduleVersion,action:mustUpgrade?"upgrade":"install"}})}}exports.MissingModuleException=MissingModuleException,exports.default=MissingModuleException},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const generic_1=__importDefault(__webpack_require__(19));class NotFoundException extends generic_1.default{}exports.NotFoundException=NotFoundException,exports.default=NotFoundException},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const generic_1=__importDefault(__webpack_require__(19));class MethodNotImplementedException extends generic_1.default{constructor(message="Method not implemented!"){super(message)}}exports.MethodNotImplementedException=MethodNotImplementedException,exports.default=MethodNotImplementedException},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const generic_1=__importDefault(__webpack_require__(19));class SizeException extends generic_1.default{}exports.SizeException=SizeException},function(module){module.exports=JSON.parse('{"name":"@sqltools/extension","displayName":"SQLTools - Database tools","description":"Database management done right. Connection explorer, query runner, intellisense, bookmarks, query history. Feel like a database hero!","version":"0.21.6","publisher":"mtxr","license":"MIT","preview":false,"repository":{"url":"https://github.com/mtxr/vscode-sqltools","type":"git"},"homepage":"https://github.com/mtxr/vscode-sqltools","bugs":{"url":"https://github.com/mtxr/vscode-sqltools/issues"},"main":"./extension.js","author":"Matheus Teixeira <me@mteixeira.me>","private":true,"engines":{"vscode":"^1.36.0"},"categories":["Programming Languages","Snippets","Formatters","Other"],"keywords":["cassandra","cql","database","db","db2","dba","formatter","ibm_db","mssql","mysql","oracle","oracledb","postgres","postgresql","redshift","rdbms","dbms","sql server","sql","sqlite","sqlplus","sqltools","sap","saphana"],"galleryBanner":{"theme":"dark","color":"#555555"},"icon":"static/icon.png","badges":[{"description":"Docs","url":"https://img.shields.io/badge/docs-here-blueviolet?style=flat-square","href":"https://vscode-sqltools.mteixeira.dev"},{"description":"Patreon Support","url":"https://img.shields.io/badge/patreon-support-blue.svg?logo=patreon?style=flat-square","href":"https://www.patreon.com/mteixeira"},{"description":"PayPal Donate","url":"https://img.shields.io/badge/paypal-donate-blue.svg?logo=paypal?style=flat-square","href":"https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=RSMB6DGK238V8"},{"description":"Gitter","url":"https://img.shields.io/gitter/room/mtxr/vscode-sqltools.svg?style=flat-square","href":"https://gitter.im/vscode-sqltools"},{"description":"LICENSE","url":"https://img.shields.io/github/license/mtxr/vscode-sqltools?style=flat-square","href":"https://github.com/mtxr/vscode-sqltools/blob/master/LICENSE.md"}],"activationEvents":["*","onLanguage:sql","onCommand:SQLTools.selectConnection"],"contributes":{"languages":[{"id":"sql","extensions":[".sql",".dsql"],"aliases":["SQL","sql"],"firstLine":"^[\\\\s\\\\t]*--[\\\\s\\\\t]*\\\\b[sS][qQ][lL]\\\\b","configuration":"./language/language-configuration.json"}],"grammars":[{"language":"sql","scopeName":"source.sql","path":"./language/sql.tmLanguage.json"}],"commands":[{"title":"Connect","command":"SQLTools.selectConnection","category":"SQLTools","icon":{"light":"icons/connect-light.svg","dark":"icons/connect-dark.svg"}},{"title":"Disconnect","command":"SQLTools.closeConnection","category":"SQLTools","icon":{"light":"icons/disconnect-light.svg","dark":"icons/disconnect-dark.svg"}},{"title":"Bookmark Selected Query","command":"SQLTools.bookmarkSelection","category":"SQLTools Bookmarks"},{"title":"Delete All","command":"SQLTools.clearBookmarks","category":"SQLTools Bookmarks"},{"title":"Delete","command":"SQLTools.deleteBookmark","category":"SQLTools Bookmarks"},{"title":"Edit","command":"SQLTools.editBookmark","category":"SQLTools Bookmarks"},{"title":"Run","command":"SQLTools.runFromBookmarks","category":"SQLTools Bookmarks"},{"title":"Run","command":"SQLTools.runFromHistory","category":"SQLTools History"},{"title":"Edit From History","command":"SQLTools.editHistory","category":"SQLTools History"},{"title":"Describe Table","command":"SQLTools.describeTable","category":"SQLTools Connection"},{"title":"Format Selected Query For Any Document","command":"SQLTools.formatSql","category":"SQLTools"},{"title":"Run Selected Query","command":"SQLTools.executeQuery","category":"SQLTools Connection"},{"title":"Run This File","command":"SQLTools.executeQueryFromFile","category":"SQLTools Connection"},{"title":"Run Query","command":"SQLTools.executeFromInput","category":"SQLTools Connection"},{"title":"Show Output Channel Logs","command":"SQLTools.showOutputChannel","category":"SQLTools Management"},{"title":"Focus On Connection Explorer","command":"SQLTools.focusOnExplorer","category":"SQLTools Management"},{"title":"Show Table Records","command":"SQLTools.showRecords","category":"SQLTools Connection","icon":{"light":"icons/show-light.svg","dark":"icons/show-dark.svg"}},{"title":"About","command":"SQLTools.aboutVersion","category":"SQLTools Management"},{"title":"Add New Connection","command":"SQLTools.openAddConnectionScreen","category":"SQLTools Management","icon":{"light":"icons/add-connection-light.svg","dark":"icons/add-connection-dark.svg"}},{"title":"Edit Connection","command":"SQLTools.openEditConnectionScreen","category":"SQLTools Management"},{"title":"Open settings","command":"SQLTools.openSettings","category":"SQLTools Management"},{"title":"Delete Connection","command":"SQLTools.deleteConnection","category":"SQLTools Management"},{"title":"Add Name(s) To Cursor","command":"SQLTools.insertText","category":"SQLTools Sidebar"},{"title":"Copy Name(s)","command":"SQLTools.copyTextFromTreeItem","category":"SQLTools Sidebar"},{"title":"Generate Insert Query","command":"SQLTools.generateInsertQuery","category":"SQLTools Sidebar","icon":{"light":"icons/add-light.svg","dark":"icons/add-dark.svg"}},{"title":"Refresh","command":"SQLTools.refreshTree","category":"SQLTools Sidebar","icon":{"light":"icons/refresh-light.svg","dark":"icons/refresh-dark.svg"}},{"title":"New Sql File","command":"SQLTools.newSqlFile","category":"SQLTools","icon":{"light":"icons/new-sql-file-light.svg","dark":"icons/new-sql-file-dark.svg"}},{"title":"Save Results","command":"SQLTools.saveResults","category":"SQLTools Results","icon":{"light":"icons/save-light.svg","dark":"icons/save-dark.svg"}},{"title":"Attach Connection To This File","command":"SQLTools.attachFileToConnection","category":"SQLTools Internal"},{"title":"Detach Connection From File","command":"SQLTools.detachConnectionFromFile","category":"SQLTools Internal"}],"keybindings":[{"command":"SQLTools.formatSql","key":"ctrl+e ctrl+b","mac":"cmd+e cmd+b","when":"editorTextFocus && !editorReadonly"},{"command":"SQLTools.copyTextFromTreeItem","key":"ctrl+c","mac":"cmd+c","when":"focusedView == SQLTools/connectionExplorer && sideBarFocus"},{"command":"SQLTools.executeQuery","key":"ctrl+e ctrl+e","mac":"cmd+e cmd+e","when":"editorTextFocus"},{"command":"SQLTools.describeTable","key":"ctrl+e ctrl+d","mac":"cmd+e cmd+d"},{"command":"SQLTools.runFromHistory","key":"ctrl+e ctrl+h","mac":"cmd+e cmd+h"},{"command":"SQLTools.runFromBookmarks","key":"ctrl+e ctrl+a","mac":"cmd+e cmd+a"},{"command":"SQLTools.showRecords","key":"ctrl+e ctrl+s","mac":"cmd+e cmd+s"},{"command":"SQLTools.deleteBookmark","key":"ctrl+e ctrl+r","mac":"cmd+e cmd+r"},{"command":"SQLTools.bookmarkSelection","key":"ctrl+e ctrl+q","mac":"cmd+e q","when":"editorTextFocus && !editorReadonly"}],"configuration":{"type":"object","title":"SQLTools Settings","properties":{"sqltools.disableReleaseNotifications":{"type":"boolean","default":false,"description":"Disable new release notifications."},"sqltools.autoConnectTo":{"type":["string","array"],"default":[],"required":false,"markdownDescription":"Name(s) of the connection to auto connect on start","items":{"type":"string"}},"sqltools.telemetry":{"type":"boolean","default":true,"description":"Help SQLTools development. You can opt-out any time."},"sqltools.showStatusbar":{"type":"boolean","default":true,"description":"Toggle statusbar visibility."},"sqltools.historySize":{"type":"number","default":100,"description":"Number of queries to keep on History."},"sqltools.completionLanguages":{"type":"array","default":["sql"],"items":{"type":"string"},"markdownDescription":"Languages with SQL completion enabled.\\n\\nYou can use any language identifier defined on https://code.visualstudio.com/docs/languages/identifiers."},"sqltools.formatLanguages":{"type":"array","default":["sql"],"items":{"type":"string"},"markdownDescription":"Languages with SQL formatting enabled.\\n\\nYou can use any language identifier defined on https://code.visualstudio.com/docs/languages/identifiers."},"sqltools.codelensLanguages":{"type":"array","default":["sql"],"items":{"type":"string"},"markdownDescription":"Languages with SQL codelens enabled.\\n\\nYou can use any language identifier defined on https://code.visualstudio.com/docs/languages/identifiers.\\n\\nMore info about codelens, see https://vscode-sqltools.mteixeira.dev/features/codelens"},"sqltools.format":{"type":"object","properties":{"indentSize":{"type":"number","default":2,"description":"Indent size"},"reservedWordCase":{"type":["string","null"],"default":null,"description":"Reserverd word case"}}},"sqltools.queryParams.enableReplace":{"type":"boolean","default":false,"description":"Enables query parameter checking","required":false},"sqltools.queryParams.regex":{"type":"string","default":"\\\\$[\\\\d]+|\\\\$\\\\[[\\\\d\\\\w]+\\\\]","description":"RegEx used to identify query parameters","required":true},"sqltools.connections":{"type":"array","markdownDescription":"Connections list","default":[],"items":{"type":"object","properties":{"name":{"type":"string","description":"Connection name"},"server":{"type":"string","description":"Server address","default":"127.0.0.1"},"port":{"type":"number","description":"Port for connection"},"socketPath":{"type":"string","required":false,"description":"Path of socket file to connect using UNIX sockets. MySQL only for now."},"database":{"type":"string","required":false,"description":"Database name"},"domain":{"type":["string","null"],"description":"Connection domain (for MSSQL/Azure only)","required":false},"username":{"type":"string","description":"Database username"},"password":{"type":["string","null"],"description":"Connection password","required":false},"askForPassword":{"type":"boolean","description":"Ask for password instead of set it in your settings","required":false,"default":false},"dialect":{"type":"string","enum":["AWS Redshift","DB2","Cassandra","MariaDB","MSSQL","MySQL","OracleDB","PostgreSQL","SAPHana","SQLite"],"description":"Connection Dialect","required":false},"connectString":{"type":["string","null"],"description":"Connect string. Support for Oracle, PostgreSQL and AWS Redshift.","required":false},"mssqlOptions":{"type":["null","object"],"description":"See https://vscode-sqltools.mteixeira.dev/connections/mssql#1-1-specific-options for more details.","required":false,"default":{},"properties":{"encrypt":{"type":["boolean","null"],"default":null,"description":"Encrypt connection"}}},"mysqlOptions":{"type":["object","null"],"description":"See https://vscode-sqltools.mteixeira.dev/connections/mysql#2-mysqloptions for more details.","default":{},"required":false,"properties":{"authProtocol":{"required":false,"type":"string","enum":["xprotocol","default"],"default":"default"},"ssl":{"required":false,"type":["boolean","object","string","null"],"default":null}}},"pgOptions":{"type":["object","null"],"default":{},"required":false,"description":"See https://vscode-sqltools.mteixeira.dev/connections/postgresql#1-1-specific-options for more details.","properties":{"ssl":{"required":false,"type":["boolean","object","null"],"default":null}}},"oracleOptions":{"type":["object","null"],"default":{},"required":false,"description":"See https://vscode-sqltools.mteixeira.dev/connections/oracledb#2-3-specific-options for more details."},"connectionTimeout":{"type":"number","description":"Connection timeout in seconds","required":false,"default":15},"previewLimit":{"type":"number","description":"Connection show records limit"},"icons":{"type":["object","null"],"default":null,"required":false,"description":"Define an icon for this connection. If not specified, use defaults","properties":{"active":{"required":false,"type":"string","default":null},"connected":{"required":false,"type":"string","default":null},"disconnected":{"required":false,"type":"string","default":null}}}}}},"sqltools.results":{"type":"object","default":{},"properties":{"limit":{"type":"number","description":"Global show records limit","default":50},"location":{"type":["string","number"],"default":"next","enum":["next","current","end"],"description":"Define where the results should show up. Use the defined strings or any number defined in https://code.visualstudio.com/api/references/vscode-api#ViewColumn"},"customization":{"type":"object","default":{},"properties":{"font-family":{"type":"string"},"font-size":{"type":"string"},"table-cell-padding":{"type":"string","default":"2px 4px"}}}}},"sqltools.tableTreeItemsExpanded":{"type":"boolean","default":false,"description":"Table columns should be expanded on load?"},"sqltools.defaultExportType":{"type":"string","enum":["prompt","csv","json"],"default":"prompt","description":"Default export results mode."},"sqltools.useNodeRuntime":{"type":["null","boolean","string"],"default":false,"description":"Enable node runtime usage."},"sqltools.languageServerEnv":{"type":"object","default":{},"description":"Set environment variables to be passed to language server. Eg: ORACLE_HOME, PATH..."},"sqltools.sortColumns":{"type":["null","string"],"enum":["name","ordinalnumber"],"default":"name","description":"Sort columns criteria."},"sqltools.flattenGroupsIfOne":{"type":"boolean","default":false,"description":"Flatten groups with has only one child"},"sqltools.autoOpenSessionFiles":{"type":"boolean","default":true,"description":"Auto open session file when connect"},"sqltools.dependencyManager":{"type":"object","description":"Dependency manager settings","default":{"packageManager":"npm","installArgs":["install"],"runScriptArgs":["run"],"autoAccept":false},"properties":{"packageManager":{"type":"string","markdownDescription":"Package manager name or path. Eg. yarn, npm or absolute paths like /usr/bin/npm","default":"npm"},"installArgs":{"type":"array","description":"Array of args passed when installing. If you use yarn, this shoud be set to `[\\"add\\"]`","default":["install"]},"runScriptArgs":{"type":"array","description":"Array of args passed when runnning npm scripts.","default":["run"]},"autoAccept":{"type":"boolean","default":false,"description":"Ignore confirmation requests to install or updagre dependencies."}}}}},"views":{"SQLToolsExplorer":[{"id":"SQLTools/connectionExplorer","name":"Connections"},{"id":"SQLTools/bookmarksExplorer","name":"Bookmarks"},{"id":"SQLTools/historyExplorer","name":"Query History"}]},"viewsContainers":{"activitybar":[{"id":"SQLToolsExplorer","icon":"icons/database-sidebar.svg","title":"SQLTools"}]},"menus":{"commandPalette":[{"command":"SQLTools.insertText","when":"false"},{"command":"SQLTools.copyTextFromTreeItem","when":"false"},{"command":"SQLTools.refreshTree","when":"false"},{"command":"SQLTools.generateInsertQuery","when":"false"},{"command":"SQLTools.attachFileToConnection","when":"!sqltools.file.connectionAttached && editorLangId == sql"},{"command":"SQLTools.detachConnectionFromFile","when":"sqltools.file.connectionAttached && editorLangId == sql"},{"command":"SQLTools.saveResults","when":"sqltools.Results.active"},{"command":"SQLTools.formatSql","when":"editorHasSelection"},{"command":"SQLTools.executeQuery","when":"editorHasSelection"},{"command":"SQLTools.bookmarkSelection","when":"editorHasSelection"}],"view/title":[{"command":"SQLTools.openAddConnectionScreen","when":"view == SQLTools/connectionExplorer","group":"navigation@1"},{"command":"SQLTools.newSqlFile","when":"view == SQLTools/connectionExplorer","group":"navigation@2"},{"command":"SQLTools.refreshTree","when":"view == SQLTools/connectionExplorer","group":"navigation@3"},{"command":"SQLTools.clearBookmarks","when":"view == SQLTools/bookmarksExplorer","group":"navigation@1"}],"view/item/context":[{"command":"SQLTools.selectConnection","when":"view == SQLTools/connectionExplorer && viewItem == connection","group":"navigation@0"},{"command":"SQLTools.closeConnection","when":"view == SQLTools/connectionExplorer && viewItem == connectedConnection","group":"navigation@0"},{"command":"SQLTools.refreshTree","when":"view == SQLTools/connectionExplorer && viewItem == connectedConnection","group":"navigation@0"},{"command":"SQLTools.openEditConnectionScreen","when":"view == SQLTools/connectionExplorer && viewItem =~ /^(connection|connectedConnection)$/","group":"navigation@1"},{"command":"SQLTools.openSettings","when":"view == SQLTools/connectionExplorer && viewItem == connection","group":"sqltools.dbExplorer.edit@0"},{"command":"SQLTools.deleteConnection","when":"view == SQLTools/connectionExplorer && viewItem =~ /^(connection|connectedConnection)$/","group":"sqltools.dbExplorer@0"},{"command":"SQLTools.showRecords","when":"view == SQLTools/connectionExplorer && viewItem == connection.tableOrView","group":"navigation@1"},{"command":"SQLTools.describeTable","when":"view == SQLTools/connectionExplorer && viewItem == connection.tableOrView","group":"navigation@2"},{"command":"SQLTools.generateInsertQuery","when":"!editorReadonly && view == SQLTools/connectionExplorer && viewItem == connection.tableOrView","group":"navigation@3"},{"command":"SQLTools.insertText","when":"!editorReadonly && view == SQLTools/connectionExplorer && viewItem =~ /^connection\\\\.(resource_group|tableOrView|column|function)/","group":"sqltools.connectionExplorer.edit@0"},{"command":"SQLTools.copyTextFromTreeItem","when":"!editorReadonly && view == SQLTools/connectionExplorer && viewItem =~ /^connection\\\\.(resource_group|tableOrView|column|function)/","group":"sqltools.connectionExplorer.edit@1"},{"command":"SQLTools.selectConnection","when":"view == SQLTools/connectionExplorer && viewItem == connection","group":"inline@0"},{"command":"SQLTools.closeConnection","when":"view == SQLTools/connectionExplorer && viewItem == connectedConnection","group":"inline@0"},{"command":"SQLTools.generateInsertQuery","when":"view == SQLTools/connectionExplorer && viewItem == connection.tableOrView","group":"inline@0"},{"command":"SQLTools.showRecords","when":"view == SQLTools/connectionExplorer && viewItem == connection.tableOrView","group":"inline@1"},{"command":"SQLTools.runFromHistory","when":"view == SQLTools/historyExplorer && viewItem == history.item","group":"inline@0"},{"command":"SQLTools.runFromHistory","when":"view == SQLTools/historyExplorer && viewItem == history.item","group":"navigation@0"},{"command":"SQLTools.editHistory","when":"view == SQLTools/historyExplorer && viewItem == history.item","group":"navigation@1"},{"command":"SQLTools.runFromBookmarks","when":"view == SQLTools/bookmarksExplorer && viewItem == bookmark.item","group":"inline@0"},{"command":"SQLTools.runFromBookmarks","when":"view == SQLTools/bookmarksExplorer && viewItem == bookmark.item","group":"navigation@0"},{"command":"SQLTools.editBookmark","when":"view == SQLTools/bookmarksExplorer && viewItem == bookmark.item","group":"navigation@1"},{"command":"SQLTools.deleteBookmark","when":"view == SQLTools/bookmarksExplorer && viewItem == bookmark.item","group":"sqltools.bmExplorer@0"}],"editor/title":[{"command":"SQLTools.saveResults","group":"navigation","when":"sqltools.Results.active"}],"editor/context":[{"command":"SQLTools.attachFileToConnection","group":"sqltools@0","when":"!sqltools.file.connectionAttached && editorLangId == sql"},{"command":"SQLTools.detachConnectionFromFile","group":"sqltools@0","when":"sqltools.file.connectionAttached && editorLangId == sql"},{"command":"SQLTools.formatSql","group":"sqltools@2","when":"editorHasSelection"},{"command":"SQLTools.executeQuery","group":"sqltools@01","when":"editorHasSelection"},{"command":"SQLTools.bookmarkSelection","group":"sqltools@3","when":"editorHasSelection"}],"explorer/context":[{"command":"SQLTools.attachFileToConnection","group":"sqltools@0","when":"resourceLangId == sql"}]}},"scripts":{"vscode:prepublish":"yarn run compile","compile":"cross-env NODE_ENV=production ./node_modules/.bin/webpack","watch":"cross-env NODE_ENV=development ./node_modules/.bin/webpack --watch --info-verbosity verbose","postinstall":"yarn run vscode-install","postversion":"vsce publish && git push && git push --tags"},"devDependencies":{"@babel/cli":"^7.5.5","@types/jest":"^24.0.11","@types/vscode":"^1.36.0","babel-loader":"^8.0.4","copy-webpack-plugin":"^5.0.0","cross-env":"^5.2.0","css-loader":"^3.2.0","file-loader":"^4.2.0","jest":"^24.5.0","jest-cli":"^24.5.0","mini-css-extract-plugin":"^0.8.0","node-sass":"^4.11.0","optimize-css-assets-webpack-plugin":"^5.0.3","sass-loader":"^7.2.0","terser-webpack-plugin":"^1.3.0","ts-jest":"^24.0.2","ts-loader":"^6.0.0","typescript":"^3.4.1","vscode":"^1.1.36","webpack":"^4.35.0","webpack-cli":"^3.3.5"},"dependencies":{"@sqltools/core":"*","@sqltools/plugins":"*","vscode-languageclient":"5.2.1"}}')},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const StandardSqlFormatter_1=__importDefault(__webpack_require__(124));exports.default={format:(query,cfg={})=>new StandardSqlFormatter_1.default(cfg).format(query),tokenize:(query,cfg={})=>new StandardSqlFormatter_1.default(cfg).tokenize(query)}},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const Formatter_1=__importDefault(__webpack_require__(125)),Tokenizer_1=__importDefault(__webpack_require__(156));let tokenizer;function getTokenizer(){return tokenizer||(tokenizer=new Tokenizer_1.default({reservedWords:reservedWords,reservedToplevelWords:reservedToplevelWords,reservedNewlineWords:reservedNewlineWords,stringTypes:['""',"N''","''","``","[]"],openParens:["(","CASE"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:["@",":","%"],lineCommentTypes:["#","--"],tableNamePrefixWords:tableNamePrefixWords})),tokenizer}exports.default=class StandardSqlFormatter{constructor(cfg){this.cfg=cfg}format(query){return new Formatter_1.default(this.cfg,getTokenizer()).format(query)}tokenize(query){return getTokenizer().tokenize(query)}};const tableNamePrefixWords=["UPDATE","DELETE FROM","FROM","CROSS JOIN","INNER JOIN","LEFT JOIN","LEFT OUTER JOIN","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","JOIN","INSERT INTO","INSERT","ALTER TABLE"],reservedWords=["ACCESSIBLE","ACTION","AGAINST","AGGREGATE","ALGORITHM","ALL","ALTER","ANALYSE","ANALYZE","AS","ASC","AUTOCOMMIT","AUTO_INCREMENT","BACKUP","BEGIN","BETWEEN","BINLOG","BOTH","CASCADE","CASE","CHANGE","CHANGED","CHARACTER SET","CHARSET","CHECK","CHECKSUM","COLLATE","COLLATION","COLUMN","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPRESSED","CONCURRENT","CONSTRAINT","CONTAINS","CONVERT","CREATE","CROSS","CURRENT_TIMESTAMP","DATABASE","DATABASES","DAY","DAY_HOUR","DAY_MINUTE","DAY_SECOND","DEFAULT","DEFINER","DELAYED","DELETE","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DO","DROP","DUMPFILE","DUPLICATE","DYNAMIC","ELSE","ENCLOSED","END","ENGINE","ENGINES","ENGINE_TYPE","ESCAPE","ESCAPED","EVENTS","EXEC","EXECUTE","EXISTS","EXPLAIN","EXTENDED","FAST","FETCH","FIELDS","FILE","FIRST","FIXED","FLUSH","FOR","FORCE","FOREIGN","FULL","FULLTEXT","FUNCTION","GLOBAL","GRANT","GRANTS","GROUP_CONCAT","HEAP","HIGH_PRIORITY","HOSTS","HOUR","HOUR_MINUTE","HOUR_SECOND","IDENTIFIED","IF","IFNULL","IGNORE","IN","INDEX","INDEXES","INFILE","INSERT","INSERT_ID","INSERT_METHOD","INTERVAL","INTO","INVOKER","IS","ISOLATION","KEY","KEYS","KILL","LAST_INSERT_ID","LEADING","LEVEL","LIKE","LINEAR","LINES","LOAD","LOCAL","LOCK","LOCKS","LOGS","LOW_PRIORITY","MARIA","MASTER","MASTER_CONNECT_RETRY","MASTER_HOST","MASTER_LOG_FILE","MATCH","MAX_CONNECTIONS_PER_HOUR","MAX_QUERIES_PER_HOUR","MAX_ROWS","MAX_UPDATES_PER_HOUR","MAX_USER_CONNECTIONS","MEDIUM","MERGE","MINUTE","MINUTE_SECOND","MIN_ROWS","MODE","MODIFY","MONTH","MRG_MYISAM","MYISAM","NAMES","NATURAL","NOT","NOW()","NULL","OFFSET","ON DELETE","ON UPDATE","ON","ONLY","OPEN","OPTIMIZE","OPTION","OPTIONALLY","OUTFILE","PACK_KEYS","PAGE","PARTIAL","PARTITION","PARTITIONS","PASSWORD","PRIMARY","PRIVILEGES","PROCEDURE","PROCESS","PROCESSLIST","PURGE","QUICK","RAID0","RAID_CHUNKS","RAID_CHUNKSIZE","RAID_TYPE","RANGE","READ","READ_ONLY","READ_WRITE","REFERENCES","REGEXP","RELOAD","RENAME","REPAIR","REPEATABLE","REPLACE","REPLICATION","RESET","RESTORE","RESTRICT","RETURN","RETURNS","REVOKE","RLIKE","ROLLBACK","ROW","ROWS","ROW_FORMAT","SECOND","SECURITY","SEPARATOR","SERIALIZABLE","SESSION","SHARE","SHOW","SHUTDOWN","SLAVE","SONAME","SOUNDS","SQL","SQL_AUTO_IS_NULL","SQL_BIG_RESULT","SQL_BIG_SELECTS","SQL_BIG_TABLES","SQL_BUFFER_RESULT","SQL_CACHE","SQL_CALC_FOUND_ROWS","SQL_LOG_BIN","SQL_LOG_OFF","SQL_LOG_UPDATE","SQL_LOW_PRIORITY_UPDATES","SQL_MAX_JOIN_SIZE","SQL_NO_CACHE","SQL_QUOTE_SHOW_CREATE","SQL_SAFE_UPDATES","SQL_SELECT_LIMIT","SQL_SLAVE_SKIP_COUNTER","SQL_SMALL_RESULT","SQL_WARNINGS","START","STARTING","STATUS","STOP","STORAGE","STRAIGHT_JOIN","STRING","STRIPED","SUPER","TABLE","TABLES","TEMPORARY","TERMINATED","THEN","TO","TRAILING","TRANSACTIONAL","TRUE","TRUNCATE","TYPE","TYPES","UNCOMMITTED","UNIQUE","UNLOCK","UNSIGNED","USAGE","USE","USING","VARIABLES","VIEW","WHEN","WITH","WORK","WRITE","YEAR_MONTH"],reservedToplevelWords=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INSERT","INTERSECT","LIMIT","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UNION ALL","UNION","UPDATE","VALUES","WHERE"],reservedNewlineWords=["AND","CROSS APPLY","CROSS JOIN","ELSE","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RENAME","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"]},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const trimEnd_1=__importDefault(__webpack_require__(126)),types_1=__webpack_require__(50),Indentation_1=__importDefault(__webpack_require__(143)),InlineBlock_1=__importDefault(__webpack_require__(154)),Params_1=__importDefault(__webpack_require__(155));exports.default=class Formatter{constructor(cfg,tokenizer){this.cfg=cfg,this.tokenizer=tokenizer,this.tokens=[],this.previousReservedWord={type:null,value:null},this.index=0,this.indentation=new Indentation_1.default(this.cfg.indent),this.inlineBlock=new InlineBlock_1.default,this.params=new Params_1.default(this.cfg.params)}format(query){return this.tokens=this.tokenizer.tokenize(query),this.getFormattedQueryFromTokens().trim()}reservedWord(word){return"upper"===this.cfg.reservedWordCase?word.toUpperCase():"lower"===this.cfg.reservedWordCase?word.toLowerCase():word}getFormattedQueryFromTokens(){let formattedQuery="";return this.tokens.forEach((token,index)=>{this.index=index,token.type===types_1.TokenTypes.WHITESPACE||(token.type===types_1.TokenTypes.LINE_COMMENT?formattedQuery=this.formatLineComment(token,formattedQuery):token.type===types_1.TokenTypes.BLOCK_COMMENT?formattedQuery=this.formatBlockComment(token,formattedQuery):token.type===types_1.TokenTypes.TABLENAME_PREFIX?formattedQuery=this.formatTablePrefix(token,formattedQuery):token.type===types_1.TokenTypes.RESERVED_TOPLEVEL?(formattedQuery=this.formatToplevelReservedWord(token,formattedQuery),this.previousReservedWord=token):token.type===types_1.TokenTypes.RESERVED_NEWLINE?(formattedQuery=this.formatNewlineReservedWord(token,formattedQuery),this.previousReservedWord=token):token.type===types_1.TokenTypes.RESERVED?(formattedQuery=this.formatWithSpaces(token,formattedQuery),this.previousReservedWord=token):formattedQuery=token.type===types_1.TokenTypes.OPEN_PAREN?this.formatOpeningParentheses(token,formattedQuery):token.type===types_1.TokenTypes.CLOSE_PAREN?this.formatClosingParentheses(token,formattedQuery):token.type===types_1.TokenTypes.PLACEHOLDER?this.formatPlaceholderOrVariable(token,formattedQuery):token.type===types_1.TokenTypes.SERVERVARIABLE?this.formatPlaceholderOrVariable(token,formattedQuery):","===token.value?this.formatComma(token,formattedQuery):"."===token.value?this.formatWithoutSpaces(token,formattedQuery):";"===token.value||token.type===types_1.TokenTypes.QUERY_SEPARATOR?this.formatQuerySeparator(token,formattedQuery):this.formatWithSpaces(token,formattedQuery))}),formattedQuery}formatLineComment(token,query){return this.addNewline(query+token.value)}formatBlockComment(token,query){return this.addNewline(this.addNewline(query)+this.indentComment(token.value))}indentComment(comment){return comment.replace(/\r\n|\n/g,"\n"+this.indentation.getIndent())}formatToplevelReservedWord(token,query){return this.indentation.decreaseTopLevel(),query=this.addNewline(query),this.indentation.increaseToplevel(),query+=this.equalizeWhitespace(this.reservedWord(token.value)),this.addNewline(query)}formatNewlineReservedWord(token,query){return this.addNewline(query)+this.equalizeWhitespace(this.reservedWord(token.value))+" "}equalizeWhitespace(string){return string.replace(/\s+/g," ")}formatOpeningParentheses(token,query){return[types_1.TokenTypes.WHITESPACE,types_1.TokenTypes.OPEN_PAREN,types_1.TokenTypes.LINE_COMMENT].includes(this.previousToken().type)||(query=trimEnd_1.default(query)),query+=token.value,this.inlineBlock.beginIfPossible(this.tokens,this.index),this.inlineBlock.isActive()||(this.indentation.increaseBlockLevel(),query=this.addNewline(query)),query}formatClosingParentheses(token,query){return this.inlineBlock.isActive()?(this.inlineBlock.end(),this.formatWithSpaceAfter(token,query)):(this.indentation.decreaseBlockLevel(),this.formatWithSpaces(token,this.addNewline(query)))}formatPlaceholderOrVariable(token,query){return query+this.params.get(token)+" "}formatComma(token,query){return query=this.trimTrailingWhitespace(query)+token.value+" ",this.inlineBlock.isActive()?query:/^LIMIT$/i.test(this.previousReservedWord.value)?query:this.addNewline(query)}formatWithSpaceAfter(token,query){return this.trimTrailingWhitespace(query)+token.value+" "}formatWithoutSpaces(token,query){return this.trimTrailingWhitespace(query)+token.value}formatWithSpaces(token,query){return query+token.value+" "}formatTablePrefix(token,query){return this.indentation.decreaseTopLevel(),query=this.addNewline(query),this.indentation.increaseToplevel(),query+this.equalizeWhitespace(this.reservedWord(token.value))+" "}formatQuerySeparator(token,query){return this.trimTrailingWhitespace(query)+trimEnd_1.default(token.value)+"\n"}addNewline(query){return trimEnd_1.default(query)+"\n"+this.indentation.getIndent()}trimTrailingWhitespace(query){return this.previousNonWhitespaceToken().type===types_1.TokenTypes.LINE_COMMENT?trimEnd_1.default(query)+"\n":trimEnd_1.default(query)}previousNonWhitespaceToken(){let n=1;for(;this.previousToken(n).type===types_1.TokenTypes.WHITESPACE;)n++;return this.previousToken(n)}previousToken(offset=1){return this.tokens[this.index-offset]||{type:null,value:null}}}},function(module,exports,__webpack_require__){var baseToString=__webpack_require__(66),castSlice=__webpack_require__(132),charsEndIndex=__webpack_require__(134),stringToArray=__webpack_require__(139),toString=__webpack_require__(33),reTrimEnd=/\s+$/;module.exports=function(string,chars,guard){if((string=toString(string))&&(guard||void 0===chars))return string.replace(reTrimEnd,"");if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string),end=charsEndIndex(strSymbols,stringToArray(chars))+1;return castSlice(strSymbols,0,end).join("")}},function(module,exports){var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global;module.exports=freeGlobal},function(module,exports){module.exports=function(array,iteratee){for(var index=-1,length=null==array?0:array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(47),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=function(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}},function(module,exports){var nativeObjectToString=Object.prototype.toString;module.exports=function(value){return nativeObjectToString.call(value)}},function(module,exports){module.exports=function(value){return null!=value&&"object"==typeof value}},function(module,exports,__webpack_require__){var baseSlice=__webpack_require__(133);module.exports=function(array,start,end){var length=array.length;return end=void 0===end?length:end,!start&&end>=length?array:baseSlice(array,start,end)}},function(module,exports){module.exports=function(array,start,end){var index=-1,length=array.length;start<0&&(start=-start>length?0:length+start),(end=end>length?length:end)<0&&(end+=length),length=start>end?0:end-start>>>0,start>>>=0;for(var result=Array(length);++index<length;)result[index]=array[index+start];return result}},function(module,exports,__webpack_require__){var baseIndexOf=__webpack_require__(135);module.exports=function(strSymbols,chrSymbols){for(var index=strSymbols.length;index--&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1;);return index}},function(module,exports,__webpack_require__){var baseFindIndex=__webpack_require__(136),baseIsNaN=__webpack_require__(137),strictIndexOf=__webpack_require__(138);module.exports=function(array,value,fromIndex){return value==value?strictIndexOf(array,value,fromIndex):baseFindIndex(array,baseIsNaN,fromIndex)}},function(module,exports){module.exports=function(array,predicate,fromIndex,fromRight){for(var length=array.length,index=fromIndex+(fromRight?1:-1);fromRight?index--:++index<length;)if(predicate(array[index],index,array))return index;return-1}},function(module,exports){module.exports=function(value){return value!=value}},function(module,exports){module.exports=function(array,value,fromIndex){for(var index=fromIndex-1,length=array.length;++index<length;)if(array[index]===value)return index;return-1}},function(module,exports,__webpack_require__){var asciiToArray=__webpack_require__(140),hasUnicode=__webpack_require__(141),unicodeToArray=__webpack_require__(142);module.exports=function(string){return hasUnicode(string)?unicodeToArray(string):asciiToArray(string)}},function(module,exports){module.exports=function(string){return string.split("")}},function(module,exports){var reHasUnicode=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");module.exports=function(string){return reHasUnicode.test(string)}},function(module,exports){var rsAstral="[\\ud800-\\udfff]",rsCombo="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsNonAstral="[^\\ud800-\\udfff]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",reOptMod="(?:"+rsCombo+"|"+rsFitz+")"+"?",rsSeq="[\\ufe0e\\ufe0f]?"+reOptMod+("(?:\\u200d(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")[\\ufe0e\\ufe0f]?"+reOptMod+")*"),rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");module.exports=function(string){return string.match(reUnicode)||[]}},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const repeat_1=__importDefault(__webpack_require__(144)),last_1=__importDefault(__webpack_require__(153)),INDENT_TYPE_TOP_LEVEL="top-level",INDENT_TYPE_BLOCK_LEVEL="block-level";exports.default=class Indentation{constructor(indent){this.indent=indent,this.indentTypes=[],this.indent=indent||"  "}getIndent(){return repeat_1.default(this.indent,this.indentTypes.length)}increaseToplevel(){this.indentTypes.push(INDENT_TYPE_TOP_LEVEL)}increaseBlockLevel(){this.indentTypes.push(INDENT_TYPE_BLOCK_LEVEL)}decreaseTopLevel(){last_1.default(this.indentTypes)===INDENT_TYPE_TOP_LEVEL&&this.indentTypes.pop()}decreaseBlockLevel(){for(;this.indentTypes.length>0;){if(this.indentTypes.pop()!==INDENT_TYPE_TOP_LEVEL)break}}}},function(module,exports,__webpack_require__){var baseRepeat=__webpack_require__(145),isIterateeCall=__webpack_require__(146),toInteger=__webpack_require__(150),toString=__webpack_require__(33);module.exports=function(string,n,guard){return n=(guard?isIterateeCall(string,n,guard):void 0===n)?1:toInteger(n),baseRepeat(toString(string),n)}},function(module,exports){var MAX_SAFE_INTEGER=9007199254740991,nativeFloor=Math.floor;module.exports=function(string,n){var result="";if(!string||n<1||n>MAX_SAFE_INTEGER)return result;do{n%2&&(result+=string),(n=nativeFloor(n/2))&&(string+=string)}while(n);return result}},function(module,exports,__webpack_require__){var eq=__webpack_require__(68),isArrayLike=__webpack_require__(147),isIndex=__webpack_require__(149),isObject=__webpack_require__(34);module.exports=function(value,index,object){if(!isObject(object))return!1;var type=typeof index;return!!("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object)&&eq(object[index],value)}},function(module,exports,__webpack_require__){var isFunction=__webpack_require__(69),isLength=__webpack_require__(148);module.exports=function(value){return null!=value&&isLength(value.length)&&!isFunction(value)}},function(module,exports){var MAX_SAFE_INTEGER=9007199254740991;module.exports=function(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}},function(module,exports){var MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;module.exports=function(value,length){var type=typeof value;return!!(length=null==length?MAX_SAFE_INTEGER:length)&&("number"==type||"symbol"!=type&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length}},function(module,exports,__webpack_require__){var toFinite=__webpack_require__(151);module.exports=function(value){var result=toFinite(value),remainder=result%1;return result==result?remainder?result-remainder:result:0}},function(module,exports,__webpack_require__){var toNumber=__webpack_require__(152),INFINITY=1/0,MAX_INTEGER=17976931348623157e292;module.exports=function(value){return value?(value=toNumber(value))===INFINITY||value===-INFINITY?(value<0?-1:1)*MAX_INTEGER:value==value?value:0:0===value?value:0}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(34),isSymbol=__webpack_require__(32),NAN=NaN,reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;module.exports=function(value){if("number"==typeof value)return value;if(isSymbol(value))return NAN;if(isObject(value)){var other="function"==typeof value.valueOf?value.valueOf():value;value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}},function(module,exports){module.exports=function(array){var length=null==array?0:array.length;return length?array[length-1]:void 0}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const types_1=__webpack_require__(50),INLINE_MAX_LENGTH=50;exports.default=class InlineBlock{constructor(){this.level=0}beginIfPossible(tokens,index){0===this.level&&this.isInlineBlock(tokens,index)?this.level=1:this.level>0?this.level++:this.level=0}end(){this.level--}isActive(){return this.level>0}isInlineBlock(tokens,index){let length=0,level=0;for(let i=index;i<tokens.length;i++){const token=tokens[i];if((length+=token.value.length)>INLINE_MAX_LENGTH)return!1;if(token.type===types_1.TokenTypes.OPEN_PAREN)level++;else if(token.type===types_1.TokenTypes.CLOSE_PAREN&&0===--level)return!0;if(this.isForbiddenToken(token))return!1}return!1}isForbiddenToken({type:type,value:value}){return type===types_1.TokenTypes.RESERVED_TOPLEVEL||type===types_1.TokenTypes.RESERVED_NEWLINE||type===types_1.TokenTypes.LINE_COMMENT||type===types_1.TokenTypes.BLOCK_COMMENT||";"===value}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class Params{constructor(params){this.params=params,this.index=0,this.params=params}get({key:key,value:value}){return this.params?key?this.params[key]:this.params[this.index++]:value}}},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const escapeRegExp_1=__importDefault(__webpack_require__(157)),types_1=__webpack_require__(50),wordUTF8="\\w$\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC";exports.default=class Tokenizer{constructor(cfg){this.WHITESPACE_REGEX=/^(\s+)/,this.NUMBER_REGEX=/^((-\s*)?[0-9]+(\.[0-9]+)?|0x[0-9a-fA-F]+|0b[01]+)\b/,this.OPERATOR_REGEX=/^(!=|<>|==|<=|>=|!<|!>|\|\||::|->>|->|~~\*|~~|!~~\*|!~~|~\*|!~\*|!~|.)/,this.QUERY_SEPARATOR_REGEX=/^(;[\n\r\s]*)/,this.BLOCK_COMMENT_REGEX=/^(\/\*[^]*?(?:\*\/|$))/,this.LINE_COMMENT_REGEX=this.createLineCommentRegex(cfg.lineCommentTypes),this.RESERVED_TOPLEVEL_REGEX=this.createReservedWordRegex(cfg.reservedToplevelWords),this.RESERVED_NEWLINE_REGEX=this.createReservedWordRegex(cfg.reservedNewlineWords),this.RESERVED_PLAIN_REGEX=this.createReservedWordRegex(cfg.reservedWords),this.TABLE_NAME_PREFIX_REGEX=this.createReservedWordRegex(cfg.tableNamePrefixWords),this.WORD_REGEX=new RegExp(`^([${wordUTF8}]+)`),this.TABLE_NAME_REGEX=new RegExp(`^([${wordUTF8}][${wordUTF8}\\.]*|[\\[\`][${wordUTF8}][${wordUTF8}\\. \\-]*[\\]\`])`,"i"),this.STRING_REGEX=this.createStringRegex(cfg.stringTypes),this.OPEN_PAREN_REGEX=this.createParenRegex(cfg.openParens),this.CLOSE_PAREN_REGEX=this.createParenRegex(cfg.closeParens),this.INDEXED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(cfg.indexedPlaceholderTypes,"[0-9]*"),this.IDENT_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(cfg.namedPlaceholderTypes,"[a-zA-Z0-9._$]+"),this.STRING_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(cfg.namedPlaceholderTypes,this.createStringPattern(cfg.stringTypes))}createLineCommentRegex(lineCommentTypes){return new RegExp(`^((?:${lineCommentTypes.map(c=>escapeRegExp_1.default(c)).join("|")}).*?(?:\r\n|\n|$))`)}createReservedWordRegex(reservedWords){const reservedWordsPattern=reservedWords.join("|").replace(/ /g,"\\s+");return new RegExp(`^(${reservedWordsPattern})\\b`,"i")}createStringRegex(stringTypes){return new RegExp("^("+this.createStringPattern(stringTypes)+")")}createStringPattern(stringTypes){const patterns={"``":"((`[^`]*($|`))+)","[]":"((\\[[^\\]]*($|\\]))(\\][^\\]]*($|\\]))*)",'""':'(("[^"\\\\]*(?:\\\\.[^"\\\\]*)*("|$))+)',"''":"(('[^'\\\\]*(?:\\\\.[^'\\\\]*)*('|$))+)","N''":"((N'[^N'\\\\]*(?:\\\\.[^N'\\\\]*)*('|$))+)"};return stringTypes.map(t=>patterns[t]).join("|")}createParenRegex(parens){return new RegExp("^("+parens.map(p=>this.escapeParen(p)).join("|")+")","i")}escapeParen(paren){return 1===paren.length?escapeRegExp_1.default(paren):"\\b"+paren+"\\b"}createPlaceholderRegex(types,pattern){const typesRegex=types.map(escapeRegExp_1.default).join("|");return new RegExp(`^((?:${typesRegex})(?:${pattern}))`)}tokenize(input){const tokens=[];let token;for(;input.length;)token=this.getNextToken(input,this.getPreviousToken(tokens),this.getPreviousToken(tokens,1)),input=input.substring(token.value.length),tokens.push(token);return tokens}getNextToken(input,tokenMinus1,tokenMinus2){return this.getWhitespaceToken(input)||this.getCommentToken(input)||this.getStringToken(input)||this.getOpenParenToken(input)||this.getCloseParenToken(input)||this.getServerVariableToken(input)||this.getPlaceholderToken(input)||this.getNumberToken(input)||this.getReservedWordToken(input,tokenMinus1)||this.getTableNameToken(input,tokenMinus1,tokenMinus2)||this.getWordToken(input)||this.getQuerySeparatorToken(input)||this.getOperatorToken(input)}getWhitespaceToken(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.WHITESPACE,regex:this.WHITESPACE_REGEX})}getCommentToken(input){return this.getLineCommentToken(input)||this.getBlockCommentToken(input)}getLineCommentToken(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.LINE_COMMENT,regex:this.LINE_COMMENT_REGEX})}getBlockCommentToken(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.BLOCK_COMMENT,regex:this.BLOCK_COMMENT_REGEX})}getStringToken(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.STRING,regex:this.STRING_REGEX})}getOpenParenToken(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.OPEN_PAREN,regex:this.OPEN_PAREN_REGEX})}getCloseParenToken(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.CLOSE_PAREN,regex:this.CLOSE_PAREN_REGEX})}getPlaceholderToken(input){return this.getIdentNamedPlaceholderToken(input)||this.getStringNamedPlaceholderToken(input)||this.getIndexedPlaceholderToken(input)}getServerVariableToken(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.SERVERVARIABLE,regex:/(^@@\w+)/i})}getIdentNamedPlaceholderToken(input){return this.getPlaceholderTokenWithKey({input:input,regex:this.IDENT_NAMED_PLACEHOLDER_REGEX,parseKey:v=>v.slice(1)})}getStringNamedPlaceholderToken(input){return this.getPlaceholderTokenWithKey({input:input,regex:this.STRING_NAMED_PLACEHOLDER_REGEX,parseKey:v=>this.getEscapedPlaceholderKey({key:v.slice(2,-1),quoteChar:v.slice(-1)})})}getIndexedPlaceholderToken(input){return this.getPlaceholderTokenWithKey({input:input,regex:this.INDEXED_PLACEHOLDER_REGEX,parseKey:v=>v.slice(1)})}getPlaceholderTokenWithKey({input:input,regex:regex,parseKey:parseKey}){const token=this.getTokenOnFirstMatch({input:input,regex:regex,type:types_1.TokenTypes.PLACEHOLDER});return token&&(token.key=parseKey(token.value)),token}getEscapedPlaceholderKey({key:key,quoteChar:quoteChar}){return key.replace(new RegExp(escapeRegExp_1.default("\\")+quoteChar,"g"),quoteChar)}getNumberToken(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.NUMBER,regex:this.NUMBER_REGEX})}getOperatorToken(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.OPERATOR,regex:this.OPERATOR_REGEX})}getQuerySeparatorToken(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.QUERY_SEPARATOR,regex:this.QUERY_SEPARATOR_REGEX})}getReservedWordToken(input,previousToken){if(!previousToken||!previousToken.value||"."!==previousToken.value)return this.getToplevelTablePrefixReservedToken(input)||this.getToplevelReservedToken(input)||this.getNewlineReservedToken(input)||this.getPlainReservedToken(input)}getTableNameToken(input,tokenMinus1,tokenMinus2){if(!(tokenMinus1&&tokenMinus1.value&&""!==tokenMinus1.value.trim()||tokenMinus2&&tokenMinus2.value&&tokenMinus2.type!==types_1.TokenTypes.TABLENAME_PREFIX))return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.TABLENAME,regex:this.TABLE_NAME_REGEX})}getToplevelTablePrefixReservedToken(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.TABLENAME_PREFIX,regex:this.TABLE_NAME_PREFIX_REGEX})}getToplevelReservedToken(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.RESERVED_TOPLEVEL,regex:this.RESERVED_TOPLEVEL_REGEX})}getNewlineReservedToken(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.RESERVED_NEWLINE,regex:this.RESERVED_NEWLINE_REGEX})}getPlainReservedToken(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.RESERVED,regex:this.RESERVED_PLAIN_REGEX})}getWordToken(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.WORD,regex:this.WORD_REGEX})}getTokenOnFirstMatch({input:input,type:type,regex:regex}){const matches=input.match(regex);if(matches)return{type:type,value:matches[1]}}getPreviousToken(tokens,offset=0){return tokens[tokens.length-offset-1]||{value:null,type:null}}}},function(module,exports,__webpack_require__){var toString=__webpack_require__(33),reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source);module.exports=function(string){return(string=toString(string))&&reHasRegExpChar.test(string)?string.replace(reRegExpChar,"\\$&"):string}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class QueryParser{static parse(query,dialect="mysql"){"mssql"===dialect&&(query=query.replace(/^[ \t]*GO;?[ \t]*$/gim,""));for(var queries=[];;){null==restOfQuery&&(restOfQuery=query);var statementAndRest=QueryParser.getStatements(restOfQuery,dialect,";"),statement=statementAndRest[0];null!=statement&&""!=statement.trim()&&queries.push(statement);var restOfQuery=statementAndRest[1];if(null==restOfQuery||""==restOfQuery.trim())break}return queries}static getStatements(query,dialect,delimiter){for(var charArray=Array.from(query),previousChar=null,nextChar=null,isInComment=!1,commentChar=null,isInString=!1,stringChar=null,isInTag=!1,tagChar=null,resultQueries=[],index=0;index<charArray.length;index++){var char=charArray[index];if(index>0&&(previousChar=charArray[index-1]),index<charArray.length&&(nextChar=charArray[index+1]),"\\"==previousChar||"'"!=char&&'"'!=char||0!=isInString||0!=isInComment)if(("#"==char&&" "==nextChar||"-"==char&&"-"==nextChar||"/"==char&&"*"==nextChar)&&0==isInString)isInComment=!0,commentChar=char;else if(1!=isInComment||("#"!=commentChar&&"-"!=commentChar||"\n"!=char)&&("/"!=commentChar||"*"!=char||"/"!=nextChar))if("\\"==previousChar||char!=stringChar||1!=isInString){if("d"==char.toLowerCase()&&0==isInComment&&0==isInString){var delimiterResult=QueryParser.getDelimiter(index,query,dialect);if(null!=delimiterResult){var delimiterSymbol=delimiterResult[0],delimiterEndIndex=delimiterResult[1];query=query.substring(delimiterEndIndex),resultQueries=QueryParser.getStatements(query,dialect,delimiterSymbol);break}}if("$"==char&&0==isInComment&&0==isInString){var tagSymbolResult,queryUntilTagSymbol=query.substring(index);if(0==isInTag)null!=(tagSymbolResult=QueryParser.getTag(queryUntilTagSymbol,dialect))&&(isInTag=!0,tagChar=tagSymbolResult[0]);else if(null!=(tagSymbolResult=QueryParser.getTag(queryUntilTagSymbol,dialect)))tagSymbolResult[0]==tagChar&&(isInTag=!1)}if("mssql"===dialect&&"g"===char.toLowerCase()&&"o"===`${charArray[index+1]||""}`.toLowerCase()&&void 0!==charArray[index+2]&&/go\b/gi.test(`${char}${charArray[index+1]}${charArray[index+2]}`)&&(char=`${char}${charArray[index+1]}`),(char.toLowerCase()===delimiter.toLowerCase()||"go"===char.toLowerCase())&&0==isInString&&0==isInComment&&0==isInTag){var splittingIndex=index+1;if("mssql"===dialect&&"go"===char.toLowerCase()){splittingIndex=index,resultQueries=QueryParser.getQueryParts(query,splittingIndex,2);break}resultQueries=QueryParser.getQueryParts(query,splittingIndex);break}}else isInString=!1,stringChar=null;else isInComment=!1,commentChar=null;else isInString=!0,stringChar=char}return 0==resultQueries.length&&(null!=query&&(query=query.trim()),resultQueries.push(query,null)),resultQueries}static getQueryParts(query,splittingIndex,numChars=1){var statement=query.substring(0,splittingIndex),restOfQuery=query.substring(splittingIndex+numChars),result=[];return null!=statement&&(statement=statement.trim()),result.push(statement),result.push(restOfQuery),result}static getDelimiter(index,query,dialect){if("mysql"==dialect){var delimiterLength="delimiter ".length,parsedQueryAfterIndexOriginal=query.substring(index);if(0==parsedQueryAfterIndexOriginal.toLowerCase().indexOf("delimiter ")){var parsedQueryAfterIndex=query.substring(index),indexOfNewLine=parsedQueryAfterIndex.indexOf("\n");-1==indexOfNewLine&&(indexOfNewLine=query.length);var delimiterSymbol=(parsedQueryAfterIndex=(parsedQueryAfterIndex=parsedQueryAfterIndex.substring(0,indexOfNewLine)).substring(delimiterLength)).trim();if(null!=(delimiterSymbol=QueryParser.clearTextUntilComment(delimiterSymbol))){delimiterSymbol=delimiterSymbol.trim();var delimiterSymbolEndIndex=parsedQueryAfterIndexOriginal.indexOf(delimiterSymbol)+index+delimiterSymbol.length,result=[];return result.push(delimiterSymbol),result.push(delimiterSymbolEndIndex),result}return null}return null}}static getTag(query,dialect){if("pg"==dialect){var matchTag=query.match(/^(\$[a-zA-Z]*\$)/i);if(null!=matchTag&&matchTag.length>1){var result=[],tagSymbol=matchTag[1].trim(),indexOfCmd=query.indexOf(tagSymbol);return result.push(tagSymbol),result.push(indexOfCmd),result}return null}}static isGoDelimiter(dialect,query,index){if("mssql"==dialect){var match=/(?:\bgo\b\s*)/i.exec(query);return null!=match&&match.index==index}}static clearTextUntilComment(text){for(var nextChar=null,charArray=Array.from(text),clearedText=null,index=0;index<charArray.length;index++){var char=charArray[index];if(index<charArray.length&&(nextChar=charArray[index+1]),"#"==char&&" "==nextChar||"-"==char&&"-"==nextChar||"/"==char&&"*"==nextChar)break;null==clearedText&&(clearedText=""),clearedText+=char}return clearedText}}exports.default=QueryParser.parse},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const command_exists_1=__webpack_require__(160);exports.default=command_exists_1.sync},function(module,exports,__webpack_require__){module.exports=__webpack_require__(161)},function(module,exports,__webpack_require__){"use strict";var exec=__webpack_require__(14).exec,execSync=__webpack_require__(14).execSync,fs=__webpack_require__(11),path=__webpack_require__(5),access=fs.access,accessSync=fs.accessSync,constants=fs.constants||fs,isUsingWindows="win32"==process.platform,commandExistsUnix=function(commandName,cleanedCommandName,callback){!function(commandName,callback){access(commandName,constants.F_OK,(function(err){callback(!err)}))}(commandName,(function(isFile){if(isFile)!function(commandName,callback){access(commandName,constants.F_OK|constants.X_OK,(function(err){callback(null,!err)}))}(commandName,callback);else exec("command -v "+cleanedCommandName+" 2>/dev/null && { echo >&1 "+cleanedCommandName+"; exit 0; }",(function(error,stdout,stderr){callback(null,!!stdout)}))}))},commandExistsUnixSync=function(commandName,cleanedCommandName){if(function(commandName){try{return accessSync(commandName,constants.F_OK),!1}catch(e){return!0}}(commandName))try{return!!execSync("command -v "+cleanedCommandName+" 2>/dev/null && { echo >&1 "+cleanedCommandName+"; exit 0; }")}catch(error){return!1}return function(commandName){try{return accessSync(commandName,constants.F_OK|constants.X_OK),!0}catch(e){return!1}}(commandName)},cleanInput=function(s){return/[^A-Za-z0-9_\/:=-]/.test(s)&&(s=(s="'"+s.replace(/'/g,"'\\''")+"'").replace(/^(?:'')+/g,"").replace(/\\'''/g,"\\'")),s};isUsingWindows&&(cleanInput=function(s){return/[\\]/.test(s)?'"'+path.dirname(s)+'"'+":"+('"'+path.basename(s)+'"'):'"'+s+'"'}),module.exports=function commandExists(commandName,callback){var cleanedCommandName=cleanInput(commandName);if(!callback&&"undefined"!=typeof Promise)return new Promise((function(resolve,reject){commandExists(commandName,(function(error,output){output?resolve(commandName):reject(error)}))}));isUsingWindows?function(commandName,cleanedCommandName,callback){if(/[\x00-\x1f<>:"\|\?\*]/.test(commandName))callback(null,!1);else exec("where "+cleanedCommandName,(function(error){callback(null,null===error)}))}(commandName,cleanedCommandName,callback):commandExistsUnix(commandName,cleanedCommandName,callback)},module.exports.sync=function(commandName){var cleanedCommandName=cleanInput(commandName);return isUsingWindows?function(commandName,cleanedCommandName,callback){if(/[\x00-\x1f<>:"\|\?\*]/.test(commandName))return!1;try{return!!execSync("where "+cleanedCommandName,{stdio:[]})}catch(error){return!1}}(commandName,cleanedCommandName):commandExistsUnixSync(commandName,cleanedCommandName)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(DatabaseDialect){DatabaseDialect.DB2="DB2",DatabaseDialect.MSSQL="MSSQL",DatabaseDialect.MySQL="MySQL",DatabaseDialect.MariaDB="MariaDB",DatabaseDialect.PostgreSQL="PostgreSQL",DatabaseDialect["AWS Redshift"]="AWS Redshift",DatabaseDialect.SQLite="SQLite",DatabaseDialect.OracleDB="OracleDB",DatabaseDialect.SAPHana="SAPHana",DatabaseDialect.Cassandra="Cassandra"}(exports.DatabaseDialect||(exports.DatabaseDialect={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";function replacer(source,toReplace){return Object.keys(toReplace).reduce((destination,replaceParam)=>destination.replace(new RegExp(`:${replaceParam}`,"g"),toReplace[replaceParam]),source)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.replacer=replacer,exports.default=replacer},function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result};Object.defineProperty(exports,"__esModule",{value:!0});const constants_1=__webpack_require__(1),decorators_1=__webpack_require__(168),AI=__importStar(__webpack_require__(169)),package_json_1=__webpack_require__(243),_1=__webpack_require__(3),IGNORE_ERRORS_REGEX=new RegExp(`(${["aggregate function","already exists","authentication failed","cannot drop","cross-database references","does not exist","econnrefused","econnreset","enotfound","enotfound","er_access_denied_error","er_bad_db_error","er_bad_field_error","er_cannot_load_from_table_v2","er_dup_fieldname","er_no_referenced_row_2","er_no_such_table","er_not_supported_auth_mode","er_parse_error","etimedout","failed to connect","is ambiguous","key constraint","login failed","no such table","ora-[0-9]+","sqlite_cantopen","syntax error","unknown_code_please_report","violates"].join("|")})`,"g");class Telemetry{constructor(opts){this.createClient=()=>{AI.setup(constants_1.AI_KEY).setAutoCollectConsole(!1).setAutoCollectDependencies(!1).setAutoCollectExceptions(!1).setAutoCollectPerformance(!1).setAutoCollectRequests(!1).setAutoDependencyCorrelation(!1).setInternalLogging(!1,!1).setUseDiskRetryCaching(!0),AI.defaultClient.config.samplingPercentage=50,this.client=AI.defaultClient;const aiCtx=this.client.context;aiCtx.tags[aiCtx.keys.applicationVersion]=`${constants_1.EXT_NAME}-${this.product}@${constants_1.VERSION}`,aiCtx.tags[aiCtx.keys.internalSdkVersion]=`node:${package_json_1.version}`,aiCtx.tags[aiCtx.keys.deviceType]=this.product,Telemetry.vscodeInfo&&(aiCtx.tags[aiCtx.keys.userId]=Telemetry.vscodeInfo.uniqId,aiCtx.tags[aiCtx.keys.deviceId]=Telemetry.vscodeInfo.uniqId,aiCtx.tags[aiCtx.keys.sessionId]=Telemetry.vscodeInfo.sessId),this.client.commonProperties=Object.assign({"common.os":process.platform,"common.arch":process.arch,"common.channel":constants_1.ENV,"common.extname":constants_1.EXT_NAME,"common.extversion":constants_1.VERSION,"common.extversionnum":_1.numericVersion(constants_1.VERSION).toString(),"common.nodeversion":process.version},Telemetry.vscodeInfo?{"common.vscodeuniqid":Telemetry.vscodeInfo.uniqId,"common.vscodesessid":Telemetry.vscodeInfo.sessId,"common.vscodeversion":Telemetry.vscodeInfo.version}:{}),AI.start(),this.registerSession()},this.updateOpts=opts=>{this.product=opts.product||this.product,Telemetry.vscodeInfo=opts.vscodeInfo||Telemetry.vscodeInfo||{},this.disable()},this.enable=()=>this.disable(),this.disable=()=>{Telemetry.enabled&&(Telemetry.enabled=!1,AI.dispose(),this.client=void 0)},this.logger=opts.logger||console,this.updateOpts(opts)}prefixed(key){return`${this.product}:${key}`}registerCommand(command){this.registerEvent(`cmd:${command}`)}registerInfoMessage(message,value="Dismissed"){this.registerMessage(Telemetry.SeveriryLevel.Information,message,value)}registerException(error,data={}){if(!error)return;const errStr=(error&&error.message?error.message:"").toLowerCase();IGNORE_ERRORS_REGEX.test(errStr)||this.sendException(error,Object.assign(Object.assign({},error.data||{}),data))}registerSession(){this.registerEvent(`sessionStarted:${this.product}`)}registerMessage(severity,message,value="Dismissed"){this.logger.log(`Message: ${message}`),this.client.trackTrace({message:this.prefixed(message),severity:severity,properties:{value:value}})}registerEvent(name,properties){this.logger.log(`Event: ${name}`,properties||""),this.client.trackEvent({name:this.prefixed(name),properties:properties})}sendException(error,properties={}){this.logger.error("Error: ",error),this.client.trackException({exception:error,contextObjects:properties,properties:properties})}registerTime(timeKey,timer){this.logger.log(`${timeKey.charAt(0).toUpperCase()}${timeKey.substr(1).toLowerCase()} time: ${timer.elapsed()}ms`),this.registerMetric(this.prefixed(`time:${timeKey}`),timer.elapsed())}registerMetric(name,value){this.client.trackMetric({name:name,value:value})}}Telemetry.SeveriryLevel=AI.Contracts.SeverityLevel,__decorate([decorators_1.runIfPropIsDefined("client")],Telemetry.prototype,"registerCommand",null),__decorate([decorators_1.runIfPropIsDefined("client")],Telemetry.prototype,"registerInfoMessage",null),__decorate([decorators_1.runIfPropIsDefined("client")],Telemetry.prototype,"registerException",null),__decorate([decorators_1.runIfPropIsDefined("client")],Telemetry.prototype,"registerSession",null),__decorate([decorators_1.runIfPropIsDefined("client")],Telemetry.prototype,"registerMessage",null),__decorate([decorators_1.runIfPropIsDefined("client")],Telemetry.prototype,"registerEvent",null),__decorate([decorators_1.runIfPropIsDefined("client")],Telemetry.prototype,"sendException",null),__decorate([decorators_1.runIfPropIsDefined("client")],Telemetry.prototype,"registerTime",null),__decorate([decorators_1.runIfPropIsDefined("client")],Telemetry.prototype,"registerMetric",null),exports.Telemetry=Telemetry,exports.default=Telemetry},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.runIfPropIsDefined=function(prop){return function(target,key,descriptor){void 0===descriptor&&(descriptor=Object.getOwnPropertyDescriptor(target,key));const originalMethod=descriptor.value;descriptor.value=function(...args){void 0!==this[prop]&&originalMethod.apply(this,args)}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var DistributedTracingModes,CorrelationContextManager=__webpack_require__(26),AutoCollectConsole=__webpack_require__(200),AutoCollectExceptions=__webpack_require__(221),AutoCollectPerformance=__webpack_require__(55),AutoCollectHttpDependencies=__webpack_require__(38),AutoCollectHttpRequests=__webpack_require__(84),CorrelationIdManager=__webpack_require__(22),Logging=__webpack_require__(6),QuickPulseClient=__webpack_require__(230),NativePerformance_1=__webpack_require__(234);exports.TelemetryClient=__webpack_require__(235),exports.Contracts=__webpack_require__(7),function(DistributedTracingModes){DistributedTracingModes[DistributedTracingModes.AI=0]="AI",DistributedTracingModes[DistributedTracingModes.AI_AND_W3C=1]="AI_AND_W3C"}(DistributedTracingModes=exports.DistributedTracingModes||(exports.DistributedTracingModes={}));var _forceClsHooked,_disabledExtendedMetrics,_console,_exceptions,_performance,_nativePerformance,_serverRequests,_clientRequests,_performanceLiveMetrics,_isConsole=!0,_isConsoleLog=!1,_isExceptions=!0,_isPerformance=!0,_isRequests=!0,_isDependencies=!0,_isDiskRetry=!0,_isCorrelating=!0,_isSendingLiveMetrics=!1,_isNativePerformance=!0,_diskRetryInterval=void 0,_diskRetryMaxBytes=void 0,_isStarted=!1;function start(){return exports.defaultClient?(_isStarted=!0,_console.enable(_isConsole,_isConsoleLog),_exceptions.enable(_isExceptions),_performance.enable(_isPerformance),_nativePerformance.enable(_isNativePerformance,_disabledExtendedMetrics),_serverRequests.useAutoCorrelation(_isCorrelating,_forceClsHooked),_serverRequests.enable(_isRequests),_clientRequests.enable(_isDependencies),exports.liveMetricsClient&&_isSendingLiveMetrics&&exports.liveMetricsClient.enable(_isSendingLiveMetrics)):Logging.warn("Start cannot be called before setup"),Configuration}exports.setup=function(setupString){return exports.defaultClient?Logging.info("The default client is already setup"):(exports.defaultClient=new exports.TelemetryClient(setupString),_console=new AutoCollectConsole(exports.defaultClient),_exceptions=new AutoCollectExceptions(exports.defaultClient),_performance=new AutoCollectPerformance(exports.defaultClient),_serverRequests=new AutoCollectHttpRequests(exports.defaultClient),_clientRequests=new AutoCollectHttpDependencies(exports.defaultClient),_nativePerformance||(_nativePerformance=new NativePerformance_1.AutoCollectNativePerformance(exports.defaultClient))),exports.defaultClient&&exports.defaultClient.channel&&exports.defaultClient.channel.setUseDiskRetryCaching(_isDiskRetry,_diskRetryInterval,_diskRetryMaxBytes),Configuration},exports.start=start,exports.getCorrelationContext=function(){return _isCorrelating?CorrelationContextManager.CorrelationContextManager.getCurrentContext():null},exports.wrapWithCorrelationContext=function(fn){return CorrelationContextManager.CorrelationContextManager.wrapCallback(fn)};var Configuration=function(){function Configuration(){}return Configuration.setDistributedTracingMode=function(value){return CorrelationIdManager.w3cEnabled=value===DistributedTracingModes.AI_AND_W3C,Configuration},Configuration.setAutoCollectConsole=function(value,collectConsoleLog){return void 0===collectConsoleLog&&(collectConsoleLog=!1),_isConsole=value,_isConsoleLog=collectConsoleLog,_isStarted&&_console.enable(value,collectConsoleLog),Configuration},Configuration.setAutoCollectExceptions=function(value){return _isExceptions=value,_isStarted&&_exceptions.enable(value),Configuration},Configuration.setAutoCollectPerformance=function(value,collectExtendedMetrics){void 0===collectExtendedMetrics&&(collectExtendedMetrics=!0),_isPerformance=value;var extendedMetricsConfig=NativePerformance_1.AutoCollectNativePerformance.parseEnabled(collectExtendedMetrics);return _isNativePerformance=extendedMetricsConfig.isEnabled,_disabledExtendedMetrics=extendedMetricsConfig.disabledMetrics,_isStarted&&(_performance.enable(value),_nativePerformance.enable(extendedMetricsConfig.isEnabled,extendedMetricsConfig.disabledMetrics)),Configuration},Configuration.setAutoCollectRequests=function(value){return _isRequests=value,_isStarted&&_serverRequests.enable(value),Configuration},Configuration.setAutoCollectDependencies=function(value){return _isDependencies=value,_isStarted&&_clientRequests.enable(value),Configuration},Configuration.setAutoDependencyCorrelation=function(value,useAsyncHooks){return _isCorrelating=value,_forceClsHooked=useAsyncHooks,_isStarted&&_serverRequests.useAutoCorrelation(value,useAsyncHooks),Configuration},Configuration.setUseDiskRetryCaching=function(value,resendInterval,maxBytesOnDisk){return _isDiskRetry=value,_diskRetryInterval=resendInterval,_diskRetryMaxBytes=maxBytesOnDisk,exports.defaultClient&&exports.defaultClient.channel&&exports.defaultClient.channel.setUseDiskRetryCaching(value,resendInterval,maxBytesOnDisk),Configuration},Configuration.setInternalLogging=function(enableDebugLogging,enableWarningLogging){return void 0===enableDebugLogging&&(enableDebugLogging=!1),void 0===enableWarningLogging&&(enableWarningLogging=!0),Logging.enableDebug=enableDebugLogging,Logging.disableWarnings=!enableWarningLogging,Configuration},Configuration.setSendLiveMetrics=function(enable){return void 0===enable&&(enable=!1),exports.defaultClient?(exports.liveMetricsClient?exports.liveMetricsClient.enable(enable):(exports.liveMetricsClient=new QuickPulseClient(exports.defaultClient.config.instrumentationKey),_performanceLiveMetrics=new AutoCollectPerformance(exports.liveMetricsClient,1e3,!0),exports.liveMetricsClient.addCollector(_performanceLiveMetrics),exports.defaultClient.quickPulseClient=exports.liveMetricsClient,_isSendingLiveMetrics=enable),Configuration):(Logging.warn("Live metrics client cannot be setup without the default client"),Configuration)},Configuration.start=start,Configuration}();exports.Configuration=Configuration,exports.dispose=function(){exports.defaultClient=null,_isStarted=!1,_console&&_console.dispose(),_exceptions&&_exceptions.dispose(),_performance&&_performance.dispose(),_nativePerformance&&_nativePerformance.dispose(),_serverRequests&&_serverRequests.dispose(),_clientRequests&&_clientRequests.dispose()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var bunyan=__webpack_require__(171);exports.bunyan=bunyan;var consolePub=__webpack_require__(173);exports.console=consolePub;var mongodbCore=__webpack_require__(174);exports.mongodbCore=mongodbCore;var mongodb=__webpack_require__(175);exports.mongodb=mongodb;var mysql=__webpack_require__(176);exports.mysql=mysql;var pgPool=__webpack_require__(179);exports.pgPool=pgPool;var pg=__webpack_require__(180);exports.pg=pg;var redis=__webpack_require__(182);exports.redis=redis;var winston=__webpack_require__(183);exports.winston=winston,exports.enable=function(){bunyan.enable(),consolePub.enable(),mongodbCore.enable(),mongodb.enable(),mysql.enable(),pg.enable(),pgPool.enable(),redis.enable(),winston.enable()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var diagnostic_channel_1=__webpack_require__(4);exports.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:function(originalBunyan){var originalEmit=originalBunyan.prototype._emit;return originalBunyan.prototype._emit=function(rec,noemit){var ret=originalEmit.apply(this,arguments);if(!noemit){var str=ret;str||(str=originalEmit.call(this,rec,!0)),diagnostic_channel_1.channel.publish("bunyan",{level:rec.level,result:str})}return ret},originalBunyan}},exports.enable=function(){diagnostic_channel_1.channel.registerMonkeyPatch("bunyan",exports.bunyan)}},function(module){module.exports=JSON.parse('{"name":"diagnostic-channel","version":"0.2.0","main":"./dist/src/channel.js","types":"./dist/src/channel.d.ts","scripts":{"build":"tsc","lint":"tslint -c tslint.json -p tsconfig.json","clean":"rimraf ./dist","test":"mocha ./dist/tests/**/*.js"},"homepage":"https://github.com/Microsoft/node-diagnostic-channel","bugs":{"url":"https://github.com/Microsoft/node-diagnostic-channel/issues"},"repository":{"type":"git","url":"https://github.com/Microsoft/node-diagnostic-channel.git"},"description":"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers","dependencies":{"semver":"^5.3.0"},"devDependencies":{"@types/mocha":"^2.2.40","@types/node":"^7.0.12","mocha":"^3.2.0","rimraf":"^2.6.1","tslint":"^5.0.0","typescript":"^2.2.1"},"files":["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],"license":"MIT"}')},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var diagnostic_channel_1=__webpack_require__(4),stream_1=__webpack_require__(59);exports.console={versionSpecifier:">= 4.0.0",patch:function(originalConsole){var aiLoggingOutStream=new stream_1.Writable,aiLoggingErrStream=new stream_1.Writable;aiLoggingOutStream.write=function(chunk){if(!chunk)return!0;var message=chunk.toString();return diagnostic_channel_1.channel.publish("console",{message:message}),!0},aiLoggingErrStream.write=function(chunk){if(!chunk)return!0;var message=chunk.toString();return diagnostic_channel_1.channel.publish("console",{message:message,stderr:!0}),!0};for(var aiLoggingConsole=new originalConsole.Console(aiLoggingOutStream,aiLoggingErrStream),_loop_1=function(method){var originalMethod=originalConsole[method];originalMethod&&(originalConsole[method]=function(){if(aiLoggingConsole[method])try{aiLoggingConsole[method].apply(aiLoggingConsole,arguments)}catch(e){}return originalMethod.apply(originalConsole,arguments)})},_i=0,consoleMethods_1=["log","info","warn","error","dir","time","timeEnd","trace","assert"];_i<consoleMethods_1.length;_i++){_loop_1(consoleMethods_1[_i])}return originalConsole}},exports.enable=function(){diagnostic_channel_1.channel.registerMonkeyPatch("console",exports.console),__webpack_require__(58)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var diagnostic_channel_1=__webpack_require__(4);exports.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:function(originalMongoCore){var originalConnect=originalMongoCore.Server.prototype.connect;return originalMongoCore.Server.prototype.connect=function(){var ret=originalConnect.apply(this,arguments),originalWrite=this.s.pool.write;this.s.pool.write=function(){var cbidx="function"==typeof arguments[1]?1:2;return"function"==typeof arguments[cbidx]&&(arguments[cbidx]=diagnostic_channel_1.channel.bindToContext(arguments[cbidx])),originalWrite.apply(this,arguments)};var originalLogout=this.s.pool.logout;return this.s.pool.logout=function(){return"function"==typeof arguments[1]&&(arguments[1]=diagnostic_channel_1.channel.bindToContext(arguments[1])),originalLogout.apply(this,arguments)},ret},originalMongoCore}},exports.enable=function(){diagnostic_channel_1.channel.registerMonkeyPatch("mongodb-core",exports.mongoCore)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var diagnostic_channel_1=__webpack_require__(4);exports.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:function(originalMongo){var listener=originalMongo.instrument({operationIdGenerator:{next:function(){return diagnostic_channel_1.channel.bindToContext((function(cb){return cb()}))}}}),eventMap={};return listener.on("started",(function(event){eventMap[event.requestId]||(eventMap[event.requestId]=event)})),listener.on("succeeded",(function(event){var startedData=eventMap[event.requestId];startedData&&delete eventMap[event.requestId],event.operationId((function(){return diagnostic_channel_1.channel.publish("mongodb",{startedData:startedData,event:event,succeeded:!0})}))})),listener.on("failed",(function(event){var startedData=eventMap[event.requestId];startedData&&delete eventMap[event.requestId],event.operationId((function(){return diagnostic_channel_1.channel.publish("mongodb",{startedData:startedData,event:event,succeeded:!1})}))})),originalMongo}},exports.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:function(originalMongo){var listener=originalMongo.instrument(),eventMap={},contextMap={};return listener.on("started",(function(event){eventMap[event.requestId]||(contextMap[event.requestId]=diagnostic_channel_1.channel.bindToContext((function(cb){return cb()})),eventMap[event.requestId]=event)})),listener.on("succeeded",(function(event){var startedData=eventMap[event.requestId];startedData&&delete eventMap[event.requestId],"object"==typeof event&&"function"==typeof contextMap[event.requestId]&&(contextMap[event.requestId]((function(){return diagnostic_channel_1.channel.publish("mongodb",{startedData:startedData,event:event,succeeded:!0})})),delete contextMap[event.requestId])})),listener.on("failed",(function(event){var startedData=eventMap[event.requestId];startedData&&delete eventMap[event.requestId],"object"==typeof event&&"function"==typeof contextMap[event.requestId]&&(contextMap[event.requestId]((function(){return diagnostic_channel_1.channel.publish("mongodb",{startedData:startedData,event:event,succeeded:!1})})),delete contextMap[event.requestId])})),originalMongo}},exports.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:function(originalMongo){!function(originalMongo){var originalConnect=originalMongo.Server.prototype.connect;originalMongo.Server.prototype.connect=function(){var ret=originalConnect.apply(this,arguments),originalWrite=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var cbidx="function"==typeof arguments[1]?1:2;return"function"==typeof arguments[cbidx]&&(arguments[cbidx]=diagnostic_channel_1.channel.bindToContext(arguments[cbidx])),originalWrite.apply(this,arguments)};var originalLogout=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return"function"==typeof arguments[1]&&(arguments[1]=diagnostic_channel_1.channel.bindToContext(arguments[1])),originalLogout.apply(this,arguments)},ret}}(originalMongo);var listener=originalMongo.instrument(),eventMap={},contextMap={};return listener.on("started",(function(event){eventMap[event.requestId]||(contextMap[event.requestId]=diagnostic_channel_1.channel.bindToContext((function(cb){return cb()})),eventMap[event.requestId]=event)})),listener.on("succeeded",(function(event){var startedData=eventMap[event.requestId];startedData&&delete eventMap[event.requestId],"object"==typeof event&&"function"==typeof contextMap[event.requestId]&&(contextMap[event.requestId]((function(){return diagnostic_channel_1.channel.publish("mongodb",{startedData:startedData,event:event,succeeded:!0})})),delete contextMap[event.requestId])})),listener.on("failed",(function(event){var startedData=eventMap[event.requestId];startedData&&delete eventMap[event.requestId],"object"==typeof event&&"function"==typeof contextMap[event.requestId]&&(contextMap[event.requestId]((function(){return diagnostic_channel_1.channel.publish("mongodb",{startedData:startedData,event:event,succeeded:!1})})),delete contextMap[event.requestId])})),originalMongo}},exports.enable=function(){diagnostic_channel_1.channel.registerMonkeyPatch("mongodb",exports.mongo2),diagnostic_channel_1.channel.registerMonkeyPatch("mongodb",exports.mongo3),diagnostic_channel_1.channel.registerMonkeyPatch("mongodb",exports.mongo330)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var diagnostic_channel_1=__webpack_require__(4),path=__webpack_require__(5);exports.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:function(originalMysql,originalMysqlPath){var patchObjectFunction=function(obj,name){return function(func,cbWrapper){var originalFunc=obj[func];originalFunc&&(obj[func]=function(){for(var cbidx=arguments.length-1,i=arguments.length-1;i>=0;--i){if("function"==typeof arguments[i]){cbidx=i;break}if(void 0!==arguments[i])break}var cb=arguments[cbidx],resultContainer={result:null,startTime:null};"function"==typeof cb&&(cbWrapper?(resultContainer.startTime=process.hrtime(),arguments[cbidx]=diagnostic_channel_1.channel.bindToContext(cbWrapper(resultContainer,cb))):arguments[cbidx]=diagnostic_channel_1.channel.bindToContext(cb));var result=originalFunc.apply(this,arguments);return resultContainer.result=result,result})}},patchClassMemberFunction=function(classObject,name){return patchObjectFunction(classObject.prototype)},connectionClass=__webpack_require__(177)(path.dirname(originalMysqlPath)+"/lib/Connection");["connect","changeUser","ping","statistics","end"].forEach((function(value){return patchClassMemberFunction(connectionClass)(value)})),patchObjectFunction(connectionClass)("createQuery",(function(resultContainer,cb){return function(err){var hrDuration=process.hrtime(resultContainer.startTime),duration=1e3*hrDuration[0]+hrDuration[1]/1e6|0;diagnostic_channel_1.channel.publish("mysql",{query:resultContainer.result,callbackArgs:arguments,err:err,duration:duration}),cb.apply(this,arguments)}}));var poolClass=__webpack_require__(178)(path.dirname(originalMysqlPath)+"/lib/Pool");return["_enqueueCallback"].forEach((function(value){return patchClassMemberFunction(poolClass)(value)})),originalMysql}},exports.enable=function(){diagnostic_channel_1.channel.registerMonkeyPatch("mysql",exports.mysql)}},function(module,exports){function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,module.exports=webpackEmptyContext,webpackEmptyContext.id=177},function(module,exports){function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,module.exports=webpackEmptyContext,webpackEmptyContext.id=178},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var diagnostic_channel_1=__webpack_require__(4);exports.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:function(originalPgPool){var originalConnect=originalPgPool.prototype.connect;return originalPgPool.prototype.connect=function(callback){return callback&&(arguments[0]=diagnostic_channel_1.channel.bindToContext(callback)),originalConnect.apply(this,arguments)},originalPgPool}},exports.enable=function(){diagnostic_channel_1.channel.registerMonkeyPatch("pg-pool",exports.postgresPool1)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var diagnostic_channel_1=__webpack_require__(4),events_1=__webpack_require__(181);exports.postgres6={versionSpecifier:"6.*",patch:function(originalPg,originalPgPath){var originalClientQuery=originalPg.Client.prototype.query,diagnosticOriginalFunc="__diagnosticOriginalFunc";return originalPg.Client.prototype.query=function(config,values,callback){var queryResult,data={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0},start=process.hrtime();function patchCallback(cb){cb&&cb[diagnosticOriginalFunc]&&(cb=cb[diagnosticOriginalFunc]);var trackingCallback=diagnostic_channel_1.channel.bindToContext((function(err,res){var end=process.hrtime(start);if(data.result=res&&{rowCount:res.rowCount,command:res.command},data.error=err,data.duration=Math.ceil(1e3*end[0]+end[1]/1e6),diagnostic_channel_1.channel.publish("postgres",data),err){if(cb)return cb.apply(this,arguments);queryResult&&queryResult instanceof events_1.EventEmitter&&queryResult.emit("error",err)}else cb&&cb.apply(this,arguments)}));try{return Object.defineProperty(trackingCallback,diagnosticOriginalFunc,{value:cb}),trackingCallback}catch(e){return cb}}try{"string"==typeof config?values instanceof Array?(data.query.preparable={text:config,args:values},callback=patchCallback(callback)):(data.query.text=config,callback?callback=patchCallback(callback):values=patchCallback(values)):("string"==typeof config.name?data.query.plan=config.name:config.values instanceof Array?data.query.preparable={text:config.text,args:config.values}:data.query.text=config.text,callback?callback=patchCallback(callback):values?values=patchCallback(values):config.callback=patchCallback(config.callback))}catch(e){return originalClientQuery.apply(this,arguments)}return arguments[0]=config,arguments[1]=values,arguments[2]=callback,arguments.length=arguments.length>3?arguments.length:3,queryResult=originalClientQuery.apply(this,arguments)},originalPg}},exports.postgres7={versionSpecifier:"7.*",patch:function(originalPg,originalPgPath){var originalClientQuery=originalPg.Client.prototype.query,diagnosticOriginalFunc="__diagnosticOriginalFunc";return originalPg.Client.prototype.query=function(config,values,callback){var queryResult,_this=this,callbackProvided=!!callback,data={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0},start=process.hrtime();function patchCallback(cb){cb&&cb[diagnosticOriginalFunc]&&(cb=cb[diagnosticOriginalFunc]);var trackingCallback=diagnostic_channel_1.channel.bindToContext((function(err,res){var end=process.hrtime(start);if(data.result=res&&{rowCount:res.rowCount,command:res.command},data.error=err,data.duration=Math.ceil(1e3*end[0]+end[1]/1e6),diagnostic_channel_1.channel.publish("postgres",data),err){if(cb)return cb.apply(this,arguments);queryResult&&queryResult instanceof events_1.EventEmitter&&queryResult.emit("error",err)}else cb&&cb.apply(this,arguments)}));try{return Object.defineProperty(trackingCallback,diagnosticOriginalFunc,{value:cb}),trackingCallback}catch(e){return cb}}try{"string"==typeof config?values instanceof Array?(data.query.preparable={text:config,args:values},callbackProvided="function"==typeof callback,callback=callback?patchCallback(callback):callback):(data.query.text=config,callback?callback=(callbackProvided="function"==typeof callback)?patchCallback(callback):callback:values=(callbackProvided="function"==typeof values)?patchCallback(values):values):("string"==typeof config.name?data.query.plan=config.name:config.values instanceof Array?data.query.preparable={text:config.text,args:config.values}:data.query.text=config.text,callback?(callbackProvided="function"==typeof callback,callback=patchCallback(callback)):values?values=(callbackProvided="function"==typeof values)?patchCallback(values):values:(callbackProvided="function"==typeof config.callback,config.callback=callbackProvided?patchCallback(config.callback):config.callback))}catch(e){return originalClientQuery.apply(this,arguments)}return arguments[0]=config,arguments[1]=values,arguments[2]=callback,arguments.length=arguments.length>3?arguments.length:3,queryResult=originalClientQuery.apply(this,arguments),callbackProvided?queryResult:queryResult.then((function(result){return patchCallback()(void 0,result),new _this._Promise((function(resolve,reject){resolve(result)}))})).catch((function(error){return patchCallback()(error,void 0),new _this._Promise((function(resolve,reject){reject(error)}))}))},originalPg}},exports.enable=function(){diagnostic_channel_1.channel.registerMonkeyPatch("pg",exports.postgres6),diagnostic_channel_1.channel.registerMonkeyPatch("pg",exports.postgres7)}},function(module,exports){module.exports=require("events")},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var diagnostic_channel_1=__webpack_require__(4);exports.redis={versionSpecifier:">= 2.0.0 < 3.0.0",patch:function(originalRedis){var originalSend=originalRedis.RedisClient.prototype.internal_send_command;return originalRedis.RedisClient.prototype.internal_send_command=function(commandObj){if(commandObj){var cb_1=commandObj.callback;if(!cb_1||!cb_1.pubsubBound){var address_1=this.address,startTime_1=process.hrtime();commandObj.callback=diagnostic_channel_1.channel.bindToContext((function(err,result){var hrDuration=process.hrtime(startTime_1),duration=1e3*hrDuration[0]+hrDuration[1]/1e6|0;diagnostic_channel_1.channel.publish("redis",{duration:duration,address:address_1,commandObj:commandObj,err:err,result:result}),"function"==typeof cb_1&&cb_1.apply(this,arguments)})),commandObj.callback.pubsubBound=!0}}return originalSend.call(this,commandObj)},originalRedis}},exports.enable=function(){diagnostic_channel_1.channel.registerMonkeyPatch("redis",exports.redis)}},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__rest=this&&this.__rest||function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&(t[p[i]]=s[p[i]])}return t};Object.defineProperty(exports,"__esModule",{value:!0});var diagnostic_channel_1=__webpack_require__(4);exports.winston3={versionSpecifier:"3.x",patch:function(originalWinston){var AppInsightsTransport=function(_super){function AppInsightsTransport(winston,opts){var _this=_super.call(this,opts)||this;return _this.winston=winston,_this}return __extends(AppInsightsTransport,_super),AppInsightsTransport.prototype.log=function(info,callback){var message=info.message,level=info.level,meta=info.meta,splat=__rest(info,["message","level","meta"]);level="function"==typeof Symbol.for?info[Symbol.for("level")]:level;var levelKind=function(winston,level){return null!=winston.config.npm.levels[level]?"npm":null!=winston.config.syslog.levels[level]?"syslog":"unknown"}(this.winston,level);for(var key in meta=meta||{},splat)splat.hasOwnProperty(key)&&(meta[key]=splat[key]);diagnostic_channel_1.channel.publish("winston",{message:message,level:level,levelKind:levelKind,meta:meta}),callback()},AppInsightsTransport}(originalWinston.Transport);function patchedConfigure(){var lastLevel,levels=arguments[0].levels||originalWinston.config.npm.levels;for(var level in levels)levels.hasOwnProperty(level)&&(lastLevel=void 0===lastLevel||levels[level]>levels[lastLevel]?level:lastLevel);this.add(new AppInsightsTransport(originalWinston,{level:lastLevel}))}var origCreate=originalWinston.createLogger;originalWinston.createLogger=function(){var lastLevel,levels=arguments[0].levels||originalWinston.config.npm.levels;for(var level in levels)levels.hasOwnProperty(level)&&(lastLevel=void 0===lastLevel||levels[level]>levels[lastLevel]?level:lastLevel);var result=origCreate.apply(this,arguments);result.add(new AppInsightsTransport(originalWinston,{level:lastLevel}));var origConfigure=result.configure;return result.configure=function(){origConfigure.apply(this,arguments),patchedConfigure.apply(this,arguments)},result};var origRootConfigure=originalWinston.createLogger;return originalWinston.configure=function(){origRootConfigure.apply(this,arguments),patchedConfigure.apply(this,arguments)},originalWinston.add(new AppInsightsTransport(originalWinston)),originalWinston}},exports.winston2={versionSpecifier:"2.x",patch:function(originalWinston){var curLevels,originalLog=originalWinston.Logger.prototype.log,loggingFilter=function(level,message,meta){var levelKind;return levelKind=curLevels===originalWinston.config.npm.levels?"npm":curLevels===originalWinston.config.syslog.levels?"syslog":"unknown",diagnostic_channel_1.channel.publish("winston",{level:level,message:message,meta:meta,levelKind:levelKind}),message};return originalWinston.Logger.prototype.log=function(){return curLevels=this.levels,this.filters&&0!==this.filters.length?this.filters[this.filters.length-1]!==loggingFilter&&(this.filters=this.filters.filter((function(f){return f!==loggingFilter})),this.filters.push(loggingFilter)):this.filters=[loggingFilter],originalLog.apply(this,arguments)},originalWinston}},exports.enable=function(){diagnostic_channel_1.channel.registerMonkeyPatch("winston",exports.winston2),diagnostic_channel_1.channel.registerMonkeyPatch("winston",exports.winston3)}},function(module,exports,__webpack_require__){"use strict";const semver=__webpack_require__(35);process&&semver.gte(process.versions.node,"8.0.0")?module.exports=__webpack_require__(185):module.exports=__webpack_require__(187)},function(module,exports,__webpack_require__){"use strict";const util=__webpack_require__(36),assert=__webpack_require__(52),wrapEmitter=__webpack_require__(53),async_hooks=__webpack_require__(186),CONTEXTS_SYMBOL="cls@contexts",DEBUG_CLS_HOOKED=process.env.DEBUG_CLS_HOOKED;let currentUid=-1;function Namespace(name){this.name=name,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}function getNamespace(name){return process.namespaces[name]}function destroyNamespace(name){let namespace=getNamespace(name);assert.ok(namespace,"can't delete nonexistent namespace! \""+name+'"'),assert.ok(namespace.id,"don't assign to process.namespaces directly! "+util.inspect(namespace)),process.namespaces[name]=null}function debug2(...args){DEBUG_CLS_HOOKED&&process._rawDebug(`${util.format(...args)}`)}module.exports={getNamespace:getNamespace,createNamespace:function(name){assert.ok(name,"namespace must be given a name."),DEBUG_CLS_HOOKED&&debug2(`NS-CREATING NAMESPACE (${name})`);let namespace=new Namespace(name);return namespace.id=currentUid,async_hooks.createHook({init(asyncId,type,triggerId,resource){currentUid=async_hooks.executionAsyncId();if(namespace.active){namespace._contexts.set(asyncId,namespace.active);if(DEBUG_CLS_HOOKED){const indentStr=" ".repeat(namespace._indent<0?0:namespace._indent);debug2(`${indentStr}INIT [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active,{showHidden:true,depth:2,colors:true})} resource:${resource}`)}}else if(currentUid===0){const triggerId=async_hooks.triggerAsyncId();const triggerIdContext=namespace._contexts.get(triggerId);if(triggerIdContext){namespace._contexts.set(asyncId,triggerIdContext);if(DEBUG_CLS_HOOKED){const indentStr=" ".repeat(namespace._indent<0?0:namespace._indent);debug2(`${indentStr}INIT USING CONTEXT FROM TRIGGERID [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active,{showHidden:true,depth:2,colors:true})} resource:${resource}`)}}else if(DEBUG_CLS_HOOKED){const indentStr=" ".repeat(namespace._indent<0?0:namespace._indent);debug2(`${indentStr}INIT MISSING CONTEXT [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active,{showHidden:true,depth:2,colors:true})} resource:${resource}`)}}if(DEBUG_CLS_HOOKED&&type==="PROMISE"){debug2(util.inspect(resource,{showHidden:true}));const parentId=resource.parentId;const indentStr=" ".repeat(namespace._indent<0?0:namespace._indent);debug2(`${indentStr}INIT RESOURCE-PROMISE [${type}] (${name}) parentId:${parentId} asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active,{showHidden:true,depth:2,colors:true})} resource:${resource}`)}},before(asyncId){currentUid=async_hooks.executionAsyncId();let context;context=namespace._contexts.get(asyncId)||namespace._contexts.get(currentUid);if(context){if(DEBUG_CLS_HOOKED){const triggerId=async_hooks.triggerAsyncId();const indentStr=" ".repeat(namespace._indent<0?0:namespace._indent);debug2(`${indentStr}BEFORE (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active,{showHidden:true,depth:2,colors:true})} context:${util.inspect(context)}`);namespace._indent+=2}namespace.enter(context)}else if(DEBUG_CLS_HOOKED){const triggerId=async_hooks.triggerAsyncId();const indentStr=" ".repeat(namespace._indent<0?0:namespace._indent);debug2(`${indentStr}BEFORE MISSING CONTEXT (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active,{showHidden:true,depth:2,colors:true})} namespace._contexts:${util.inspect(namespace._contexts,{showHidden:true,depth:2,colors:true})}`);namespace._indent+=2}},after(asyncId){currentUid=async_hooks.executionAsyncId();let context;context=namespace._contexts.get(asyncId)||namespace._contexts.get(currentUid);if(context){if(DEBUG_CLS_HOOKED){const triggerId=async_hooks.triggerAsyncId();namespace._indent-=2;const indentStr=" ".repeat(namespace._indent<0?0:namespace._indent);debug2(`${indentStr}AFTER (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active,{showHidden:true,depth:2,colors:true})} context:${util.inspect(context)}`)}namespace.exit(context)}else if(DEBUG_CLS_HOOKED){const triggerId=async_hooks.triggerAsyncId();namespace._indent-=2;const indentStr=" ".repeat(namespace._indent<0?0:namespace._indent);debug2(`${indentStr}AFTER MISSING CONTEXT (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active,{showHidden:true,depth:2,colors:true})} context:${util.inspect(context)}`)}},destroy(asyncId){currentUid=async_hooks.executionAsyncId();if(DEBUG_CLS_HOOKED){const triggerId=async_hooks.triggerAsyncId();const indentStr=" ".repeat(namespace._indent<0?0:namespace._indent);debug2(`${indentStr}DESTROY (${name}) currentUid:${currentUid} asyncId:${asyncId} triggerId:${triggerId} active:${util.inspect(namespace.active,{showHidden:true,depth:2,colors:true})} context:${util.inspect(namespace._contexts.get(currentUid))}`)}namespace._contexts.delete(asyncId)}}).enable(),process.namespaces[name]=namespace,namespace},destroyNamespace:destroyNamespace,reset:function(){process.namespaces&&Object.keys(process.namespaces).forEach((function(name){destroyNamespace(name)}));process.namespaces=Object.create(null)},ERROR_SYMBOL:"error@context"},Namespace.prototype.set=function(key,value){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[key]=value,DEBUG_CLS_HOOKED){debug2(" ".repeat(this._indent<0?0:this._indent)+"CONTEXT-SET KEY:"+key+"="+value+" in ns:"+this.name+" currentUid:"+currentUid+" active:"+util.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return value},Namespace.prototype.get=function(key){if(this.active){if(DEBUG_CLS_HOOKED){const asyncHooksCurrentId=async_hooks.executionAsyncId(),triggerId=async_hooks.triggerAsyncId(),indentStr=" ".repeat(this._indent<0?0:this._indent);debug2(indentStr+"CONTEXT-GETTING KEY:"+key+"="+this.active[key]+" ("+this.name+") currentUid:"+currentUid+" active:"+util.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),debug2(`${indentStr}CONTEXT-GETTING KEY: (${this.name}) ${key}=${this.active[key]} currentUid:${currentUid} asyncHooksCurrentId:${asyncHooksCurrentId} triggerId:${triggerId} len:${this._set.length} active:${util.inspect(this.active)}`)}return this.active[key]}if(DEBUG_CLS_HOOKED){const asyncHooksCurrentId=async_hooks.currentId(),triggerId=async_hooks.triggerAsyncId();debug2(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${key}=undefined currentUid:${currentUid} asyncHooksCurrentId:${asyncHooksCurrentId} triggerId:${triggerId} len:${this._set.length}`)}},Namespace.prototype.createContext=function(){let context=Object.create(this.active?this.active:Object.prototype);if(context._ns_name=this.name,context.id=currentUid,DEBUG_CLS_HOOKED){const asyncHooksCurrentId=async_hooks.executionAsyncId(),triggerId=async_hooks.triggerAsyncId();debug2(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-CREATED Context: (${this.name}) currentUid:${currentUid} asyncHooksCurrentId:${asyncHooksCurrentId} triggerId:${triggerId} len:${this._set.length} context:${util.inspect(context,{showHidden:!0,depth:2,colors:!0})}`)}return context},Namespace.prototype.run=function(fn){let context=this.createContext();this.enter(context);try{if(DEBUG_CLS_HOOKED){const triggerId=async_hooks.triggerAsyncId(),asyncHooksCurrentId=async_hooks.executionAsyncId();debug2(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} context:${util.inspect(context)}`)}return fn(context),context}catch(exception){throw exception&&(exception["error@context"]=context),exception}finally{if(DEBUG_CLS_HOOKED){const triggerId=async_hooks.triggerAsyncId(),asyncHooksCurrentId=async_hooks.executionAsyncId();debug2(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-RUN END: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} ${util.inspect(context)}`)}this.exit(context)}},Namespace.prototype.runAndReturn=function(fn){let value;return this.run((function(context){value=fn(context)})),value},Namespace.prototype.runPromise=function(fn){let context=this.createContext();this.enter(context);let promise=fn(context);if(!promise||!promise.then||!promise.catch)throw new Error("fn must return a promise.");return DEBUG_CLS_HOOKED&&debug2("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+currentUid+" len:"+this._set.length+" "+util.inspect(context)),promise.then(result=>(DEBUG_CLS_HOOKED&&debug2("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+currentUid+" len:"+this._set.length+" "+util.inspect(context)),this.exit(context),result)).catch(err=>{throw err["error@context"]=context,DEBUG_CLS_HOOKED&&debug2("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+currentUid+" len:"+this._set.length+" "+util.inspect(context)),this.exit(context),err})},Namespace.prototype.bind=function(fn,context){context||(context=this.active?this.active:this.createContext());let self=this;return function(){self.enter(context);try{return fn.apply(this,arguments)}catch(exception){throw exception&&(exception["error@context"]=context),exception}finally{self.exit(context)}}},Namespace.prototype.enter=function(context){if(assert.ok(context,"context must be provided for entering"),DEBUG_CLS_HOOKED){const asyncHooksCurrentId=async_hooks.executionAsyncId(),triggerId=async_hooks.triggerAsyncId();debug2(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-ENTER: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} ${util.inspect(context)}`)}this._set.push(this.active),this.active=context},Namespace.prototype.exit=function(context){if(assert.ok(context,"context must be provided for exiting"),DEBUG_CLS_HOOKED){const asyncHooksCurrentId=async_hooks.executionAsyncId(),triggerId=async_hooks.triggerAsyncId();debug2(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-EXIT: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} ${util.inspect(context)}`)}if(this.active===context)return assert.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());let index=this._set.lastIndexOf(context);index<0?(DEBUG_CLS_HOOKED&&debug2("??ERROR?? context exiting but not entered - ignoring: "+util.inspect(context)),assert.ok(index>=0,"context not currently entered; can't exit. \n"+util.inspect(this)+"\n"+util.inspect(context))):(assert.ok(index,"can't remove top context"),this._set.splice(index,1))},Namespace.prototype.bindEmitter=function(emitter){assert.ok(emitter.on&&emitter.addListener&&emitter.emit,"can only bind real EEs");let namespace=this,thisSymbol="context@"+this.name;wrapEmitter(emitter,(function(listener){listener&&(listener[CONTEXTS_SYMBOL]||(listener[CONTEXTS_SYMBOL]=Object.create(null)),listener[CONTEXTS_SYMBOL][thisSymbol]={namespace:namespace,context:namespace.active})}),(function(unwrapped){if(!unwrapped||!unwrapped[CONTEXTS_SYMBOL])return unwrapped;let wrapped=unwrapped,unwrappedContexts=unwrapped[CONTEXTS_SYMBOL];return Object.keys(unwrappedContexts).forEach((function(name){let thunk=unwrappedContexts[name];wrapped=thunk.namespace.bind(wrapped,thunk.context)})),wrapped}))},Namespace.prototype.fromException=function(exception){return exception["error@context"]},process.namespaces={}},function(module,exports){module.exports=require("async_hooks")},function(module,exports,__webpack_require__){"use strict";const util=__webpack_require__(36),assert=__webpack_require__(52),wrapEmitter=__webpack_require__(53),asyncHook=__webpack_require__(188),CONTEXTS_SYMBOL="cls@contexts",invertedProviders=[];for(let key in asyncHook.providers)invertedProviders[asyncHook.providers[key]]=key;const DEBUG_CLS_HOOKED=process.env.DEBUG_CLS_HOOKED;let currentUid=-1;function Namespace(name){this.name=name,this.active=null,this._set=[],this.id=null,this._contexts=new Map}function getNamespace(name){return process.namespaces[name]}function destroyNamespace(name){let namespace=getNamespace(name);assert.ok(namespace,"can't delete nonexistent namespace! \""+name+'"'),assert.ok(namespace.id,"don't assign to process.namespaces directly! "+util.inspect(namespace)),process.namespaces[name]=null}function debug2(msg){process.env.DEBUG&&process._rawDebug(msg)}function getFunctionName(fn){return fn?"function"==typeof fn?fn.name?fn.name:(fn.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1]:fn.constructor&&fn.constructor.name?fn.constructor.name:void 0:fn}if(module.exports={getNamespace:getNamespace,createNamespace:function(name){assert.ok(name,"namespace must be given a name."),DEBUG_CLS_HOOKED&&debug2("CREATING NAMESPACE "+name);let namespace=new Namespace(name);return namespace.id=currentUid,asyncHook.addHooks({init(uid,handle,provider,parentUid,parentHandle){currentUid=uid,parentUid?(namespace._contexts.set(uid,namespace._contexts.get(parentUid)),DEBUG_CLS_HOOKED&&debug2("PARENTID: "+name+" uid:"+uid+" parent:"+parentUid+" provider:"+provider)):namespace._contexts.set(currentUid,namespace.active),DEBUG_CLS_HOOKED&&debug2("INIT "+name+" uid:"+uid+" parent:"+parentUid+" provider:"+invertedProviders[provider]+" active:"+util.inspect(namespace.active,!0))},pre(uid,handle){currentUid=uid;let context=namespace._contexts.get(uid);context?(DEBUG_CLS_HOOKED&&debug2(" PRE "+name+" uid:"+uid+" handle:"+getFunctionName(handle)+" context:"+util.inspect(context)),namespace.enter(context)):DEBUG_CLS_HOOKED&&debug2(" PRE MISSING CONTEXT "+name+" uid:"+uid+" handle:"+getFunctionName(handle))},post(uid,handle){currentUid=uid;let context=namespace._contexts.get(uid);context?(DEBUG_CLS_HOOKED&&debug2(" POST "+name+" uid:"+uid+" handle:"+getFunctionName(handle)+" context:"+util.inspect(context)),namespace.exit(context)):DEBUG_CLS_HOOKED&&debug2(" POST MISSING CONTEXT "+name+" uid:"+uid+" handle:"+getFunctionName(handle))},destroy(uid){currentUid=uid,DEBUG_CLS_HOOKED&&debug2("DESTROY "+name+" uid:"+uid+" context:"+util.inspect(namespace._contexts.get(currentUid))+" active:"+util.inspect(namespace.active,!0)),namespace._contexts.delete(uid)}}),process.namespaces[name]=namespace,namespace},destroyNamespace:destroyNamespace,reset:function(){process.namespaces&&Object.keys(process.namespaces).forEach((function(name){destroyNamespace(name)}));process.namespaces=Object.create(null)},ERROR_SYMBOL:"error@context"},Namespace.prototype.set=function(key,value){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return DEBUG_CLS_HOOKED&&debug2("    SETTING KEY:"+key+"="+value+" in ns:"+this.name+" uid:"+currentUid+" active:"+util.inspect(this.active,!0)),this.active[key]=value,value},Namespace.prototype.get=function(key){if(this.active)return DEBUG_CLS_HOOKED&&debug2("    GETTING KEY:"+key+"="+this.active[key]+" "+this.name+" uid:"+currentUid+" active:"+util.inspect(this.active,!0)),this.active[key];DEBUG_CLS_HOOKED&&debug2("    GETTING KEY:"+key+"=undefined "+this.name+" uid:"+currentUid+" active:"+util.inspect(this.active,!0))},Namespace.prototype.createContext=function(){DEBUG_CLS_HOOKED&&debug2("   CREATING Context: "+this.name+" uid:"+currentUid+" len:"+this._set.length+"  active:"+util.inspect(this.active,!0,2,!0));let context=Object.create(this.active?this.active:Object.prototype);return context._ns_name=this.name,context.id=currentUid,DEBUG_CLS_HOOKED&&debug2("   CREATED Context: "+this.name+" uid:"+currentUid+" len:"+this._set.length+"  context:"+util.inspect(context,!0,2,!0)),context},Namespace.prototype.run=function(fn){let context=this.createContext();this.enter(context);try{return DEBUG_CLS_HOOKED&&debug2(" BEFORE RUN: "+this.name+" uid:"+currentUid+" len:"+this._set.length+" "+util.inspect(context)),fn(context),context}catch(exception){throw exception&&(exception["error@context"]=context),exception}finally{DEBUG_CLS_HOOKED&&debug2(" AFTER RUN: "+this.name+" uid:"+currentUid+" len:"+this._set.length+" "+util.inspect(context)),this.exit(context)}},Namespace.prototype.runAndReturn=function(fn){var value;return this.run((function(context){value=fn(context)})),value},Namespace.prototype.runPromise=function(fn){let context=this.createContext();this.enter(context);let promise=fn(context);if(!promise||!promise.then||!promise.catch)throw new Error("fn must return a promise.");return DEBUG_CLS_HOOKED&&debug2(" BEFORE runPromise: "+this.name+" uid:"+currentUid+" len:"+this._set.length+" "+util.inspect(context)),promise.then(result=>(DEBUG_CLS_HOOKED&&debug2(" AFTER runPromise: "+this.name+" uid:"+currentUid+" len:"+this._set.length+" "+util.inspect(context)),this.exit(context),result)).catch(err=>{throw err["error@context"]=context,DEBUG_CLS_HOOKED&&debug2(" AFTER runPromise: "+this.name+" uid:"+currentUid+" len:"+this._set.length+" "+util.inspect(context)),this.exit(context),err})},Namespace.prototype.bind=function(fn,context){context||(context=this.active?this.active:this.createContext());let self=this;return function(){self.enter(context);try{return fn.apply(this,arguments)}catch(exception){throw exception&&(exception["error@context"]=context),exception}finally{self.exit(context)}}},Namespace.prototype.enter=function(context){assert.ok(context,"context must be provided for entering"),DEBUG_CLS_HOOKED&&debug2("  ENTER "+this.name+" uid:"+currentUid+" len:"+this._set.length+" context: "+util.inspect(context)),this._set.push(this.active),this.active=context},Namespace.prototype.exit=function(context){if(assert.ok(context,"context must be provided for exiting"),DEBUG_CLS_HOOKED&&debug2("  EXIT "+this.name+" uid:"+currentUid+" len:"+this._set.length+" context: "+util.inspect(context)),this.active===context)return assert.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());let index=this._set.lastIndexOf(context);index<0?(DEBUG_CLS_HOOKED&&debug2("??ERROR?? context exiting but not entered - ignoring: "+util.inspect(context)),assert.ok(index>=0,"context not currently entered; can't exit. \n"+util.inspect(this)+"\n"+util.inspect(context))):(assert.ok(index,"can't remove top context"),this._set.splice(index,1))},Namespace.prototype.bindEmitter=function(emitter){assert.ok(emitter.on&&emitter.addListener&&emitter.emit,"can only bind real EEs");let namespace=this,thisSymbol="context@"+this.name;wrapEmitter(emitter,(function(listener){listener&&(listener[CONTEXTS_SYMBOL]||(listener[CONTEXTS_SYMBOL]=Object.create(null)),listener[CONTEXTS_SYMBOL][thisSymbol]={namespace:namespace,context:namespace.active})}),(function(unwrapped){if(!unwrapped||!unwrapped[CONTEXTS_SYMBOL])return unwrapped;let wrapped=unwrapped,unwrappedContexts=unwrapped[CONTEXTS_SYMBOL];return Object.keys(unwrappedContexts).forEach((function(name){let thunk=unwrappedContexts[name];wrapped=thunk.namespace.bind(wrapped,thunk.context)})),wrapped}))},Namespace.prototype.fromException=function(exception){return exception["error@context"]},process.namespaces={},asyncHook._state&&!asyncHook._state.enabled&&asyncHook.enable(),DEBUG_CLS_HOOKED){var stackChain=__webpack_require__(75);for(var modifier in stackChain.filter._modifiers)stackChain.filter.deattach(modifier)}},function(module,exports,__webpack_require__){"use strict";const AsyncHook=__webpack_require__(189);if(global._asyncHook){if(global._asyncHook.version!==__webpack_require__(74).version)throw new Error("Conflicting version of async-hook-jl found");module.exports=global._asyncHook}else{__webpack_require__(75).filter.attach((function(error,frames){return frames.filter((function(callSite){const filename=callSite.getFileName();return!(filename&&filename.slice(0,__dirname.length)===__dirname)}))})),module.exports=global._asyncHook=new AsyncHook}},function(module,exports,__webpack_require__){"use strict";const asyncWrap=process.binding("async_wrap"),TIMERWRAP=asyncWrap.Providers.TIMERWRAP,patchs={nextTick:__webpack_require__(190),promise:__webpack_require__(191),timers:__webpack_require__(192)},ignoreUIDs=new Set;function State(){this.enabled=!1,this.counter=0}function Hooks(){const initFns=this.initFns=[],preFns=this.preFns=[],postFns=this.postFns=[],destroyFns=this.destroyFns=[];this.init=function(uid,provider,parentUid,parentHandle){if(provider!==TIMERWRAP)for(const hook of initFns)hook(uid,this,provider,parentUid,parentHandle);else ignoreUIDs.add(uid)},this.pre=function(uid){if(!ignoreUIDs.has(uid))for(const hook of preFns)hook(uid,this)},this.post=function(uid,didThrow){if(!ignoreUIDs.has(uid))for(const hook of postFns)hook(uid,this,didThrow)},this.destroy=function(uid){if(ignoreUIDs.has(uid))ignoreUIDs.delete(uid);else for(const hook of destroyFns)hook(uid)}}function removeElement(array,item){const index=array.indexOf(item);-1!==index&&array.splice(index,1)}function AsyncHook(){this._state=new State,this._hooks=new Hooks,this.version=__webpack_require__(74).version,this.providers=asyncWrap.Providers;for(const key of Object.keys(patchs))patchs[key].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),asyncWrap.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}Hooks.prototype.add=function(hooks){hooks.init&&this.initFns.push(hooks.init),hooks.pre&&this.preFns.push(hooks.pre),hooks.post&&this.postFns.push(hooks.post),hooks.destroy&&this.destroyFns.push(hooks.destroy)},Hooks.prototype.remove=function(hooks){hooks.init&&removeElement(this.initFns,hooks.init),hooks.pre&&removeElement(this.preFns,hooks.pre),hooks.post&&removeElement(this.postFns,hooks.post),hooks.destroy&&removeElement(this.destroyFns,hooks.destroy)},module.exports=AsyncHook,AsyncHook.prototype.addHooks=function(hooks){this._hooks.add(hooks)},AsyncHook.prototype.removeHooks=function(hooks){this._hooks.remove(hooks)},AsyncHook.prototype.enable=function(){this._state.enabled=!0,asyncWrap.enable()},AsyncHook.prototype.disable=function(){this._state.enabled=!1,asyncWrap.disable()}},function(module,exports,__webpack_require__){"use strict";function NextTickWrap(){}module.exports=function(){const hooks=this._hooks,state=this._state,oldNextTick=process.nextTick;process.nextTick=function(){if(!state.enabled)return oldNextTick.apply(process,arguments);const args=new Array(arguments.length);for(let i=0;i<arguments.length;i++)args[i]=arguments[i];const callback=args[0];if("function"!=typeof callback)throw new TypeError("callback is not a function");const handle=new NextTickWrap,uid=--state.counter;return hooks.init.call(handle,uid,0,null,null),args[0]=function(){hooks.pre.call(handle,uid);let didThrow=!0;try{callback.apply(this,arguments),didThrow=!1}finally{didThrow&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",(function(){hooks.post.call(handle,uid,!0),hooks.destroy.call(null,uid)}))}hooks.post.call(handle,uid,!1),hooks.destroy.call(null,uid)},oldNextTick.apply(process,args)}}},function(module,exports,__webpack_require__){"use strict";function PromiseWrap(){}module.exports=function(){const hooks=this._hooks,state=this._state,Promise=global.Promise,oldThen=Promise.prototype.then;function makeWrappedHandler(fn,handle,uid,isOnFulfilled){return"function"!=typeof fn?isOnFulfilled?function(uid){return function(val){return hooks.destroy.call(null,uid),val}}(uid):function(uid){return function(val){throw hooks.destroy.call(null,uid),val}}(uid):function(){hooks.pre.call(handle,uid);try{return fn.apply(this,arguments)}finally{hooks.post.call(handle,uid,!1),hooks.destroy.call(null,uid)}}}Promise.prototype.then=function(onFulfilled,onRejected){if(!state.enabled)return oldThen.call(this,onFulfilled,onRejected);const handle=new PromiseWrap,uid=--state.counter;return hooks.init.call(handle,uid,0,null,null),oldThen.call(this,makeWrappedHandler(onFulfilled,handle,uid,!0),makeWrappedHandler(onRejected,handle,uid,!1))}}},function(module,exports,__webpack_require__){"use strict";const timers=__webpack_require__(73);function TimeoutWrap(){}function IntervalWrap(){}function ImmediateWrap(){}const timeoutMap=new Map,intervalMap=new Map,ImmediateMap=new Map;let activeCallback=null,clearedInCallback=!1;function patchTimer(hooks,state,setFn,clearFn,Handle,timerMap,singleCall){const oldSetFn=timers[setFn],oldClearFn=timers[clearFn];timers[setFn]=function(){if(!state.enabled)return oldSetFn.apply(timers,arguments);const args=new Array(arguments.length);for(let i=0;i<arguments.length;i++)args[i]=arguments[i];const callback=args[0];if("function"!=typeof callback)throw new TypeError('"callback" argument must be a function');const handle=new Handle,uid=--state.counter;let timerId=void 0;return hooks.init.call(handle,uid,0,null,null),args[0]=function(){activeCallback=timerId,hooks.pre.call(handle,uid);let didThrow=!0;try{callback.apply(this,arguments),didThrow=!1}finally{didThrow&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",(function(){hooks.post.call(handle,uid,!0),timerMap.delete(timerId),hooks.destroy.call(null,uid)}))}hooks.post.call(handle,uid,!1),activeCallback=null,(singleCall||clearedInCallback)&&(clearedInCallback=!1,timerMap.delete(timerId),hooks.destroy.call(null,uid))},timerId=oldSetFn.apply(timers,args),timerMap.set(timerId,uid),timerId},timers[clearFn]=function(timerId){if(activeCallback===timerId&&null!==timerId)clearedInCallback=!0;else if(timerMap.has(timerId)){const uid=timerMap.get(timerId);timerMap.delete(timerId),hooks.destroy.call(null,uid)}oldClearFn.apply(timers,arguments)}}module.exports=function(){patchTimer(this._hooks,this._state,"setTimeout","clearTimeout",TimeoutWrap,timeoutMap,!0),patchTimer(this._hooks,this._state,"setInterval","clearInterval",IntervalWrap,intervalMap,!1),patchTimer(this._hooks,this._state,"setImmediate","clearImmediate",ImmediateWrap,ImmediateMap,!0),global.setTimeout=timers.setTimeout,global.setInterval=timers.setInterval,global.setImmediate=timers.setImmediate,global.clearTimeout=timers.clearTimeout,global.clearInterval=timers.clearInterval,global.clearImmediate=timers.clearImmediate}},function(module,exports,__webpack_require__){var defaultFormater=__webpack_require__(194);function stackChain(){this.extend=new TraceModifier,this.filter=new TraceModifier,this.format=new StackFormater,this.version=__webpack_require__(76).version}var SHORTCIRCUIT_CALLSITE=!1;stackChain.prototype.callSite=function collectCallSites(options){options||(options={}),SHORTCIRCUIT_CALLSITE=!0;var obj={};Error.captureStackTrace(obj,collectCallSites);var callSites=obj.stack;return SHORTCIRCUIT_CALLSITE=!1,callSites=callSites.slice(options.slice||0),options.extend&&(callSites=this.extend._modify(obj,callSites)),options.filter&&(callSites=this.filter._modify(obj,callSites)),callSites};var chain=new stackChain;function TraceModifier(){this._modifiers=[]}function StackFormater(){this._formater=defaultFormater,this._previous=void 0}TraceModifier.prototype._modify=function(error,frames){for(var i=0,l=this._modifiers.length;i<l;i++)frames=this._modifiers[i](error,frames);return frames},TraceModifier.prototype.attach=function(modifier){this._modifiers.push(modifier)},TraceModifier.prototype.deattach=function(modifier){var index=this._modifiers.indexOf(modifier);return-1!==index&&(this._modifiers.splice(index,1),!0)},StackFormater.prototype.replace=function(formater){formater?this._formater=formater:this.restore()},StackFormater.prototype.restore=function(){this._formater=defaultFormater,this._previous=void 0},StackFormater.prototype._backup=function(){this._previous=this._formater},StackFormater.prototype._roolback=function(){this._previous===defaultFormater?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&chain.format.replace(Error.prepareStackTrace);var SHORTCIRCUIT_FORMATER=!1;function prepareStackTrace(error,originalFrames){if(SHORTCIRCUIT_CALLSITE)return originalFrames;if(SHORTCIRCUIT_FORMATER)return defaultFormater(error,originalFrames);var frames=originalFrames.concat();frames=chain.extend._modify(error,frames),frames=(frames=chain.filter._modify(error,frames)).slice(0,Error.stackTraceLimit),Object.isExtensible(error)&&void 0===Object.getOwnPropertyDescriptor(error,"callSite")&&(error.callSite={original:originalFrames,mutated:frames}),SHORTCIRCUIT_FORMATER=!0;var format=chain.format._formater(error,frames);return SHORTCIRCUIT_FORMATER=!1,format}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return prepareStackTrace},set:function(formater){formater===prepareStackTrace?chain.format._roolback():(chain.format._backup(),chain.format.replace(formater))}}),Object.defineProperty(Error.prototype,"callSite",{get:function(){return this.stack,this.callSite},set:function(frames){Object.defineProperty(this,"callSite",{value:frames,writable:!0,configurable:!0})},configurable:!0}),module.exports=chain},function(module,exports){module.exports=function(error,frames){var lines=[];lines.push(function(error){try{return Error.prototype.toString.call(error)}catch(e){try{return"<error: "+e+">"}catch(ee){return"<error>"}}}(error));for(var i=0;i<frames.length;i++){var line,frame=frames[i];try{line=frame.toString()}catch(e){try{line="<error: "+e+">"}catch(ee){line="<error>"}}lines.push("    at "+line)}return lines.join("\n")}},function(module,exports,__webpack_require__){"use strict";var assert=__webpack_require__(52),wrapEmitter=__webpack_require__(53),CONTEXTS_SYMBOL="cls@contexts";function Namespace(name){this.name=name,this.active=null,this._set=[],this.id=null}function get(name){return process.namespaces[name]}function destroy(name){var namespace=get(name);assert.ok(namespace,"can't delete nonexistent namespace!"),assert.ok(namespace.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(namespace.id),process.namespaces[name]=null}function reset(){process.namespaces&&Object.keys(process.namespaces).forEach((function(name){destroy(name)})),process.namespaces=Object.create(null)}process.addAsyncListener||__webpack_require__(196),Namespace.prototype.set=function(key,value){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[key]=value,value},Namespace.prototype.get=function(key){if(this.active)return this.active[key]},Namespace.prototype.createContext=function(){return Object.create(this.active)},Namespace.prototype.run=function(fn){var context=this.createContext();this.enter(context);try{return fn(context),context}catch(exception){throw exception&&(exception["error@context"]=context),exception}finally{this.exit(context)}},Namespace.prototype.runAndReturn=function(fn){var value;return this.run((function(context){value=fn(context)})),value},Namespace.prototype.bind=function(fn,context){context||(context=this.active?this.active:this.createContext());var self=this;return function(){self.enter(context);try{return fn.apply(this,arguments)}catch(exception){throw exception&&(exception["error@context"]=context),exception}finally{self.exit(context)}}},Namespace.prototype.enter=function(context){assert.ok(context,"context must be provided for entering"),this._set.push(this.active),this.active=context},Namespace.prototype.exit=function(context){if(assert.ok(context,"context must be provided for exiting"),this.active===context)return assert.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());var index=this._set.lastIndexOf(context);assert.ok(index>=0,"context not currently entered; can't exit"),assert.ok(index,"can't remove top context"),this._set.splice(index,1)},Namespace.prototype.bindEmitter=function(emitter){assert.ok(emitter.on&&emitter.addListener&&emitter.emit,"can only bind real EEs");var namespace=this,thisSymbol="context@"+this.name;wrapEmitter(emitter,(function(listener){listener&&(listener[CONTEXTS_SYMBOL]||(listener[CONTEXTS_SYMBOL]=Object.create(null)),listener[CONTEXTS_SYMBOL][thisSymbol]={namespace:namespace,context:namespace.active})}),(function(unwrapped){if(!unwrapped||!unwrapped[CONTEXTS_SYMBOL])return unwrapped;var wrapped=unwrapped,contexts=unwrapped[CONTEXTS_SYMBOL];return Object.keys(contexts).forEach((function(name){var thunk=contexts[name];wrapped=thunk.namespace.bind(wrapped,thunk.context)})),wrapped}))},Namespace.prototype.fromException=function(exception){return exception["error@context"]},process.namespaces||reset(),module.exports={getNamespace:get,createNamespace:function(name){assert.ok(name,"namespace must be given a name!");var namespace=new Namespace(name);return namespace.id=process.addAsyncListener({create:function(){return namespace.active},before:function(context,storage){storage&&namespace.enter(storage)},after:function(context,storage){storage&&namespace.exit(storage)},error:function(storage){storage&&namespace.exit(storage)}}),process.namespaces[name]=namespace,namespace},destroyNamespace:destroy,reset:reset}},function(module,exports,__webpack_require__){"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var shimmer=__webpack_require__(54),semver=__webpack_require__(35),wrap=shimmer.wrap,massWrap=shimmer.massWrap,wrapCallback=__webpack_require__(197),util=__webpack_require__(36),v6plus=semver.gte(process.version,"6.0.0"),v7plus=semver.gte(process.version,"7.0.0"),v8plus=semver.gte(process.version,"8.0.0"),v11plus=semver.gte(process.version,"11.0.0"),net=__webpack_require__(46);function wrapSetUpListenHandle(original){return function(){this.on("connection",(function(socket){socket._handle&&(socket._handle.onread=wrapCallback(socket._handle.onread))}));try{return original.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=wrapCallback(this._handle.onconnection))}}}function patchOnRead(ctx){if(ctx&&ctx._handle){var handle=ctx._handle;handle._originalOnread||(handle._originalOnread=handle.onread),handle.onread=wrapCallback(handle._originalOnread)}}v7plus&&!net._normalizeArgs?net._normalizeArgs=function(args){if(0===args.length)return[{},null];var s,x,arg0=args[0],options={};"object"==typeof arg0&&null!==arg0?options=arg0:"string"==typeof(s=arg0)&&!1===(x=s,(x=Number(x))>=0&&x)?options.path=arg0:(options.port=arg0,args.length>1&&"string"==typeof args[1]&&(options.host=args[1]));var cb=args[args.length-1];return"function"!=typeof cb?[options,null]:[options,cb]}:v7plus||net._normalizeConnectArgs||(net._normalizeConnectArgs=function(args){var x,options={};"object"==typeof args[0]&&null!==args[0]?options=args[0]:"string"==typeof args[0]&&!1===(x=args[0],(x=Number(x))>=0&&x)?options.path=args[0]:(options.port=args[0],"string"==typeof args[1]&&(options.host=args[1]));var cb=args[args.length-1];return"function"==typeof cb?[options,cb]:[options]}),"_setUpListenHandle"in net.Server.prototype?wrap(net.Server.prototype,"_setUpListenHandle",wrapSetUpListenHandle):wrap(net.Server.prototype,"_listen2",wrapSetUpListenHandle),wrap(net.Socket.prototype,"connect",(function(original){return function(){var args;(args=v8plus&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?arguments[0]:v7plus?net._normalizeArgs(arguments):net._normalizeConnectArgs(arguments))[1]&&(args[1]=wrapCallback(args[1]));var result=original.apply(this,args);return patchOnRead(this),result}}));var http=__webpack_require__(37);wrap(http.Agent.prototype,"addRequest",(function(original){return function(req){var onSocket=req.onSocket;return req.onSocket=wrapCallback((function(socket){return patchOnRead(socket),onSocket.apply(this,arguments)})),original.apply(this,arguments)}}));var childProcess=__webpack_require__(14);function wrapChildProcess(child){Array.isArray(child.stdio)&&child.stdio.forEach((function(socket){socket&&socket._handle&&(socket._handle.onread=wrapCallback(socket._handle.onread),wrap(socket._handle,"close",activatorFirst))})),child._handle&&(child._handle.onexit=wrapCallback(child._handle.onexit))}childProcess.ChildProcess?wrap(childProcess.ChildProcess.prototype,"spawn",(function(original){return function(){var result=original.apply(this,arguments);return wrapChildProcess(this),result}})):massWrap(childProcess,["execFile","fork","spawn"],(function(original){return function(){var result=original.apply(this,arguments);return wrapChildProcess(result),result}})),process._fatalException||(process._originalNextTick=process.nextTick);var processors=[];process._nextDomainTick&&processors.push("_nextDomainTick"),process._tickDomainCallback&&processors.push("_tickDomainCallback"),massWrap(process,processors,activator),wrap(process,"nextTick",activatorFirst);var asynchronizers=["setTimeout","setInterval"];global.setImmediate&&asynchronizers.push("setImmediate");var timers=__webpack_require__(73),patchGlobalTimers=global.setTimeout===timers.setTimeout;massWrap(timers,asynchronizers,activatorFirst),patchGlobalTimers&&massWrap(global,asynchronizers,activatorFirst);var dns=__webpack_require__(198);massWrap(dns,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],activator),dns.resolveNaptr&&wrap(dns,"resolveNaptr",activator);var zlib,crypto,fs=__webpack_require__(11);massWrap(fs,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],activator),fs.lchown&&wrap(fs,"lchown",activator),fs.lchmod&&wrap(fs,"lchmod",activator),fs.ftruncate&&wrap(fs,"ftruncate",activator);try{zlib=__webpack_require__(77)}catch(err){}if(zlib&&zlib.Deflate&&zlib.Deflate.prototype){var proto=Object.getPrototypeOf(zlib.Deflate.prototype);proto._transform?wrap(proto,"_transform",activator):proto.write&&proto.flush&&proto.end&&massWrap(proto,["write","flush","end"],activator)}try{crypto=__webpack_require__(60)}catch(err){}if(crypto){var toWrap=["pbkdf2","randomBytes"];v11plus||toWrap.push("pseudoRandomBytes"),massWrap(crypto,toWrap,activator)}var instrumentPromise=!!global.Promise&&"function Promise() { [native code] }"===Promise.toString()&&"function toString() { [native code] }"===Promise.toString.toString();if(instrumentPromise){var promiseListener=process.addAsyncListener({create:function(){instrumentPromise=!1}});global.Promise.resolve(!0).then((function(){instrumentPromise=!1})),process.removeAsyncListener(promiseListener)}function activator(fn){var fallback=function(){var args,cbIdx=arguments.length-1;if("function"==typeof arguments[cbIdx]){args=Array(arguments.length);for(var i=0;i<arguments.length-1;i++)args[i]=arguments[i];args[cbIdx]=wrapCallback(arguments[cbIdx])}return fn.apply(this,args||arguments)};switch(fn.length){case 1:return function(cb){return 1!==arguments.length?fallback.apply(this,arguments):("function"==typeof cb&&(cb=wrapCallback(cb)),fn.call(this,cb))};case 2:return function(a,cb){return 2!==arguments.length?fallback.apply(this,arguments):("function"==typeof cb&&(cb=wrapCallback(cb)),fn.call(this,a,cb))};case 3:return function(a,b,cb){return 3!==arguments.length?fallback.apply(this,arguments):("function"==typeof cb&&(cb=wrapCallback(cb)),fn.call(this,a,b,cb))};case 4:return function(a,b,c,cb){return 4!==arguments.length?fallback.apply(this,arguments):("function"==typeof cb&&(cb=wrapCallback(cb)),fn.call(this,a,b,c,cb))};case 5:return function(a,b,c,d,cb){return 5!==arguments.length?fallback.apply(this,arguments):("function"==typeof cb&&(cb=wrapCallback(cb)),fn.call(this,a,b,c,d,cb))};case 6:return function(a,b,c,d,e,cb){return 6!==arguments.length?fallback.apply(this,arguments):("function"==typeof cb&&(cb=wrapCallback(cb)),fn.call(this,a,b,c,d,e,cb))};default:return fallback}}function activatorFirst(fn){var fallback=function(){var args;if("function"==typeof arguments[0]){(args=Array(arguments.length))[0]=wrapCallback(arguments[0]);for(var i=1;i<arguments.length;i++)args[i]=arguments[i]}return fn.apply(this,args||arguments)};switch(fn.length){case 1:return function(cb){return 1!==arguments.length?fallback.apply(this,arguments):("function"==typeof cb&&(cb=wrapCallback(cb)),fn.call(this,cb))};case 2:return function(cb,a){return 2!==arguments.length?fallback.apply(this,arguments):("function"==typeof cb&&(cb=wrapCallback(cb)),fn.call(this,cb,a))};case 3:return function(cb,a,b){return 3!==arguments.length?fallback.apply(this,arguments):("function"==typeof cb&&(cb=wrapCallback(cb)),fn.call(this,cb,a,b))};case 4:return function(cb,a,b,c){return 4!==arguments.length?fallback.apply(this,arguments):("function"==typeof cb&&(cb=wrapCallback(cb)),fn.call(this,cb,a,b,c))};case 5:return function(cb,a,b,c,d){return 5!==arguments.length?fallback.apply(this,arguments):("function"==typeof cb&&(cb=wrapCallback(cb)),fn.call(this,cb,a,b,c,d))};case 6:return function(cb,a,b,c,d,e){return 6!==arguments.length?fallback.apply(this,arguments):("function"==typeof cb&&(cb=wrapCallback(cb)),fn.call(this,cb,a,b,c,d,e))};default:return fallback}}instrumentPromise&&function(){var Promise=global.Promise;function wrappedPromise(executor){if(!(this instanceof wrappedPromise))return Promise(executor);if("function"!=typeof executor)return new Promise(executor);var context,args,promise=new Promise((function(resolve,reject){context=this,args=[function(val){return ensureAslWrapper(promise,!1),resolve(val)},function(val){return ensureAslWrapper(promise,!1),reject(val)}]}));promise.__proto__=wrappedPromise.prototype;try{executor.apply(context,args)}catch(err){args[1](err)}return promise}util.inherits(wrappedPromise,Promise),wrap(Promise.prototype,"then",wrapThen),Promise.prototype.chain&&wrap(Promise.prototype,"chain",wrapThen);if(v6plus)global.Promise=__webpack_require__(199)(Promise,ensureAslWrapper);else{["all","race","reject","resolve","accept","defer"].forEach((function(key){"function"==typeof Promise[key]&&(wrappedPromise[key]=Promise[key])})),global.Promise=wrappedPromise}function ensureAslWrapper(promise,overwrite){promise.__asl_wrapper&&!overwrite||(promise.__asl_wrapper=wrapCallback(propagateAslWrapper))}function propagateAslWrapper(ctx,fn,result,next){var nextResult;try{return{returnVal:nextResult=fn.call(ctx,result),error:!1}}catch(err){return{errorVal:err,error:!0}}finally{nextResult instanceof Promise?next.__asl_wrapper=function(){var aslWrapper=nextResult.__asl_wrapper||propagateAslWrapper;return aslWrapper.apply(this,arguments)}:ensureAslWrapper(next,!0)}}function wrapThen(original){return function(){var promise=this,next=original.apply(promise,Array.prototype.map.call(arguments,bind));return next.__asl_wrapper=function(ctx,fn,val,last){return promise.__asl_wrapper?(promise.__asl_wrapper(ctx,(function(){}),null,next),next.__asl_wrapper(ctx,fn,val,last)):propagateAslWrapper(ctx,fn,val,last)},next;function bind(fn){return"function"!=typeof fn?fn:wrapCallback((function(val){var result=(promise.__asl_wrapper||propagateAslWrapper)(this,fn,val,next);if(result.error)throw result.errorVal;return result.returnVal}))}}}}()},function(module,exports,__webpack_require__){var asyncCatcher,asyncWrap,wrap=__webpack_require__(54).wrap,HAS_CREATE_AL=1,HAS_BEFORE_AL=2,HAS_AFTER_AL=4,HAS_ERROR_AL=8,listeners=[],uid=0,inAsyncTick=!1,listenerStack=[];function union(dest,added){var destLength=dest.length,addedLength=added.length,returned=[];if(0===destLength&&0===addedLength)return returned;for(var j=0;j<destLength;j++)returned[j]=dest[j];if(0===addedLength)return returned;for(var i=0;i<addedLength;i++){var missing=!0;for(j=0;j<destLength;j++)if(dest[j].uid===added[i].uid){missing=!1;break}missing&&returned.push(added[i])}return returned}if(process._fatalException){var errorValues,inErrorTick=!1;asyncCatcher=function(er){var length=listeners.length;if(inErrorTick||0===length)return!1;var handled=!1;inErrorTick=!0;for(var i=0;i<length;++i){var listener=listeners[i];if(0!=(listener.flags&HAS_ERROR_AL)){var value=errorValues&&errorValues[listener.uid];handled=listener.error(value,er)||handled}}return inErrorTick=!1,listenerStack.length>0&&(listeners=listenerStack.pop()),errorValues=void 0,handled&&!inAsyncTick},asyncWrap=function(original,list,length){var values=[];inAsyncTick=!0;for(var i=0;i<length;++i){var listener=list[i];if(values[listener.uid]=listener.data,0!=(listener.flags&HAS_CREATE_AL)){var value=listener.create(listener.data);void 0!==value&&(values[listener.uid]=value)}}return inAsyncTick=!1,function(){errorValues=values,listenerStack.push(listeners),listeners=union(list,listeners),inAsyncTick=!0;for(var i=0;i<length;++i)(list[i].flags&HAS_BEFORE_AL)>0&&list[i].before(this,values[list[i].uid]);inAsyncTick=!1;var returned=original.apply(this,arguments);for(inAsyncTick=!0,i=0;i<length;++i)(list[i].flags&HAS_AFTER_AL)>0&&list[i].after(this,values[list[i].uid]);return inAsyncTick=!1,listeners=listenerStack.pop(),errorValues=void 0,returned}},wrap(process,"_fatalException",(function(_fatalException){return function(er){return asyncCatcher(er)||_fatalException(er)}}))}else{var errorThrew=!1;asyncCatcher=function(er){if(errorThrew)throw er;for(var handled=!1,length=listeners.length,i=0;i<length;++i){var listener=listeners[i];0!=(listener.flags&HAS_ERROR_AL)&&(handled=listener.error(null,er)||handled)}if(!handled&&inAsyncTick)throw er},asyncWrap=function(original,list,length){var values=[];inAsyncTick=!0;for(var i=0;i<length;++i){var listener=list[i];if(values[listener.uid]=listener.data,0!=(listener.flags&HAS_CREATE_AL)){var value=listener.create(listener.data);void 0!==value&&(values[listener.uid]=value)}}return inAsyncTick=!1,function(){var returned,threw=!1,handled=!1;listenerStack.push(listeners),listeners=union(list,listeners),inAsyncTick=!0;for(var i=0;i<length;++i)(list[i].flags&HAS_BEFORE_AL)>0&&list[i].before(this,values[list[i].uid]);inAsyncTick=!1;try{returned=original.apply(this,arguments)}catch(er){threw=!0;for(i=0;i<length;++i)if(0!=(listeners[i].flags&HAS_ERROR_AL))try{handled=listeners[i].error(values[list[i].uid],er)||handled}catch(x){throw errorThrew=!0,x}if(!handled)throw process.removeListener("uncaughtException",asyncCatcher),process._originalNextTick((function(){process.addListener("uncaughtException",asyncCatcher)})),er}finally{if(!threw||handled){for(inAsyncTick=!0,i=0;i<length;++i)(list[i].flags&HAS_AFTER_AL)>0&&list[i].after(this,values[list[i].uid]);inAsyncTick=!1}listeners=listenerStack.pop()}return returned}},process.addListener("uncaughtException",asyncCatcher)}function AsyncListener(callbacks,data){"function"==typeof callbacks.create&&(this.create=callbacks.create,this.flags|=HAS_CREATE_AL),"function"==typeof callbacks.before&&(this.before=callbacks.before,this.flags|=HAS_BEFORE_AL),"function"==typeof callbacks.after&&(this.after=callbacks.after,this.flags|=HAS_AFTER_AL),"function"==typeof callbacks.error&&(this.error=callbacks.error,this.flags|=HAS_ERROR_AL),this.uid=++uid,this.data=void 0===data?null:data}function createAsyncListener(callbacks,data){if("object"!=typeof callbacks||!callbacks)throw new TypeError("callbacks argument must be an object");return callbacks instanceof AsyncListener?callbacks:new AsyncListener(callbacks,data)}AsyncListener.prototype.create=void 0,AsyncListener.prototype.before=void 0,AsyncListener.prototype.after=void 0,AsyncListener.prototype.error=void 0,AsyncListener.prototype.data=void 0,AsyncListener.prototype.uid=0,AsyncListener.prototype.flags=0,process.createAsyncListener=createAsyncListener,process.addAsyncListener=function(callbacks,data){var listener;listener=callbacks instanceof AsyncListener?callbacks:createAsyncListener(callbacks,data);for(var registered=!1,i=0;i<listeners.length;i++)if(listener===listeners[i]){registered=!0;break}return registered||listeners.push(listener),listener},process.removeAsyncListener=function(listener){for(var i=0;i<listeners.length;i++)if(listener===listeners[i]){listeners.splice(i,1);break}},module.exports=function(original){var length=listeners.length;if(0===length)return original;for(var list=listeners.slice(),i=0;i<length;++i)if(list[i].flags>0)return asyncWrap(original,list,length);return function(original,list,length){inAsyncTick=!0;for(var i=0;i<length;++i){var listener=list[i];listener.create&&listener.create(listener.data)}return inAsyncTick=!1,function(){listenerStack.push(listeners),listeners=union(list,listeners);var returned=original.apply(this,arguments);return listeners=listenerStack.pop(),returned}}(original,list,length)}},function(module,exports){module.exports=require("dns")},function(module,exports,__webpack_require__){"use strict";module.exports=(Promise,ensureAslWrapper)=>(class WrappedPromise extends Promise{constructor(executor){var context,args;super((function(resolve,reject){context=this,args=[function(val){return ensureAslWrapper(promise,!1),resolve(val)},function(val){return ensureAslWrapper(promise,!1),reject(val)}]}));var promise=this;try{executor.apply(context,args)}catch(err){args[1](err)}return promise}})},function(module,exports,__webpack_require__){"use strict";var DiagChannel=__webpack_require__(51),AutoCollectConsole=function(){function AutoCollectConsole(client){if(AutoCollectConsole.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=client,AutoCollectConsole.INSTANCE=this}return AutoCollectConsole.prototype.enable=function(isEnabled,collectConsoleLog){DiagChannel.IsInitialized&&(__webpack_require__(201).enable(isEnabled&&collectConsoleLog,this._client),__webpack_require__(219).enable(isEnabled,this._client),__webpack_require__(220).enable(isEnabled,this._client))},AutoCollectConsole.prototype.isInitialized=function(){return this._isInitialized},AutoCollectConsole.prototype.dispose=function(){AutoCollectConsole.INSTANCE=null,this.enable(!1,!1)},AutoCollectConsole._methodNames=["debug","info","log","warn","error"],AutoCollectConsole}();module.exports=AutoCollectConsole},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Contracts_1=__webpack_require__(7),diagnostic_channel_1=__webpack_require__(4),clients=[],subscriber=function(event){var message=event.data.message;clients.forEach((function(client){message instanceof Error?client.trackException({exception:message}):(message.lastIndexOf("\n")==message.length-1&&(message=message.substring(0,message.length-1)),client.trackTrace({message:message,severity:event.data.stderr?Contracts_1.SeverityLevel.Warning:Contracts_1.SeverityLevel.Information}))}))};exports.enable=function(enabled,client){enabled?(0===clients.length&&diagnostic_channel_1.channel.subscribe("console",subscriber),clients.push(client)):0===(clients=clients.filter((function(c){return c!=client}))).length&&diagnostic_channel_1.channel.unsubscribe("console",subscriber)},exports.dispose=function(){diagnostic_channel_1.channel.unsubscribe("console",subscriber),clients=[]}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Generated_1=__webpack_require__(78),RemoteDependencyDataConstants=function(){function RemoteDependencyDataConstants(){}return RemoteDependencyDataConstants.TYPE_HTTP="Http",RemoteDependencyDataConstants.TYPE_AI="Http (tracked component)",RemoteDependencyDataConstants}();exports.RemoteDependencyDataConstants=RemoteDependencyDataConstants,exports.domainSupportsProperties=function(domain){return"properties"in domain||domain instanceof Generated_1.EventData||domain instanceof Generated_1.ExceptionData||domain instanceof Generated_1.MessageData||domain instanceof Generated_1.MetricData||domain instanceof Generated_1.PageViewData||domain instanceof Generated_1.RemoteDependencyData||domain instanceof Generated_1.RequestData}},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),AvailabilityData=function(_super){function AvailabilityData(){var _this=_super.call(this)||this;return _this.ver=2,_this.properties={},_this.measurements={},_this}return __extends(AvailabilityData,_super),AvailabilityData}(__webpack_require__(13));module.exports=AvailabilityData},function(module,exports,__webpack_require__){"use strict";var ContextTagKeys=function(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"};module.exports=ContextTagKeys},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),Data=function(_super){function Data(){return _super.call(this)||this}return __extends(Data,_super),Data}(__webpack_require__(79));module.exports=Data},function(module,exports,__webpack_require__){"use strict";var DataPointType=__webpack_require__(80),DataPoint=function(){this.kind=DataPointType.Measurement};module.exports=DataPoint},function(module,exports,__webpack_require__){"use strict";var Envelope=function(){this.ver=1,this.sampleRate=100,this.tags={}};module.exports=Envelope},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),ExceptionData=function(_super){function ExceptionData(){var _this=_super.call(this)||this;return _this.ver=2,_this.exceptions=[],_this.properties={},_this.measurements={},_this}return __extends(ExceptionData,_super),ExceptionData}(__webpack_require__(13));module.exports=ExceptionData},function(module,exports,__webpack_require__){"use strict";var ExceptionDetails=function(){this.hasFullStack=!0,this.parsedStack=[]};module.exports=ExceptionDetails},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),MessageData=function(_super){function MessageData(){var _this=_super.call(this)||this;return _this.ver=2,_this.properties={},_this}return __extends(MessageData,_super),MessageData}(__webpack_require__(13));module.exports=MessageData},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),MetricData=function(_super){function MetricData(){var _this=_super.call(this)||this;return _this.ver=2,_this.metrics=[],_this.properties={},_this}return __extends(MetricData,_super),MetricData}(__webpack_require__(13));module.exports=MetricData},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),PageViewData=function(_super){function PageViewData(){var _this=_super.call(this)||this;return _this.ver=2,_this.properties={},_this.measurements={},_this}return __extends(PageViewData,_super),PageViewData}(__webpack_require__(81));module.exports=PageViewData},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),RemoteDependencyData=function(_super){function RemoteDependencyData(){var _this=_super.call(this)||this;return _this.ver=2,_this.success=!0,_this.properties={},_this.measurements={},_this}return __extends(RemoteDependencyData,_super),RemoteDependencyData}(__webpack_require__(13));module.exports=RemoteDependencyData},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),RequestData=function(_super){function RequestData(){var _this=_super.call(this)||this;return _this.ver=2,_this.properties={},_this.measurements={},_this}return __extends(RequestData,_super),RequestData}(__webpack_require__(13));module.exports=RequestData},function(module,exports,__webpack_require__){"use strict";var SeverityLevel;!function(SeverityLevel){SeverityLevel[SeverityLevel.Verbose=0]="Verbose",SeverityLevel[SeverityLevel.Information=1]="Information",SeverityLevel[SeverityLevel.Warning=2]="Warning",SeverityLevel[SeverityLevel.Error=3]="Error",SeverityLevel[SeverityLevel.Critical=4]="Critical"}(SeverityLevel||(SeverityLevel={})),module.exports=SeverityLevel},function(module,exports,__webpack_require__){"use strict";var StackFrame=function(){};module.exports=StackFrame},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(218))},function(module,exports,__webpack_require__){"use strict";var TelemetryType;Object.defineProperty(exports,"__esModule",{value:!0}),exports.telemetryTypeToBaseType=function(type){switch(type){case TelemetryType.Event:return"EventData";case TelemetryType.Exception:return"ExceptionData";case TelemetryType.Trace:return"MessageData";case TelemetryType.Metric:return"MetricData";case TelemetryType.Request:return"RequestData";case TelemetryType.Dependency:return"RemoteDependencyData"}},exports.baseTypeToTelemetryType=function(baseType){switch(baseType){case"EventData":return TelemetryType.Event;case"ExceptionData":return TelemetryType.Exception;case"MessageData":return TelemetryType.Trace;case"MetricData":return TelemetryType.Metric;case"RequestData":return TelemetryType.Request;case"RemoteDependencyData":return TelemetryType.Dependency}},exports.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData"},function(TelemetryType){TelemetryType[TelemetryType.Event=0]="Event",TelemetryType[TelemetryType.Exception=1]="Exception",TelemetryType[TelemetryType.Trace=2]="Trace",TelemetryType[TelemetryType.Metric=3]="Metric",TelemetryType[TelemetryType.Request=4]="Request",TelemetryType[TelemetryType.Dependency=5]="Dependency"}(TelemetryType=exports.TelemetryType||(exports.TelemetryType={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Contracts_1=__webpack_require__(7),diagnostic_channel_1=__webpack_require__(4),clients=[],bunyanToAILevelMap={10:Contracts_1.SeverityLevel.Verbose,20:Contracts_1.SeverityLevel.Verbose,30:Contracts_1.SeverityLevel.Information,40:Contracts_1.SeverityLevel.Warning,50:Contracts_1.SeverityLevel.Error,60:Contracts_1.SeverityLevel.Critical},subscriber=function(event){var message=event.data.result;clients.forEach((function(client){var AIlevel=bunyanToAILevelMap[event.data.level];message instanceof Error?client.trackException({exception:message}):client.trackTrace({message:message,severity:AIlevel})}))};exports.enable=function(enabled,client){enabled?(0===clients.length&&diagnostic_channel_1.channel.subscribe("bunyan",subscriber),clients.push(client)):0===(clients=clients.filter((function(c){return c!=client}))).length&&diagnostic_channel_1.channel.unsubscribe("bunyan",subscriber)},exports.dispose=function(){diagnostic_channel_1.channel.unsubscribe("bunyan",subscriber),clients=[]}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Contracts_1=__webpack_require__(7),diagnostic_channel_1=__webpack_require__(4),clients=[],winstonToAILevelMap={syslog:function(og){var map={emerg:Contracts_1.SeverityLevel.Critical,alert:Contracts_1.SeverityLevel.Critical,crit:Contracts_1.SeverityLevel.Critical,error:Contracts_1.SeverityLevel.Error,warning:Contracts_1.SeverityLevel.Warning,notice:Contracts_1.SeverityLevel.Information,info:Contracts_1.SeverityLevel.Information,debug:Contracts_1.SeverityLevel.Verbose};return void 0===map[og]?Contracts_1.SeverityLevel.Information:map[og]},npm:function(og){var map={error:Contracts_1.SeverityLevel.Error,warn:Contracts_1.SeverityLevel.Warning,info:Contracts_1.SeverityLevel.Information,verbose:Contracts_1.SeverityLevel.Verbose,debug:Contracts_1.SeverityLevel.Verbose,silly:Contracts_1.SeverityLevel.Verbose};return void 0===map[og]?Contracts_1.SeverityLevel.Information:map[og]},unknown:function(og){return Contracts_1.SeverityLevel.Information}},subscriber=function(event){var message=event.data.message;clients.forEach((function(client){if(message instanceof Error)client.trackException({exception:message,properties:event.data.meta});else{var AIlevel=winstonToAILevelMap[event.data.levelKind](event.data.level);client.trackTrace({message:message,severity:AIlevel,properties:event.data.meta})}}))};exports.enable=function(enabled,client){enabled?(0===clients.length&&diagnostic_channel_1.channel.subscribe("winston",subscriber),clients.push(client)):0===(clients=clients.filter((function(c){return c!=client}))).length&&diagnostic_channel_1.channel.unsubscribe("winston",subscriber)},exports.dispose=function(){diagnostic_channel_1.channel.unsubscribe("winston",subscriber),clients=[]}},function(module,exports,__webpack_require__){"use strict";var AutoCollectExceptions=function(){function AutoCollectExceptions(client){if(AutoCollectExceptions.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");AutoCollectExceptions.INSTANCE=this,this._client=client}return Object.defineProperty(AutoCollectExceptions,"UNCAUGHT_EXCEPTION_HANDLER_NAME",{get:function(){return"uncaughtException"},enumerable:!0,configurable:!0}),Object.defineProperty(AutoCollectExceptions,"UNHANDLED_REJECTION_HANDLER_NAME",{get:function(){return"unhandledRejection"},enumerable:!0,configurable:!0}),AutoCollectExceptions.prototype.isInitialized=function(){return this._isInitialized},AutoCollectExceptions.prototype.enable=function(isEnabled){var _this=this;if(isEnabled){this._isInitialized=!0;if(!this._exceptionListenerHandle){var handle=function(reThrow,error){if(_this._client.trackException({exception:error}),_this._client.flush({isAppCrashing:!0}),reThrow)throw error};this._exceptionListenerHandle=handle.bind(this,!0),this._rejectionListenerHandle=handle.bind(this,!1),process.on(AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)}}else this._exceptionListenerHandle&&(process.removeListener(AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},AutoCollectExceptions.prototype.dispose=function(){AutoCollectExceptions.INSTANCE=null,this.enable(!1),this._isInitialized=!1},AutoCollectExceptions.INSTANCE=null,AutoCollectExceptions}();module.exports=AutoCollectExceptions},function(module,exports){module.exports=require("constants")},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),url=__webpack_require__(21),Contracts=__webpack_require__(7),Util=__webpack_require__(10),RequestResponseHeaders=__webpack_require__(28),RequestParser=__webpack_require__(82),CorrelationIdManager=__webpack_require__(22),HttpDependencyParser=function(_super){function HttpDependencyParser(requestOptions,request){var _this=_super.call(this)||this;return request&&request.method&&requestOptions&&(_this.method=request.method,_this.url=HttpDependencyParser._getUrlFromRequestOptions(requestOptions,request),_this.startTime=+new Date),_this}return __extends(HttpDependencyParser,_super),HttpDependencyParser.prototype.onError=function(error){this._setStatus(void 0,error)},HttpDependencyParser.prototype.onResponse=function(response){this._setStatus(response.statusCode,void 0),this.correlationId=Util.getCorrelationContextTarget(response,RequestResponseHeaders.requestContextTargetKey)},HttpDependencyParser.prototype.getDependencyTelemetry=function(baseTelemetry,dependencyId){var urlObject=url.parse(this.url);urlObject.search=void 0,urlObject.hash=void 0;var dependencyName=this.method.toUpperCase()+" "+urlObject.pathname,remoteDependencyType=Contracts.RemoteDependencyDataConstants.TYPE_HTTP,remoteDependencyTarget=urlObject.hostname;this.correlationId?(remoteDependencyType=Contracts.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==CorrelationIdManager.correlationIdPrefix&&(remoteDependencyTarget=urlObject.hostname+" | "+this.correlationId)):remoteDependencyType=Contracts.RemoteDependencyDataConstants.TYPE_HTTP;var dependencyTelemetry={id:dependencyId,name:dependencyName,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:remoteDependencyType,target:remoteDependencyTarget};if(baseTelemetry){for(var key in baseTelemetry)dependencyTelemetry[key]||(dependencyTelemetry[key]=baseTelemetry[key]);if(baseTelemetry.properties)for(var key in baseTelemetry.properties)dependencyTelemetry.properties[key]=baseTelemetry.properties[key]}return dependencyTelemetry},HttpDependencyParser._getUrlFromRequestOptions=function(options,request){if("string"==typeof options)options=url.parse(options);else{var originalOptions_1=options;options={},originalOptions_1&&Object.keys(originalOptions_1).forEach((function(key){options[key]=originalOptions_1[key]}))}if(options.path){var parsedQuery=url.parse(options.path);options.pathname=parsedQuery.pathname,options.search=parsedQuery.search}options.host&&options.port&&(!url.parse("http://"+options.host).port&&options.port&&(options.hostname=options.host,delete options.host));return options.protocol=options.protocol||request.agent&&request.agent.protocol||void 0,options.hostname=options.hostname||"localhost",url.format(options)},HttpDependencyParser}(RequestParser);module.exports=HttpDependencyParser},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var diagnostic_channel_1=__webpack_require__(4),clients=[];exports.subscriber=function(event){clients.forEach((function(client){var dbName=event.data.startedData&&event.data.startedData.databaseName||"Unknown database";client.trackDependency({target:dbName,data:event.data.event.commandName,name:event.data.event.commandName,duration:event.data.event.duration,success:event.data.succeeded,resultCode:event.data.succeeded?"0":"1",dependencyTypeName:"mongodb"})}))},exports.enable=function(enabled,client){enabled?(0===clients.length&&diagnostic_channel_1.channel.subscribe("mongodb",exports.subscriber),clients.push(client)):0===(clients=clients.filter((function(c){return c!=client}))).length&&diagnostic_channel_1.channel.unsubscribe("mongodb",exports.subscriber)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var diagnostic_channel_1=__webpack_require__(4),clients=[];exports.subscriber=function(event){clients.forEach((function(client){var queryObj=event.data.query||{},sqlString=queryObj.sql||"Unknown query",success=!event.data.err,connectionConfig=(queryObj._connection||{}).config||{},dbName=connectionConfig.socketPath?connectionConfig.socketPath:(connectionConfig.host||"localhost")+":"+connectionConfig.port;client.trackDependency({target:dbName,data:sqlString,name:sqlString,duration:event.data.duration,success:success,resultCode:success?"0":"1",dependencyTypeName:"mysql"})}))},exports.enable=function(enabled,client){enabled?(0===clients.length&&diagnostic_channel_1.channel.subscribe("mysql",exports.subscriber),clients.push(client)):0===(clients=clients.filter((function(c){return c!=client}))).length&&diagnostic_channel_1.channel.unsubscribe("mysql",exports.subscriber)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var diagnostic_channel_1=__webpack_require__(4),clients=[];exports.subscriber=function(event){clients.forEach((function(client){"info"!==event.data.commandObj.command&&client.trackDependency({target:event.data.address,name:event.data.commandObj.command,data:event.data.commandObj.command,duration:event.data.duration,success:!event.data.err,resultCode:event.data.err?"1":"0",dependencyTypeName:"redis"})}))},exports.enable=function(enabled,client){enabled?(0===clients.length&&diagnostic_channel_1.channel.subscribe("redis",exports.subscriber),clients.push(client)):0===(clients=clients.filter((function(c){return c!=client}))).length&&diagnostic_channel_1.channel.unsubscribe("redis",exports.subscriber)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var diagnostic_channel_1=__webpack_require__(4),clients=[];exports.subscriber=function(event){clients.forEach((function(client){var q=event.data.query,sql=q.preparable&&q.preparable.text||q.plan||q.text||"unknown query",success=!event.data.error,conn=event.data.database.host+":"+event.data.database.port;client.trackDependency({target:conn,data:sql,name:sql,duration:event.data.duration,success:success,resultCode:success?"0":"1",dependencyTypeName:"postgres"})}))},exports.enable=function(enabled,client){enabled?(0===clients.length&&diagnostic_channel_1.channel.subscribe("postgres",exports.subscriber),clients.push(client)):0===(clients=clients.filter((function(c){return c!=client}))).length&&diagnostic_channel_1.channel.unsubscribe("postgres",exports.subscriber)}},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),url=__webpack_require__(21),Contracts=__webpack_require__(7),Util=__webpack_require__(10),RequestResponseHeaders=__webpack_require__(28),RequestParser=__webpack_require__(82),CorrelationIdManager=__webpack_require__(22),Tracestate=__webpack_require__(229),Traceparent=__webpack_require__(83),HttpRequestParser=function(_super){function HttpRequestParser(request,requestId){var _this=_super.call(this)||this;return request&&(_this.method=request.method,_this.url=_this._getAbsoluteUrl(request),_this.startTime=+new Date,_this.socketRemoteAddress=request.socket&&request.socket.remoteAddress,_this.parseHeaders(request,requestId),request.connection&&(_this.connectionRemoteAddress=request.connection.remoteAddress,_this.legacySocketRemoteAddress=request.connection.socket&&request.connection.socket.remoteAddress)),_this}return __extends(HttpRequestParser,_super),HttpRequestParser.prototype.onError=function(error,ellapsedMilliseconds){this._setStatus(void 0,error),ellapsedMilliseconds&&(this.duration=ellapsedMilliseconds)},HttpRequestParser.prototype.onResponse=function(response,ellapsedMilliseconds){this._setStatus(response.statusCode,void 0),ellapsedMilliseconds&&(this.duration=ellapsedMilliseconds)},HttpRequestParser.prototype.getRequestTelemetry=function(baseTelemetry){var requestTelemetry={id:this.requestId,name:this.method+" "+url.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(baseTelemetry){for(var key in baseTelemetry)requestTelemetry[key]||(requestTelemetry[key]=baseTelemetry[key]);if(baseTelemetry.properties)for(var key in baseTelemetry.properties)requestTelemetry.properties[key]=baseTelemetry.properties[key]}return requestTelemetry},HttpRequestParser.prototype.getRequestTags=function(tags){var newTags={};for(var key in tags)newTags[key]=tags[key];return newTags[HttpRequestParser.keys.locationIp]=tags[HttpRequestParser.keys.locationIp]||this._getIp(),newTags[HttpRequestParser.keys.sessionId]=tags[HttpRequestParser.keys.sessionId]||this._getId("ai_session"),newTags[HttpRequestParser.keys.userId]=tags[HttpRequestParser.keys.userId]||this._getId("ai_user"),newTags[HttpRequestParser.keys.userAuthUserId]=tags[HttpRequestParser.keys.userAuthUserId]||this._getId("ai_authUser"),newTags[HttpRequestParser.keys.operationName]=this.getOperationName(tags),newTags[HttpRequestParser.keys.operationParentId]=this.getOperationParentId(tags),newTags[HttpRequestParser.keys.operationId]=this.getOperationId(tags),newTags},HttpRequestParser.prototype.getOperationId=function(tags){return tags[HttpRequestParser.keys.operationId]||this.operationId},HttpRequestParser.prototype.getOperationParentId=function(tags){return tags[HttpRequestParser.keys.operationParentId]||this.parentId||this.getOperationId(tags)},HttpRequestParser.prototype.getOperationName=function(tags){return tags[HttpRequestParser.keys.operationName]||this.method+" "+url.parse(this.url).pathname},HttpRequestParser.prototype.getRequestId=function(){return this.requestId},HttpRequestParser.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},HttpRequestParser.prototype.getTraceparent=function(){return this.traceparent},HttpRequestParser.prototype.getTracestate=function(){return this.tracestate},HttpRequestParser.prototype.getLegacyRootId=function(){return this.legacyRootId},HttpRequestParser.prototype._getAbsoluteUrl=function(request){if(!request.headers)return request.url;var encrypted=request.connection?request.connection.encrypted:null,requestUrl=url.parse(request.url),pathName=requestUrl.pathname,search=requestUrl.search;return url.format({protocol:encrypted?"https":"http",host:request.headers.host,pathname:pathName,search:search})},HttpRequestParser.prototype._getIp=function(){var ipMatch=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,check=function(str){var results=ipMatch.exec(str);if(results)return results[0]},ip=check(this.rawHeaders["x-forwarded-for"])||check(this.rawHeaders["x-client-ip"])||check(this.rawHeaders["x-real-ip"])||check(this.connectionRemoteAddress)||check(this.socketRemoteAddress)||check(this.legacySocketRemoteAddress);return!ip&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&"::"===this.connectionRemoteAddress.substr(0,2)&&(ip="127.0.0.1"),ip},HttpRequestParser.prototype._getId=function(name){var cookie=this.rawHeaders&&this.rawHeaders.cookie&&"string"==typeof this.rawHeaders.cookie&&this.rawHeaders.cookie||"";return HttpRequestParser.parseId(Util.getCookie(name,cookie))},HttpRequestParser.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},HttpRequestParser.prototype.parseHeaders=function(request,requestId){if(this.rawHeaders=request.headers||request.rawHeaders,this.userAgent=request.headers&&request.headers["user-agent"],this.sourceCorrelationId=Util.getCorrelationContextTarget(request,RequestResponseHeaders.requestContextSourceKey),request.headers){var tracestateHeader=request.headers[RequestResponseHeaders.traceStateHeader],traceparentHeader=request.headers[RequestResponseHeaders.traceparentHeader],requestIdHeader=request.headers[RequestResponseHeaders.requestIdHeader],legacy_parentId=request.headers[RequestResponseHeaders.parentIdHeader],legacy_rootId=request.headers[RequestResponseHeaders.rootIdHeader];this.correlationContextHeader=request.headers[RequestResponseHeaders.correlationContextHeader],CorrelationIdManager.w3cEnabled&&(traceparentHeader||tracestateHeader)?(this.traceparent=new Traceparent(traceparentHeader),this.tracestate=traceparentHeader&&tracestateHeader&&new Tracestate(tracestateHeader),this.setBackCompatFromThisTraceContext()):requestIdHeader?CorrelationIdManager.w3cEnabled?(this.traceparent=new Traceparent(null,requestIdHeader),this.setBackCompatFromThisTraceContext()):(this.parentId=requestIdHeader,this.requestId=CorrelationIdManager.generateRequestId(this.parentId),this.operationId=CorrelationIdManager.getRootId(this.requestId)):CorrelationIdManager.w3cEnabled?(this.traceparent=new Traceparent,this.traceparent.parentId=legacy_parentId,this.traceparent.legacyRootId=legacy_rootId||legacy_parentId,this.setBackCompatFromThisTraceContext()):(this.parentId=legacy_parentId,this.requestId=CorrelationIdManager.generateRequestId(legacy_rootId||this.parentId),this.correlationContextHeader=null,this.operationId=CorrelationIdManager.getRootId(this.requestId)),requestId&&(this.requestId=requestId,this.operationId=CorrelationIdManager.getRootId(this.requestId))}},HttpRequestParser.parseId=function(cookieValue){var cookieParts=cookieValue.split("|");return cookieParts.length>0?cookieParts[0]:""},HttpRequestParser.keys=new Contracts.ContextTagKeys,HttpRequestParser}(RequestParser);module.exports=HttpRequestParser},function(module,exports,__webpack_require__){"use strict";var Tracestate=function(){function Tracestate(id){this.fieldmap=[],id&&(this.fieldmap=this.parseHeader(id))}return Tracestate.prototype.toString=function(){var fieldarr=this.fieldmap;return fieldarr&&0!=fieldarr.length?fieldarr.join(", "):null},Tracestate.validateKeyChars=function(key){var keyParts=key.split("@");if(2==keyParts.length){var tenant=keyParts[0].trim(),vendor=keyParts[1].trim(),tenantValid=Boolean(tenant.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),vendorValid=Boolean(vendor.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return tenantValid&&vendorValid}return 1==keyParts.length&&Boolean(key.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/))},Tracestate.prototype.parseHeader=function(id){var res=[],keydeduper={},parts=id.split(",");if(parts.length>32)return null;for(var _i=0,parts_1=parts;_i<parts_1.length;_i++){var part=parts_1[_i].trim();if(0!==part.length){var pair=part.split("=");if(2!==pair.length)return null;if(!Tracestate.validateKeyChars(pair[0]))return null;if(keydeduper[pair[0]])return null;keydeduper[pair[0]]=!0,res.push(part)}}return res},Tracestate.strict=!0,Tracestate}();module.exports=Tracestate},function(module,exports,__webpack_require__){"use strict";var Logging=__webpack_require__(6),Config=__webpack_require__(56),QuickPulseEnvelopeFactory=__webpack_require__(232),QuickPulseSender=__webpack_require__(233),Constants=__webpack_require__(27),Context=__webpack_require__(57),QuickPulseStateManager=function(){function QuickPulseStateManager(iKey,context){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this.config=new Config(iKey),this.context=context||new Context,this._sender=new QuickPulseSender(this.config),this._isEnabled=!1}return QuickPulseStateManager.prototype.addCollector=function(collector){this._collectors.push(collector)},QuickPulseStateManager.prototype.trackMetric=function(telemetry){this._addMetric(telemetry)},QuickPulseStateManager.prototype.addDocument=function(envelope){var document=QuickPulseEnvelopeFactory.telemetryEnvelopeToQuickPulseDocument(envelope);document&&this._documents.push(document)},QuickPulseStateManager.prototype.enable=function(isEnabled){isEnabled&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!isEnabled&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},QuickPulseStateManager.prototype.enableCollectors=function(enable){this._collectors.forEach((function(collector){collector.enable(enable)}))},QuickPulseStateManager.prototype._addMetric=function(telemetry){var value=telemetry.value,count=telemetry.count||1,name=Constants.PerformanceToQuickPulseCounter[telemetry.name];name&&(this._metrics[name]?(this._metrics[name].Value=(this._metrics[name].Value*this._metrics[name].Weight+value*count)/(this._metrics[name].Weight+count),this._metrics[name].Weight+=count):(this._metrics[name]=QuickPulseEnvelopeFactory.createQuickPulseMetric(telemetry),this._metrics[name].Name=name,this._metrics[name].Weight=1))},QuickPulseStateManager.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},QuickPulseStateManager.prototype._goQuickPulse=function(){var _this=this,metrics=Object.keys(this._metrics).map((function(k){return _this._metrics[k]})),envelope=QuickPulseEnvelopeFactory.createQuickPulseEnvelope(metrics,this._documents.slice(),this.config,this.context);this._resetQuickPulseBuffer(),this._isCollectingData?this._post(envelope):this._ping(envelope);var currentTimeout=this._isCollectingData?QuickPulseStateManager.POST_INTERVAL:QuickPulseStateManager.PING_INTERVAL;this._isCollectingData&&Date.now()-this._lastSuccessTime>=QuickPulseStateManager.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,currentTimeout=QuickPulseStateManager.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=QuickPulseStateManager.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(currentTimeout=QuickPulseStateManager.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),currentTimeout),this._handle.unref()},QuickPulseStateManager.prototype._ping=function(envelope){this._sender.ping(envelope,this._quickPulseDone.bind(this))},QuickPulseStateManager.prototype._post=function(envelope){this._sender.post(envelope,this._quickPulseDone.bind(this))},QuickPulseStateManager.prototype._quickPulseDone=function(shouldPOST,res){null!=shouldPOST?(this._isCollectingData!==shouldPOST&&(Logging.info("Live Metrics sending data",shouldPOST),this.enableCollectors(shouldPOST)),this._isCollectingData=shouldPOST,res&&res.statusCode<300&&res.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},QuickPulseStateManager.MAX_POST_WAIT_TIME=2e4,QuickPulseStateManager.MAX_PING_WAIT_TIME=6e4,QuickPulseStateManager.FALLBACK_INTERVAL=6e4,QuickPulseStateManager.PING_INTERVAL=5e3,QuickPulseStateManager.POST_INTERVAL=1e3,QuickPulseStateManager}();module.exports=QuickPulseStateManager},function(module,exports,__webpack_require__){"use strict";var Constants=__webpack_require__(27),ConnectionStringParser=function(){function ConnectionStringParser(){}return ConnectionStringParser.parse=function(connectionString){if(!connectionString)return{};var result=connectionString.split(ConnectionStringParser._FIELDS_SEPARATOR).reduce((function(fields,kv){var kvParts=kv.split(ConnectionStringParser._FIELD_KEY_VALUE_SEPARATOR);if(2===kvParts.length){var key=kvParts[0].toLowerCase(),value=kvParts[1];fields[key]=value}return fields}),{});if(Object.keys(result).length>0){if(result.endpointsuffix){var locationPrefix=result.location?result.location+".":"";result.ingestionendpoint=result.ingestionendpoint||"https://"+locationPrefix+"dc."+result.endpointsuffix,result.liveendpoint=result.liveendpoint||"https://"+locationPrefix+"live."+result.endpointsuffix}result.ingestionendpoint=result.ingestionendpoint||Constants.DEFAULT_BREEZE_ENDPOINT,result.liveendpoint=result.liveendpoint||Constants.DEFAULT_LIVEMETRICS_ENDPOINT}return result},ConnectionStringParser._FIELDS_SEPARATOR=";",ConnectionStringParser._FIELD_KEY_VALUE_SEPARATOR="=",ConnectionStringParser}();module.exports=ConnectionStringParser},function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},os=__webpack_require__(20),Contracts=__webpack_require__(7),Constants=__webpack_require__(27),Util=__webpack_require__(10),Logging=__webpack_require__(6),StreamId=Util.w3cTraceId(),QuickPulseEnvelopeFactory=function(){function QuickPulseEnvelopeFactory(){}return QuickPulseEnvelopeFactory.createQuickPulseEnvelope=function(metrics,documents,config,context){var machineName=os&&"function"==typeof os.hostname&&os.hostname()||"Unknown",instance=context.tags&&context.keys&&context.keys.cloudRoleInstance&&context.tags[context.keys.cloudRoleInstance]||machineName;return{Documents:documents.length>0?documents:null,InstrumentationKey:config.instrumentationKey||"",Metrics:metrics.length>0?metrics:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:context.tags[context.keys.internalSdkVersion],StreamId:StreamId,MachineName:machineName,Instance:instance}},QuickPulseEnvelopeFactory.createQuickPulseMetric=function(telemetry){return{Name:telemetry.name,Value:telemetry.value,Weight:telemetry.count||1}},QuickPulseEnvelopeFactory.telemetryEnvelopeToQuickPulseDocument=function(envelope){switch(envelope.data.baseType){case Contracts.TelemetryTypeString.Event:return QuickPulseEnvelopeFactory.createQuickPulseEventDocument(envelope);case Contracts.TelemetryTypeString.Exception:return QuickPulseEnvelopeFactory.createQuickPulseExceptionDocument(envelope);case Contracts.TelemetryTypeString.Trace:return QuickPulseEnvelopeFactory.createQuickPulseTraceDocument(envelope);case Contracts.TelemetryTypeString.Dependency:return QuickPulseEnvelopeFactory.createQuickPulseDependencyDocument(envelope);case Contracts.TelemetryTypeString.Request:return QuickPulseEnvelopeFactory.createQuickPulseRequestDocument(envelope)}return null},QuickPulseEnvelopeFactory.createQuickPulseEventDocument=function(envelope){var document=QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope),name=envelope.data.baseData.name;return __assign({},document,{Name:name})},QuickPulseEnvelopeFactory.createQuickPulseTraceDocument=function(envelope){var document=QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope),severityLevel=envelope.data.baseData.severityLevel||0;return __assign({},document,{Message:envelope.data.baseData.message,SeverityLevel:Contracts.SeverityLevel[severityLevel]})},QuickPulseEnvelopeFactory.createQuickPulseExceptionDocument=function(envelope){var document=QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope),exceptionDetails=envelope.data.baseData.exceptions,exception="",exceptionMessage="",exceptionType="";return exceptionDetails&&exceptionDetails.length>0&&(exceptionDetails[0].parsedStack&&exceptionDetails[0].parsedStack.length>0?exceptionDetails[0].parsedStack.forEach((function(err){exception+=err.assembly+"\n"})):exceptionDetails[0].stack&&exceptionDetails[0].stack.length>0&&(exception=exceptionDetails[0].stack),exceptionMessage=exceptionDetails[0].message,exceptionType=exceptionDetails[0].typeName),__assign({},document,{Exception:exception,ExceptionMessage:exceptionMessage,ExceptionType:exceptionType})},QuickPulseEnvelopeFactory.createQuickPulseRequestDocument=function(envelope){var document=QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope),baseData=envelope.data.baseData;return __assign({},document,{Name:baseData.name,Success:baseData.success,Duration:baseData.duration,ResponseCode:baseData.responseCode,OperationName:baseData.name})},QuickPulseEnvelopeFactory.createQuickPulseDependencyDocument=function(envelope){var document=QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope),baseData=envelope.data.baseData;return __assign({},document,{Name:baseData.name,Target:baseData.target,Success:baseData.success,Duration:baseData.duration,ResultCode:baseData.resultCode,CommandName:baseData.data,OperationName:document.OperationId,DependencyTypeName:baseData.type})},QuickPulseEnvelopeFactory.createQuickPulseDocument=function(envelope){var documentType,__type;return envelope.data.baseType?(__type=Constants.TelemetryTypeStringToQuickPulseType[envelope.data.baseType],documentType=Constants.TelemetryTypeStringToQuickPulseDocumentType[envelope.data.baseType]):Logging.warn("Document type invalid; not sending live metric document",envelope.data.baseType),{DocumentType:documentType,__type:__type,OperationId:envelope.tags[QuickPulseEnvelopeFactory.keys.operationId],Version:"1.0",Properties:QuickPulseEnvelopeFactory.aggregateProperties(envelope)}},QuickPulseEnvelopeFactory.aggregateProperties=function(envelope){var properties=[],meas=envelope.data.baseData.measurements||{};for(var key in meas)if(meas.hasOwnProperty(key)){var property={key:key,value:meas[key]};properties.push(property)}var props=envelope.data.baseData.properties||{};for(var key in props)if(props.hasOwnProperty(key)){property={key:key,value:props[key]};properties.push(property)}return properties},QuickPulseEnvelopeFactory.keys=new Contracts.ContextTagKeys,QuickPulseEnvelopeFactory}();module.exports=QuickPulseEnvelopeFactory},function(module,exports,__webpack_require__){"use strict";var https=__webpack_require__(23),AutoCollectHttpDependencies=__webpack_require__(38),Logging=__webpack_require__(6),QuickPulseConfig_method="POST",QuickPulseConfig_time="x-ms-qps-transmission-time",QuickPulseConfig_subscribed="x-ms-qps-subscribed",QuickPulseSender=function(){function QuickPulseSender(config){this._config=config,this._consecutiveErrors=0}return QuickPulseSender.prototype.ping=function(envelope,done){this._submitData(envelope,done,"ping")},QuickPulseSender.prototype.post=function(envelope,done){this._submitData([envelope],done,"post")},QuickPulseSender.prototype._submitData=function(envelope,done,postOrPing){var _a,_b,_this=this,payload=JSON.stringify(envelope),options=((_a={})[AutoCollectHttpDependencies.disableCollectionRequestOption]=!0,_a.host=this._config.quickPulseHost,_a.method=QuickPulseConfig_method,_a.path="/QuickPulseService.svc/"+postOrPing+"?ikey="+this._config.instrumentationKey,_a.headers=((_b={Expect:"100-continue"})[QuickPulseConfig_time]=1e4*Date.now(),_b["Content-Type"]="application/json",_b["Content-Length"]=Buffer.byteLength(payload),_b),_a),req=https.request(options,(function(res){var shouldPOSTData="true"===res.headers[QuickPulseConfig_subscribed];_this._consecutiveErrors=0,done(shouldPOSTData,res)}));req.on("error",(function(error){_this._consecutiveErrors++;var notice="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";_this._consecutiveErrors%QuickPulseSender.MAX_QPS_FAILURES_BEFORE_WARN==0?(notice="Live Metrics endpoint could not be reached "+_this._consecutiveErrors+" consecutive times. Most recent error:",Logging.warn(QuickPulseSender.TAG,notice,error)):Logging.info(QuickPulseSender.TAG,notice,error),done()})),req.write(payload),req.end()},QuickPulseSender.TAG="QuickPulseSender",QuickPulseSender.MAX_QPS_FAILURES_BEFORE_WARN=25,QuickPulseSender}();module.exports=QuickPulseSender},function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t};Object.defineProperty(exports,"__esModule",{value:!0});var Config=__webpack_require__(56),Context=__webpack_require__(57),Logging=__webpack_require__(6),AutoCollectNativePerformance=function(){function AutoCollectNativePerformance(client){this._disabledMetrics={},AutoCollectNativePerformance.INSTANCE&&AutoCollectNativePerformance.INSTANCE.dispose(),AutoCollectNativePerformance.INSTANCE=this,this._client=client}return AutoCollectNativePerformance.isNodeVersionCompatible=function(){var nodeVer=process.versions.node.split(".");return parseInt(nodeVer[0])>=6},AutoCollectNativePerformance.prototype.enable=function(isEnabled,disabledMetrics,collectionInterval){var _this=this;if(void 0===disabledMetrics&&(disabledMetrics={}),void 0===collectionInterval&&(collectionInterval=6e4),AutoCollectNativePerformance.isNodeVersionCompatible()){if(null==AutoCollectNativePerformance._metricsAvailable&&isEnabled&&!this._isInitialized)try{var NativeMetricsEmitters=__webpack_require__(!function(){var e=new Error("Cannot find module 'applicationinsights-native-metrics'");throw e.code="MODULE_NOT_FOUND",e}());AutoCollectNativePerformance._emitter=new NativeMetricsEmitters,AutoCollectNativePerformance._metricsAvailable=!0,Logging.info("Native metrics module successfully loaded!")}catch(err){return void(AutoCollectNativePerformance._metricsAvailable=!1)}this._isEnabled=isEnabled,this._disabledMetrics=disabledMetrics,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&AutoCollectNativePerformance._emitter?(AutoCollectNativePerformance._emitter.enable(!0,collectionInterval),this._handle=setInterval((function(){return _this._trackNativeMetrics()}),collectionInterval),this._handle.unref()):AutoCollectNativePerformance._emitter&&(AutoCollectNativePerformance._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},AutoCollectNativePerformance.prototype.dispose=function(){this.enable(!1)},AutoCollectNativePerformance.parseEnabled=function(collectExtendedMetrics){var disableAll=process.env[Config.ENV_nativeMetricsDisableAll],individualOptOuts=process.env[Config.ENV_nativeMetricsDisablers];if(disableAll)return{isEnabled:!1,disabledMetrics:{}};if(individualOptOuts){var optOutsArr=individualOptOuts.split(","),disabledMetrics={};if(optOutsArr.length>0)for(var _i=0,optOutsArr_1=optOutsArr;_i<optOutsArr_1.length;_i++){disabledMetrics[optOutsArr_1[_i]]=!0}return"object"==typeof collectExtendedMetrics?{isEnabled:!0,disabledMetrics:__assign({},collectExtendedMetrics,disabledMetrics)}:{isEnabled:collectExtendedMetrics,disabledMetrics:disabledMetrics}}return"boolean"==typeof collectExtendedMetrics?{isEnabled:collectExtendedMetrics,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:collectExtendedMetrics}},AutoCollectNativePerformance.prototype._trackNativeMetrics=function(){var shouldSendAll=!0;"object"!=typeof this._isEnabled&&(shouldSendAll=this._isEnabled),shouldSendAll&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},AutoCollectNativePerformance.prototype._trackGarbageCollection=function(){if(!this._disabledMetrics.gc){var _a,gcData=AutoCollectNativePerformance._emitter.getGCData();for(var gc in gcData){var metrics=gcData[gc].metrics,name_1=gc+" Garbage Collection Duration",stdDev=Math.sqrt(metrics.sumSquares/metrics.count-Math.pow(metrics.total/metrics.count,2))||0;this._client.trackMetric({name:name_1,value:metrics.total,count:metrics.count,max:metrics.max,min:metrics.min,stdDev:stdDev,tagOverrides:(_a={},_a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Context.sdkVersion,_a)})}}},AutoCollectNativePerformance.prototype._trackEventLoop=function(){if(!this._disabledMetrics.loop){var metrics=AutoCollectNativePerformance._emitter.getLoopData().loopUsage;if(0!=metrics.count){var _a,stdDev=Math.sqrt(metrics.sumSquares/metrics.count-Math.pow(metrics.total/metrics.count,2))||0;this._client.trackMetric({name:"Event Loop CPU Time",value:metrics.total,count:metrics.count,min:metrics.min,max:metrics.max,stdDev:stdDev,tagOverrides:(_a={},_a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Context.sdkVersion,_a)})}}},AutoCollectNativePerformance.prototype._trackHeapUsage=function(){if(!this._disabledMetrics.heap){var _a,_b,_c,memoryUsage=process.memoryUsage(),heapUsed=memoryUsage.heapUsed,heapTotal=memoryUsage.heapTotal,rss=memoryUsage.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:heapUsed,count:1,tagOverrides:(_a={},_a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Context.sdkVersion,_a)}),this._client.trackMetric({name:"Memory Total (Heap)",value:heapTotal,count:1,tagOverrides:(_b={},_b[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Context.sdkVersion,_b)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:rss-heapTotal,count:1,tagOverrides:(_c={},_c[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Context.sdkVersion,_c)})}},AutoCollectNativePerformance}();exports.AutoCollectNativePerformance=AutoCollectNativePerformance},function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),TelemetryClient=__webpack_require__(236),ServerRequestTracking=__webpack_require__(84),ClientRequestTracking=__webpack_require__(38),Logging=__webpack_require__(6),NodeClient=function(_super){function NodeClient(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(NodeClient,_super),NodeClient.prototype.trackNodeHttpRequestSync=function(telemetry){telemetry&&telemetry.request&&telemetry.response&&telemetry.duration?ServerRequestTracking.trackRequestSync(this,telemetry):Logging.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},NodeClient.prototype.trackNodeHttpRequest=function(telemetry){(telemetry.duration||telemetry.error)&&Logging.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),telemetry&&telemetry.request&&telemetry.response?ServerRequestTracking.trackRequest(this,telemetry):Logging.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},NodeClient.prototype.trackNodeHttpDependency=function(telemetry){telemetry&&telemetry.request?ClientRequestTracking.trackRequest(this,telemetry):Logging.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},NodeClient}(TelemetryClient);module.exports=NodeClient},function(module,exports,__webpack_require__){"use strict";var url=__webpack_require__(21),Config=__webpack_require__(56),Context=__webpack_require__(57),Contracts=__webpack_require__(7),Channel=__webpack_require__(237),TelemetryProcessors=__webpack_require__(238),CorrelationContextManager_1=__webpack_require__(26),Sender=__webpack_require__(241),Util=__webpack_require__(10),Logging=__webpack_require__(6),EnvelopeFactory=__webpack_require__(242),TelemetryClient=function(){function TelemetryClient(setupString){this._telemetryProcessors=[];var config=new Config(setupString);this.config=config,this.context=new Context,this.commonProperties={};var sender=new Sender(this.config);this.channel=new Channel((function(){return config.disableAppInsights}),(function(){return config.maxBatchSize}),(function(){return config.maxBatchIntervalMs}),sender)}return TelemetryClient.prototype.trackTrace=function(telemetry){this.track(telemetry,Contracts.TelemetryType.Trace)},TelemetryClient.prototype.trackMetric=function(telemetry){this.track(telemetry,Contracts.TelemetryType.Metric)},TelemetryClient.prototype.trackException=function(telemetry){telemetry&&telemetry.exception&&!Util.isError(telemetry.exception)&&(telemetry.exception=new Error(telemetry.exception.toString())),this.track(telemetry,Contracts.TelemetryType.Exception)},TelemetryClient.prototype.trackEvent=function(telemetry){this.track(telemetry,Contracts.TelemetryType.Event)},TelemetryClient.prototype.trackRequest=function(telemetry){this.track(telemetry,Contracts.TelemetryType.Request)},TelemetryClient.prototype.trackDependency=function(telemetry){telemetry&&!telemetry.target&&telemetry.data&&(telemetry.target=url.parse(telemetry.data).host),this.track(telemetry,Contracts.TelemetryType.Dependency)},TelemetryClient.prototype.flush=function(options){this.channel.triggerSend(!!options&&!!options.isAppCrashing,options?options.callback:void 0)},TelemetryClient.prototype.track=function(telemetry,telemetryType){if(telemetry&&Contracts.telemetryTypeToBaseType(telemetryType)){var envelope=EnvelopeFactory.createEnvelope(telemetry,telemetryType,this.commonProperties,this.context,this.config);telemetry.time&&(envelope.time=telemetry.time.toISOString());var accepted=this.runTelemetryProcessors(envelope,telemetry.contextObjects);accepted=accepted&&TelemetryProcessors.samplingTelemetryProcessor(envelope,{correlationContext:CorrelationContextManager_1.CorrelationContextManager.getCurrentContext()}),TelemetryProcessors.performanceMetricsTelemetryProcessor(envelope,this.quickPulseClient),accepted&&this.channel.send(envelope)}else Logging.warn("track() requires telemetry object and telemetryType to be specified.")},TelemetryClient.prototype.addTelemetryProcessor=function(telemetryProcessor){this._telemetryProcessors.push(telemetryProcessor)},TelemetryClient.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},TelemetryClient.prototype.runTelemetryProcessors=function(envelope,contextObjects){var accepted=!0,telemetryProcessorsCount=this._telemetryProcessors.length;if(0===telemetryProcessorsCount)return accepted;(contextObjects=contextObjects||{}).correlationContext=CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();for(var i=0;i<telemetryProcessorsCount;++i)try{var processor=this._telemetryProcessors[i];if(processor&&!1===processor.apply(null,[envelope,contextObjects])){accepted=!1;break}}catch(error){accepted=!0,Logging.warn("One of telemetry processors failed, telemetry item will be sent.",error,envelope)}return accepted},TelemetryClient}();module.exports=TelemetryClient},function(module,exports,__webpack_require__){"use strict";var Logging=__webpack_require__(6),Channel=function(){function Channel(isDisabled,getBatchSize,getBatchIntervalMs,sender){this._buffer=[],this._lastSend=0,this._isDisabled=isDisabled,this._getBatchSize=getBatchSize,this._getBatchIntervalMs=getBatchIntervalMs,this._sender=sender}return Channel.prototype.setUseDiskRetryCaching=function(value,resendInterval,maxBytesOnDisk){this._sender.setDiskRetryMode(value,resendInterval,maxBytesOnDisk)},Channel.prototype.send=function(envelope){var _this=this;if(!this._isDisabled())if(envelope){var payload=this._stringify(envelope);"string"==typeof payload&&(this._buffer.push(payload),this._buffer.length>=this._getBatchSize()?this.triggerSend(!1):!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout((function(){_this._timeoutHandle=null,_this.triggerSend(!1)}),this._getBatchIntervalMs())))}else Logging.warn("Cannot send null/undefined telemetry")},Channel.prototype.triggerSend=function(isNodeCrashing,callback){var bufferIsEmpty=this._buffer.length<1;if(!bufferIsEmpty){var batch=this._buffer.join("\n");isNodeCrashing?(this._sender.saveOnCrash(batch),"function"==typeof callback&&callback("data saved on crash")):this._sender.send(Buffer.from?Buffer.from(batch):new Buffer(batch),callback)}this._lastSend=+new Date,this._buffer.length=0,clearTimeout(this._timeoutHandle),this._timeoutHandle=null,bufferIsEmpty&&"function"==typeof callback&&callback("no data to send")},Channel.prototype._stringify=function(envelope){try{return JSON.stringify(envelope)}catch(error){Logging.warn("Failed to serialize payload",error,envelope)}},Channel}();module.exports=Channel},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(239)),__export(__webpack_require__(240))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Contracts=__webpack_require__(7);function getSamplingHashCode(input){var hash=5381;if(!input)return 0;for(;input.length<8;)input+=input;for(var i=0;i<input.length;i++)hash=((hash<<5)+hash|0)+input.charCodeAt(i)|0;return(hash=hash<=-2147483648?2147483647:Math.abs(hash))/2147483647*100}exports.samplingTelemetryProcessor=function(envelope,contextObjects){var samplingPercentage=envelope.sampleRate;return null==samplingPercentage||samplingPercentage>=100||(!(!envelope.data||Contracts.TelemetryType.Metric!==Contracts.baseTypeToTelemetryType(envelope.data.baseType))||(contextObjects.correlationContext&&contextObjects.correlationContext.operation?getSamplingHashCode(contextObjects.correlationContext.operation.id)<samplingPercentage:100*Math.random()<samplingPercentage))},exports.getSamplingHashCode=getSamplingHashCode},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var AutoCollectPerformance=__webpack_require__(55),TelemetryType=__webpack_require__(7);exports.performanceMetricsTelemetryProcessor=function(envelope,client){switch(client&&client.addDocument(envelope),envelope.data.baseType){case TelemetryType.TelemetryTypeString.Exception:AutoCollectPerformance.countException();break;case TelemetryType.TelemetryTypeString.Request:var requestData=envelope.data.baseData;AutoCollectPerformance.countRequest(requestData.duration,requestData.success);break;case TelemetryType.TelemetryTypeString.Dependency:var remoteDependencyData=envelope.data.baseData;AutoCollectPerformance.countDependency(remoteDependencyData.duration,remoteDependencyData.success)}return!0}},function(module,exports,__webpack_require__){"use strict";var fs=__webpack_require__(11),os=__webpack_require__(20),path=__webpack_require__(5),zlib=__webpack_require__(77),child_process=__webpack_require__(14),Logging=__webpack_require__(6),AutoCollectHttpDependencies=__webpack_require__(38),Util=__webpack_require__(10),Sender=function(){function Sender(config,onSuccess,onError){if(this._config=config,this._onSuccess=onSuccess,this._onError=onError,this._enableDiskRetryMode=!1,this._resendInterval=Sender.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=Sender.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,!Sender.OS_PROVIDES_FILE_PROTECTION)if(Sender.USE_ICACLS){try{Sender.OS_PROVIDES_FILE_PROTECTION=fs.existsSync(Sender.ICACLS_PATH)}catch(e){}Sender.OS_PROVIDES_FILE_PROTECTION||Logging.warn(Sender.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else Sender.OS_PROVIDES_FILE_PROTECTION=!0}return Sender.prototype.setDiskRetryMode=function(value,resendInterval,maxBytesOnDisk){this._enableDiskRetryMode=Sender.OS_PROVIDES_FILE_PROTECTION&&value,"number"==typeof resendInterval&&resendInterval>=0&&(this._resendInterval=Math.floor(resendInterval)),"number"==typeof maxBytesOnDisk&&maxBytesOnDisk>=0&&(this._maxBytesOnDisk=Math.floor(maxBytesOnDisk)),value&&!Sender.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,Logging.warn(Sender.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected."))},Sender.prototype.send=function(payload,callback){var _this=this,endpointUrl=this._config.endpointUrl,options={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}};zlib.gzip(payload,(function(err,buffer){var dataToSend=buffer;err?(Logging.warn(err),dataToSend=payload,options.headers["Content-Length"]=payload.length.toString()):(options.headers["Content-Encoding"]="gzip",options.headers["Content-Length"]=buffer.length),Logging.info(Sender.TAG,options),options[AutoCollectHttpDependencies.disableCollectionRequestOption]=!0;var req=Util.makeRequest(_this._config,endpointUrl,options,(function(res){res.setEncoding("utf-8");var responseString="";res.on("data",(function(data){responseString+=data})),res.on("end",(function(){_this._numConsecutiveFailures=0,Logging.info(Sender.TAG,responseString),"function"==typeof _this._onSuccess&&_this._onSuccess(responseString),"function"==typeof callback&&callback(responseString),_this._enableDiskRetryMode&&(200===res.statusCode?setTimeout((function(){return _this._sendFirstFileOnDisk()}),_this._resendInterval).unref():408!==res.statusCode&&429!==res.statusCode&&439!==res.statusCode&&500!==res.statusCode&&503!==res.statusCode||_this._storeToDisk(payload))}))}));req.on("error",(function(error){if(_this._numConsecutiveFailures++,!_this._enableDiskRetryMode||_this._numConsecutiveFailures>0&&_this._numConsecutiveFailures%Sender.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var notice="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";_this._enableDiskRetryMode&&(notice="Ingestion endpoint could not be reached "+_this._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),Logging.warn(Sender.TAG,notice,error)}else{notice="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";Logging.info(Sender.TAG,notice,error)}if(_this._onErrorHelper(error),"function"==typeof callback){var errorMessage="error sending telemetry";error&&"function"==typeof error.toString&&(errorMessage=error.toString()),callback(errorMessage)}_this._enableDiskRetryMode&&_this._storeToDisk(payload)})),req.write(dataToSend),req.end()}))},Sender.prototype.saveOnCrash=function(payload){this._enableDiskRetryMode&&this._storeToDiskSync(payload)},Sender.prototype._runICACLS=function(args,callback){var aclProc=child_process.spawn(Sender.ICACLS_PATH,args,{windowsHide:!0});aclProc.on("error",(function(e){return callback(e)})),aclProc.on("close",(function(code,signal){return callback(0===code?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+code+")"))}))},Sender.prototype._runICACLSSync=function(args){if(!child_process.spawnSync)throw new Error("Could not synchronously call ICACLS under current version of Node.js");var aclProc=child_process.spawnSync(Sender.ICACLS_PATH,args,{windowsHide:!0});if(aclProc.error)throw aclProc.error;if(0!==aclProc.status)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+aclProc.status+")")},Sender.prototype._getACLIdentity=function(callback){if(Sender.ACL_IDENTITY)return callback(null,Sender.ACL_IDENTITY);var psProc=child_process.spawn(Sender.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),data="";psProc.stdout.on("data",(function(d){return data+=d})),psProc.on("error",(function(e){return callback(e,null)})),psProc.on("close",(function(code,signal){return Sender.ACL_IDENTITY=data&&data.trim(),callback(0===code?null:new Error("Getting ACL identity did not succeed (PS returned code "+code+")"),Sender.ACL_IDENTITY)}))},Sender.prototype._getACLIdentitySync=function(){if(Sender.ACL_IDENTITY)return Sender.ACL_IDENTITY;if(child_process.spawnSync){var psProc=child_process.spawnSync(Sender.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(psProc.error)throw psProc.error;if(0!==psProc.status)throw new Error("Getting ACL identity did not succeed (PS returned code "+psProc.status+")");return Sender.ACL_IDENTITY=psProc.stdout&&psProc.stdout.toString().trim(),Sender.ACL_IDENTITY}throw new Error("Could not synchronously get ACL identity under current version of Node.js")},Sender.prototype._getACLArguments=function(directory,identity){return[directory,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",identity+":(OI)(CI)F","/inheritance:r"]},Sender.prototype._applyACLRules=function(directory,callback){var _this=this;return Sender.USE_ICACLS?void 0!==Sender.ACLED_DIRECTORIES[directory]?callback(Sender.ACLED_DIRECTORIES[directory]?null:new Error("Setting ACL restrictions did not succeed (cached result)")):(Sender.ACLED_DIRECTORIES[directory]=!1,void this._getACLIdentity((function(err,identity){if(err)return Sender.ACLED_DIRECTORIES[directory]=!1,callback(err);_this._runICACLS(_this._getACLArguments(directory,identity),(function(err){return Sender.ACLED_DIRECTORIES[directory]=!err,callback(err)}))}))):callback(null)},Sender.prototype._applyACLRulesSync=function(directory){if(Sender.USE_ICACLS){if(void 0===Sender.ACLED_DIRECTORIES[directory])return this._runICACLSSync(this._getACLArguments(directory,this._getACLIdentitySync())),void(Sender.ACLED_DIRECTORIES[directory]=!0);if(!Sender.ACLED_DIRECTORIES[directory])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},Sender.prototype._confirmDirExists=function(directory,callback){var _this=this;fs.lstat(directory,(function(err,stats){err&&"ENOENT"===err.code?fs.mkdir(directory,(function(err){err&&"EEXIST"!==err.code?callback(err):_this._applyACLRules(directory,callback)})):!err&&stats.isDirectory()?_this._applyACLRules(directory,callback):callback(err||new Error("Path existed but was not a directory"))}))},Sender.prototype._getShallowDirectorySize=function(directory,callback){fs.readdir(directory,(function(err,files){if(err)return callback(err,-1);var error=null,totalSize=0,count=0;if(0!==files.length)for(var i=0;i<files.length;i++)fs.stat(path.join(directory,files[i]),(function(err,fileStats){count++,err?error=err:fileStats.isFile()&&(totalSize+=fileStats.size),count===files.length&&callback(error,error?-1:totalSize)}));else callback(null,0)}))},Sender.prototype._getShallowDirectorySizeSync=function(directory){for(var files=fs.readdirSync(directory),totalSize=0,i=0;i<files.length;i++)totalSize+=fs.statSync(path.join(directory,files[i])).size;return totalSize},Sender.prototype._storeToDisk=function(payload){var _this=this,directory=path.join(os.tmpdir(),Sender.TEMPDIR_PREFIX+this._config.instrumentationKey);Logging.info(Sender.TAG,"Checking existance of data storage directory: "+directory),this._confirmDirExists(directory,(function(error){if(error)return Logging.warn(Sender.TAG,"Error while checking/creating directory: "+(error&&error.message)),void _this._onErrorHelper(error);_this._getShallowDirectorySize(directory,(function(err,size){if(err||size<0)return Logging.warn(Sender.TAG,"Error while checking directory size: "+(err&&err.message)),void _this._onErrorHelper(err);if(size>_this._maxBytesOnDisk)Logging.warn(Sender.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+size);else{var fileName=(new Date).getTime()+".ai.json",fileFullPath=path.join(directory,fileName);Logging.info(Sender.TAG,"saving data to disk at: "+fileFullPath),fs.writeFile(fileFullPath,payload,{mode:384},(function(error){return _this._onErrorHelper(error)}))}}))}))},Sender.prototype._storeToDiskSync=function(payload){var directory=path.join(os.tmpdir(),Sender.TEMPDIR_PREFIX+this._config.instrumentationKey);try{Logging.info(Sender.TAG,"Checking existance of data storage directory: "+directory),fs.existsSync(directory)||fs.mkdirSync(directory),this._applyACLRulesSync(directory);var dirSize=this._getShallowDirectorySizeSync(directory);if(dirSize>this._maxBytesOnDisk)return void Logging.info(Sender.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+dirSize);var fileName=(new Date).getTime()+".ai.json",fileFullPath=path.join(directory,fileName);Logging.info(Sender.TAG,"saving data before crash to disk at: "+fileFullPath),fs.writeFileSync(fileFullPath,payload,{mode:384})}catch(error){Logging.warn(Sender.TAG,"Error while saving data to disk: "+(error&&error.message)),this._onErrorHelper(error)}},Sender.prototype._sendFirstFileOnDisk=function(){var _this=this,tempDir=path.join(os.tmpdir(),Sender.TEMPDIR_PREFIX+this._config.instrumentationKey);fs.exists(tempDir,(function(exists){exists&&fs.readdir(tempDir,(function(error,files){if(error)_this._onErrorHelper(error);else if((files=files.filter((function(f){return path.basename(f).indexOf(".ai.json")>-1}))).length>0){var firstFile=files[0],filePath=path.join(tempDir,firstFile);fs.readFile(filePath,(function(error,payload){error?_this._onErrorHelper(error):fs.unlink(filePath,(function(error){error?_this._onErrorHelper(error):_this.send(payload)}))}))}}))}))},Sender.prototype._onErrorHelper=function(error){"function"==typeof this._onError&&this._onError(error)},Sender.TAG="Sender",Sender.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",Sender.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",Sender.ACLED_DIRECTORIES={},Sender.ACL_IDENTITY=null,Sender.WAIT_BETWEEN_RESEND=6e4,Sender.MAX_BYTES_ON_DISK=5e7,Sender.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,Sender.TEMPDIR_PREFIX="appInsights-node",Sender.OS_PROVIDES_FILE_PROTECTION=!1,Sender.USE_ICACLS="Windows_NT"===os.type(),Sender}();module.exports=Sender},function(module,exports,__webpack_require__){"use strict";var Contracts=__webpack_require__(7),Util=__webpack_require__(10),CorrelationContextManager_1=__webpack_require__(26),EnvelopeFactory=function(){function EnvelopeFactory(){}return EnvelopeFactory.createEnvelope=function(telemetry,telemetryType,commonProperties,context,config){var data=null;switch(telemetryType){case Contracts.TelemetryType.Trace:data=EnvelopeFactory.createTraceData(telemetry);break;case Contracts.TelemetryType.Dependency:data=EnvelopeFactory.createDependencyData(telemetry);break;case Contracts.TelemetryType.Event:data=EnvelopeFactory.createEventData(telemetry);break;case Contracts.TelemetryType.Exception:data=EnvelopeFactory.createExceptionData(telemetry);break;case Contracts.TelemetryType.Request:data=EnvelopeFactory.createRequestData(telemetry);break;case Contracts.TelemetryType.Metric:data=EnvelopeFactory.createMetricData(telemetry)}if(commonProperties&&Contracts.domainSupportsProperties(data.baseData)){if(data&&data.baseData)if(data.baseData.properties)for(var name in commonProperties)data.baseData.properties[name]||(data.baseData.properties[name]=commonProperties[name]);else data.baseData.properties=commonProperties;data.baseData.properties=Util.validateStringMap(data.baseData.properties)}var iKey=config&&config.instrumentationKey||"",envelope=new Contracts.Envelope;return envelope.data=data,envelope.iKey=iKey,envelope.name="Microsoft.ApplicationInsights."+iKey.replace(/-/g,"")+"."+data.baseType.substr(0,data.baseType.length-4),envelope.tags=this.getTags(context,telemetry.tagOverrides),envelope.time=(new Date).toISOString(),envelope.ver=1,envelope.sampleRate=config?config.samplingPercentage:100,telemetryType===Contracts.TelemetryType.Metric&&(envelope.sampleRate=100),envelope},EnvelopeFactory.createTraceData=function(telemetry){var trace=new Contracts.MessageData;trace.message=telemetry.message,trace.properties=telemetry.properties,isNaN(telemetry.severity)?trace.severityLevel=Contracts.SeverityLevel.Information:trace.severityLevel=telemetry.severity;var data=new Contracts.Data;return data.baseType=Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Trace),data.baseData=trace,data},EnvelopeFactory.createDependencyData=function(telemetry){var remoteDependency=new Contracts.RemoteDependencyData;remoteDependency.name=telemetry.name,remoteDependency.data=telemetry.data,remoteDependency.target=telemetry.target,remoteDependency.duration=Util.msToTimeSpan(telemetry.duration),remoteDependency.success=telemetry.success,remoteDependency.type=telemetry.dependencyTypeName,remoteDependency.properties=telemetry.properties,remoteDependency.resultCode=telemetry.resultCode?telemetry.resultCode+"":"",telemetry.id?remoteDependency.id=telemetry.id:remoteDependency.id=Util.w3cTraceId();var data=new Contracts.Data;return data.baseType=Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Dependency),data.baseData=remoteDependency,data},EnvelopeFactory.createEventData=function(telemetry){var event=new Contracts.EventData;event.name=telemetry.name,event.properties=telemetry.properties,event.measurements=telemetry.measurements;var data=new Contracts.Data;return data.baseType=Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Event),data.baseData=event,data},EnvelopeFactory.createExceptionData=function(telemetry){var exception=new Contracts.ExceptionData;exception.properties=telemetry.properties,isNaN(telemetry.severity)?exception.severityLevel=Contracts.SeverityLevel.Error:exception.severityLevel=telemetry.severity,exception.measurements=telemetry.measurements,exception.exceptions=[];var stack=telemetry.exception.stack,exceptionDetails=new Contracts.ExceptionDetails;exceptionDetails.message=telemetry.exception.message,exceptionDetails.typeName=telemetry.exception.name,exceptionDetails.parsedStack=this.parseStack(stack),exceptionDetails.hasFullStack=Util.isArray(exceptionDetails.parsedStack)&&exceptionDetails.parsedStack.length>0,exception.exceptions.push(exceptionDetails);var data=new Contracts.Data;return data.baseType=Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Exception),data.baseData=exception,data},EnvelopeFactory.createRequestData=function(telemetry){var requestData=new Contracts.RequestData;telemetry.id?requestData.id=telemetry.id:requestData.id=Util.w3cTraceId(),requestData.name=telemetry.name,requestData.url=telemetry.url,requestData.source=telemetry.source,requestData.duration=Util.msToTimeSpan(telemetry.duration),requestData.responseCode=telemetry.resultCode?telemetry.resultCode+"":"",requestData.success=telemetry.success,requestData.properties=telemetry.properties;var data=new Contracts.Data;return data.baseType=Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Request),data.baseData=requestData,data},EnvelopeFactory.createMetricData=function(telemetry){var metrics=new Contracts.MetricData;metrics.metrics=[];var metric=new Contracts.DataPoint;metric.count=isNaN(telemetry.count)?1:telemetry.count,metric.kind=Contracts.DataPointType.Aggregation,metric.max=isNaN(telemetry.max)?telemetry.value:telemetry.max,metric.min=isNaN(telemetry.min)?telemetry.value:telemetry.min,metric.name=telemetry.name,metric.stdDev=isNaN(telemetry.stdDev)?0:telemetry.stdDev,metric.value=telemetry.value,metrics.metrics.push(metric),metrics.properties=telemetry.properties;var data=new Contracts.Data;return data.baseType=Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Metric),data.baseData=metrics,data},EnvelopeFactory.getTags=function(context,tagOverrides){var correlationContext=CorrelationContextManager_1.CorrelationContextManager.getCurrentContext(),newTags={};if(context&&context.tags)for(var key in context.tags)newTags[key]=context.tags[key];if(tagOverrides)for(var key in tagOverrides)newTags[key]=tagOverrides[key];return correlationContext&&(newTags[context.keys.operationId]=newTags[context.keys.operationId]||correlationContext.operation.id,newTags[context.keys.operationName]=newTags[context.keys.operationName]||correlationContext.operation.name,newTags[context.keys.operationParentId]=newTags[context.keys.operationParentId]||correlationContext.operation.parentId),newTags},EnvelopeFactory.parseStack=function(stack){var parsedStack=void 0;if("string"==typeof stack){var frames=stack.split("\n");parsedStack=[];for(var level=0,totalSizeInBytes=0,i=0;i<=frames.length;i++){var frame=frames[i];if(_StackFrame.regex.test(frame)){var parsedFrame=new _StackFrame(frames[i],level++);totalSizeInBytes+=parsedFrame.sizeInBytes,parsedStack.push(parsedFrame)}}if(totalSizeInBytes>32768)for(var left=0,right=parsedStack.length-1,size=0,acceptedLeft=left,acceptedRight=right;left<right;){if((size+=parsedStack[left].sizeInBytes+parsedStack[right].sizeInBytes)>32768){var howMany=acceptedRight-acceptedLeft+1;parsedStack.splice(acceptedLeft,howMany);break}acceptedLeft=left,acceptedRight=right,left++,right--}}return parsedStack},EnvelopeFactory}(),_StackFrame=function(){function _StackFrame(frame,level){this.sizeInBytes=0,this.level=level,this.method="<no_method>",this.assembly=Util.trim(frame);var matches=frame.match(_StackFrame.regex);matches&&matches.length>=5&&(this.method=Util.trim(matches[2])||this.method,this.fileName=Util.trim(matches[4])||"<no_filename>",this.line=parseInt(matches[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=_StackFrame.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return _StackFrame.regex=/^([\s]+at)?(.*?)(\@|\s\(|\s)([^\(\@\n]+):([0-9]+):([0-9]+)(\)?)$/,_StackFrame.baseSize=58,_StackFrame}();module.exports=EnvelopeFactory},function(module){module.exports=JSON.parse('{"name":"applicationinsights","license":"MIT","bugs":"https://github.com/Microsoft/ApplicationInsights-node.js/issues","version":"1.5.0","description":"Microsoft Application Insights module for Node.js","repository":{"type":"git","url":"https://github.com/Microsoft/ApplicationInsights-node.js"},"main":"./out/applicationinsights.js","types":"./out/applicationinsights.d.ts","keywords":["exception monitoring","request monitoring","performance monitoring","application insights","microsoft","azure","cloud","tracing","telemetry","analytics","apm"],"contributors":[{"name":"Application Insights Developer Support","email":"aidevsupport@microsoft.com"},{"name":"Application Insights SDK Maintainers","email":"appinsightssdk@microsoft.com"}],"scripts":{"clean":"rm -rf ./out && rm -rf ./node_modules","build":"npm run build:deps && npm run build:compile","build:deps":"npm update --dev","build:compile":"tsc --project ./tsconfig.json","prepare":"npm run build:compile","prepublishOnly":"npm run build","pretest":"npm run build","test":"npm run test:ts && npm run test:js","test:ts":"mocha ./out/Tests --recursive --no-exit","test:js":"mocha ./Tests/js --recursive --no-exit","functionaltest":"npm run build && npm pack && node --use_strict ./Tests/FunctionalTests/RunFunctionalTests.js","backcompattest":"npm run build && npm pack && node --use_strict ./Tests/BackCompatibility/RunBackCompatTests.js"},"devDependencies":{"@types/cls-hooked":"^4.3.0","@types/mocha":"2.2.48","@types/node":"4.2.4","@types/sinon":"2.1.2","applicationinsights-native-metrics":"0.0.5","mocha":"3.5.2","node-mocks-http":"1.2.3","sinon":"1.17.6","typescript":"2.4.2"},"dependencies":{"cls-hooked":"^4.2.2","continuation-local-storage":"^3.2.1","diagnostic-channel":"0.2.0","diagnostic-channel-publishers":"^0.3.3"}}')},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class Timer{constructor(){this.start()}elapsed(){if(this.s){if(this.e)return 1e3*this.e[0]+this.e[1]/1e6;{const end=process.hrtime(this.s);return 1e3*end[0]+end[1]/1e6}}return-1}start(){this.s=process.hrtime()}end(){this.e||(this.e=process.hrtime(this.s))}}exports.Timer=Timer,exports.default=Timer},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.idSep="|",exports.getConnectionId=function(c){return c?c.id?c.id:(c.connectString&&`${c.name}${exports.idSep}${c.connectString}`.replace(/\./g,":").replace(/\//g,"\\"),`${c.name}${exports.idSep}${c.dialect}${exports.idSep}${c.server}${exports.idSep}${c.database}`.replace(/\./g,":").replace(/\//g,"\\")):null},exports.getNameFromId=function(id){return id?id.split(exports.idSep)[0]:null}},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const path_1=__importDefault(__webpack_require__(5)),constants_1=__webpack_require__(1),serializable_storage_1=__importDefault(__webpack_require__(247)),get_home_1=__webpack_require__(70),utils_1=__webpack_require__(3);let setup;var Utils;!function(Utils){function getlastRunInfo(){if(setup)return setup.getContent();setup=new serializable_storage_1.default(path_1.default.join(get_home_1.getHome(),".sqltools-setup"));const localConfig={current:{numericVersion:utils_1.numericVersion(constants_1.VERSION),releaseNotes:`${constants_1.DOCS_ROOT_URL}/changelog#v-${constants_1.VERSION.replace(/\./g,"-")}`,run:(new Date).getTime(),updated:!1,version:constants_1.VERSION,lastNotificationDate:0},onDisk:{numericVersion:0,run:0,version:"",lastNotificationDate:0}};try{localConfig.onDisk=setup.getContent(),localConfig.current.updated=localConfig.current.numericVersion>localConfig.onDisk.numericVersion,localConfig.current.lastNotificationDate=localConfig.onDisk.lastNotificationDate||0}catch(e){}return setup.content(localConfig.current).save(),localConfig.current}Utils.getlastRunInfo=getlastRunInfo,Utils.updateLastRunInfo=function(props={}){try{const current=Object.assign({},getlastRunInfo()||{},props);setup.content(current).save()}catch(e){}}}(Utils||(Utils={})),exports.default=Utils},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const fs_1=__importDefault(__webpack_require__(11)),exception_1=__webpack_require__(42);exports.default=class SerializableStorage{constructor(storagePath,defaultSerializable={}){this.encoding="utf8",this.storagePath=null,this.defaultSerializable="{}",this.items={},this.defaultSerializable=JSON.stringify(defaultSerializable),this.storagePath=storagePath,this.items=defaultSerializable,this.read()}read(){try{const content=fs_1.default.readFileSync(this.storagePath,this.encoding);content&&content.length>0?this.items=JSON.parse(content):this.reset().save()}catch(e){this.reset().save()}return this}serializeContent(){return new Buffer(JSON.stringify(this.items),"utf8")}save(){return this.write()}write(){return fs_1.default.writeFileSync(this.storagePath,this.serializeContent()),this}reset(){return this.items=JSON.parse(this.defaultSerializable),this}set(key,query){return this.items[key]=query,this.save()}get(key){if(!this.items[key])throw new exception_1.NotFoundException("Query not found!");return this.items[key]}delete(key){return this.get(key),delete this.items[key],this.save()}content(content){return this.items=content,this}getContent(){return this.items}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const client_1=__webpack_require__(249);exports.default=client_1.SQLToolsLanguageClient},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__importDefault(__webpack_require__(18)),path_1=__importDefault(__webpack_require__(5)),fs_1=__importDefault(__webpack_require__(11)),config_manager_1=__importDefault(__webpack_require__(8)),constants_1=__webpack_require__(1),utils_1=__webpack_require__(3),vscode_2=__webpack_require__(0),vscode_languageclient_1=__webpack_require__(86),error_handler_1=__importDefault(__webpack_require__(85));exports.SQLToolsLanguageClient=class SQLToolsLanguageClient{constructor(context){this.context=context,this._telemetry=new utils_1.Telemetry({logger:vscode_1.default,product:"language-client"}),this.sendRequest=function(){return __awaiter(this,arguments,void 0,(function*(){return yield this.client.onReady(),this.client.sendRequest.apply(this.client,arguments)}))},this.onRequest=function(){return __awaiter(this,arguments,void 0,(function*(){return yield this.client.onReady(),this.client.onRequest.apply(this.client,arguments)}))},this.sendNotification=function(){return __awaiter(this,arguments,void 0,(function*(){return yield this.client.onReady(),this.client.sendNotification.apply(this.client,arguments)}))},this.onNotification=function(){return __awaiter(this,arguments,void 0,(function*(){return yield this.client.onReady(),this.client.onNotification.apply(this.client,arguments)}))},this.client=new vscode_languageclient_1.LanguageClient(`${constants_1.DISPLAY_NAME} Language Server`,this.getServerOptions(),this.getClientOptions()),this.clientErrorHandler=this.client.createDefaultErrorHandler(),this.registerBaseNotifications();const useNodeRuntimePrevValue=config_manager_1.default.useNodeRuntime,languageServerEnvPrevValue=JSON.stringify(config_manager_1.default.languageServerEnv);config_manager_1.default.addOnUpdateHook(()=>__awaiter(this,void 0,void 0,(function*(){if(config_manager_1.default.useNodeRuntime!==useNodeRuntimePrevValue){if(!(yield vscode_2.window.showWarningMessage("Use node runtime setting change. You must reload window to take effect.","Reload now")))return;vscode_2.commands.executeCommand("workbench.action.reloadWindow")}if(JSON.stringify(config_manager_1.default.languageServerEnv)!==languageServerEnvPrevValue){if(!(yield vscode_2.window.showWarningMessage("New language server environment variables set. You must reload window to take effect.","Reload now")))return;vscode_2.commands.executeCommand("workbench.action.reloadWindow")}})))}start(){return this.client.start()}getServerOptions(){const serverModule=this.context.asAbsolutePath("languageserver.js");let runtime=void 0;const useNodeRuntime=config_manager_1.default.useNodeRuntime;if(useNodeRuntime&&"string"==typeof useNodeRuntime){const runtimePath=path_1.default.normalize(useNodeRuntime);fs_1.default.existsSync(runtimePath)?runtime=runtimePath:vscode_2.window.showInformationMessage("Node runtime not found. Using default as a fallback.")}else useNodeRuntime&&(utils_1.commandExists("node")?runtime="node":vscode_2.window.showInformationMessage("Node runtime not found. Using default as a fallback."));const runOptions={module:serverModule,transport:vscode_languageclient_1.TransportKind.ipc,runtime:runtime,options:{env:Object.assign(Object.assign({},config_manager_1.default.languageServerEnv||{}),{IS_NODE_RUNTIME:useNodeRuntime?1:0})}};return{debug:runOptions,run:runOptions}}getClientOptions(){const telemetryArgs={product:"language-server",enableTelemetry:config_manager_1.default.telemetry,vscodeInfo:{sessId:vscode_2.env.sessionId,uniqId:vscode_2.env.machineId,version:vscode_2.version}};let selector=[];return config_manager_1.default.completionLanguages&&(selector=selector.concat(config_manager_1.default.completionLanguages)),config_manager_1.default.formatLanguages&&(selector=selector.concat(config_manager_1.default.formatLanguages)),{documentSelector:selector=selector.reduce((agg,language)=>("string"==typeof language?(agg.push({language:language,scheme:"untitled"}),agg.push({language:language,scheme:"file"}),agg.push({language:language,scheme:"sqltools"})):agg.push(language),agg),[{scheme:constants_1.EXT_NAME.toLowerCase(),language:void 0}]),initializationOptions:{telemetry:telemetryArgs,extensionPath:this.context.extensionPath,userEnvVars:config_manager_1.default.languageServerEnv},synchronize:{configurationSection:constants_1.EXT_NAME.toLowerCase(),fileEvents:vscode_2.workspace.createFileSystemWatcher("**/.sqltoolsrc")},initializationFailedHandler:error=>(this.telemetry.registerException(error,{message:"Server initialization failed."}),this.client.error("Server initialization failed.",error),this.client.outputChannel.show(!0),!1),errorHandler:{error:(error,message,count)=>(this.telemetry.registerException(error,{message:"Language Server error.",givenMessage:message,count:count}),this.clientErrorHandler.error(error,message,count)),closed:()=>this.clientErrorHandler.closed()}}}registerBaseNotifications(){return __awaiter(this,void 0,void 0,(function*(){yield this.client.onReady();this.client.onNotification("serverError",({err:err="",errMessage:errMessage,message:message})=>{error_handler_1.default.create(message)((errMessage||err.message||err).toString())}),this.telemetry.registerInfoMessage("LanguageClient ready")}))}get telemetry(){return this._telemetry}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const code=__webpack_require__(0),proto=__webpack_require__(2),Is=__webpack_require__(12),protocolCompletionItem_1=__webpack_require__(87),protocolCodeLens_1=__webpack_require__(88),protocolDocumentLink_1=__webpack_require__(89);exports.createConverter=function(uriConverter){const _uriConverter=uriConverter||(value=>value.toString());function asUri(value){return _uriConverter(value)}function asTextDocumentIdentifier(textDocument){return{uri:_uriConverter(textDocument.uri)}}function asVersionedTextDocumentIdentifier(textDocument){return{uri:_uriConverter(textDocument.uri),version:textDocument.version}}function asTextDocumentSaveReason(reason){switch(reason){case code.TextDocumentSaveReason.Manual:return proto.TextDocumentSaveReason.Manual;case code.TextDocumentSaveReason.AfterDelay:return proto.TextDocumentSaveReason.AfterDelay;case code.TextDocumentSaveReason.FocusOut:return proto.TextDocumentSaveReason.FocusOut}return proto.TextDocumentSaveReason.Manual}function asTriggerKind(triggerKind){switch(triggerKind){case code.CompletionTriggerKind.TriggerCharacter:return proto.CompletionTriggerKind.TriggerCharacter;case code.CompletionTriggerKind.TriggerForIncompleteCompletions:return proto.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return proto.CompletionTriggerKind.Invoked}}function asWorkerPosition(position){return{line:position.line,character:position.character}}function asPosition(value){if(void 0!==value)return null===value?null:{line:value.line,character:value.character}}function asRange(value){return null==value?value:{start:asPosition(value.start),end:asPosition(value.end)}}function asDiagnosticSeverity(value){switch(value){case code.DiagnosticSeverity.Error:return proto.DiagnosticSeverity.Error;case code.DiagnosticSeverity.Warning:return proto.DiagnosticSeverity.Warning;case code.DiagnosticSeverity.Information:return proto.DiagnosticSeverity.Information;case code.DiagnosticSeverity.Hint:return proto.DiagnosticSeverity.Hint}}function asDiagnostic(item){let result=proto.Diagnostic.create(asRange(item.range),item.message);return Is.number(item.severity)&&(result.severity=asDiagnosticSeverity(item.severity)),(Is.number(item.code)||Is.string(item.code))&&(result.code=item.code),item.source&&(result.source=item.source),result}function asDiagnostics(items){return null==items?items:items.map(asDiagnostic)}function asTextEdit(edit){return{range:asRange(edit.range),newText:edit.newText}}function asCommand(item){let result=proto.Command.create(item.title,item.command);return item.arguments&&(result.arguments=item.arguments),result}return{asUri:asUri,asTextDocumentIdentifier:asTextDocumentIdentifier,asVersionedTextDocumentIdentifier:asVersionedTextDocumentIdentifier,asOpenTextDocumentParams:function(textDocument){return{textDocument:{uri:_uriConverter(textDocument.uri),languageId:textDocument.languageId,version:textDocument.version,text:textDocument.getText()}}},asChangeTextDocumentParams:function(arg){if(function(value){let candidate=value;return!!candidate.uri&&!!candidate.version}(arg)){return{textDocument:{uri:_uriConverter(arg.uri),version:arg.version},contentChanges:[{text:arg.getText()}]}}if(function(value){let candidate=value;return!!candidate.document&&!!candidate.contentChanges}(arg)){let document=arg.document;return{textDocument:{uri:_uriConverter(document.uri),version:document.version},contentChanges:arg.contentChanges.map(change=>{let range=change.range;return{range:{start:{line:range.start.line,character:range.start.character},end:{line:range.end.line,character:range.end.character}},rangeLength:change.rangeLength,text:change.text}})}}throw Error("Unsupported text document change parameter")},asCloseTextDocumentParams:function(textDocument){return{textDocument:asTextDocumentIdentifier(textDocument)}},asSaveTextDocumentParams:function(textDocument,includeContent=!1){let result={textDocument:asVersionedTextDocumentIdentifier(textDocument)};return includeContent&&(result.text=textDocument.getText()),result},asWillSaveTextDocumentParams:function(event){return{textDocument:asTextDocumentIdentifier(event.document),reason:asTextDocumentSaveReason(event.reason)}},asTextDocumentPositionParams:function(textDocument,position){return{textDocument:asTextDocumentIdentifier(textDocument),position:asWorkerPosition(position)}},asCompletionParams:function(textDocument,position,context){return{textDocument:asTextDocumentIdentifier(textDocument),position:asWorkerPosition(position),context:{triggerKind:asTriggerKind(context.triggerKind),triggerCharacter:context.triggerCharacter}}},asWorkerPosition:asWorkerPosition,asRange:asRange,asPosition:asPosition,asDiagnosticSeverity:asDiagnosticSeverity,asDiagnostic:asDiagnostic,asDiagnostics:asDiagnostics,asCompletionItem:function(item){let result={label:item.label},protocolItem=item instanceof protocolCompletionItem_1.default?item:void 0;var value,original;return item.detail&&(result.detail=item.detail),item.documentation&&(protocolItem&&"$string"!==protocolItem.documentationFormat?result.documentation=function(format,documentation){switch(format){case"$string":return documentation;case proto.MarkupKind.PlainText:return{kind:format,value:documentation};case proto.MarkupKind.Markdown:return{kind:format,value:documentation.value};default:return`Unsupported Markup content received. Kind is: ${format}`}}(protocolItem.documentationFormat,item.documentation):result.documentation=item.documentation),item.filterText&&(result.filterText=item.filterText),function(target,source){let text,format=proto.InsertTextFormat.PlainText,range=void 0;source.textEdit?(text=source.textEdit.newText,range=asRange(source.textEdit.range)):source.insertText instanceof code.SnippetString?(format=proto.InsertTextFormat.Snippet,text=source.insertText.value):text=source.insertText;source.range&&(range=asRange(source.range));target.insertTextFormat=format,source.fromEdit&&text&&range?target.textEdit={newText:text,range:range}:target.insertText=text}(result,item),Is.number(item.kind)&&(result.kind=(value=item.kind,void 0!==(original=protocolItem&&protocolItem.originalItemKind)?original:value+1)),item.sortText&&(result.sortText=item.sortText),item.additionalTextEdits&&(result.additionalTextEdits=function(edits){if(null==edits)return edits;return edits.map(asTextEdit)}(item.additionalTextEdits)),item.commitCharacters&&(result.commitCharacters=item.commitCharacters.slice()),item.command&&(result.command=asCommand(item.command)),!0!==item.preselect&&!1!==item.preselect||(result.preselect=item.preselect),protocolItem&&(void 0!==protocolItem.data&&(result.data=protocolItem.data),!0!==protocolItem.deprecated&&!1!==protocolItem.deprecated||(result.deprecated=protocolItem.deprecated)),result},asTextEdit:asTextEdit,asReferenceParams:function(textDocument,position,options){return{textDocument:asTextDocumentIdentifier(textDocument),position:asWorkerPosition(position),context:{includeDeclaration:options.includeDeclaration}}},asCodeActionContext:function(context){return null==context?context:proto.CodeActionContext.create(asDiagnostics(context.diagnostics),Is.string(context.only)?[context.only]:void 0)},asCommand:asCommand,asCodeLens:function(item){let result=proto.CodeLens.create(asRange(item.range));return item.command&&(result.command=asCommand(item.command)),item instanceof protocolCodeLens_1.default&&item.data&&(result.data=item.data),result},asFormattingOptions:function(item){return{tabSize:item.tabSize,insertSpaces:item.insertSpaces}},asDocumentSymbolParams:function(textDocument){return{textDocument:asTextDocumentIdentifier(textDocument)}},asCodeLensParams:function(textDocument){return{textDocument:asTextDocumentIdentifier(textDocument)}},asDocumentLink:function(item){let result=proto.DocumentLink.create(asRange(item.range));item.target&&(result.target=asUri(item.target));let protocolItem=item instanceof protocolDocumentLink_1.default?item:void 0;return protocolItem&&protocolItem.data&&(result.data=protocolItem.data),result},asDocumentLinkParams:function(textDocument){return{textDocument:asTextDocumentIdentifier(textDocument)}}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const code=__webpack_require__(0),ls=__webpack_require__(2),Is=__webpack_require__(12),protocolCompletionItem_1=__webpack_require__(87),protocolCodeLens_1=__webpack_require__(88),protocolDocumentLink_1=__webpack_require__(89);var CodeBlock;!function(CodeBlock){CodeBlock.is=function(value){let candidate=value;return candidate&&Is.string(candidate.language)&&Is.string(candidate.value)}}(CodeBlock||(CodeBlock={})),exports.createConverter=function(uriConverter){const _uriConverter=uriConverter||(value=>code.Uri.parse(value));function asUri(value){return _uriConverter(value)}function asDiagnostics(diagnostics){return diagnostics.map(asDiagnostic)}function asDiagnostic(diagnostic){let result=new code.Diagnostic(asRange(diagnostic.range),diagnostic.message,asDiagnosticSeverity(diagnostic.severity));return(Is.number(diagnostic.code)||Is.string(diagnostic.code))&&(result.code=diagnostic.code),diagnostic.source&&(result.source=diagnostic.source),diagnostic.relatedInformation&&(result.relatedInformation=diagnostic.relatedInformation.map(asDiagnosticRelatedInformation)),result}function asDiagnosticRelatedInformation(information){return new code.DiagnosticRelatedInformation(asLocation(information.location),information.message)}function asPosition(value){if(value)return new code.Position(value.line,value.character)}function asRange(value){if(value)return new code.Range(asPosition(value.start),asPosition(value.end))}function asDiagnosticSeverity(value){if(null==value)return code.DiagnosticSeverity.Error;switch(value){case ls.DiagnosticSeverity.Error:return code.DiagnosticSeverity.Error;case ls.DiagnosticSeverity.Warning:return code.DiagnosticSeverity.Warning;case ls.DiagnosticSeverity.Information:return code.DiagnosticSeverity.Information;case ls.DiagnosticSeverity.Hint:return code.DiagnosticSeverity.Hint}return code.DiagnosticSeverity.Error}function asDocumentation(value){if(Is.string(value))return value;switch(value.kind){case ls.MarkupKind.Markdown:return new code.MarkdownString(value.value);case ls.MarkupKind.PlainText:return value.value;default:return`Unsupported Markup content received. Kind is: ${value.kind}`}}function asCompletionItem(item){let result=new protocolCompletionItem_1.default(item.label);item.detail&&(result.detail=item.detail),item.documentation&&(result.documentation=asDocumentation(item.documentation),result.documentationFormat=Is.string(item.documentation)?"$string":item.documentation.kind),item.filterText&&(result.filterText=item.filterText);let insertText=function(item){return item.textEdit?item.insertTextFormat===ls.InsertTextFormat.Snippet?{text:new code.SnippetString(item.textEdit.newText),range:asRange(item.textEdit.range),fromEdit:!0}:{text:item.textEdit.newText,range:asRange(item.textEdit.range),fromEdit:!0}:item.insertText?item.insertTextFormat===ls.InsertTextFormat.Snippet?{text:new code.SnippetString(item.insertText),fromEdit:!1}:{text:item.insertText,fromEdit:!1}:void 0}(item);if(insertText&&(result.insertText=insertText.text,result.range=insertText.range,result.fromEdit=insertText.fromEdit),Is.number(item.kind)){let[itemKind,original]=(value=item.kind,ls.CompletionItemKind.Text<=value&&value<=ls.CompletionItemKind.TypeParameter?[value-1,void 0]:[code.CompletionItemKind.Text,value]);result.kind=itemKind,original&&(result.originalItemKind=original)}var value;return item.sortText&&(result.sortText=item.sortText),item.additionalTextEdits&&(result.additionalTextEdits=asTextEdits(item.additionalTextEdits)),Is.stringArray(item.commitCharacters)&&(result.commitCharacters=item.commitCharacters.slice()),item.command&&(result.command=asCommand(item.command)),!0!==item.deprecated&&!1!==item.deprecated||(result.deprecated=item.deprecated),!0!==item.preselect&&!1!==item.preselect||(result.preselect=item.preselect),void 0!==item.data&&(result.data=item.data),result}function asTextEdit(edit){if(edit)return new code.TextEdit(asRange(edit.range),edit.newText)}function asTextEdits(items){if(items)return items.map(asTextEdit)}function asSignatureInformations(items){return items.map(asSignatureInformation)}function asSignatureInformation(item){let result=new code.SignatureInformation(item.label);return item.documentation&&(result.documentation=asDocumentation(item.documentation)),item.parameters&&(result.parameters=asParameterInformations(item.parameters)),result}function asParameterInformations(item){return item.map(asParameterInformation)}function asParameterInformation(item){let result=new code.ParameterInformation(item.label);return item.documentation&&(result.documentation=asDocumentation(item.documentation)),result}function asLocation(item){if(item)return new code.Location(_uriConverter(item.uri),asRange(item.range))}function asLocationLink(item){if(item)return{targetUri:_uriConverter(item.targetUri),targetRange:asRange(item.targetSelectionRange),originSelectionRange:asRange(item.originSelectionRange),targetSelectionRange:asRange(item.targetSelectionRange)}}function asLocationResult(item){if(item){if(Is.array(item)){if(0===item.length)return[];if(ls.LocationLink.is(item[0])){return item.map(link=>asLocationLink(link))}return item.map(location=>asLocation(location))}return ls.LocationLink.is(item)?[asLocationLink(item)]:asLocation(item)}}function asDocumentHighlight(item){let result=new code.DocumentHighlight(asRange(item.range));return Is.number(item.kind)&&(result.kind=asDocumentHighlightKind(item.kind)),result}function asDocumentHighlightKind(item){switch(item){case ls.DocumentHighlightKind.Text:return code.DocumentHighlightKind.Text;case ls.DocumentHighlightKind.Read:return code.DocumentHighlightKind.Read;case ls.DocumentHighlightKind.Write:return code.DocumentHighlightKind.Write}return code.DocumentHighlightKind.Text}function asSymbolKind(item){return item<=ls.SymbolKind.TypeParameter?item-1:code.SymbolKind.Property}function asSymbolInformation(item,uri){let result=new code.SymbolInformation(item.name,asSymbolKind(item.kind),asRange(item.location.range),item.location.uri?_uriConverter(item.location.uri):uri);return item.containerName&&(result.containerName=item.containerName),result}function asDocumentSymbol(value){let result=new code.DocumentSymbol(value.name,value.detail||"",asSymbolKind(value.kind),asRange(value.range),asRange(value.selectionRange));if(void 0!==value.children&&value.children.length>0){let children=[];for(let child of value.children)children.push(asDocumentSymbol(child));result.children=children}return result}function asCommand(item){let result={title:item.title,command:item.command};return item.arguments&&(result.arguments=item.arguments),result}const kindMapping=new Map;function asCodeActionKind(item){if(null==item)return;let result=kindMapping.get(item);if(result)return result;let parts=item.split(".");result=code.CodeActionKind.Empty;for(let part of parts)result=result.append(part);return result}function asCodeLens(item){if(!item)return;let result=new protocolCodeLens_1.default(asRange(item.range));return item.command&&(result.command=asCommand(item.command)),void 0!==item.data&&null!==item.data&&(result.data=item.data),result}function asWorkspaceEdit(item){if(!item)return;let result=new code.WorkspaceEdit;return item.documentChanges?item.documentChanges.forEach(change=>{ls.CreateFile.is(change)?result.createFile(_uriConverter(change.uri),change.options):ls.RenameFile.is(change)?result.renameFile(_uriConverter(change.oldUri),_uriConverter(change.newUri),change.options):ls.DeleteFile.is(change)?result.deleteFile(_uriConverter(change.uri),change.options):ls.TextDocumentEdit.is(change)?result.set(_uriConverter(change.textDocument.uri),asTextEdits(change.edits)):console.error(`Unknown workspace edit change received:\n${JSON.stringify(change,void 0,4)}`)}):item.changes&&Object.keys(item.changes).forEach(key=>{result.set(_uriConverter(key),asTextEdits(item.changes[key]))}),result}function asDocumentLink(item){let range=asRange(item.range),target=item.target?asUri(item.target):void 0,link=new protocolDocumentLink_1.default(range,target);return void 0!==item.data&&null!==item.data&&(link.data=item.data),link}function asColor(color){return new code.Color(color.red,color.green,color.blue,color.alpha)}function asColorInformation(ci){return new code.ColorInformation(asRange(ci.range),asColor(ci.color))}function asColorPresentation(cp){let presentation=new code.ColorPresentation(cp.label);return presentation.additionalTextEdits=asTextEdits(cp.additionalTextEdits),cp.textEdit&&(presentation.textEdit=asTextEdit(cp.textEdit)),presentation}function asFoldingRangeKind(kind){if(kind)switch(kind){case ls.FoldingRangeKind.Comment:return code.FoldingRangeKind.Comment;case ls.FoldingRangeKind.Imports:return code.FoldingRangeKind.Imports;case ls.FoldingRangeKind.Region:return code.FoldingRangeKind.Region}}function asFoldingRange(r){return new code.FoldingRange(r.startLine,r.endLine,asFoldingRangeKind(r.kind))}return kindMapping.set("",code.CodeActionKind.Empty),kindMapping.set(ls.CodeActionKind.QuickFix,code.CodeActionKind.QuickFix),kindMapping.set(ls.CodeActionKind.Refactor,code.CodeActionKind.Refactor),kindMapping.set(ls.CodeActionKind.RefactorExtract,code.CodeActionKind.RefactorExtract),kindMapping.set(ls.CodeActionKind.RefactorInline,code.CodeActionKind.RefactorInline),kindMapping.set(ls.CodeActionKind.RefactorRewrite,code.CodeActionKind.RefactorRewrite),kindMapping.set(ls.CodeActionKind.Source,code.CodeActionKind.Source),kindMapping.set(ls.CodeActionKind.SourceOrganizeImports,code.CodeActionKind.SourceOrganizeImports),{asUri:asUri,asDiagnostics:asDiagnostics,asDiagnostic:asDiagnostic,asRange:asRange,asPosition:asPosition,asDiagnosticSeverity:asDiagnosticSeverity,asHover:function(hover){if(hover)return new code.Hover(function(value){if(Is.string(value))return new code.MarkdownString(value);if(CodeBlock.is(value)){return(new code.MarkdownString).appendCodeblock(value.value,value.language)}if(Array.isArray(value)){let result=[];for(let element of value){let item=new code.MarkdownString;CodeBlock.is(element)?item.appendCodeblock(element.value,element.language):item.appendMarkdown(element),result.push(item)}return result}{let result;switch(value.kind){case ls.MarkupKind.Markdown:return new code.MarkdownString(value.value);case ls.MarkupKind.PlainText:return(result=new code.MarkdownString).appendText(value.value),result;default:return(result=new code.MarkdownString).appendText(`Unsupported Markup content received. Kind is: ${value.kind}`),result}}}(hover.contents),asRange(hover.range))},asCompletionResult:function(result){if(!result)return;if(Array.isArray(result)){return result.map(asCompletionItem)}let list=result;return new code.CompletionList(list.items.map(asCompletionItem),list.isIncomplete)},asCompletionItem:asCompletionItem,asTextEdit:asTextEdit,asTextEdits:asTextEdits,asSignatureHelp:function(item){if(!item)return;let result=new code.SignatureHelp;return Is.number(item.activeSignature)?result.activeSignature=item.activeSignature:result.activeSignature=0,Is.number(item.activeParameter)?result.activeParameter=item.activeParameter:result.activeParameter=0,item.signatures&&(result.signatures=asSignatureInformations(item.signatures)),result},asSignatureInformations:asSignatureInformations,asSignatureInformation:asSignatureInformation,asParameterInformations:asParameterInformations,asParameterInformation:asParameterInformation,asDeclarationResult:function(item){if(item)return asLocationResult(item)},asDefinitionResult:function(item){if(item)return asLocationResult(item)},asLocation:asLocation,asReferences:function(values){if(values)return values.map(location=>asLocation(location))},asDocumentHighlights:function(values){if(values)return values.map(asDocumentHighlight)},asDocumentHighlight:asDocumentHighlight,asDocumentHighlightKind:asDocumentHighlightKind,asSymbolInformations:function(values,uri){if(values)return values.map(information=>asSymbolInformation(information,uri))},asSymbolInformation:asSymbolInformation,asDocumentSymbols:function(values){if(null!=values)return values.map(asDocumentSymbol)},asDocumentSymbol:asDocumentSymbol,asCommand:asCommand,asCommands:function(items){if(items)return items.map(asCommand)},asCodeAction:function(item){if(null==item)return;let result=new code.CodeAction(item.title);return void 0!==item.kind&&(result.kind=asCodeActionKind(item.kind)),item.diagnostics&&(result.diagnostics=asDiagnostics(item.diagnostics)),item.edit&&(result.edit=asWorkspaceEdit(item.edit)),item.command&&(result.command=asCommand(item.command)),result},asCodeActionKind:asCodeActionKind,asCodeActionKinds:function(items){if(null!=items)return items.map(kind=>asCodeActionKind(kind))},asCodeLens:asCodeLens,asCodeLenses:function(items){if(items)return items.map(codeLens=>asCodeLens(codeLens))},asWorkspaceEdit:asWorkspaceEdit,asDocumentLink:asDocumentLink,asDocumentLinks:function(items){if(items)return items.map(asDocumentLink)},asFoldingRangeKind:asFoldingRangeKind,asFoldingRange:asFoldingRange,asFoldingRanges:function(foldingRanges){if(Array.isArray(foldingRanges))return foldingRanges.map(asFoldingRange)},asColor:asColor,asColorInformation:asColorInformation,asColorInformations:function(colorInformation){if(Array.isArray(colorInformation))return colorInformation.map(asColorInformation)},asColorPresentation:asColorPresentation,asColorPresentations:function(colorPresentations){if(Array.isArray(colorPresentations))return colorPresentations.map(asColorPresentation)}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Delayer=class Delayer{constructor(defaultDelay){this.defaultDelay=defaultDelay,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(task,delay=this.defaultDelay){return this.task=task,delay>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(resolve=>{this.onSuccess=resolve}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var result=this.task();return this.task=void 0,result})),(delay>=0||void 0===this.timeout)&&(this.timeout=setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},delay>=0?delay:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let result=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,result}isTriggered(){return void 0!==this.timeout}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){void 0!==this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const UUID=__webpack_require__(17),Is=__webpack_require__(12),vscode_1=__webpack_require__(0),vscode_languageserver_protocol_1=__webpack_require__(2),client_1=__webpack_require__(16);function ensure(target,key){return void 0===target[key]&&(target[key]={}),target[key]}class ColorProviderFeature extends client_1.TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.DocumentColorRequest.type)}fillClientCapabilities(capabilites){ensure(ensure(capabilites,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(capabilities,documentSelector){if(!capabilities.colorProvider)return;const implCapabilities=capabilities.colorProvider,id=Is.string(implCapabilities.id)&&implCapabilities.id.length>0?implCapabilities.id:UUID.generateUuid(),selector=implCapabilities.documentSelector||documentSelector;selector&&this.register(this.messages,{id:id,registerOptions:Object.assign({},{documentSelector:selector})})}registerLanguageProvider(options){let client=this._client,provideColorPresentations=(color,context,token)=>{const requestParams={color:color,textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(context.document),range:client.code2ProtocolConverter.asRange(context.range)};return client.sendRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type,requestParams,token).then(this.asColorPresentations.bind(this),error=>(client.logFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type,error),Promise.resolve(null)))},provideDocumentColors=(document,token)=>{const requestParams={textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(document)};return client.sendRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type,requestParams,token).then(this.asColorInformations.bind(this),error=>(client.logFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type,error),Promise.resolve(null)))},middleware=client.clientOptions.middleware;return vscode_1.languages.registerColorProvider(options.documentSelector,{provideColorPresentations:(color,context,token)=>middleware.provideColorPresentations?middleware.provideColorPresentations(color,context,token,provideColorPresentations):provideColorPresentations(color,context,token),provideDocumentColors:(document,token)=>middleware.provideDocumentColors?middleware.provideDocumentColors(document,token,provideDocumentColors):provideDocumentColors(document,token)})}asColor(color){return new vscode_1.Color(color.red,color.green,color.blue,color.alpha)}asColorInformations(colorInformation){return Array.isArray(colorInformation)?colorInformation.map(ci=>new vscode_1.ColorInformation(this._client.protocol2CodeConverter.asRange(ci.range),this.asColor(ci.color))):[]}asColorPresentations(colorPresentations){return Array.isArray(colorPresentations)?colorPresentations.map(cp=>{let presentation=new vscode_1.ColorPresentation(cp.label);return presentation.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(cp.additionalTextEdits),presentation.textEdit=this._client.protocol2CodeConverter.asTextEdit(cp.textEdit),presentation}):[]}}exports.ColorProviderFeature=ColorProviderFeature},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(0),vscode_languageserver_protocol_1=__webpack_require__(2);exports.ConfigurationFeature=class ConfigurationFeature{constructor(_client){this._client=_client}fillClientCapabilities(capabilities){capabilities.workspace=capabilities.workspace||{},capabilities.workspace.configuration=!0}initialize(){let client=this._client;client.onRequest(vscode_languageserver_protocol_1.ConfigurationRequest.type,(params,token)=>{let configuration=params=>{let result=[];for(let item of params.items){let resource=void 0!==item.scopeUri&&null!==item.scopeUri?this._client.protocol2CodeConverter.asUri(item.scopeUri):void 0;result.push(this.getConfiguration(resource,null!==item.section?item.section:void 0))}return result},middleware=client.clientOptions.middleware.workspace;return middleware&&middleware.configuration?middleware.configuration(params,token,configuration):configuration(params)})}getConfiguration(resource,section){let result=null;if(section){let index=section.lastIndexOf(".");if(-1===index)result=vscode_1.workspace.getConfiguration(void 0,resource).get(section);else{let config=vscode_1.workspace.getConfiguration(section.substr(0,index));config&&(result=config.get(section.substr(index+1)))}}else{let config=vscode_1.workspace.getConfiguration(void 0,resource);result={};for(let key of Object.keys(config))config.has(key)&&(result[key]=config.get(key))}return result||null}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const UUID=__webpack_require__(17),Is=__webpack_require__(12),vscode_1=__webpack_require__(0),vscode_languageserver_protocol_1=__webpack_require__(2),client_1=__webpack_require__(16);function ensure(target,key){return void 0===target[key]&&(target[key]={}),target[key]}class ImplementationFeature extends client_1.TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.ImplementationRequest.type)}fillClientCapabilities(capabilites){let implementationSupport=ensure(ensure(capabilites,"textDocument"),"implementation");implementationSupport.dynamicRegistration=!0,implementationSupport.linkSupport=!0}initialize(capabilities,documentSelector){if(capabilities.implementationProvider)if(!0===capabilities.implementationProvider){if(!documentSelector)return;this.register(this.messages,{id:UUID.generateUuid(),registerOptions:Object.assign({},{documentSelector:documentSelector})})}else{const implCapabilities=capabilities.implementationProvider,id=Is.string(implCapabilities.id)&&implCapabilities.id.length>0?implCapabilities.id:UUID.generateUuid(),selector=implCapabilities.documentSelector||documentSelector;selector&&this.register(this.messages,{id:id,registerOptions:Object.assign({},{documentSelector:selector})})}}registerLanguageProvider(options){let client=this._client,provideImplementation=(document,position,token)=>client.sendRequest(vscode_languageserver_protocol_1.ImplementationRequest.type,client.code2ProtocolConverter.asTextDocumentPositionParams(document,position),token).then(client.protocol2CodeConverter.asDefinitionResult,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.ImplementationRequest.type,error),Promise.resolve(null))),middleware=client.clientOptions.middleware;return vscode_1.languages.registerImplementationProvider(options.documentSelector,{provideImplementation:(document,position,token)=>middleware.provideImplementation?middleware.provideImplementation(document,position,token,provideImplementation):provideImplementation(document,position,token)})}}exports.ImplementationFeature=ImplementationFeature},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const UUID=__webpack_require__(17),Is=__webpack_require__(12),vscode_1=__webpack_require__(0),vscode_languageserver_protocol_1=__webpack_require__(2),client_1=__webpack_require__(16);function ensure(target,key){return void 0===target[key]&&(target[key]={}),target[key]}class TypeDefinitionFeature extends client_1.TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.TypeDefinitionRequest.type)}fillClientCapabilities(capabilites){ensure(ensure(capabilites,"textDocument"),"typeDefinition").dynamicRegistration=!0;let typeDefinitionSupport=ensure(ensure(capabilites,"textDocument"),"typeDefinition");typeDefinitionSupport.dynamicRegistration=!0,typeDefinitionSupport.linkSupport=!0}initialize(capabilities,documentSelector){if(capabilities.typeDefinitionProvider)if(!0===capabilities.typeDefinitionProvider){if(!documentSelector)return;this.register(this.messages,{id:UUID.generateUuid(),registerOptions:Object.assign({},{documentSelector:documentSelector})})}else{const implCapabilities=capabilities.typeDefinitionProvider,id=Is.string(implCapabilities.id)&&implCapabilities.id.length>0?implCapabilities.id:UUID.generateUuid(),selector=implCapabilities.documentSelector||documentSelector;selector&&this.register(this.messages,{id:id,registerOptions:Object.assign({},{documentSelector:selector})})}}registerLanguageProvider(options){let client=this._client,provideTypeDefinition=(document,position,token)=>client.sendRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type,client.code2ProtocolConverter.asTextDocumentPositionParams(document,position),token).then(client.protocol2CodeConverter.asDefinitionResult,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type,error),Promise.resolve(null))),middleware=client.clientOptions.middleware;return vscode_1.languages.registerTypeDefinitionProvider(options.documentSelector,{provideTypeDefinition:(document,position,token)=>middleware.provideTypeDefinition?middleware.provideTypeDefinition(document,position,token,provideTypeDefinition):provideTypeDefinition(document,position,token)})}}exports.TypeDefinitionFeature=TypeDefinitionFeature},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const UUID=__webpack_require__(17),vscode_1=__webpack_require__(0),vscode_languageserver_protocol_1=__webpack_require__(2);function access(target,key){if(void 0!==target)return target[key]}exports.WorkspaceFoldersFeature=class WorkspaceFoldersFeature{constructor(_client){this._client=_client,this._listeners=new Map}get messages(){return vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(params){let folders=vscode_1.workspace.workspaceFolders;params.workspaceFolders=void 0===folders?null:folders.map(folder=>this.asProtocol(folder))}fillClientCapabilities(capabilities){capabilities.workspace=capabilities.workspace||{},capabilities.workspace.workspaceFolders=!0}initialize(capabilities){let client=this._client;client.onRequest(vscode_languageserver_protocol_1.WorkspaceFoldersRequest.type,token=>{let workspaceFolders=()=>{let folders=vscode_1.workspace.workspaceFolders;return void 0===folders?null:folders.map(folder=>this.asProtocol(folder))},middleware=client.clientOptions.middleware.workspace;return middleware&&middleware.workspaceFolders?middleware.workspaceFolders(token,workspaceFolders):workspaceFolders()});let id,value=access(access(access(capabilities,"workspace"),"workspaceFolders"),"changeNotifications");"string"==typeof value?id=value:!0===value&&(id=UUID.generateUuid()),id&&this.register(this.messages,{id:id,registerOptions:void 0})}register(_message,data){let id=data.id,client=this._client,disposable=vscode_1.workspace.onDidChangeWorkspaceFolders(event=>{let didChangeWorkspaceFolders=event=>{let params={event:{added:event.added.map(folder=>this.asProtocol(folder)),removed:event.removed.map(folder=>this.asProtocol(folder))}};this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type,params)},middleware=client.clientOptions.middleware.workspace;middleware&&middleware.didChangeWorkspaceFolders?middleware.didChangeWorkspaceFolders(event,didChangeWorkspaceFolders):didChangeWorkspaceFolders(event)});this._listeners.set(id,disposable)}unregister(id){let disposable=this._listeners.get(id);void 0!==disposable&&(this._listeners.delete(id),disposable.dispose())}dispose(){for(let disposable of this._listeners.values())disposable.dispose();this._listeners.clear()}asProtocol(workspaceFolder){return void 0===workspaceFolder?null:{uri:this._client.code2ProtocolConverter.asUri(workspaceFolder.uri),name:workspaceFolder.name}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const UUID=__webpack_require__(17),Is=__webpack_require__(12),vscode_1=__webpack_require__(0),vscode_languageserver_protocol_1=__webpack_require__(2),client_1=__webpack_require__(16);function ensure(target,key){return void 0===target[key]&&(target[key]={}),target[key]}class FoldingRangeFeature extends client_1.TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.FoldingRangeRequest.type)}fillClientCapabilities(capabilites){let capability=ensure(ensure(capabilites,"textDocument"),"foldingRange");capability.dynamicRegistration=!0,capability.rangeLimit=5e3,capability.lineFoldingOnly=!0}initialize(capabilities,documentSelector){if(!capabilities.foldingRangeProvider)return;const implCapabilities=capabilities.foldingRangeProvider,id=Is.string(implCapabilities.id)&&implCapabilities.id.length>0?implCapabilities.id:UUID.generateUuid(),selector=implCapabilities.documentSelector||documentSelector;selector&&this.register(this.messages,{id:id,registerOptions:Object.assign({},{documentSelector:selector})})}registerLanguageProvider(options){let client=this._client,provideFoldingRanges=(document,_,token)=>{const requestParams={textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(document)};return client.sendRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type,requestParams,token).then(this.asFoldingRanges.bind(this),error=>(client.logFailedRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type,error),Promise.resolve(null)))},middleware=client.clientOptions.middleware;return vscode_1.languages.registerFoldingRangeProvider(options.documentSelector,{provideFoldingRanges:(document,context,token)=>middleware.provideFoldingRanges?middleware.provideFoldingRanges(document,context,token,provideFoldingRanges):provideFoldingRanges(document,0,token)})}asFoldingRangeKind(kind){if(kind)switch(kind){case vscode_languageserver_protocol_1.FoldingRangeKind.Comment:return vscode_1.FoldingRangeKind.Comment;case vscode_languageserver_protocol_1.FoldingRangeKind.Imports:return vscode_1.FoldingRangeKind.Imports;case vscode_languageserver_protocol_1.FoldingRangeKind.Region:return vscode_1.FoldingRangeKind.Region}}asFoldingRanges(foldingRanges){return Array.isArray(foldingRanges)?foldingRanges.map(r=>new vscode_1.FoldingRange(r.startLine,r.endLine,this.asFoldingRangeKind(r.kind))):[]}}exports.FoldingRangeFeature=FoldingRangeFeature},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const UUID=__webpack_require__(17),Is=__webpack_require__(12),vscode_1=__webpack_require__(0),vscode_languageserver_protocol_1=__webpack_require__(2),client_1=__webpack_require__(16);function ensure(target,key){return void 0===target[key]&&(target[key]={}),target[key]}class DeclarationFeature extends client_1.TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.DeclarationRequest.type)}fillClientCapabilities(capabilites){let declarationSupport=ensure(ensure(capabilites,"textDocument"),"declaration");declarationSupport.dynamicRegistration=!0,declarationSupport.linkSupport=!0}initialize(capabilities,documentSelector){if(capabilities.declarationProvider)if(!0===capabilities.declarationProvider){if(!documentSelector)return;this.register(this.messages,{id:UUID.generateUuid(),registerOptions:Object.assign({},{documentSelector:documentSelector})})}else{const declCapabilities=capabilities.declarationProvider,id=Is.string(declCapabilities.id)&&declCapabilities.id.length>0?declCapabilities.id:UUID.generateUuid(),selector=declCapabilities.documentSelector||documentSelector;selector&&this.register(this.messages,{id:id,registerOptions:Object.assign({},{documentSelector:selector})})}}registerLanguageProvider(options){let client=this._client,provideDeclaration=(document,position,token)=>client.sendRequest(vscode_languageserver_protocol_1.DeclarationRequest.type,client.code2ProtocolConverter.asTextDocumentPositionParams(document,position),token).then(client.protocol2CodeConverter.asDeclarationResult,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.DeclarationRequest.type,error),Promise.resolve(null))),middleware=client.clientOptions.middleware;return vscode_1.languages.registerDeclarationProvider(options.documentSelector,{provideDeclaration:(document,position,token)=>middleware.provideDeclaration?middleware.provideDeclaration(document,position,token,provideDeclaration):provideDeclaration(document,position,token)})}}exports.DeclarationFeature=DeclarationFeature},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const cp=__webpack_require__(14),path_1=__webpack_require__(5),isWindows="win32"===process.platform,isMacintosh="darwin"===process.platform,isLinux="linux"===process.platform;exports.terminate=function(process,cwd){if(isWindows)try{let options={stdio:["pipe","pipe","ignore"]};return cwd&&(options.cwd=cwd),cp.execFileSync("taskkill",["/T","/F","/PID",process.pid.toString()],options),!0}catch(err){return!1}else{if(!isLinux&&!isMacintosh)return process.kill("SIGKILL"),!0;try{var cmd=path_1.join(__dirname,"terminateProcess.sh");return!cp.spawnSync(cmd,[process.pid.toString()]).error}catch(err){return!1}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});__webpack_require__(86);const contracts_1=__webpack_require__(262);const AutoRestartPlugin={register(extension){const defaultHandler=extension.client.clientErrorHandler;extension.client.clientErrorHandler={error:defaultHandler.error,closed:()=>defaultHandler.closed()},extension.client.onNotification(contracts_1.ExitCalledNotification,()=>{this.avoidRestart=!0})}};exports.default=AutoRestartPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ExitCalledNotification="AutoRestart/exitCalled"},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__importDefault(__webpack_require__(18)),config_manager_1=__importDefault(__webpack_require__(8)),constants_1=__webpack_require__(1),interface_1=__webpack_require__(25),prefixed_tablenames_1=__importDefault(__webpack_require__(90)),utils_1=__webpack_require__(3),vscode_2=__webpack_require__(15),explorer_1=__webpack_require__(264),results_1=__importDefault(__webpack_require__(303)),settings_1=__importDefault(__webpack_require__(304)),vscode_3=__webpack_require__(0),contracts_1=__webpack_require__(93),path_1=__importDefault(__webpack_require__(5)),extension_1=__importDefault(__webpack_require__(306)),utils_2=__webpack_require__(3),query_1=__webpack_require__(31),vscode_jsonrpc_1=__webpack_require__(9),status_bar_1=__importDefault(__webpack_require__(309)),parse_workspace_path_1=__importDefault(__webpack_require__(310));exports.default=class ConnectionManagerPlugin{constructor(extension){this.attachedFilesMap={},this.handler_connectionDataUpdated=data=>this.explorer.setTreeData(data),this.ext_refreshTree=connIdOrTreeItem=>(connIdOrTreeItem=connIdOrTreeItem instanceof explorer_1.SidebarConnection?connIdOrTreeItem.getId():connIdOrTreeItem,connIdOrTreeItem=Array.isArray(connIdOrTreeItem)?connIdOrTreeItem:[connIdOrTreeItem].filter(Boolean),this.client.sendRequest(contracts_1.RefreshTreeRequest,{connIds:connIdOrTreeItem.length?connIdOrTreeItem:null})),this.ext_testConnection=c=>__awaiter(this,void 0,void 0,(function*(){let password=null;if(c.dialect!==interface_1.DatabaseDialect.SQLite&&c.askForPassword&&(password=yield this._askForPassword(c)),!c.askForPassword||null!==password)return this.client.sendRequest(contracts_1.TestConnectionRequest,{conn:c,password:password})})),this.ext_executeFromInput=()=>__awaiter(this,void 0,void 0,(function*(){try{const conn=this.explorer.getActive()?this.explorer.getActive():yield this._pickConnection(!0);if(!conn)return;const query=yield vscode_2.readInput("Query",`Type the query to run on ${conn.name}`);return this.ext_executeQuery(query,utils_1.getConnectionId(conn))}catch(e){this.errorHandler("Error running query.",e)}})),this.ext_showRecords=node=>__awaiter(this,void 0,void 0,(function*(){try{const table=yield this._getTableName(node);yield this._openResultsWebview();let limit=50;config_manager_1.default.results&&config_manager_1.default.results.limit&&(limit=config_manager_1.default.results.limit);const payload=yield this._runConnectionCommandWithArgs("showRecords",table,limit);this.resultsWebview.get(payload[0].connId||this.explorer.getActive().id).updateResults(payload)}catch(e){this.errorHandler("Error while showing table records",e)}})),this.ext_describeTable=node=>__awaiter(this,void 0,void 0,(function*(){try{const table=yield this._getTableName(node);yield this._openResultsWebview();const payload=yield this._runConnectionCommandWithArgs("describeTable",table);this.resultsWebview.get(payload[0].connId||this.explorer.getActive().id).updateResults(payload)}catch(e){this.errorHandler("Error while describing table records",e)}})),this.ext_closeConnection=node=>__awaiter(this,void 0,void 0,(function*(){const conn=node?node.conn:yield this._pickConnection(!0);if(conn)try{yield this.client.sendRequest(contracts_1.DisconnectRequest,{conn:conn}),this.client.telemetry.registerInfoMessage("Connection closed!"),yield this.explorer.updateTreeRoot()}catch(e){return this.errorHandler("Error closing connection",e)}})),this.ext_selectConnection=(connIdOrNode,trySessionFile=!0)=>__awaiter(this,void 0,void 0,(function*(){if(connIdOrNode){let conn=connIdOrNode instanceof explorer_1.SidebarConnection?connIdOrNode.conn:this.explorer.getById(connIdOrNode);return conn=yield this._setConnection(conn).catch(e=>this.errorHandler("Error opening connection",e)),trySessionFile&&(yield this.openConnectionFile(conn)),conn}try{const conn=yield this._connect(!0);return trySessionFile&&(yield this.openConnectionFile(conn)),conn}catch(error){return this.errorHandler("Error selecting connection",error)}})),this.replaceParams=query=>__awaiter(this,void 0,void 0,(function*(){const queryParamsCfg=config_manager_1.default.queryParams;if(!queryParamsCfg||!queryParamsCfg.enableReplace)return query;const params=query_1.getQueryParameters(query,queryParamsCfg.regex);return params.length>0&&(yield new Promise((resolve,reject)=>{const ib=vscode_3.window.createInputBox();ib.step=1,ib.totalSteps=params.length,ib.ignoreFocusOut=!0,ib.title=`Value for '${params[ib.step-1].param}' in '${params[ib.step-1].string}'`,ib.prompt="Remember to escape values if neeeded.",ib.onDidAccept(()=>{const r=new RegExp(params[ib.step-1].param.replace(/([\$\[\]])/g,"\\$1"),"g");if(query=query.replace(r,`'${ib.value}'`),ib.step++,ib.step>ib.totalSteps)return ib.hide(),resolve();ib.value="",ib.title=`Value for '${params[ib.step-1].param}' in '${params[ib.step-1].string}'`}),ib.onDidHide(()=>ib.step===ib.totalSteps&&ib.value.trim()?resolve():reject(new Error("Didnt fill all params. Cancelling..."))),ib.show()})),query})),this.ext_executeQuery=(query,connNameOrId)=>__awaiter(this,void 0,void 0,(function*(){try{if(query="string"==typeof query?query:yield vscode_2.getSelectedText("execute query"),connNameOrId||(connNameOrId=query_1.extractConnName(query)),!connNameOrId&&vscode_3.window.activeTextEditor&&(connNameOrId=this.getAttachedConnection(vscode_3.window.activeTextEditor.document.uri)),connNameOrId&&connNameOrId.trim()){connNameOrId=connNameOrId.trim();const conn=this.getConnectionList().find(c=>utils_1.getConnectionId(c)===connNameOrId||c.name===connNameOrId);if(!conn)throw new Error(`Trying to run query on '${connNameOrId}' but it does not exist.`);yield this._setConnection(conn)}else yield this._connect();query=yield this.replaceParams(query),yield this._openResultsWebview();const payload=yield this._runConnectionCommandWithArgs("query",query);return this.resultsWebview.get(payload[0].connId||this.explorer.getActive().id).updateResults(payload),payload}catch(e){this.errorHandler("Error fetching records.",e)}})),this.ext_executeQueryFromFile=()=>__awaiter(this,void 0,void 0,(function*(){return this.ext_executeQuery(yield vscode_2.getSelectedText("execute file",!0))})),this.ext_showOutputChannel=()=>vscode_1.default.show(),this.ext_saveResults=(filetype,connId)=>__awaiter(this,void 0,void 0,(function*(){connId="string"==typeof connId?connId:void 0;let mode=(filetype="string"==typeof filetype?filetype:void 0)||config_manager_1.default.defaultExportType;if("prompt"===mode&&(mode=yield vscode_2.quickPick([{label:"Save results as CSV",value:"csv"},{label:"Save results as JSON",value:"json"}],"value",{title:"Select a file type to export"})),mode)return this.resultsWebview.get(connId||this.explorer.getActive().id).saveResults(mode)})),this.ext_openAddConnectionScreen=()=>this.settingsWebview.show(),this.ext_openEditConnectionScreen=connIdOrNode=>__awaiter(this,void 0,void 0,(function*(){let id;if(connIdOrNode)id=connIdOrNode instanceof explorer_1.SidebarConnection?connIdOrNode.getId():connIdOrNode;else{const conn=yield this._pickConnection();id=conn?utils_1.getConnectionId(conn):void 0}if(!id)return;const conn=this.explorer.getById(id);conn.id=conn.id||utils_1.getConnectionId(conn),this.settingsWebview.show(),this.settingsWebview.postMessage({action:"editConnection",payload:{conn:conn}})})),this.ext_openSettings=()=>__awaiter(this,void 0,void 0,(function*(){return vscode_3.commands.executeCommand("workbench.action.openSettings","sqltools.connections")})),this.ext_focusOnExplorer=()=>this.explorer.focus(),this.ext_deleteConnection=connIdOrNode=>__awaiter(this,void 0,void 0,(function*(){let id;if(connIdOrNode)id=connIdOrNode instanceof explorer_1.SidebarConnection?connIdOrNode.getId():connIdOrNode;else{const conn=yield this._pickConnection();id=conn?utils_1.getConnectionId(conn):void 0}if(!id)return;const conn=this.explorer.getById(id);if(!(yield vscode_3.window.showInformationMessage(`Are you sure you want to remove ${conn.name}?`,{modal:!0},"Yes")))return;const{workspaceFolderValue:workspaceFolderValue=[],workspaceValue:workspaceValue=[],globalValue:globalValue=[]}=vscode_3.workspace.getConfiguration(constants_1.EXT_NAME.toLowerCase()).inspect("connections"),findIndex=(arr=[])=>arr.findIndex(c=>utils_1.getConnectionId(c)==id);let index=findIndex(workspaceFolderValue);return index>=0?(workspaceFolderValue.splice(index,1),this.saveConnectionList(workspaceFolderValue,vscode_3.ConfigurationTarget.WorkspaceFolder)):(index=findIndex(workspaceValue))>=0?(workspaceValue.splice(index,1),this.saveConnectionList(workspaceValue,vscode_3.ConfigurationTarget.Workspace)):(index=findIndex(globalValue))>=0?(globalValue.splice(index,1),this.saveConnectionList(globalValue,vscode_3.ConfigurationTarget.Global)):Promise.resolve(!0)})),this.ext_addConnection=(connInfo,writeTo)=>{if(!connInfo)return void vscode_1.default.warn("Nothing to do. No parameter received");const connList=this.getConnectionList(vscode_3.ConfigurationTarget[writeTo]||void 0);return connList.push(connInfo),this.saveConnectionList(connList,vscode_3.ConfigurationTarget[writeTo])},this.ext_updateConnection=(oldId,connInfo,writeTo)=>{if(!connInfo)return void vscode_1.default.warn("Nothing to do. No parameter received");const connList=this.getConnectionList(vscode_3.ConfigurationTarget[writeTo]||void 0).filter(c=>utils_1.getConnectionId(c)!==oldId);return connList.push(connInfo),this.saveConnectionList(connList,vscode_3.ConfigurationTarget[writeTo])},this._connect=(force=!1)=>__awaiter(this,void 0,void 0,(function*(){if(!force&&this.explorer.getActive())return this.explorer.getActive();const c=yield this._pickConnection(!force);return this._setConnection(c)})),this.ext_getConnectionStatus=({connectedOnly:connectedOnly,connId:connId,sort:sort}={})=>__awaiter(this,void 0,void 0,(function*(){return this.client.sendRequest(contracts_1.GetConnectionsRequest,{connectedOnly:connectedOnly,connId:connId,sort:sort})})),this.ext_attachFileToConnection=fileUri=>__awaiter(this,void 0,void 0,(function*(){if(!fileUri&&!vscode_3.window.activeTextEditor)return;fileUri=fileUri||vscode_3.window.activeTextEditor.document.uri;const conn=yield this._pickConnection();conn&&(this.updateAttachedConnectionsMap(fileUri,utils_1.getConnectionId(conn)),vscode_3.window.showTextDocument(fileUri))})),this.ext_detachConnectionFromFile=fileUri=>__awaiter(this,void 0,void 0,(function*(){if(!fileUri&&!vscode_3.window.activeTextEditor)return;fileUri=fileUri||vscode_3.window.activeTextEditor.document.uri,vscode_3.workspace.textDocuments.find(doc=>doc.uri.toString()===fileUri.toString())&&this.updateAttachedConnectionsMap(fileUri)})),this.ext_copyTextFromTreeItem=()=>__awaiter(this,void 0,void 0,(function*(){const nodes=this.explorer.getSelection();if(nodes&&0!==nodes.length)return vscode_3.commands.executeCommand(`${constants_1.EXT_NAME}.copyText`,null,nodes)})),this.changeTextEditorHandler=editor=>__awaiter(this,void 0,void 0,(function*(){if(!editor||!editor.document)return;const connId=this.getAttachedConnection(editor.document.uri);if(!connId)return vscode_3.commands.executeCommand("setContext","sqltools.file.connectionAttached",!1);yield this.ext_selectConnection(connId,editor.document.uri.scheme===constants_1.EXT_NAME.toLocaleLowerCase()),yield vscode_3.commands.executeCommand("setContext","sqltools.file.connectionAttached",!0)})),this.onDidOpenOrCloseTextDocument=doc=>{if(doc&&doc.uri&&"output"!==doc.uri.scheme&&"git"!==doc.uri.scheme)return doc.isClosed?this.updateAttachedConnectionsMap(doc.uri):void this.explorer.updateTreeRoot()},this.notifications={},this.handler_progressStart=params=>{const tokenSource=new vscode_jsonrpc_1.CancellationTokenSource;vscode_3.window.withProgress({location:vscode_3.ProgressLocation.Notification,title:params.title,cancellable:!1},progress=>new Promise((resolve,reject)=>{progress.report({message:params.message});let executions=60;const complete=fn=>()=>(delete this.notifications[params.id],clearInterval(interval),fn()),interval=setInterval(()=>tokenSource.token.isCancellationRequested?complete(resolve)():0===--executions?complete(reject)():void 0,500),notification={progress:progress,tokenSource:tokenSource,interval:interval,resolve:complete(resolve),reject:complete(reject)};this.notifications[params.id]=notification}))},this.handler_progressComplete=params=>{if(this.notifications[params.id]){if(!params.message)return this.notifications[params.id].tokenSource.cancel();clearInterval(this.notifications[params.id].interval),this.notifications[params.id].progress.report({message:params.message,increment:100}),setTimeout(()=>{this.notifications[params.id].resolve()},3e3)}},this.attachedFilesMap=extension.context.workspaceState.get("attachedFilesMap",{}),this.codeLensPlugin=new extension_1.default,extension.registerPlugin(this.codeLensPlugin)}ext_describeFunction(){vscode_3.window.showInformationMessage("Not implemented yet.")}updateAttachedConnectionsMap(fileUri,connId){return __awaiter(this,void 0,void 0,(function*(){connId?this.attachedFilesMap[fileUri.toString()]=connId:delete this.attachedFilesMap[fileUri.toString()],yield this.context.workspaceState.update("attachedFilesMap",this.attachedFilesMap),this.codeLensPlugin.reset(),this.changeTextEditorHandler(vscode_3.window.activeTextEditor)}))}getAttachedConnection(fileUri){return this.attachedFilesMap[fileUri.toString()]}openConnectionFile(conn){return __awaiter(this,void 0,void 0,(function*(){if(!config_manager_1.default.autoOpenSessionFiles)return;if(!conn)return;let baseFolder;vscode_3.window.activeTextEditor&&vscode_3.window.activeTextEditor.document.uri&&vscode_3.workspace.getWorkspaceFolder(vscode_3.window.activeTextEditor.document.uri)&&(baseFolder=vscode_3.workspace.getWorkspaceFolder(vscode_3.window.activeTextEditor.document.uri).uri),!baseFolder&&vscode_3.workspace.workspaceFolders&&vscode_3.workspace.workspaceFolders.length>0&&(baseFolder=vscode_3.workspace.workspaceFolders&&vscode_3.workspace.workspaceFolders[0].uri),baseFolder||(baseFolder=vscode_3.Uri.file(path_1.default.join(utils_2.getHome(),".SQLTools")));const sessionFilePath=path_1.default.join(baseFolder.fsPath,`${conn.name} Session.sql`);try{this.updateAttachedConnectionsMap(yield this.openSessionFileWithProtocol(sessionFilePath,"file"),utils_1.getConnectionId(conn))}catch(e){this.updateAttachedConnectionsMap(yield this.openSessionFileWithProtocol(sessionFilePath),utils_1.getConnectionId(conn))}}))}openSessionFileWithProtocol(uri,scheme="untitled"){return __awaiter(this,void 0,void 0,(function*(){const fileUri=vscode_3.Uri.parse(`untitled:${uri}`).with({scheme:scheme});return yield vscode_3.window.showTextDocument(fileUri),fileUri}))}_getTableName(node){return __awaiter(this,void 0,void 0,(function*(){if(node&&node.conn)return yield this._setConnection(node.conn),prefixed_tablenames_1.default(node.conn.dialect,node.table);const conn=yield this._connect();return this._pickTable(conn,"value")}))}_openResultsWebview(connId){return this.resultsWebview.get(connId||this.explorer.getActive().id).show()}_pickTable(conn,prop){return __awaiter(this,void 0,void 0,(function*(){const{tables:tables}=yield this.client.sendRequest(contracts_1.GetConnectionDataRequest,{conn:conn});return vscode_2.quickPick(tables.map(table=>{const prefixes=prefixed_tablenames_1.default(conn.dialect,table).split(".");return{label:table.name,value:prefixed_tablenames_1.default(conn.dialect,table),description:void 0!==table.numberOfColumns?`${table.numberOfColumns} cols`:"",detail:prefixes.length>1?`in ${prefixes.slice(0,prefixes.length-1).join(".")}`:void 0}}),prop,{matchOnDescription:!0,matchOnDetail:!0,title:`Tables in ${conn.database}`})}))}_pickConnection(connectedOnly=!1){return __awaiter(this,void 0,void 0,(function*(){const connections=yield this.ext_getConnectionStatus({connectedOnly:connectedOnly});if(0===connections.length&&connectedOnly)return this._pickConnection();if(connectedOnly&&1===connections.length)return connections[0];const sel=yield vscode_2.quickPick(connections.map(c=>({description:c.isConnected?"Currently connected":"",detail:(c.isConnected?"$(zap) ":"")+utils_1.getConnectionDescription(c),label:c.name,value:utils_1.getConnectionId(c)})),"value",{matchOnDescription:!0,matchOnDetail:!0,placeHolder:"Pick a connection",placeHolderDisabled:"You don't have any connections yet.",title:"Connections",buttons:[{iconPath:{dark:this.context.asAbsolutePath("icons/add-connection-dark.svg"),light:this.context.asAbsolutePath("icons/add-connection-light.svg")},tooltip:"Add new Connection",cb:()=>vscode_3.commands.executeCommand(`${constants_1.EXT_NAME}.openAddConnectionScreen`)}]});return connections.find(c=>utils_1.getConnectionId(c)===sel)}))}_runConnectionCommandWithArgs(command,...args){return this.client.sendRequest(contracts_1.RunCommandRequest,{conn:this.explorer.getActive(),command:command,args:args})}_askForPassword(c){return __awaiter(this,void 0,void 0,(function*(){return(yield this.client.sendRequest(contracts_1.GetConnectionPasswordRequest,{conn:c}))||(yield vscode_3.window.showInputBox({prompt:`${c.name} password`,password:!0,validateInput:v=>utils_1.isEmpty(v)?"Password not provided.":null}))}))}_setConnection(c){return __awaiter(this,void 0,void 0,(function*(){let password=null;if(c&&utils_1.getConnectionId(c)!==this.explorer.getActiveId()){if(c.dialect===interface_1.DatabaseDialect.SQLite&&(c.database=parse_workspace_path_1.default(c.database)),c.askForPassword&&(password=yield this._askForPassword(c)),c.askForPassword&&null===password)return;c=yield this.client.sendRequest(contracts_1.ConnectRequest,{conn:c,password:password})}return yield this.explorer.focusActiveConnection(c),this.explorer.getActive()}))}saveConnectionList(connList,writeTo){return __awaiter(this,void 0,void 0,(function*(){return writeTo||vscode_3.workspace.workspaceFolders&&0!==vscode_3.workspace.workspaceFolders.length||(writeTo=vscode_3.ConfigurationTarget.Global),vscode_3.workspace.getConfiguration(constants_1.EXT_NAME.toLowerCase()).update("connections",connList,writeTo)}))}getConnectionList(from){if(!from)return vscode_3.workspace.getConfiguration(constants_1.EXT_NAME.toLowerCase()).get("connections")||[];const config=vscode_3.workspace.getConfiguration(constants_1.EXT_NAME.toLowerCase()).inspect("connections");return from===vscode_3.ConfigurationTarget.Global?config.globalValue||config.defaultValue||[]:from===vscode_3.ConfigurationTarget.WorkspaceFolder?config.workspaceFolderValue||config.defaultValue||[]:config.workspaceValue||config.defaultValue||[]}register(extension){this.client||(this.client=extension.client,this.context=extension.context,this.errorHandler=extension.errorHandler,this.explorer=new explorer_1.ConnectionExplorer(extension),this.explorer.onConnectionDidChange(()=>{const active=this.explorer.getActive();status_bar_1.default.setText(active?active.name:null)}),this.client.onRequest(contracts_1.ConnectionDataUpdatedRequest,this.handler_connectionDataUpdated),this.client.onNotification(contracts_1.ProgressNotificationStart,this.handler_progressStart),this.client.onNotification(contracts_1.ProgressNotificationComplete,this.handler_progressComplete),this.context.subscriptions.push(this.resultsWebview=new results_1.default(this.context,this.client),this.settingsWebview=new settings_1.default(this.context),status_bar_1.default,vscode_3.workspace.onDidCloseTextDocument(this.onDidOpenOrCloseTextDocument),vscode_3.workspace.onDidOpenTextDocument(this.onDidOpenOrCloseTextDocument),vscode_3.window.onDidChangeActiveTextEditor(this.changeTextEditorHandler)),extension.registerCommand("addConnection",this.ext_addConnection).registerCommand("updateConnection",this.ext_updateConnection).registerCommand("openAddConnectionScreen",this.ext_openAddConnectionScreen).registerCommand("openEditConnectionScreen",this.ext_openEditConnectionScreen).registerCommand("openSettings",this.ext_openSettings).registerCommand("closeConnection",this.ext_closeConnection).registerCommand("deleteConnection",this.ext_deleteConnection).registerCommand("describeFunction",this.ext_describeFunction).registerCommand("describeTable",this.ext_describeTable).registerCommand("executeFromInput",this.ext_executeFromInput).registerCommand("executeQuery",this.ext_executeQuery).registerCommand("executeQueryFromFile",this.ext_executeQueryFromFile).registerCommand("refreshTree",this.ext_refreshTree).registerCommand("saveResults",this.ext_saveResults).registerCommand("selectConnection",this.ext_selectConnection).registerCommand("showOutputChannel",this.ext_showOutputChannel).registerCommand("showRecords",this.ext_showRecords).registerCommand("focusOnExplorer",this.ext_focusOnExplorer).registerCommand("attachFileToConnection",this.ext_attachFileToConnection).registerCommand("testConnection",this.ext_testConnection).registerCommand("getConnectionStatus",this.ext_getConnectionStatus).registerCommand("detachConnectionFromFile",this.ext_detachConnectionFromFile).registerCommand("copyTextFromTreeItem",this.ext_copyTextFromTreeItem),vscode_3.window.activeTextEditor&&setTimeout(()=>{this.changeTextEditorHandler(vscode_3.window.activeTextEditor)},5e3))}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const config_manager_1=__importDefault(__webpack_require__(8)),constants_1=__webpack_require__(1),interface_1=__webpack_require__(25),utils_1=__webpack_require__(3),tree_items_1=__webpack_require__(265);exports.SidebarTreeItem=tree_items_1.SidebarTreeItem;const SidebarFunction_1=__importDefault(__webpack_require__(266)),SidebarColumn_1=__importDefault(__webpack_require__(267));exports.SidebarColumn=SidebarColumn_1.default;const SidebarTableOrView_1=__importDefault(__webpack_require__(268));exports.SidebarTableOrView=SidebarTableOrView_1.default;const SidebarResourceGroup_1=__importDefault(__webpack_require__(269)),SidebarConnection_1=__importDefault(__webpack_require__(270));exports.SidebarConnection=SidebarConnection_1.default;const vscode_1=__webpack_require__(0),get_1=__importDefault(__webpack_require__(91)),vscode_2=__importDefault(__webpack_require__(18)),DialectHierarchyChildNames={[interface_1.DatabaseDialect.PostgreSQL]:["Database","Schema"],[interface_1.DatabaseDialect["AWS Redshift"]]:["Database","Schema"],[interface_1.DatabaseDialect.Cassandra]:["Keyspace"]};class ConnectionExplorer{constructor(extension){this.extension=extension,this._onDidChangeTreeData=new vscode_1.EventEmitter,this._onConnectionDidChange=new vscode_1.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event,this.onConnectionDidChange=this._onConnectionDidChange.event,this.tree={},this.setTreeData=({conn:conn,tables:tables,columns:columns,functions:functions})=>{if(!conn)return;const connId=utils_1.getConnectionId(conn);this.tree[connId]=this.tree[connId]||new SidebarConnection_1.default(this.extension.context,conn),this.tree[connId].reset(),(tables||columns||functions)&&(this.insertTables(connId,conn.dialect,tables),this.insertColumns(connId,conn.dialect,columns),this.insertFunctions(connId,conn.dialect,functions),this.refresh(this.tree[connId]))},this.updateTreeRoot=()=>__awaiter(this,void 0,void 0,(function*(){const connections=yield vscode_1.commands.executeCommand(`${constants_1.EXT_NAME}.getConnectionStatus`);this.setConnections(connections)})),this.treeView=vscode_1.window.createTreeView(`${constants_1.EXT_NAME}/connectionExplorer`,{treeDataProvider:this,canSelectMany:!0}),config_manager_1.default.addOnUpdateHook(this.updateTreeRoot),this.updateTreeRoot(),this.extension.context.subscriptions.push(this.treeView)}getActive(){const activeId=Object.keys(this.tree).find(k=>this.tree[k].isActive);return activeId?Object.assign(Object.assign({},this.tree[activeId].conn),{id:utils_1.getConnectionId(this.tree[activeId].conn)}):null}getActiveId(){const active=this.getActive();return active?active.id:null}getTreeItem(element){return element}getTreeItems(){const items=utils_1.asArray(this.tree);if(0===items.length){const addNew=new vscode_1.TreeItem("No Connections. Click here to add one",vscode_1.TreeItemCollapsibleState.None);return addNew.command={title:"Add New Connections",command:`${constants_1.EXT_NAME}.openAddConnectionScreen`},[addNew]}return items}getChildren(element){return __awaiter(this,void 0,void 0,(function*(){if(!element)return Promise.resolve(utils_1.asArray(this.getTreeItems()));const items=element.getChildren?yield element.getChildren():element.items;return config_manager_1.default.flattenGroupsIfOne&&1===items.length?this.getChildren(items[0]):items}))}getParent(element){return element.parent||null}refresh(item){this._onDidChangeTreeData.fire(item),vscode_2.default.debug(`Connection explorer updated. ${item?`Updated ${item.label}`:""}`.trim())}setConnections(connections){const keys=[],changed=[];connections.forEach(conn=>{this.tree[utils_1.getConnectionId(conn)]?this.tree[utils_1.getConnectionId(conn)].updateCreds(conn)&&changed.push({conn:conn,action:"changed"}):(this.tree[utils_1.getConnectionId(conn)]=new SidebarConnection_1.default(this.extension.context,conn),changed.push({conn:conn,action:"added"})),keys.push(utils_1.getConnectionId(conn))}),Object.keys(this.tree).length!==keys.length&&Object.keys(this.tree).forEach(k=>{keys.indexOf(k)>=0||(changed.push({conn:this.tree[k].conn,action:"deleted"}),delete this.tree[k])}),changed.length>0&&(this.refresh(),this._onConnectionDidChange.fire(changed))}getGroup(...k){return get_1.default(this.tree,k.reduce((agg,v,i)=>[...agg,v,...i===k.length-1?[]:["tree"]],[]))}getOrCreateGroups(connId,dialect,path,ignoreLasts=0){try{let k=path.split(constants_1.TREE_SEP);const hierachyNames=DialectHierarchyChildNames[dialect]||[];ignoreLasts>0&&(k=k.slice(0,k.length-ignoreLasts));const treeRef=this.getGroup(connId,...k);if(treeRef)return treeRef;let created=[],tree=null;k.forEach((g,i)=>{(tree=this.getGroup(connId,...created)).addItem(new SidebarResourceGroup_1.default(g,hierachyNames[i])),created.push(g)});const group=tree.tree[created.pop()];if(!group)throw new Error(`Can't create tree '${path}' to dialect '${utils_1.getNameFromId(connId||"")||connId}'`);return group}catch(error){throw new Error(`Can't create tree '${path}' to dialect '${utils_1.getNameFromId(connId||"")||connId}'`)}}insertTables(connId,dialect,tables){try{switch(dialect){case interface_1.DatabaseDialect.DB2:case interface_1.DatabaseDialect.PostgreSQL:case interface_1.DatabaseDialect["AWS Redshift"]:case interface_1.DatabaseDialect.SQLite:case interface_1.DatabaseDialect.MySQL:case interface_1.DatabaseDialect.MSSQL:case interface_1.DatabaseDialect.OracleDB:case interface_1.DatabaseDialect.SAPHana:case interface_1.DatabaseDialect.Cassandra:tables.sort((a,b)=>a.name.localeCompare(b.name)).forEach(item=>{this.getOrCreateGroups(connId,dialect,item.tree,1).addItem(new SidebarTableOrView_1.default(this.extension.context,item))});break;default:tables.sort((a,b)=>a.name.localeCompare(b.name)).forEach(item=>{const key=item.isView?"views":"tables";this.getOrCreateGroups(connId,dialect,key).addItem(new SidebarTableOrView_1.default(this.extension.context,item))})}}catch(error){this.extension.errorHandler(`Error while trying to create tables tree for ${dialect}`,error)}}insertColumns(connId,dialect,columns){try{switch(config_manager_1.default.sortColumns&&"name"===config_manager_1.default.sortColumns?columns=columns.sort((a,b)=>a.columnName.localeCompare(b.columnName)):config_manager_1.default.sortColumns&&config_manager_1.default.sortColumns,dialect){case interface_1.DatabaseDialect.DB2:case interface_1.DatabaseDialect.PostgreSQL:case interface_1.DatabaseDialect["AWS Redshift"]:case interface_1.DatabaseDialect.SQLite:case interface_1.DatabaseDialect.MySQL:case interface_1.DatabaseDialect.MSSQL:case interface_1.DatabaseDialect.OracleDB:case interface_1.DatabaseDialect.SAPHana:case interface_1.DatabaseDialect.Cassandra:columns.forEach(column=>{this.getOrCreateGroups(connId,dialect,column.tree,1).addItem(new SidebarColumn_1.default(this.extension.context,column))});break;default:columns.forEach(column=>{const key=this.getGroup(connId,"views",column.tableName)?"views":"tables";this.getOrCreateGroups(connId,dialect,`${key}/${column.tableName}`).addItem(new SidebarColumn_1.default(this.extension.context,column))})}}catch(error){this.extension.errorHandler(`Error while trying to create columns tree for ${dialect}`,error)}}insertFunctions(connId,dialect,functions){try{switch(dialect){case interface_1.DatabaseDialect.DB2:case interface_1.DatabaseDialect.PostgreSQL:case interface_1.DatabaseDialect["AWS Redshift"]:case interface_1.DatabaseDialect.MySQL:case interface_1.DatabaseDialect.MSSQL:case interface_1.DatabaseDialect.OracleDB:case interface_1.DatabaseDialect.Cassandra:functions.forEach(fn=>{this.getOrCreateGroups(connId,dialect,fn.tree,1).addItem(new SidebarFunction_1.default(this.extension.context,fn))});break;default:functions.forEach(fn=>{this.getOrCreateGroups(connId,dialect,`functions/${fn.name}`).addItem(new SidebarFunction_1.default(this.extension.context,fn))})}}catch(error){this.extension.errorHandler(`Error while trying to create functions tree for ${dialect}`,error)}}focusActiveConnection(c){return __awaiter(this,void 0,void 0,(function*(){if(!c)return;const item=this.tree[utils_1.getConnectionId(c)];item&&!item.isActive&&(yield this.updateTreeRoot(),this.treeView.visible&&Object.keys(item.tree).length>0&&(this.treeView.reveal(Object.values(item.tree)[0],{select:!1,focus:!1}),this.treeView.reveal(item)),this.refresh(item))}))}getById(id){return this.tree[id]?this.tree[id].conn:void 0}focus(){this.treeView.reveal(this.treeView.selection[0]||Object.values(this.tree)[0],{focus:!0,select:!0})}getSelection(){return this.treeView.selection}}exports.ConnectionExplorer=ConnectionExplorer,exports.default=ConnectionExplorer},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(0),SidebarAbstractItem_1=__importDefault(__webpack_require__(29));class SidebarFunction extends SidebarAbstractItem_1.default{constructor(context,functionData){super(functionData.name,vscode_1.TreeItemCollapsibleState.None),this.functionData=functionData,this.contextValue="connection.function",this.value=functionData.name,this.iconPath={dark:context.asAbsolutePath("icons/function-dark.svg"),light:context.asAbsolutePath("icons/function-light.svg")},this.description=`${this.functionData.name}(${this.functionData.args.join(",")}) => ${this.functionData.resultType||"void"}`,this.tooltip=`${this.functionData.signature}(${this.functionData.args.join(",")}) => ${this.functionData.resultType||"void"}`,this.value=`${this.functionData.signature}`;let args=[];this.functionData.args.forEach((type,index)=>{const[argName,argType]=type.split("=>");argType&&argType.trim()?args.push(`${argName} => \${${index+1}:${argType}}`):args.push(`\${${index+1}:${type}}`)}),this.snippet=new vscode_1.SnippetString(`${this.functionData.signature}(${args.join(", ")})`).appendTabstop(0)}get items(){return null}addItem(_){throw new Error("Cannot add items to database function")}get conn(){return this.parent.conn}}exports.default=SidebarFunction},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(0),SidebarAbstractItem_1=__importDefault(__webpack_require__(29));class SidebarColumn extends SidebarAbstractItem_1.default{constructor(context,column){super(column.columnName,vscode_1.TreeItemCollapsibleState.None),this.column=column,this.contextValue="connection.column",this.value=column.columnName,SidebarColumn.icons||(SidebarColumn.icons={default:{dark:context.asAbsolutePath("icons/column-dark.svg"),light:context.asAbsolutePath("icons/column-light.svg")},primaryKey:{dark:context.asAbsolutePath("icons/pk-dark.svg"),light:context.asAbsolutePath("icons/pk-lightk.svg")},foreignKey:{dark:context.asAbsolutePath("icons/fk-dark.svg"),light:context.asAbsolutePath("icons/fk-light.svg")},partitionKey:{dark:context.asAbsolutePath("icons/partition-key-dark.svg"),light:context.asAbsolutePath("icons/partition-key-light.svg")}}),this.updateIconPath()}get items(){return null}addItem(_){throw new Error("Cannot add items to table column")}get description(){let typeSize="";return void 0!==this.column.size&&null!==this.column.size&&(typeSize=`(${this.column.size})`),`${(this.column.type||"").toUpperCase()}${typeSize}`}get conn(){return this.parent.conn}updateIconPath(){this.iconPath=SidebarColumn.icons.default,this.column.isPartitionKey?this.iconPath=SidebarColumn.icons.partitionKey:this.column.isPk?this.iconPath=SidebarColumn.icons.primaryKey:this.column.isFk&&(this.iconPath=SidebarColumn.icons.foreignKey)}}exports.default=SidebarColumn},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const config_manager_1=__importDefault(__webpack_require__(8)),vscode_1=__webpack_require__(0),prefixed_tablenames_1=__importDefault(__webpack_require__(90)),SidebarAbstractItem_1=__importDefault(__webpack_require__(29));class SidebarTableOrView extends SidebarAbstractItem_1.default{constructor(context,table){super(table.name,config_manager_1.default.get("tableTreeItemsExpanded",!1)?vscode_1.TreeItemCollapsibleState.Expanded:vscode_1.TreeItemCollapsibleState.Collapsed),this.table=table,this.contextValue="connection.tableOrView",this._columns=[],this.value=this.table.name,this.table.isView?this.iconPath={dark:context.asAbsolutePath("icons/view-dark.svg"),light:context.asAbsolutePath("icons/view-light.svg")}:this.iconPath={dark:context.asAbsolutePath("icons/table-dark.svg"),light:context.asAbsolutePath("icons/table-light.svg")}}toString(){return this.table.name}get name(){return prefixed_tablenames_1.default(this.conn.dialect,this.table)}get columns(){return this._columns.map(item=>item.column)}get items(){return this._columns}get snippet(){if(!this.conn)return;let snptArr=prefixed_tablenames_1.default(this.conn.dialect,this.table).split(".");return new vscode_1.SnippetString(snptArr.map((v,i)=>`\${${i+1}:${v}}`).join(".")+"$0")}get conn(){return this.parent.conn}get description(){return void 0===this.table.numberOfColumns?"":`${this.table.numberOfColumns} cols`}addItem(item){return item.parent=this,this._columns.push(item),this}}exports.default=SidebarTableOrView},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const utils_1=__webpack_require__(3),vscode_1=__webpack_require__(0),SidebarAbstractItem_1=__importDefault(__webpack_require__(29));class SidebarResourceGroup extends SidebarAbstractItem_1.default{constructor(label,detail){super(label,vscode_1.TreeItemCollapsibleState.Collapsed),this.label=label,this.detail=detail,this.iconPath=vscode_1.ThemeIcon.Folder,this.contextValue="connection.resource_group",this.tree={},this.value=this.label}get items(){return utils_1.asArray(this.tree)}get description(){return this.detail||`${Object.keys(this.tree).length} ${this.label.toLowerCase()}`}get conn(){return this.parent.conn}addItem(item){return this.tree[item.value]=this.tree[item.value]||item,this.tree[item.value].parent=this,this}reset(){this.tree={}}}exports.default=SidebarResourceGroup},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const constants_1=__webpack_require__(1),utils_1=__webpack_require__(3),util_1=__webpack_require__(36),vscode_1=__webpack_require__(0),SidebarAbstractItem_1=__importDefault(__webpack_require__(29)),get_1=__importDefault(__webpack_require__(91));class SidebarConnection extends SidebarAbstractItem_1.default{constructor(context,conn){super(conn.name,vscode_1.TreeItemCollapsibleState.None),this.conn=conn,this.parent=null,this.tree={},SidebarConnection.icons||(SidebarConnection.icons={active:{dark:context.asAbsolutePath("icons/database-active-dark.svg"),light:context.asAbsolutePath("icons/database-active-light.svg")},connected:{dark:context.asAbsolutePath("icons/database-dark.svg"),light:context.asAbsolutePath("icons/database-light.svg")},disconnected:{dark:context.asAbsolutePath("icons/database-disconnected-dark.svg"),light:context.asAbsolutePath("icons/database-disconnected-light.svg")}})}get contextValue(){return this.isConnected?"connectedConnection":"connection"}get items(){return utils_1.asArray(this.tree)}get description(){return utils_1.getConnectionDescription(this.conn)}get isConnected(){return this.conn.isConnected}get id(){return this.getId()}get value(){return this.conn.database}get tooltip(){if(this.isActive)return"Active Connection - Queries will run for this connection"}getChildren(){return __awaiter(this,void 0,void 0,(function*(){try{return this.isConnected||(yield vscode_1.commands.executeCommand(`${constants_1.EXT_NAME}.selectConnection`,this)),this.items}catch(e){return null}}))}get command(){if(!this.isActive)return{title:"Connect",command:`${constants_1.EXT_NAME}.selectConnection`,arguments:[this]}}get iconPath(){return this.isActive?get_1.default(this,"conn.icons.active")?vscode_1.Uri.parse(this.conn.icons.active):SidebarConnection.icons.active:"connectedConnection"===this.contextValue?get_1.default(this,"conn.icons.connected")?vscode_1.Uri.parse(this.conn.icons.connected):SidebarConnection.icons.connected:get_1.default(this,"conn.icons.disconnected")?vscode_1.Uri.parse(this.conn.icons.disconnected):SidebarConnection.icons.disconnected}getId(){return utils_1.getConnectionId(this.conn)}addItem(item){return this.tree[item.value]?this:(this.tree[item.value]=this.tree[item.value]||item,this.tree[item.value].parent=this,this.collapsibleState=this.collapsibleState===vscode_1.TreeItemCollapsibleState.None?vscode_1.TreeItemCollapsibleState.Collapsed:this.collapsibleState,this)}reset(){this.tree={},this.collapsibleState=vscode_1.TreeItemCollapsibleState.None}updateStatus(c){this.updateCreds(c),this.isActive&&this.expand()}get isActive(){return this.conn.isActive}expand(){this.collapsibleState=vscode_1.TreeItemCollapsibleState.Expanded}updateCreds(creds){return!util_1.isDeepStrictEqual(this.conn,creds)&&(this.conn=creds,this.isConnected||this.reset(),!0)}}exports.default=SidebarConnection},function(module,exports,__webpack_require__){var castPath=__webpack_require__(272),toKey=__webpack_require__(302);module.exports=function(object,path){for(var index=0,length=(path=castPath(path,object)).length;null!=object&&index<length;)object=object[toKey(path[index++])];return index&&index==length?object:void 0}},function(module,exports,__webpack_require__){var isArray=__webpack_require__(49),isKey=__webpack_require__(273),stringToPath=__webpack_require__(274),toString=__webpack_require__(33);module.exports=function(value,object){return isArray(value)?value:isKey(value,object)?[value]:stringToPath(toString(value))}},function(module,exports,__webpack_require__){var isArray=__webpack_require__(49),isSymbol=__webpack_require__(32),reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;module.exports=function(value,object){if(isArray(value))return!1;var type=typeof value;return!("number"!=type&&"symbol"!=type&&"boolean"!=type&&null!=value&&!isSymbol(value))||(reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object))}},function(module,exports,__webpack_require__){var memoizeCapped=__webpack_require__(275),rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped((function(string){var result=[];return 46===string.charCodeAt(0)&&result.push(""),string.replace(rePropName,(function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)})),result}));module.exports=stringToPath},function(module,exports,__webpack_require__){var memoize=__webpack_require__(276),MAX_MEMOIZE_SIZE=500;module.exports=function(func){var result=memoize(func,(function(key){return cache.size===MAX_MEMOIZE_SIZE&&cache.clear(),key})),cache=result.cache;return result}},function(module,exports,__webpack_require__){var MapCache=__webpack_require__(277),FUNC_ERROR_TEXT="Expected a function";function memoize(func,resolver){if("function"!=typeof func||null!=resolver&&"function"!=typeof resolver)throw new TypeError(FUNC_ERROR_TEXT);var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);var result=func.apply(this,args);return memoized.cache=cache.set(key,result)||cache,result};return memoized.cache=new(memoize.Cache||MapCache),memoized}memoize.Cache=MapCache,module.exports=memoize},function(module,exports,__webpack_require__){var mapCacheClear=__webpack_require__(278),mapCacheDelete=__webpack_require__(297),mapCacheGet=__webpack_require__(299),mapCacheHas=__webpack_require__(300),mapCacheSet=__webpack_require__(301);function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,module.exports=MapCache},function(module,exports,__webpack_require__){var Hash=__webpack_require__(279),ListCache=__webpack_require__(290),Map=__webpack_require__(296);module.exports=function(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}},function(module,exports,__webpack_require__){var hashClear=__webpack_require__(280),hashDelete=__webpack_require__(286),hashGet=__webpack_require__(287),hashHas=__webpack_require__(288),hashSet=__webpack_require__(289);function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,module.exports=Hash},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(39);module.exports=function(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}},function(module,exports,__webpack_require__){var isFunction=__webpack_require__(69),isMasked=__webpack_require__(282),isObject=__webpack_require__(34),toSource=__webpack_require__(284),reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");module.exports=function(value){return!(!isObject(value)||isMasked(value))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value))}},function(module,exports,__webpack_require__){var uid,coreJsData=__webpack_require__(283),maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"";module.exports=function(func){return!!maskSrcKey&&maskSrcKey in func}},function(module,exports,__webpack_require__){var coreJsData=__webpack_require__(48)["__core-js_shared__"];module.exports=coreJsData},function(module,exports){var funcToString=Function.prototype.toString;module.exports=function(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}},function(module,exports){module.exports=function(object,key){return null==object?void 0:object[key]}},function(module,exports){module.exports=function(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(39),HASH_UNDEFINED="__lodash_hash_undefined__",hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(39),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(39),HASH_UNDEFINED="__lodash_hash_undefined__";module.exports=function(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?HASH_UNDEFINED:value,this}},function(module,exports,__webpack_require__){var listCacheClear=__webpack_require__(291),listCacheDelete=__webpack_require__(292),listCacheGet=__webpack_require__(293),listCacheHas=__webpack_require__(294),listCacheSet=__webpack_require__(295);function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,module.exports=ListCache},function(module,exports){module.exports=function(){this.__data__=[],this.size=0}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(40),splice=Array.prototype.splice;module.exports=function(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,!0)}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(40);module.exports=function(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(40);module.exports=function(key){return assocIndexOf(this.__data__,key)>-1}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(40);module.exports=function(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this}},function(module,exports,__webpack_require__){var Map=__webpack_require__(92)(__webpack_require__(48),"Map");module.exports=Map},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(41);module.exports=function(key){var result=getMapData(this,key).delete(key);return this.size-=result?1:0,result}},function(module,exports){module.exports=function(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(41);module.exports=function(key){return getMapData(this,key).get(key)}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(41);module.exports=function(key){return getMapData(this,key).has(key)}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(41);module.exports=function(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this}},function(module,exports,__webpack_require__){var isSymbol=__webpack_require__(32),INFINITY=1/0;module.exports=function(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const contracts_1=__webpack_require__(93),provider_1=__importDefault(__webpack_require__(94)),vscode_1=__importDefault(__webpack_require__(0)),config_manager_1=__importDefault(__webpack_require__(8)),utils_1=__webpack_require__(3),path_1=__importDefault(__webpack_require__(5));class ResultsWebview extends provider_1.default{constructor(context,client,iconsPath,viewsPath){super(context,iconsPath,viewsPath),this.client=client,this.id="Results",this.title="SQLTools Results",this.isOpen=!1,this.saveResults=(filetype="csv")=>__awaiter(this,void 0,void 0,(function*(){const{connId:connId,activeTab:activeTab,queries:queries}=yield this.getState();let filters=void 0;"csv"===filetype?filters={"CSV File":["csv","txt"]}:"json"===filetype&&(filters={"JSON File":["json"]});const file=yield vscode_1.default.window.showSaveDialog({filters:filters,saveLabel:"Export"});if(!file)return;const filename=file.fsPath;return yield this.client.sendRequest(contracts_1.SaveResultsRequest,{connId:connId,query:queries[activeTab],filename:filename,filetype:filetype}),vscode_1.default.commands.executeCommand("vscode.open",file)})),this.updateResults=payload=>{this.title="SQLTools Results";try{payload&&payload.length>0&&(this.title=`${utils_1.getNameFromId(payload[0].connId)} Results`)}catch(error){}this.updatePanelName(),this.postMessage({action:"queryResults",payload:payload})},this.wereToShow=vscode_1.default.ViewColumn.Active,this.onDidDispose(()=>{this.isOpen=!1}),this.setMessageCallback(({action:action,payload:payload})=>{switch(action){case"viewReady":this.isOpen=payload}})}get cssVariables(){return config_manager_1.default.results.customization?config_manager_1.default.results.customization:super.cssVariables}show(){switch(this.wereToShow=null,config_manager_1.default.results.location){case"active":case"current":this.wereToShow=vscode_1.default.ViewColumn.Active;break;case"end":this.wereToShow=vscode_1.default.ViewColumn.Three;break;case"beside":default:vscode_1.default.window.activeTextEditor?config_manager_1.default.results&&"number"==typeof config_manager_1.default.results.location&&config_manager_1.default.results.location>=-1&&config_manager_1.default.results.location<=9&&0!==config_manager_1.default.results.location?this.wereToShow=config_manager_1.default.results.location:vscode_1.default.window.activeTextEditor.viewColumn===vscode_1.default.ViewColumn.One?this.wereToShow=vscode_1.default.ViewColumn.Two:this.wereToShow=vscode_1.default.ViewColumn.Three:this.wereToShow=vscode_1.default.ViewColumn.One}return super.show(),new Promise((resolve,reject)=>{let interval=setInterval(()=>{if(this.isOpen)return clearInterval(interval),resolve()},500)})}}exports.default=class ResultsWebviewManager{constructor(context,client){this.context=context,this.client=client,this.resultsMap={},this.dispose=()=>Promise.all(Object.keys(this.resultsMap).map(id=>this.resultsMap[id].dispose())),this.createForId=connId=>(this.resultsMap[connId]=new ResultsWebview(this.context,this.client,this.iconsPath,this.viewsPath),this.resultsMap[connId]),this.get=connId=>{if(!connId)throw new Error("Missing connection id to create results view");return this.resultsMap[connId]||this.createForId(connId)},this.iconsPath=vscode_1.default.Uri.file(path_1.default.join(this.context.extensionPath,"icons")).with({scheme:"vscode-resource"}),this.viewsPath=vscode_1.default.Uri.file(path_1.default.join(this.context.extensionPath,"ui")).with({scheme:"vscode-resource"})}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const constants_1=__webpack_require__(1),utils_1=__webpack_require__(3),provider_1=__importDefault(__webpack_require__(94)),vscode_1=__webpack_require__(0),path_1=__importDefault(__webpack_require__(5)),interface_1=__webpack_require__(25),relative_to_workspace_1=__importDefault(__webpack_require__(305));class SettingsWebview extends provider_1.default{constructor(context){super(context,vscode_1.Uri.file(path_1.default.join(context.extensionPath,"icons")).with({scheme:"vscode-resource"}),vscode_1.Uri.file(path_1.default.join(context.extensionPath,"ui")).with({scheme:"vscode-resource"})),this.id="Settings",this.title="SQLTools Settings",this.updateConnection=({connInfo:connInfo,globalSetting:globalSetting,transformToRelative:transformToRelative,editId:editId})=>__awaiter(this,void 0,void 0,(function*(){return connInfo.dialect===interface_1.DatabaseDialect.SQLite&&transformToRelative&&(connInfo.database=relative_to_workspace_1.default(connInfo.database)),vscode_1.commands.executeCommand(`${constants_1.EXT_NAME}.updateConnection`,editId,connInfo,globalSetting?"Global":void 0).then(()=>{this.postMessage({action:"updateConnectionSuccess",payload:{globalSetting:globalSetting,connInfo:Object.assign(Object.assign({},connInfo),{id:utils_1.getConnectionId(connInfo)})}})},(payload={})=>{payload={message:(payload.message||payload||"").toString()},this.postMessage({action:"updateConnectionError",payload:payload})})})),this.createConnection=({connInfo:connInfo,globalSetting:globalSetting,transformToRelative:transformToRelative})=>__awaiter(this,void 0,void 0,(function*(){return connInfo.dialect===interface_1.DatabaseDialect.SQLite&&transformToRelative&&(connInfo.database=relative_to_workspace_1.default(connInfo.database)),vscode_1.commands.executeCommand(`${constants_1.EXT_NAME}.addConnection`,connInfo,globalSetting?"Global":void 0).then(()=>{this.postMessage({action:"createConnectionSuccess",payload:{globalSetting:globalSetting,connInfo:Object.assign(Object.assign({},connInfo),{id:utils_1.getConnectionId(connInfo)})}})},(payload={})=>{payload={message:(payload.message||payload||"").toString()},this.postMessage({action:"createConnectionError",payload:payload})})})),this.testConnection=({connInfo:connInfo})=>__awaiter(this,void 0,void 0,(function*(){return connInfo.dialect===interface_1.DatabaseDialect.SQLite&&(connInfo.database=relative_to_workspace_1.default(connInfo.database)),vscode_1.commands.executeCommand(`${constants_1.EXT_NAME}.testConnection`,connInfo).then(res=>{if(res&&res.notification){const message="You need to fix some issues in your machine first. Check the notifications on bottom-right before moving forward.";return this.postMessage({action:"testConnectionWarning",payload:{message:message}})}this.postMessage({action:"testConnectionSuccess",payload:{connInfo:connInfo}})},(payload={})=>{payload={message:(payload.message||payload||"").toString()},this.postMessage({action:"testConnectionError",payload:payload})})})),this.openConnectionFile=()=>__awaiter(this,void 0,void 0,(function*(){return vscode_1.commands.executeCommand("workbench.action.openSettings","sqltools.connections")})),this.setMessageCallback(({action:action,payload:payload})=>{switch(action){case"createConnection":return this.createConnection(payload);case"updateConnection":return this.updateConnection(payload);case"testConnection":return this.testConnection(payload);case"openConnectionFile":this.openConnectionFile()}})}}exports.default=SettingsWebview},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(0),path_1=__importDefault(__webpack_require__(5));exports.default=file=>{const workspaceFolder=vscode_1.workspace.getWorkspaceFolder(vscode_1.Uri.file(file));return!(!vscode_1.workspace.workspaceFile||"untitled"===vscode_1.workspace.workspaceFile.scheme)&&workspaceFolder?(file=vscode_1.workspace.asRelativePath(file,!1),file=`\${workspaceFolder:${workspaceFolder.name}}/${file}`):workspaceFolder&&1===vscode_1.workspace.workspaceFolders.length&&(file=vscode_1.workspace.asRelativePath(file,!1),file=`\${workspaceFolder}${path_1.default.sep}${file}`),file}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result};Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(0),provider_1=__importDefault(__webpack_require__(307)),config_manager_1=__importDefault(__webpack_require__(8)),Utils=__importStar(__webpack_require__(3));exports.default=class CodeLensPlugin{constructor(){this.registeredLanguages=[]}dispose(){return __awaiter(this,void 0,void 0,(function*(){this.codelensDisposable&&(yield this.codelensDisposable.dispose(),this.codelensDisposable=null)}))}createCodelens(context){return __awaiter(this,void 0,void 0,(function*(){const oldLang=this.registeredLanguages.sort(Utils.sortText),newLang=config_manager_1.default.codelensLanguages.sort(Utils.sortText);newLang.length>0&&oldLang.join()!==newLang.join()&&(this.registeredLanguages&&(yield this.dispose()),this.provider=new provider_1.default(context),this.codelensDisposable=vscode_1.languages.registerCodeLensProvider(config_manager_1.default.codelensLanguages.map(language=>({language:language})),this.provider),this.registeredLanguages=config_manager_1.default.codelensLanguages)}))}register(extension){extension.context.subscriptions.push(this),this.createCodelens(extension.context),config_manager_1.default.addOnUpdateHook(()=>{this.createCodelens(extension.context)})}reset(){return this.provider.reset()}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(0),Constants=__importStar(__webpack_require__(1)),selector_1=__importDefault(__webpack_require__(308)),utils_1=__webpack_require__(3),query_1=__webpack_require__(31);exports.default=class SQLToolsCodeLensProvider{constructor(context){this.context=context,this._onDidChangeCodeLenses=new vscode_1.EventEmitter,context.subscriptions.push(this._onDidChangeCodeLenses)}get onDidChangeCodeLenses(){return this._onDidChangeCodeLenses.event}reset(){this._onDidChangeCodeLenses.fire()}provideCodeLenses(document){return __awaiter(this,void 0,void 0,(function*(){const lines=document.getText().split(Constants.LineSplitterRegex),requestRanges=selector_1.default.getQueryRanges(lines),defaultConn=query_1.extractConnName(document.getText(new vscode_1.Range(0,0,1,0))),lenses=[],attachedId=this.context.workspaceState.get("attachedFilesMap",{})[document.uri.toString()];if(attachedId){const connName=utils_1.getNameFromId(attachedId),runCmd={arguments:[document.uri],title:`Detach file from ${connName.trim()}`,command:`${Constants.EXT_NAME}.detachConnectionFromFile`};lenses.push(new vscode_1.CodeLens(new vscode_1.Range(0,0,0,0),runCmd))}return requestRanges.forEach(([blockStart,blockEnd])=>{const range=new vscode_1.Range(blockStart,0,blockEnd,0),queries=document.getText(range),connName=query_1.extractConnName(queries),runCmd={arguments:[queries,(connName||defaultConn||"").trim()||void 0].filter(Boolean),title:`Run query block on ${(connName||defaultConn||"active connection").trim()}`,command:`${Constants.EXT_NAME}.executeQuery`};lenses.push(new vscode_1.CodeLens(range,runCmd))}),lenses}))}}},function(module,exports,__webpack_require__){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result};Object.defineProperty(exports,"__esModule",{value:!0});const os_1=__webpack_require__(20),Constants=__importStar(__webpack_require__(1));class Selector{static getQueryText(editor,range=null){if(!editor||!editor.document)return null;let selectedText;if(editor.selection.isEmpty||range){let activeLine=range?range.start.line:editor.selection.active.line;selectedText=Selector.getDelimitedText(editor.document.getText(),activeLine)}else selectedText=editor.document.getText(editor.selection);return selectedText}static getQueryRanges(lines){let requestRanges=[];const delimitedLines=Selector.getDelimiterRows(lines);return requestRanges=delimitedLines.reduce((result,startLine,index)=>(result.push([startLine,delimitedLines[index+1]?delimitedLines[index+1]-1:lines.length]),result),[])}static isVariableDefinitionLine(line){return Constants.FileVariableDefinitionRegex.test(line)}static getDelimitedText(fullText,currentLine){let lines=fullText.split(Constants.LineSplitterRegex),delimiterLineNumbers=Selector.getDelimiterRows(lines);if(0===delimiterLineNumbers.length)return fullText;if(delimiterLineNumbers.includes(currentLine))return null;if(currentLine<delimiterLineNumbers[0])return lines.slice(0,delimiterLineNumbers[0]).join(os_1.EOL);if(currentLine>delimiterLineNumbers[delimiterLineNumbers.length-1])return lines.slice(delimiterLineNumbers[delimiterLineNumbers.length-1]+1).join(os_1.EOL);for(let index=0;index<delimiterLineNumbers.length-1;index++){let start=delimiterLineNumbers[index],end=delimiterLineNumbers[index+1];if(start<currentLine&&currentLine<end)return lines.slice(start+1,end).join(os_1.EOL)}}static getDelimiterRows(lines){let rows=[];for(let index=0;index<lines.length;index++)lines[index].match(Constants.DelimiterStartRegex)&&rows.push(index);return rows}}exports.default=Selector},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const config_manager_1=__importDefault(__webpack_require__(8)),vscode_1=__webpack_require__(0),constants_1=__webpack_require__(1);let statusBar;(statusBar=vscode_1.window.createStatusBarItem(vscode_1.StatusBarAlignment.Left,10)).tooltip="Select a connection",statusBar.command=`${constants_1.EXT_NAME}.selectConnection`,statusBar.setText=text=>statusBar.text=`$(database) ${text||"Connect"}`,statusBar.setText();const updateVisibility=()=>config_manager_1.default.showStatusbar?statusBar.show():statusBar.hide();updateVisibility(),config_manager_1.default.addOnUpdateHook(updateVisibility),exports.default=statusBar},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(0),WORKSPACE_PLACEHOLDER=/\$\{workspaceFolder(?:\:(.+))?}/;exports.default=file=>{if(!WORKSPACE_PLACEHOLDER.test(file))return file;const[_,workspaceName]=file.match(WORKSPACE_PLACEHOLDER)||[];if(workspaceName){const workspacePath=(vscode_1.workspace.workspaceFolders.find(w=>w.name===workspaceName)||{uri:{fsPath:"."}}).uri.fsPath;file=file.replace(WORKSPACE_PLACEHOLDER,`${workspacePath}`)}else file=file.replace(WORKSPACE_PLACEHOLDER,".");return file}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(0),contracts_1=__webpack_require__(43),vscode_2=__webpack_require__(15),constants_1=__webpack_require__(1),utils_1=__webpack_require__(3),config_manager_1=__importDefault(__webpack_require__(8));exports.default=class DependencyManager{constructor(){this.electronNotSupported=()=>__awaiter(this,void 0,void 0,(function*(){if(yield vscode_1.window.showInformationMessage("Electron is not supported. You should enable 'sqltools.useNodeRuntime' and have NodeJS installed to continue.","Enable now")){yield vscode_1.workspace.getConfiguration(constants_1.EXT_NAME.toLowerCase()).update("useNodeRuntime",!0,vscode_1.ConfigurationTarget.Global);try{yield vscode_1.workspace.getConfiguration(constants_1.EXT_NAME.toLowerCase()).update("useNodeRuntime",!0,vscode_1.ConfigurationTarget.Workspace)}catch(e){}try{yield vscode_1.workspace.getConfiguration(constants_1.EXT_NAME.toLowerCase()).update("useNodeRuntime",!0,vscode_1.ConfigurationTarget.WorkspaceFolder)}catch(e){}(yield vscode_1.window.showInformationMessage("'sqltools.useNodeRuntime' enabled. You must reload VSCode to take effect.","Reload now"))&&vscode_1.commands.executeCommand("workbench.action.reloadWindow")}})),this.installingDialects=[],this.requestToInstall=({moduleName:moduleName,moduleVersion:moduleVersion,conn:conn,action:action="install"})=>__awaiter(this,void 0,void 0,(function*(){conn=conn||{};const installNow="upgrade"===action?"Upgrade now":"Install now",options=["Read more",installNow],dependencyManagerSettings=config_manager_1.default.dependencyManager,autoUpdateOrInstall=dependencyManagerSettings&&dependencyManagerSettings.autoAccept;try{switch(autoUpdateOrInstall?installNow:yield vscode_1.window.showInformationMessage(`You need to ${action} "${moduleName}@${moduleVersion}" to connect to ${conn.name}.`,...options)){case installNow:this.installingDialects.push(conn.dialect),yield vscode_1.window.withProgress({location:vscode_1.ProgressLocation.Notification,title:"SQLTools",cancellable:!1},progress=>__awaiter(this,void 0,void 0,(function*(){return progress.report({message:`${"upgrade"===action?"upgrading":"installing"} ${this.installingDialects.join(", ")} dependencies`}),yield this.client.sendRequest(contracts_1.InstallDepRequest,{dialect:conn.dialect})}))),this.installingDialects=this.installingDialects.filter(v=>v!==conn.dialect);const opt=conn.name?[`Connect to ${conn.name}`]:[];(conn.name&&autoUpdateOrInstall?opt[0]:yield vscode_1.window.showInformationMessage(`"${moduleName}@${moduleVersion}" installed!\n\nGo ahead and connect!`,...opt))===opt[0]&&(yield vscode_1.commands.executeCommand(`${constants_1.EXT_NAME}.selectConnection`,utils_1.getConnectionId(conn)));break;case"Read more":vscode_2.openExternal(`${constants_1.DOCS_ROOT_URL}/driver/${conn.dialect?conn.dialect.toLowerCase():""}`)}}catch(error){this.installingDialects=this.installingDialects.filter(v=>v!==conn.dialect),this.extension.errorHandler(`Failed to install dependencies for ${conn.dialect}:`,error)}})),this.jobRunning=({moduleName:moduleName,moduleVersion:moduleVersion,conn:conn})=>__awaiter(this,void 0,void 0,(function*(){return vscode_1.window.showInformationMessage(`We are installing "${moduleName}@${moduleVersion}" to connect to ${conn.name}. Please wait till it finishes.`)}))}register(extension){this.extension=extension,this.client=extension.client,this.client.onNotification(contracts_1.MissingModuleNotification,param=>this.requestToInstall(param)),this.client.onNotification(contracts_1.DependeciesAreBeingInstalledNotification,param=>this.jobRunning(param)),this.client.onNotification(contracts_1.ElectronNotSupportedNotification,this.electronNotSupported)}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const explorer_1=__importDefault(__webpack_require__(313)),utils_1=__webpack_require__(3),vscode_1=__webpack_require__(15),vscode_2=__webpack_require__(0),constants_1=__webpack_require__(1),hookedCommands=["executeFromInput","executeQuery","executeQueryFromFile"];exports.default=class ConnectionManagerPlugin{constructor(){this.addToHistoryHook=evt=>{evt.result.forEach(r=>{this.explorer.addItem(utils_1.getNameFromId(r.connId),r.query)})},this.ext_runFromHistory=entry=>__awaiter(this,void 0,void 0,(function*(){let query;entry&&entry.query&&(query=entry.query);try{return query=query||(yield this.historyMenu()),vscode_2.commands.executeCommand(`${constants_1.EXT_NAME}.executeQuery`,query,!1)}catch(e){this.errorHandler("Error while running query.",e)}})),this.ext_editHistory=entry=>__awaiter(this,void 0,void 0,(function*(){let query;entry&&entry.query&&(query=entry.query);try{query=query||(yield this.historyMenu()),vscode_1.insertText(query)}catch(e){this.errorHandler("Could not edit query.",e)}}))}historyMenu(prop="label"){return __awaiter(this,void 0,void 0,(function*(){const items=this.explorer.getChildren().reduce((agg,group)=>agg.concat(group.items.map(item=>({label:item.query,detail:item.description,description:group.label}))),[]);return yield vscode_1.quickPick(items,prop,{matchOnDescription:!0,matchOnDetail:!0,placeHolderDisabled:"You don't have any queries on your history.",title:"History"})}))}register(extension){this.explorer||(this.explorer=new explorer_1.default(extension.context),this.errorHandler=extension.errorHandler,hookedCommands.forEach(cmd=>extension.addAfterCommandSuccessHook(cmd,this.addToHistoryHook)),extension.registerCommand("runFromHistory",this.ext_runFromHistory).registerCommand("editHistory",this.ext_editHistory))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(0),tree_items_1=__webpack_require__(314),vscode_2=__webpack_require__(0),constants_1=__webpack_require__(1);class HistoryExplorer{constructor(context){this._onDidChangeTreeData=new vscode_1.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event,this.tree={},this.treeGroupOrder=[],this.refresh=item=>{this._onDidChangeTreeData.fire(item)},this.treeView=vscode_2.window.createTreeView(`${constants_1.EXT_NAME}/historyExplorer`,{treeDataProvider:this}),context.subscriptions.push(this.treeView)}getTreeItem(element){return element}getChildren(element){return element?element instanceof tree_items_1.HistoryTreeGroup?element.items:[]:this.treeGroupOrder.map(group=>this.tree[group])}getParent(element){return element.parent||null}addItem(group,value){this.tree[group]||(this.tree[group]=new tree_items_1.HistoryTreeGroup(group,this.refresh)),this.treeGroupOrder=[group].concat(this.treeGroupOrder.filter(g=>g!==group)),this.tree[group].addItem(value),this.refresh()}}exports.HistoryExplorer=HistoryExplorer,exports.default=HistoryExplorer},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(0),config_manager_1=__importDefault(__webpack_require__(8)),constants_1=__webpack_require__(1),query_1=__webpack_require__(31);class HistoryTreeItem extends vscode_1.TreeItem{constructor(query,parent){super(query_1.cleanUp(query),vscode_1.TreeItemCollapsibleState.None),this.query=query,this.parent=parent,this.contextValue="history.item",this.description=(new Date).toLocaleString(),this.command={title:"Edit",command:`${constants_1.EXT_NAME}.editHistory`,arguments:[this]}}get tooltip(){return this.query}}exports.HistoryTreeItem=HistoryTreeItem;class HistoryTreeGroup extends vscode_1.TreeItem{constructor(name,refresh){super(name,vscode_1.TreeItemCollapsibleState.Expanded),this.name=name,this.refresh=refresh,this.parent=null,this.contextValue="history.group",this.items=[],this.sizeKeeper=()=>{this.items.length>=this.getMaxSize()&&(this.items.length=this.getMaxSize(),this.refresh(this))},config_manager_1.default.addOnUpdateHook(this.sizeKeeper)}get tooltip(){return this.name}addItem(query){if(query&&0!==query.trim().length)return this.items.length>0&&this.items[0].query.trim()===query.toString().trim()?(this.items[0].description=(new Date).toLocaleString(),this.items[0]):(this.items=[new HistoryTreeItem(query,this)].concat(this.items),this.sizeKeeper(),this.items[0])}getMaxSize(){return config_manager_1.default.historySize||100}}exports.HistoryTreeGroup=HistoryTreeGroup},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const explorer_1=__importDefault(__webpack_require__(316)),vscode_1=__webpack_require__(15),vscode_2=__webpack_require__(0),constants_1=__webpack_require__(1);exports.default=class BookmarksManagerPlugin{constructor(){this.bookmarksMenu=()=>__awaiter(this,void 0,void 0,(function*(){const items=this.explorer.getChildren().reduce((agg,group)=>agg.concat(Object.values(group.items).map(item=>({label:item.name,detail:item.description,description:group.label,item:item}))),[]);return vscode_1.quickPick(items,"item",{matchOnDescription:!0,matchOnDetail:!0,placeHolder:"Pick a bookmarked query",placeHolderDisabled:"You don't have any bookmarks yet.",title:"Bookmarks"})})),this.ext_editBookmark=item=>__awaiter(this,void 0,void 0,(function*(){try{item=item||(yield this.bookmarksMenu());const headerText="-- @block Bookmarked query\n-- @group {queryGroup}\n-- @name {queryName}\n\n".replace("{queryName}",item.name).replace("{queryGroup}",item.parent.name);vscode_1.insertText(`${headerText}${item.query}`,!0,!0)}catch(e){this.errorHandler("Could not edit bookmarked query",e)}})),this.ext_bookmarkSelection=()=>__awaiter(this,void 0,void 0,(function*(){try{const query=yield vscode_1.getSelectedText("bookmark");if(!query||!query.trim())return;const name=yield vscode_1.readInput("Query name"),group=yield vscode_1.readInput("Group Name",void 0,"Ungrouped");this.explorer.addItem(group,name,query)}catch(e){this.errorHandler("Error bookmarking query.",e)}})),this.ext_deleteBookmark=item=>__awaiter(this,void 0,void 0,(function*(){try{if(!(item=item||(yield this.bookmarksMenu())))return;this.explorer.delete(item.parent.name,item.name)}catch(e){this.errorHandler("Error deleting bookmark.",e)}})),this.ext_clearBookmarks=()=>{this.explorer.clear()},this.ext_runFromBookmarks=item=>__awaiter(this,void 0,void 0,(function*(){try{if(!(item=item||(yield this.bookmarksMenu())))return;yield vscode_2.commands.executeCommand(`${constants_1.EXT_NAME}.executeQuery`,item.query)}catch(e){this.errorHandler("Error while running query.",e)}}))}register(extension){this.explorer||(this.explorer=new explorer_1.default(extension.context),this.errorHandler=extension.errorHandler,extension.registerCommand("bookmarkSelection",this.ext_bookmarkSelection).registerCommand("clearBookmarks",this.ext_clearBookmarks).registerCommand("editBookmark",this.ext_editBookmark).registerCommand("deleteBookmark",this.ext_deleteBookmark).registerCommand("runFromBookmarks",this.ext_runFromBookmarks))}}},function(module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__importDefault(__webpack_require__(18)),vscode_2=__webpack_require__(0),tree_items_1=__webpack_require__(317),vscode_3=__webpack_require__(0),constants_1=__webpack_require__(1),utils_1=__webpack_require__(3),fs_1=__importDefault(__webpack_require__(11)),path_1=__importDefault(__webpack_require__(5));class BookmarkExplorer{constructor(context){this._onDidChangeTreeData=new vscode_2.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event,this.tree={},this.refresh=item=>{this._onDidChangeTreeData.fire(item)},this.asAbsolutePath=context.asAbsolutePath,this.treeView=vscode_3.window.createTreeView(`${constants_1.EXT_NAME}/bookmarksExplorer`,{treeDataProvider:this}),context.subscriptions.push(this.treeView),this.readFromFile()}getTreeItem(element){return element}getChildren(element){return element?element instanceof tree_items_1.BookmarkTreeGroup?Object.values(element.items):[]:Object.keys(this.tree).map(group=>this.tree[group])}getParent(element){return element.parent||null}addItem(group,name,query,skipSave=!1){!query||query&&0===query.trim().length||(this.tree[group]||(this.tree[group]=new tree_items_1.BookmarkTreeGroup(group)),this.tree[group].addItem(name,query),this.refresh(),skipSave||this.save())}get oldFilePath(){return path_1.default.join(utils_1.getHome(),".Bookmarks.SQLToolsStorage.json")}get filePath(){return path_1.default.join(this.asAbsolutePath("Bookmarks.json"))}migrateOldFile(){if(fs_1.default.existsSync(this.oldFilePath))try{fs_1.default.renameSync(this.oldFilePath,this.filePath);let data={};try{data=JSON.parse(fs_1.default.readFileSync(this.filePath).toString("utf8"))}catch(error){}const Bookmarks={Ungrouped:data};fs_1.default.writeFileSync(this.filePath,JSON.stringify(Bookmarks))}catch(e){}}readFromFile(){this.migrateOldFile();try{fs_1.default.existsSync(this.filePath)||fs_1.default.writeFileSync(this.filePath,"{}");const data=JSON.parse(fs_1.default.readFileSync(this.filePath).toString("utf8"));Object.keys(data).forEach(group=>{Object.keys(data[group]).forEach(name=>{const query=data[group][name];this.addItem(group,name,query,!0)})})}catch(e){vscode_1.default.error("Error reading bookmarks:",e)}}clear(){return __awaiter(this,void 0,void 0,(function*(){"Yes"===(yield vscode_3.window.showInformationMessage("Do you really want to delete all your bookmarks?",{modal:!0},"Yes"))&&(this.tree={},this.refresh(),this.save())}))}delete(group,name){return __awaiter(this,void 0,void 0,(function*(){"Yes"===(yield vscode_3.window.showInformationMessage(`Do you really want to delete ${name} bookmark?`,{modal:!0},"Yes"))&&(this.tree[group].delete(name),0===this.tree[group].length&&(delete this.tree[group],this.refresh(),this.save()),this.refresh(this.tree[group]),this.save())}))}save(){const data=Object.values(this.tree).reduce((groupped,item)=>Object.assign(Object.assign({},groupped),item.toJSON()),{});return fs_1.default.writeFileSync(this.filePath,JSON.stringify(data))}}exports.BookmarkExplorer=BookmarkExplorer,exports.default=BookmarkExplorer},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(0),constants_1=__webpack_require__(1);class BookmarkTreeItem extends vscode_1.TreeItem{constructor(name,query,parent){super(name,vscode_1.TreeItemCollapsibleState.None),this.name=name,this.query=query,this.parent=parent,this.contextValue="bookmark.item",this.description=query,this.command={title:"Edit",command:`${constants_1.EXT_NAME}.editBookmark`,arguments:[this]}}get tooltip(){return this.query}toJSON(){return{[this.name]:this.query}}}exports.BookmarkTreeItem=BookmarkTreeItem;class BookmarkTreeGroup extends vscode_1.TreeItem{constructor(name){super(name,vscode_1.TreeItemCollapsibleState.Expanded),this.name=name,this.parent=null,this.contextValue="bookmark.group",this.items={}}get tooltip(){return this.name}addItem(name,query){if(query&&(!query||0!==query.trim().length))return this.items[name]?(this.items[name].description=query.trim(),this.items[0]):(this.items[name]=new BookmarkTreeItem(name,query,this),this.items[name])}delete(name){delete this.items[name]}get length(){return Object.keys(this.items).length}toJSON(){const items=Object.values(this.items).reduce((groupped,item)=>Object.assign(Object.assign({},groupped),item.toJSON()),{});return{[this.name]:items}}}exports.BookmarkTreeGroup=BookmarkTreeGroup},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__importDefault(__webpack_require__(18)),vscode_2=__webpack_require__(0),config_manager_1=__importDefault(__webpack_require__(8)),utils_1=__webpack_require__(65),utils_2=__webpack_require__(3),vscode_3=__webpack_require__(15);function formatSqlHandler(editor,edit){try{edit.replace(editor.selection,utils_1.format(editor.document.getText(editor.selection),config_manager_1.default.format)),vscode_2.commands.executeCommand("revealLine",{lineNumber:editor.selection.active.line,at:"center"})}catch(error){vscode_1.default.error("Error formatting query.",error)}}function insertTextHandler(node,nodes){nodes=nodes||[node];const toInsertSnippet=new vscode_2.SnippetString;let tabStop=1;return nodes.forEach((node,index)=>{if(!node)return;let toInsert=node.snippet||node.value||node;if(toInsert instanceof vscode_2.SnippetString){const value=toInsert.value.replace(/\$0/g,"").replace(/(\$\{)(\d+)(\:)?/g,(_,b,_x,a)=>`${b}${tabStop++}${a}`);toInsertSnippet.value+=value,toInsertSnippet._tabStop=tabStop}else toInsertSnippet.appendPlaceholder(toInsert.toString(),tabStop++);index!==nodes.length-1&&toInsertSnippet.appendText(", ")}),toInsertSnippet.appendTabstop(0),vscode_3.insertText(toInsertSnippet)}function copyTextHandler(item,items){const copyText=(items=items||[item]).filter(n=>null!=n).map(item=>`${item.value||item}`).join(", ");if(copyText)return vscode_2.env.clipboard.writeText(copyText)}function generateInsertQueryHandler(item){return vscode_3.insertText(new vscode_2.SnippetString(utils_2.query.generateInsert(item.name||item.toString(),item.columns,config_manager_1.default.format)))}function newSqlFileHandler(){return vscode_3.getOrCreateEditor(!0)}exports.default={register:extension=>{extension.registerTextEditorCommand("formatSql",formatSqlHandler).registerCommand("insertText",insertTextHandler).registerCommand("copyText",copyTextHandler).registerCommand("generateInsertQuery",generateInsertQueryHandler).registerCommand("newSqlFile",newSqlFileHandler)}}}]);